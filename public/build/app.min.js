require=function a(b,c,d){function e(f,h){var i,j,k;if(!c[f]){if(!b[f]){if(i="function"==typeof require&&require,!h&&i)return i(f,!0);if(g)return g(f,!0);throw j=Error("Cannot find module '"+f+"'"),j.code="MODULE_NOT_FOUND",j}k=c[f]={exports:{}},b[f][0].call(k.exports,function(a){var c=b[f][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[f].exports}var f,g="function"==typeof require&&require;for(f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b){(function(a,c){!function(){function d(){}function e(a){return a}function f(a){return!!a}function g(a){return!a}function h(a){return function(){if(null===a)throw Error("Callback was already called.");a.apply(this,arguments),a=null}}function i(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function j(a){return M(a)||"number"==typeof a.length&&a.length>=0&&a.length%1===0}function k(a,b){return j(a)?l(a,b):p(a,b)}function l(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a)}function m(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function n(a){return m(Array(a),function(a,b){return b})}function o(a,b,c){return l(a,function(a,d,e){c=b(c,a,d,e)}),c}function p(a,b){l(O(a),function(c){b(a[c],c)})}function q(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function r(a){var b,c,d=-1;return j(a)?(b=a.length,function(){return d++,b>d?d:null}):(c=O(a),b=c.length,function(){return d++,b>d?c[d]:null})}function s(a,b){return b=null==b?a.length-1:+b,function(){var c,d=Math.max(arguments.length-b,0),e=Array(d);for(c=0;d>c;c++)e[c]=arguments[c+b];switch(b){case 0:return a.call(this,e);case 1:return a.call(this,arguments[0],e)}}}function t(a){return function(b,c,d){return a(b,d)}}function u(a){return function(b,c,e){var f,g,j,k;return e=i(e||d),b=b||[],f=r(b),0>=a?e(null):(g=!1,j=0,k=!1,void function d(){if(g&&0>=j)return e(null);for(;a>j&&!k;){var i=f();if(null===i)return g=!0,void(0>=j&&e(null));j+=1,c(b[i],i,h(function(a){j-=1,a?(e(a),k=!0):d()}))}}())}}function v(a){return function(b,c,d){return a(R.eachOf,b,c,d)}}function w(a){return function(b,c,d,e){return a(u(c),b,d,e)}}function x(a){return function(b,c,d){return a(R.eachOfSeries,b,c,d)}}function y(a,b,c,e){e=i(e||d);var f=[];a(b,function(a,b,d){c(a,function(a,c){f[b]=c,d(a)})},function(a){e(a,f)})}function z(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c){c&&e.push({index:b,value:a}),d()})},function(){d(m(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function A(a,b,c,d){z(a,b,function(a,b){c(a,function(a){b(!a)})},d)}function B(a,b,c){return function(d,e,f,g){function h(){g&&g(c(!1,void 0))}function i(a,d,e){return g?void f(a,function(d){g&&b(d)&&(g(c(!0,a)),g=f=!1),e()}):e()}arguments.length>3?a(d,e,i,h):(g=f,f=e,a(d,i,h))}}function C(a,b){return b}function D(a,b,c){c=c||d;var e=j(b)?[]:{};a(b,function(a,b,c){a(s(function(a,d){d.length<=1&&(d=d[0]),e[b]=d,c(a)}))},function(a){c(a,e)})}function E(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function F(a,b,c){function e(a,b,c,e){if(null!=e&&"function"!=typeof e)throw Error("task callback must be a function");return a.started=!0,M(b)||(b=[b]),0===b.length&&a.idle()?R.setImmediate(function(){a.drain()}):(l(b,function(b){var f={data:b,callback:e||d};c?a.tasks.unshift(f):a.tasks.push(f),a.tasks.length===a.concurrency&&a.saturated()}),void R.setImmediate(a.process))}function f(a,b){return function(){g-=1;var c=arguments;l(b,function(a){a.callback.apply(a,c)}),a.tasks.length+g===0&&a.drain(),a.process()}}var g,i;if(null==b)b=1;else if(0===b)throw Error("Concurrency must not be zero");return g=0,i={tasks:[],concurrency:b,payload:c,saturated:d,empty:d,drain:d,started:!1,paused:!1,push:function(a,b){e(i,a,!1,b)},kill:function(){i.drain=d,i.tasks=[]},unshift:function(a,b){e(i,a,!0,b)},process:function(){var b,c,d;if(!i.paused&&g<i.concurrency&&i.tasks.length)for(;g<i.concurrency&&i.tasks.length;)b=i.payload?i.tasks.splice(0,i.payload):i.tasks.splice(0,i.tasks.length),c=m(b,function(a){return a.data}),0===i.tasks.length&&i.empty(),g+=1,d=h(f(i,b)),a(c,d)},length:function(){return i.tasks.length},running:function(){return g},idle:function(){return i.tasks.length+g===0},pause:function(){i.paused=!0},resume:function(){var a,b;if(i.paused!==!1)for(i.paused=!1,a=Math.min(i.concurrency,i.tasks.length),b=1;a>=b;b++)R.setImmediate(i.process)}}}function G(a){return s(function(b,c){b.apply(null,c.concat([s(function(b,c){"object"==typeof console&&(b?console.error&&console.error(b):console[a]&&l(c,function(b){console[a](b)}))})]))})}function H(a){return function(b,c,d){a(n(b),c,d)}}function I(a){return s(function(b,c){var d=s(function(c){var d=this,e=c.pop();return a(b,function(a,b,e){a.apply(d,c.concat([e]))},e)});return c.length?d.apply(this,c):d})}function J(a){return s(function(b){var c,d=b.pop();b.push(function(){var a=arguments;c?R.setImmediate(function(){d.apply(null,a)}):d.apply(null,a)}),c=!0,a.apply(this,b),c=!1})}var K,L,M,N,O,P,Q,R={},S="object"==typeof self&&self.self===self&&self||"object"==typeof c&&c.global===c&&c||this;null!=S&&(K=S.async),R.noConflict=function(){return S.async=K,R},L=Object.prototype.toString,M=Array.isArray||function(a){return"[object Array]"===L.call(a)},N=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},O=Object.keys||function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},P="function"==typeof setImmediate&&setImmediate,Q=P?function(a){P(a)}:function(a){setTimeout(a,0)},"object"==typeof a&&"function"==typeof a.nextTick?R.nextTick=a.nextTick:R.nextTick=Q,R.setImmediate=P?Q:R.nextTick,R.forEach=R.each=function(a,b,c){return R.eachOf(a,t(b),c)},R.forEachSeries=R.eachSeries=function(a,b,c){return R.eachOfSeries(a,t(b),c)},R.forEachLimit=R.eachLimit=function(a,b,c,d){return u(b)(a,t(c),d)},R.forEachOf=R.eachOf=function(a,b,c){function e(a){a?c(a):(g+=1,g>=f&&c(null))}var f,g;return c=i(c||d),a=a||[],f=j(a)?a.length:O(a).length,g=0,f?void k(a,function(c,d){b(a[d],d,h(e))}):c(null)},R.forEachOfSeries=R.eachOfSeries=function(a,b,c){function e(){var d=!0;return null===g?c(null):(b(a[g],g,h(function(a){if(a)c(a);else{if(g=f(),null===g)return c(null);d?R.nextTick(e):e()}})),void(d=!1))}var f,g;c=i(c||d),a=a||[],f=r(a),g=f(),e()},R.forEachOfLimit=R.eachOfLimit=function(a,b,c,d){u(b)(a,c,d)},R.map=v(y),R.mapSeries=x(y),R.mapLimit=w(y),R.inject=R.foldl=R.reduce=function(a,b,c,d){R.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a||null,b)})},R.foldr=R.reduceRight=function(a,b,c,d){var f=m(a,e).reverse();R.reduce(f,b,c,d)},R.select=R.filter=v(z),R.selectLimit=R.filterLimit=w(z),R.selectSeries=R.filterSeries=x(z),R.reject=v(A),R.rejectLimit=w(A),R.rejectSeries=x(A),R.any=R.some=B(R.eachOf,f,e),R.someLimit=B(R.eachOfLimit,f,e),R.all=R.every=B(R.eachOf,g,g),R.everyLimit=B(R.eachOfLimit,g,g),R.detect=B(R.eachOf,e,C),R.detectSeries=B(R.eachOfSeries,e,C),R.detectLimit=B(R.eachOfLimit,e,C),R.sortBy=function(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0}R.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){return a?c(a):void c(null,m(b.sort(d),function(a){return a.value}))})},R.auto=function(a,b){function c(a){k.unshift(a)}function e(a){var b=q(k,a);b>=0&&k.splice(b,1)}function f(){h--,l(k.slice(0),function(a){a()})}var g,h,j,k;return b=i(b||d),g=O(a),(h=g.length)?(j={},k=[],c(function(){h||b(null,j)}),void l(g,function(d){function g(){return o(m,function(a,b){return a&&j.hasOwnProperty(b)},!0)&&!j.hasOwnProperty(d)}function h(){g()&&(e(h),k[k.length-1](l,j))}for(var i,k=M(a[d])?a[d]:[a[d]],l=s(function(a,c){if(c.length<=1&&(c=c[0]),a){var e={};p(j,function(a,b){e[b]=a}),e[d]=c,b(a,e)}else j[d]=c,R.setImmediate(f)}),m=k.slice(0,k.length-1),n=m.length;n--;){if(!(i=a[m[n]]))throw Error("Has inexistant dependency");if(M(i)&&q(i,d)>=0)throw Error("Has cyclic dependencies")}g()?k[k.length-1](l,j):c(h)})):b(null)},R.retry=function(a,b,c){function d(a,b){if("number"==typeof b)a.times=parseInt(b,10)||f;else{if("object"!=typeof b)throw Error("Unsupported argument type for 'times': "+typeof b);a.times=parseInt(b.times,10)||f,a.interval=parseInt(b.interval,10)||g}}function e(a,b){function c(a,c){return function(d){a(function(a,b){d(!a||c,{err:a,result:b})},b)}}function d(a){return function(b){setTimeout(function(){b(null)},a)}}for(;i.times;){var e=!(i.times-=1);h.push(c(i.task,e)),!e&&i.interval>0&&h.push(d(i.interval))}R.series(h,function(b,c){c=c[c.length-1],(a||i.callback)(c.err,c.result)})}var f=5,g=0,h=[],i={times:f,interval:g},j=arguments.length;if(1>j||j>3)throw Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=j&&"function"==typeof a&&(c=b,b=a),"function"!=typeof a&&d(i,a),i.callback=c,i.task=b,i.callback?e():e},R.waterfall=function(a,b){function c(a){return s(function(d,e){if(d)b.apply(null,[d].concat(e));else{var f=a.next();f?e.push(c(f)):e.push(b),J(a).apply(null,e)}})}if(b=i(b||d),!M(a)){var e=Error("First argument to waterfall must be an array of functions");return b(e)}return a.length?void c(R.iterator(a))():b()},R.parallel=function(a,b){D(R.eachOf,a,b)},R.parallelLimit=function(a,b,c){D(u(b),a,c)},R.series=function(a,b){D(R.eachOfSeries,a,b)},R.iterator=function(a){function b(c){function d(){return a.length&&a[c].apply(null,arguments),d.next()}return d.next=function(){return c<a.length-1?b(c+1):null},d}return b(0)},R.apply=s(function(a,b){return s(function(c){return a.apply(null,b.concat(c))})}),R.concat=v(E),R.concatSeries=x(E),R.whilst=function(a,b,c){if(c=c||d,a()){var e=s(function(d,f){d?c(d):a.apply(this,f)?b(e):c(null)});b(e)}else c(null)},R.doWhilst=function(a,b,c){var d=0;return R.whilst(function(){return++d<=1||b.apply(this,arguments)},a,c)},R.until=function(a,b,c){return R.whilst(function(){return!a.apply(this,arguments)},b,c)},R.doUntil=function(a,b,c){return R.doWhilst(a,function(){return!b.apply(this,arguments)},c)},R.during=function(a,b,c){var e,f;c=c||d,e=s(function(b,d){b?c(b):(d.push(f),a.apply(this,d))}),f=function(a,d){a?c(a):d?b(e):c(null)},a(f)},R.doDuring=function(a,b,c){var d=0;R.during(function(a){d++<1?a(null,!0):b.apply(this,arguments)},a,c)},R.queue=function(a,b){var c=F(function(b,c){a(b[0],c)},b,1);return c},R.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function e(a,b,c){for(var d,e=-1,f=a.length-1;f>e;)d=e+(f-e+1>>>1),c(b,a[d])>=0?e=d:f=d-1;return e}function f(a,b,f,g){if(null!=g&&"function"!=typeof g)throw Error("task callback must be a function");return a.started=!0,M(b)||(b=[b]),0===b.length?R.setImmediate(function(){a.drain()}):void l(b,function(b){var h={data:b,priority:f,callback:"function"==typeof g?g:d};a.tasks.splice(e(a.tasks,h,c)+1,0,h),a.tasks.length===a.concurrency&&a.saturated(),R.setImmediate(a.process)})}var g=R.queue(a,b);return g.push=function(a,b,c){f(g,a,b,c)},delete g.unshift,g},R.cargo=function(a,b){return F(a,1,b)},R.log=G("log"),R.dir=G("dir"),R.memoize=function(a,b){var c,d={},f={};return b=b||e,c=s(function(c){var e=c.pop(),g=b.apply(null,c);g in d?R.nextTick(function(){e.apply(null,d[g])}):g in f?f[g].push(e):(f[g]=[e],a.apply(null,c.concat([s(function(a){var b,c,e;for(d[g]=a,b=f[g],delete f[g],c=0,e=b.length;e>c;c++)b[c].apply(null,a)})])))}),c.memo=d,c.unmemoized=a,c},R.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},R.times=H(R.map),R.timesSeries=H(R.mapSeries),R.timesLimit=function(a,b,c,d){return R.mapLimit(n(a),b,c,d)},R.seq=function(){var a=arguments;return s(function(b){var c=this,e=b[b.length-1];"function"==typeof e?b.pop():e=d,R.reduce(a,b,function(a,b,d){b.apply(c,a.concat([s(function(a,b){d(a,b)})]))},function(a,b){e.apply(c,[a].concat(b))})})},R.compose=function(){return R.seq.apply(null,Array.prototype.reverse.call(arguments))},R.applyEach=I(R.eachOf),R.applyEachSeries=I(R.eachOfSeries),R.forever=function(a,b){function c(a){return a?e(a):void f(c)}var e=h(b||d),f=J(a);c()},R.ensureAsync=J,R.constant=s(function(a){var b=[null].concat(a);return function(a){return a.apply(this,b)}}),R.wrapSync=R.asyncify=function(a){return s(function(b){var c,d=b.pop();try{c=a.apply(this,b)}catch(e){return d(e)}N(c)&&"function"==typeof c.then?c.then(function(a){d(null,a)})["catch"](function(a){d(a.message?a:Error(a))}):d(null,c)})},"object"==typeof b&&b.exports?b.exports=R:"function"==typeof define&&define.amd?define([],function(){return R}):S.async=R}()}).call(this,a(4),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{4:4}],2:[function(a,b){"use strict";function c(a,b,c){var g,h,i,k,l,m,n,o,p,q,r,s;if(c=c||2,g=b&&b.length,h=g?b[0]*c:a.length,i=e(a,d(a,0,h,c,!0)),k=[],!i)return k;if(g&&(i=j(a,b,i,c)),a.length>80*c){for(l=n=a[0],m=o=a[1],s=c;h>s;s+=c)p=a[s],q=a[s+1],l>p&&(l=p),m>q&&(m=q),p>n&&(n=p),q>o&&(o=q);r=Math.max(n-l,o-m)}return f(a,i,k,c,l,m,r),k}function d(a,b,c,d,e){var f,g,h,i=0;for(f=b,g=c-d;c>f;f+=d)i+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;if(e===i>0)for(f=b;c>f;f+=d)h=y(f,h);else for(f=c-d;f>=b;f-=d)h=y(f,h);return h}function e(a,b,c){c||(c=b);var d,e=b;do if(d=!1,e.steiner||!s(a,e.i,e.next.i)&&0!==r(a,e.prev.i,e.i,e.next.i))e=e.next;else{if(e.prev.next=e.next,e.next.prev=e.prev,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ),e=c=e.prev,e===e.next)return null;d=!0}while(d||e!==c);return c}function f(a,b,c,d,j,k,l,n){if(b){n||void 0===j||m(a,b,j,k,l);for(var o,p,q=b;b.prev!==b.next;)if(o=b.prev,p=b.next,g(a,b,j,k,l))c.push(o.i/d),c.push(b.i/d),c.push(p.i/d),p.prev=o,o.next=p,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ),b=p.next,q=p.next;else if(b=p,b===q){n?1===n?(b=h(a,b,c,d),f(a,b,c,d,j,k,l,2)):2===n&&i(a,b,c,d,j,k,l):f(a,e(a,b),c,d,j,k,l,1);break}}}function g(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x=b.prev.i,y=b.i,z=b.next.i,A=a[x],B=a[x+1],C=a[y],D=a[y+1],E=a[z],F=a[z+1],G=A*D-B*C,H=A*F-B*E,I=E*D-F*C,J=G-H-I;if(0>=J)return!1;if(f=F-B,g=A-E,h=B-D,i=C-A,void 0!==c){for(r=C>A?E>A?A:E:E>C?C:E,s=D>B?F>B?B:F:F>D?D:F,t=A>C?A>E?A:E:C>E?C:E,u=B>D?B>F?B:F:D>F?D:F,v=o(r,s,c,d,e),w=o(t,u,c,d,e),q=b.nextZ;q&&q.z<=w;)if(j=q.i,q=q.nextZ,j!==x&&j!==z&&(k=a[j],l=a[j+1],m=f*k+g*l-H,m>=0&&(n=h*k+i*l+G,n>=0&&(p=J-m-n,p>=0&&(m&&n||m&&p||n&&p)))))return!1;for(q=b.prevZ;q&&q.z>=v;)if(j=q.i,q=q.prevZ,j!==x&&j!==z&&(k=a[j],l=a[j+1],m=f*k+g*l-H,m>=0&&(n=h*k+i*l+G,n>=0&&(p=J-m-n,p>=0&&(m&&n||m&&p||n&&p)))))return!1}else for(q=b.next.next;q!==b.prev;)if(j=q.i,q=q.next,k=a[j],l=a[j+1],m=f*k+g*l-H,m>=0&&(n=h*k+i*l+G,n>=0&&(p=J-m-n,p>=0&&(m&&n||m&&p||n&&p))))return!1;return!0}function h(a,b,c,d){var e,f,g,h,i=b;do e=i.prev,f=i.next.next,e.i!==f.i&&t(a,e.i,i.i,i.next.i,f.i)&&v(a,e,f)&&v(a,f,e)&&(c.push(e.i/d),c.push(i.i/d),c.push(f.i/d),e.next=f,f.prev=e,g=i.prevZ,h=i.nextZ&&i.nextZ.nextZ,g&&(g.nextZ=h),h&&(h.prevZ=g),i=b=f),i=i.next;while(i!==b);return i}function i(a,b,c,d,g,h,i){var j,k,l=b;do{for(j=l.next.next;j!==l.prev;){if(l.i!==j.i&&q(a,l,j))return k=x(l,j),l=e(a,l,l.next),k=e(a,k,k.next),f(a,l,c,d,g,h,i),void f(a,k,c,d,g,h,i);j=j.next}l=l.next}while(l!==b)}function j(a,b,c,f){var g,h,i,j,l,m=[];for(g=0,h=b.length;h>g;g++)i=b[g]*f,j=h-1>g?b[g+1]*f:a.length,l=d(a,i,j,f,!1),l===l.next&&(l.steiner=!0),l=e(a,l),l&&m.push(p(a,l));for(m.sort(function(b,c){return a[b.i]-a[c.i]}),g=0;g<m.length;g++)k(a,m[g],c),c=e(a,c,c.next);return c}function k(a,b,c){if(c=l(a,b,c)){var d=x(c,b);e(a,d,d.next)}}function l(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,w,x,y,z,A=c,B=b.i,C=a[B],D=a[B+1],E=-(1/0);do e=A.i,f=A.next.i,D<=a[e+1]&&D>=a[f+1]&&(g=a[e]+(D-a[e+1])*(a[f]-a[e])/(a[f+1]-a[e+1]),C>=g&&g>E&&(E=g,d=a[e]<a[f]?A:A.next)),A=A.next;while(A!==c);if(!d)return null;for(h=a[d.i],i=a[d.i+1],j=C*i-D*h,k=C*D-D*E,l=D-D,m=C-E,n=D-i,o=h-C,p=j-k-(E*i-D*h),q=0>=p?-1:1,r=d,s=1/0,A=d.next;A!==r;)t=a[A.i],u=a[A.i+1],w=C-t,w>=0&&t>=h&&(x=(l*t+m*u-k)*q,x>=0&&(y=(n*t+o*u+j)*q,y>=0&&p*q-x-y>=0&&(z=Math.abs(D-u)/w,s>z&&v(a,A,b)&&(d=A,s=z)))),A=A.next;return d}function m(a,b,c,d,e){var f=b;do null===f.z&&(f.z=o(a[f.i],a[f.i+1],c,d,e)),f.prevZ=f.prev,f.nextZ=f.next,f=f.next;while(f!==b);f.prevZ.nextZ=null,f.prevZ=null,n(f)}function n(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;j>b&&(h++,d=d.nextZ,d);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function o(a,b,c,d,e){return a=1e3*(a-c)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=1e3*(b-d)/e,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function p(a,b){var c=b,d=b;do a[c.i]<a[d.i]&&(d=c),c=c.next;while(c!==b);return d}function q(a,b,c){return b.next.i!==c.i&&b.prev.i!==c.i&&!u(a,b,b.i,c.i)&&v(a,b,c)&&v(a,c,b)&&w(a,b,b.i,c.i)}function r(a,b,c,d){var e=(a[c+1]-a[b+1])*(a[d]-a[c])-(a[c]-a[b])*(a[d+1]-a[c+1]);return e>0?1:0>e?-1:0}function s(a,b,c){return a[b]===a[c]&&a[b+1]===a[c+1]}function t(a,b,c,d,e){return r(a,b,c,d)!==r(a,b,c,e)&&r(a,d,e,b)!==r(a,d,e,c)}function u(a,b,c,d){var e,f,g=b;do{if(e=g.i,f=g.next.i,e!==c&&f!==c&&e!==d&&f!==d&&t(a,e,f,c,d))return!0;g=g.next}while(g!==b);return!1}function v(a,b,c){return-1===r(a,b.prev.i,b.i,b.next.i)?-1!==r(a,b.i,c.i,b.next.i)&&-1!==r(a,b.i,b.prev.i,c.i):-1===r(a,b.i,c.i,b.prev.i)||-1===r(a,b.i,b.next.i,c.i)}function w(a,b,c,d){var e,f,g=b,h=!1,i=(a[c]+a[d])/2,j=(a[c+1]+a[d+1])/2;do e=g.i,f=g.next.i,a[e+1]>j!=a[f+1]>j&&i<(a[f]-a[e])*(j-a[e+1])/(a[f+1]-a[e+1])+a[e]&&(h=!h),g=g.next;while(g!==b);return h}function x(a,b){var c=new z(a.i),d=new z(b.i),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function y(a,b){var c=new z(a);return b?(c.next=b.next,c.prev=b,b.next.prev=c,b.next=c):(c.prev=c,c.next=c),c}function z(a){this.i=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}b.exports=c},{}],3:[function(a,b){"use strict";function c(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function d(){}var e="function"!=typeof Object.create?"~":!1;d.prototype._events=void 0,d.prototype.listeners=function(a,b){var c,d,f,g=e?e+a:a,h=this._events&&this._events[g];if(b)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(c=0,d=h.length,f=Array(d);d>c;c++)f[c]=h[c].fn;return f},d.prototype.emit=function(a,b,c,d,f,g){var h,i,j,k,l,m,n=e?e+a:a;if(!this._events||!this._events[n])return!1;if(h=this._events[n],i=arguments.length,"function"==typeof h.fn){switch(h.once&&this.removeListener(a,h.fn,void 0,!0),i){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,b),!0;case 3:return h.fn.call(h.context,b,c),!0;case 4:return h.fn.call(h.context,b,c,d),!0;case 5:return h.fn.call(h.context,b,c,d,f),!0;case 6:return h.fn.call(h.context,b,c,d,f,g),!0}for(k=1,j=Array(i-1);i>k;k++)j[k-1]=arguments[k];h.fn.apply(h.context,j)}else for(l=h.length,k=0;l>k;k++)switch(h[k].once&&this.removeListener(a,h[k].fn,void 0,!0),i){case 1:h[k].fn.call(h[k].context);break;case 2:h[k].fn.call(h[k].context,b);break;case 3:h[k].fn.call(h[k].context,b,c);break;default:if(!j)for(m=1,j=Array(i-1);i>m;m++)j[m-1]=arguments[m];h[k].fn.apply(h[k].context,j)}return!0},d.prototype.on=function(a,b,d){var f=new c(b,d||this),g=e?e+a:a;return this._events||(this._events=e?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],f]:this._events[g].push(f):this._events[g]=f,this},d.prototype.once=function(a,b,d){var f=new c(b,d||this,!0),g=e?e+a:a;return this._events||(this._events=e?{}:Object.create(null)),this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],f]:this._events[g].push(f):this._events[g]=f,this},d.prototype.removeListener=function(a,b,c,d){var f,g,h,i,j=e?e+a:a;if(!this._events||!this._events[j])return this;if(f=this._events[j],g=[],b)if(f.fn)(f.fn!==b||d&&!f.once||c&&f.context!==c)&&g.push(f);else for(h=0,i=f.length;i>h;h++)(f[h].fn!==b||d&&!f[h].once||c&&f[h].context!==c)&&g.push(f[h]);return g.length?this._events[j]=1===g.length?g[0]:g:delete this._events[j],this},d.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[e?e+a:a]:this._events=e?{}:Object.create(null),this):this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prototype.setMaxListeners=function(){return this},d.prefixed=e,void 0!==b&&(b.exports=d)},{}],4:[function(a,b){function c(){j=!1,g.length?i=g.concat(i):k=-1,i.length&&d()}function d(){var a,b;if(!j){for(a=setTimeout(c),j=!0,b=i.length;b;){for(g=i,i=[];++k<b;)g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=b.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b,c=Array(arguments.length-1);if(arguments.length>1)for(b=1;b<arguments.length;b++)c[b-1]=arguments[b];i.push(new e(a,c)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(){throw Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],5:[function(a,b){"use strict";function c(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}var d=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;b.exports=Object.assign||function(a){var b,f,g,h,i,j=c(a);for(g=1;g<arguments.length;g++){b=Object(arguments[g]);for(h in b)d.call(b,h)&&(j[h]=b[h]);if(Object.getOwnPropertySymbols)for(f=Object.getOwnPropertySymbols(b),i=0;i<f.length;i++)e.call(b,f[i])&&(j[f[i]]=b[f[i]])}return j}},{}],6:[function(a,b,c){function d(a,b){var c,d,g,j;return"object"==typeof a&&(b=a,a=void 0),b=b||{},c=f(a),d=c.source,g=c.id,b.forceNew||b["force new connection"]||!1===b.multiplex?(i("ignoring socket cache for %s",d),j=h(d,b)):(e[g]||(i("new io instance for %s",d),e[g]=h(d,b)),j=e[g]),j.socket(c.path)}var e,f=a(10),g=a(51),h=a(7),i=a(14)("socket.io-client");b.exports=c=d,e=c.managers={},c.protocol=g.protocol,c.connect=d,c.Manager=a(7),c.Socket=a(9)},{10:10,14:14,51:51,7:7,9:9}],7:[function(a,b){function c(a,b){return this instanceof c?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new g.Encoder,this.decoder=new g.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new c(a,b)}var d=(a(10),a(15)),e=a(9),f=a(13),g=a(51),h=a(8),i=a(12),j=(a(47),a(14)("socket.io-client:manager")),k=a(46),l=a(11);b.exports=c,c.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)},c.prototype.updateSocketIds=function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id},f(c.prototype),c.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},c.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},c.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},c.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},c.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},c.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},c.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},c.prototype.open=c.prototype.connect=function(a){var b,c,e,f,g,i;return j("readyState %s",this.readyState),~this.readyState.indexOf("open")?this:(j("opening %s",this.uri),this.engine=d(this.uri,this.opts),b=this.engine,c=this,this.readyState="opening",this.skipReconnect=!1,e=h(b,"open",function(){c.onopen(),a&&a()}),f=h(b,"error",function(b){if(j("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=Error("Connection error");d.data=b,a(d)}else c.maybeReconnectOnOpen()}),!1!==this._timeout&&(g=this._timeout,j("connect attempt will timeout after %d",g),i=setTimeout(function(){j("connect attempt timed out after %d",g),e.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g),this.subs.push({destroy:function(){clearTimeout(i)}})),this.subs.push(e),this.subs.push(f),this)},c.prototype.onopen=function(){j("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(h(a,"data",i(this,"ondata"))),this.subs.push(h(this.decoder,"decoded",i(this,"ondecoded"))),this.subs.push(h(a,"error",i(this,"onerror"))),this.subs.push(h(a,"close",i(this,"onclose")))},c.prototype.ondata=function(a){this.decoder.add(a)},c.prototype.ondecoded=function(a){this.emit("packet",a)},c.prototype.onerror=function(a){j("error",a),this.emitAll("error",a)},c.prototype.socket=function(a){var b,c=this.nsps[a];return c||(c=new e(this,a),this.nsps[a]=c,b=this,c.on("connect",function(){c.id=b.engine.id,~k(b.connected,c)||b.connected.push(c)})),c},c.prototype.destroy=function(a){var b=k(this.connected,a);~b&&this.connected.splice(b,1),this.connected.length||this.close()},c.prototype.packet=function(a){j("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var c=0;c<a.length;c++)b.engine.write(a[c]);b.encoding=!1,b.processPacketQueue()}))},c.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},c.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},c.prototype.close=c.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},c.prototype.onclose=function(a){j("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},c.prototype.reconnect=function(){var a,b,c;return this.reconnecting||this.skipReconnect?this:(a=this,void(this.backoff.attempts>=this._reconnectionAttempts?(j("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(b=this.backoff.duration(),j("will wait %dms before reconnect attempt",b),this.reconnecting=!0,c=setTimeout(function(){a.skipReconnect||(j("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(j("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(j("reconnect success"),a.onreconnect())}))},b),this.subs.push({destroy:function(){clearTimeout(c)}}))))},c.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{10:10,11:11,12:12,13:13,14:14,15:15,46:46,47:47,51:51,8:8,9:9}],8:[function(a,b){function c(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=c},{}],9:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var e,f,g=a(51),h=a(13),i=a(49),j=a(8),k=a(12),l=a(14)("socket.io-client:socket"),m=a(44);b.exports=c=d,e={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},f=h.prototype.emit,h(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[j(a,"open",k(this,"onopen")),j(a,"packet",k(this,"onpacket")),j(a,"close",k(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},d.prototype.send=function(){var a=i(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){var b,c,d;return e.hasOwnProperty(a)?(f.apply(this,arguments),this):(b=i(arguments),c=g.EVENT,m(b)&&(c=g.BINARY_EVENT),d={type:c,data:b},"function"==typeof b[b.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),this)},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:g.CONNECT})},d.prototype.onclose=function(a){l("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case g.CONNECT:this.onconnect();break;case g.EVENT:this.onevent(a);break;case g.BINARY_EVENT:this.onevent(a);break;case g.ACK:this.onack(a);break;case g.BINARY_ACK:this.onack(a);break;case g.DISCONNECT:this.ondisconnect();break;case g.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];l("emitting event %j",b),null!=a.id&&(l("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?f.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){var d,e;c||(c=!0,d=i(arguments),l("sending ack %j",d),e=m(d)?g.BINARY_ACK:g.ACK,b.packet({type:e,id:a,data:d}))}},d.prototype.onack=function(a){l("calling ack %s with %j",a.id,a.data);var b=this.acks[a.id];b.apply(this,a.data),delete this.acks[a.id]},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)f.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:g.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{12:12,13:13,14:14,44:44,49:49,51:51,8:8}],10:[function(a,b){(function(c){function d(a,b){var d=a;return b=b||c.location,null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.hostname+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a=void 0!==b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/",d.id=d.protocol+"://"+d.host+":"+d.port,d.href=d.protocol+"://"+d.host+(b&&b.port==d.port?"":":"+d.port),
d}var e=a(48),f=a(14)("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{14:14,48:48}],11:[function(a,b){function c(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=c,c.prototype.duration=function(){var a,b,c=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(a=Math.random(),b=Math.floor(a*this.jitter*c),c=0==(1&Math.floor(10*a))?c-b:c+b),0|Math.min(c,this.max)},c.prototype.reset=function(){this.attempts=0},c.prototype.setMin=function(a){this.ms=a},c.prototype.setMax=function(a){this.max=a},c.prototype.setJitter=function(a){this.jitter=a}},{}],12:[function(a,b){var c=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw Error("bind() requires a function");var d=c.call(arguments,2);return function(){return b.apply(a,d.concat(c.call(arguments)))}}},{}],13:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){var c,d,e;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(c=this._callbacks[a],!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){var b,c,d,e;if(this._callbacks=this._callbacks||{},b=[].slice.call(arguments,1),c=this._callbacks[a],c)for(c=c.slice(0),d=0,e=c.length;e>d;++d)c[d].apply(this,b);return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],14:[function(a,b){function c(a){return c.enabled(a)?function(b){var e,f;b=d(b),e=new Date,f=e-(c[a]||e),c[a]=e,b=a+" "+b+" +"+c.humanize(f),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function d(a){return a instanceof Error?a.stack||a.message:a}b.exports=c,c.names=[],c.skips=[],c.enable=function(a){var b,d,e;try{localStorage.debug=a}catch(f){}for(b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)a=b[e].replace("*",".*?"),"-"===a[0]?c.skips.push(RegExp("^"+a.substr(1)+"$")):c.names.push(RegExp("^"+a+"$"))},c.disable=function(){c.enable("")},c.humanize=function(a){var b=1e3,c=6e4,d=60*c;return a>=d?(a/d).toFixed(1)+"h":a>=c?(a/c).toFixed(1)+"m":a>=b?(a/b|0)+"s":a+"ms"},c.enabled=function(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1};try{window.localStorage&&c.enable(localStorage.debug)}catch(e){}},{}],15:[function(a,b){b.exports=a(16)},{16:16}],16:[function(a,b){b.exports=a(17),b.exports.parser=a(29)},{17:17,29:29}],17:[function(a,b){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);if(b=b||{},a&&"object"==typeof a&&(b=a,a=null),a&&(a=k(a),b.host=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.host){var e=b.host.split(":");b.hostname=e.shift(),e.length?b.port=e.pop():b.port||(b.port=this.secure?"443":"80")}this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=b.rejectUnauthorized||null,this.open()}function e(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}var f=a(19),g=a(13),h=a(26)("engine.io-client:socket"),i=a(46),j=a(29),k=a(42),l=a(40),m=a(41);b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a(18),d.transports=a(19),d.parser=a(29),d.prototype.createTransport=function(a){var b,c;return h('creating transport "%s"',a),b=e(this.query),b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id),c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})},d.prototype.open=function(){var a,b;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0==this.transports.length)return b=this,void setTimeout(function(){b.emit("error","No transports available")},0);a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;b>a;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing();break;case"error":var b=Error("server error");b.code=a.data,this.emit("error",b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){this.sendPacket("ping")},d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)this.callbackBuffer[a]&&this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b){return this.sendPacket("message",a,b),this},d.prototype.sendPacket=function(a,b,c){if("closing"!=this.readyState&&"closed"!=this.readyState){var d={type:a,data:b};this.emit("packetCreate",d),this.writeBuffer.push(d),this.callbackBuffer.push(c),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){c.writeBuffer=[],c.callbackBuffer=[],c.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b)}},d.prototype.filterUpgrades=function(a){var b,c,d=[];for(b=0,c=a.length;c>b;b++)~i(this.transports,a[b])&&d.push(a[b]);return d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{13:13,18:18,19:19,26:26,29:29,40:40,41:41,42:42,46:46}],18:[function(a,b){function c(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized}var d=a(29),e=a(13);b.exports=c,e(c.prototype),c.timestamps=0,c.prototype.onError=function(a,b){var c=Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},c.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},c.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},c.prototype.send=function(a){if("open"!=this.readyState)throw Error("Transport not open");this.write(a)},c.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},c.prototype.onData=function(a){var b=d.decodePacket(a,this.socket.binaryType);this.onPacket(b)},c.prototype.onPacket=function(a){this.emit("packet",a)},c.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{13:13,29:29}],19:[function(a,b,c){(function(b){function d(a){var c,d,h,i=!1,j=!1,k=!1!==a.jsonp;if(b.location&&(d="https:"==location.protocol,h=location.port,h||(h=d?443:80),i=a.hostname!=location.hostname||h!=a.port,j=a.secure!=d),a.xdomain=i,a.xscheme=j,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!k)throw Error("JSONP disabled");return new g(a)}var e=a(24),f=a(21),g=a(20),h=a(23);c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{20:20,21:21,23:23,24:24}],20:[function(a,b){(function(c){function d(){}function e(a){j.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f,g,h,i,j=a(22),k=a(25);b.exports=e,f=/\n/g,g=/\\n/g,i=0,k(e,j),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),j.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a,b,c=this,d=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),d.async=!0,d.src=this.uri(),d.onerror=function(a){c.onError("jsonp poll error",a)},a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(d,a),this.script=d,b="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent),b&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(k.iframe)try{k.form.removeChild(k.iframe)}catch(a){k.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+k.iframeId+'">';j=document.createElement(b)}catch(a){j=document.createElement("iframe"),j.name=k.iframeId,j.src="javascript:0"}j.id=k.iframeId,k.form.appendChild(j),k.iframe=j}var e,h,i,j,k=this;this.form||(e=document.createElement("form"),h=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=i,e.method="POST",e.setAttribute("accept-charset","utf-8"),h.name="d",e.appendChild(h),document.body.appendChild(e),this.form=e,this.area=h),this.form.action=this.uri(),d(),a=a.replace(g,"\\\n"),this.area.value=a.replace(f,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==k.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{22:22,25:25}],21:[function(a,b){(function(c){function d(){}function e(a){var b,d;i.call(this,a),c.location&&(b="https:"==location.protocol,d=location.port,d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b)}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a(24),i=a(22),j=a(13),k=a(25),l=a(26)("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){var a,b;l("xhr poll"),a=this.request(),b=this,a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a,b,d={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};d.pfx=this.pfx,d.key=this.key,d.passphrase=this.passphrase,d.cert=this.cert,d.ca=this.ca,d.ciphers=this.ciphers,d.rejectUnauthorized=this.rejectUnauthorized,a=this.xhr=new h(d),b=this;try{if(l("xhr open %s: %s",this.method,this.uri),a.open(this.method,this.uri,this.async),this.supportsBinary&&(a.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?a.setRequestHeader("Content-type","application/octet-stream"):a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in a&&(a.withCredentials=!0),this.hasXDR()?(a.onload=function(){b.onLoad()},a.onerror=function(){b.onError(a.responseText)}):a.onreadystatechange=function(){4==a.readyState&&(200==a.status||1223==a.status?b.onLoad():setTimeout(function(){b.onError(a.status)},0))},l("xhr data %s",this.data),a.send(this.data)}catch(e){return void setTimeout(function(){b.onError(e)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a,b;try{try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}a="application/octet-stream"===b?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return void 0!==c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{13:13,22:22,24:24,25:25,26:26}],22:[function(a,b){function c(a){var b=a&&a.forceBase64;(!d||b)&&(this.supportsBinary=!1),e.call(this,a)}var d,e=a(18),f=a(41),g=a(29),h=a(25),i=a(26)("engine.io-client:polling");b.exports=c,d=function(){var b=a(24),c=new b({xdomain:!1});return null!=c.responseType}(),h(c,e),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(a){function b(){i("paused"),d.readyState="paused",a()}var c,d=this;this.readyState="pausing",this.polling||!this.writable?(c=0,this.polling&&(i("we are currently polling - waiting to pause"),c++,this.once("pollComplete",function(){i("pre-pause polling complete"),--c||b()})),this.writable||(i("we are currently writing - waiting to pause"),c++,this.once("drain",function(){i("pre-pause writing complete"),--c||b()}))):b()},c.prototype.poll=function(){i("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(a){var b,c=this;i("polling got data %s",a),b=function(a){return"opening"==c.readyState&&c.onOpen(),"close"==a.type?(c.onClose(),!1):void c.onPacket(a)},g.decodePayload(a,this.socket.binaryType,b),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():i('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){function a(){i("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(i("transport open - closing"),a()):(i("transport not open - deferring close"),this.once("open",a))},c.prototype.write=function(a){var b,c=this;this.writable=!1,b=function(){c.writable=!0,c.emit("drain")},c=this,g.encodePayload(a,this.supportsBinary,function(a){c.doWrite(a,b)})},c.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+e.timestamps++),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a}},{18:18,24:24,25:25,26:26,29:29,41:41}],23:[function(a,b){function c(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),d.call(this,a)}var d=a(18),e=a(29),f=a(41),g=a(25),h=a(26)("engine.io-client:websocket"),i=a(43);b.exports=c,g(c,d),c.prototype.name="websocket",c.prototype.supportsBinary=!0,c.prototype.doOpen=function(){var a,b,c,d;this.check()&&(a=this,b=this.uri(),c=void 0,d={agent:this.agent},d.pfx=this.pfx,d.key=this.key,d.passphrase=this.passphrase,d.cert=this.cert,d.ca=this.ca,d.ciphers=this.ciphers,d.rejectUnauthorized=this.rejectUnauthorized,this.ws=new i(b,c,d),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners())},c.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(c.prototype.onData=function(a){var b=this;setTimeout(function(){d.prototype.onData.call(b,a)},0)}),c.prototype.write=function(a){function b(){f.writable=!0,f.emit("drain")}var c,d,f=this;for(this.writable=!1,c=0,d=a.length;d>c;c++)e.encodePacket(a[c],this.supportsBinary,function(a){try{f.ws.send(a)}catch(b){h("websocket closed before onclose event")}});setTimeout(b,0)},c.prototype.onClose=function(){d.prototype.onClose.call(this)},c.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},c.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=+new Date),this.supportsBinary||(a.b64=1),a=f.encode(a),a.length&&(a="?"+a),b+"://"+this.hostname+c+this.path+a},c.prototype.check=function(){return!(!i||"__initialize"in i&&this.name===c.prototype.name)}},{18:18,25:25,26:26,29:29,41:41,43:43}],24:[function(a,b){var c=a(38);b.exports=function(a){var b=a.xdomain,d=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||c))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!d&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{38:38}],25:[function(a,b){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],26:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a,b,d,e=arguments,f=this.useColors;return e[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+e[0]+(f?"%c ":" ")+"+"+c.humanize(this.diff),f?(a="color: "+this.color,e=[e[0],a,"color: inherit"].concat(Array.prototype.slice.call(e,1)),b=0,d=0,e[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(b++,"%c"===a&&(d=b))}),e.splice(d,0,a),e):e}function f(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(b){}}function h(){var a;try{a=localStorage.debug}catch(b){}return a}c=b.exports=a(27),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{27:27}],27:[function(a,b,c){function d(){return c.colors[j++%c.colors.length]}function e(a){function b(){}function e(){var a,b,f,g=e,h=+new Date,i=h-(k||h);g.diff=i,g.prev=k,g.curr=h,k=h,null==g.useColors&&(g.useColors=c.useColors()),null==g.color&&g.useColors&&(g.color=d()),a=Array.prototype.slice.call(arguments),a[0]=c.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a)),b=0,a[0]=a[0].replace(/%([a-z%])/g,function(d,e){var f,h;return"%%"===d?d:(b++,f=c.formatters[e],"function"==typeof f&&(h=a[b],d=f.call(g,h),a.splice(b,1),b--),d)}),"function"==typeof c.formatArgs&&(a=c.formatArgs.apply(g,a)),f=e.log||c.log||console.log.bind(console),f.apply(g,a)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){var b,d,e;for(c.save(a),b=(a||"").split(/[\s,]+/),d=b.length,e=0;d>e;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(RegExp("^"+a.substr(1)+"$")):c.names.push(RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;d>b;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;d>b;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}var j,k;c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a(28),c.names=[],c.skips=[],c.formatters={},j=0},{28:28}],28:[function(a,b){function c(a){var b,c,d=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a);if(d)switch(b=parseFloat(d[1]),c=(d[2]||"ms").toLowerCase()){case"years":case"year":case"y":return b*k;case"days":case"day":case"d":return b*j;case"hours":case"hour":case"h":return b*i;case"minutes":case"minute":case"m":return b*h;case"seconds":case"second":case"s":return b*g;case"ms":return b}}function d(a){return a>=j?Math.round(a/j)+"d":a>=i?Math.round(a/i)+"h":a>=h?Math.round(a/h)+"m":a>=g?Math.round(a/g)+"s":a+"ms"}function e(a){return f(a,j,"day")||f(a,i,"hour")||f(a,h,"minute")||f(a,g,"second")||a+" ms"}function f(a,b,c){return b>a?void 0:1.5*b>a?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var g=1e3,h=60*g,i=60*h,j=24*i,k=365.25*j;b.exports=function(a,b){return b=b||{},"string"==typeof a?c(a):b["long"]?e(a):d(a)}},{}],29:[function(a,b,c){(function(b){function d(a,b){var d="b"+c.packets[a.type]+a.data.data;return b(d)}function e(a,b,d){var e,f,g,h;if(!b)return c.encodeBase64Packet(a,d);for(e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength),g[0]=i[a.type],h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){var e,g;return b?u?f(a,b,d):(e=new Uint8Array(1),e[0]=i[a.type],g=new l([e.buffer,a.data]),d(g)):c.encodeBase64Packet(a,d)}function h(a,b,c){var d,e=Array(a.length),f=q(a.length,c),g=function(a,c,d){b(c,function(b,c){e[a]=c,d(b,e)})};for(d=0;d<a.length;d++)g(d,a[d],f)}var i,j,k,l,m=a(30),n=a(35),o=a(32),p=a(33),q=a(31),r=a(37),s=navigator.userAgent.match(/Android/i),t=/PhantomJS/i.test(navigator.userAgent),u=s||t;c.protocol=3,i=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},j=m(i),k={type:"error",data:"parser error"},l=a(34),c.encodePacket=function(a,c,f,h){var j,k;return"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null),j=void 0===a.data?void 0:a.data.buffer||a.data,b.ArrayBuffer&&j instanceof ArrayBuffer?e(a,c,h):l&&j instanceof b.Blob?g(a,c,h):j&&j.base64?d(a,h):(k=i[a.type],void 0!==a.data&&(k+=f?r.encode(a.data+""):a.data+""),h(""+k))},c.encodeBase64Packet=function(a,d){var e,f,g,h,i,j="b"+c.packets[a.type];if(l&&a.data instanceof l)return e=new FileReader,e.onload=function(){var a=e.result.split(",")[1];d(j+a)},e.readAsDataURL(a.data);try{f=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(k){for(g=new Uint8Array(a.data),h=Array(g.length),i=0;i<g.length;i++)h[i]=g[i];f=String.fromCharCode.apply(null,h)}return j+=b.btoa(f),d(j)},c.decodePacket=function(a,b,d){var e,f,g;if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=r.decode(a)}catch(h){return k}return e=a.charAt(0),+e==e&&j[e]?a.length>1?{type:j[e],data:a.substring(1)}:{type:j[e]}:k}return f=new Uint8Array(a),e=f[0],g=o(a,1),l&&"blob"===b&&(g=new l([g])),{type:j[e],data:g}},c.decodeBase64Packet=function(a,c){var d,e=j[a.charAt(0)];return b.ArrayBuffer?(d=p.decode(a.substr(1)),"blob"===c&&l&&(d=new l([d])),{type:e,data:d}):{type:e,data:{base64:!0,data:a.substr(1)}}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,g?b:!1,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=n(a);return b&&g?l&&!u?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){var e,f,g,h,i,j,l,m;if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);if("function"==typeof b&&(d=b,b=null),""==a)return d(k,0,1);for(f="",i=0,j=a.length;j>i;i++)if(l=a.charAt(i),":"!=l)f+=l;else{if(""==f||f!=(g=+f))return d(k,0,1);if(h=a.substr(i+1,g),f!=h.length)return d(k,0,1);if(h.length){if(e=c.decodePacket(h,b,!0),k.type==e.type&&k.data==e.data)return d(k,0,1);if(m=d(e,i+g,j),!1===m)return}i+=g,f=""}return""!=f?d(k,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void h(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+(""+c).length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b,c,d,g="string"==typeof a,h=a;if(g){for(b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);h=b.buffer}for(g?e[f++]=0:e[f++]=1,d=""+h.byteLength,c=0;c<d.length;c++)e[f++]=parseInt(d[c]);for(e[f++]=255,b=new Uint8Array(h),c=0;c<b.length;c++)e[f++]=b[c]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c,d,e,f,g,h,i=new Uint8Array(1);if(i[0]=1,"string"==typeof a){for(c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);a=c.buffer,
i[0]=0}for(e=a instanceof ArrayBuffer?a.byteLength:a.size,f=""+e,g=new Uint8Array(f.length+1),d=0;d<f.length;d++)g[d]=parseInt(f[d]);g[f.length]=255,l&&(h=new l([i.buffer,g.buffer,a]),b(null,h))})}h(a,d,function(a,c){return b(new l(c))})},c.decodePayloadAsBinary=function(a,b,d){var e,f,g,h,i,j,l,m,n,p;for("function"==typeof b&&(d=b,b=null),e=a,f=[],g=!1;e.byteLength>0;){for(h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(k,0,1);if(e=o(e,2+j.length),j=parseInt(j),m=o(e,0,j),i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(q){for(n=new Uint8Array(m),m="",l=0;l<n.length;l++)m+=String.fromCharCode(n[l])}f.push(m),e=o(e,j)}p=f.length,f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{30:30,31:31,32:32,33:33,34:34,35:35,37:37}],30:[function(a,b){b.exports=Object.keys||function(a){var b,c=[],d=Object.prototype.hasOwnProperty;for(b in a)d.call(a,b)&&c.push(b);return c}},{}],31:[function(a,b){function c(a,b,c){function e(a,d){if(e.count<=0)throw Error("after called too many times");--e.count,a?(f=!0,b(a),b=c):0!==e.count||f||b(null,d)}var f=!1;return c=c||d,e.count=a,0===a?b():e}function d(){}b.exports=c},{}],32:[function(a,b){b.exports=function(a,b,c){var d,e,f,g,h=a.byteLength;if(b=b||0,c=c||h,a.slice)return a.slice(b,c);if(0>b&&(b+=h),0>c&&(c+=h),c>h&&(c=h),b>=h||b>=c||0===h)return new ArrayBuffer(0);for(d=new Uint8Array(a),e=new Uint8Array(c-b),f=b,g=0;c>f;f++,g++)e[g]=d[f];return e.buffer}},{}],33:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;e>c;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h,i,j=.75*b.length,k=b.length,l=0;for("="===b[b.length-1]&&(j--,"="===b[b.length-2]&&j--),h=new ArrayBuffer(j),i=new Uint8Array(h),c=0;k>c;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),i[l++]=d<<2|e>>4,i[l++]=(15&e)<<4|f>>2,i[l++]=(3&f)<<6|63&g;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],34:[function(a,b){(function(a){function c(a,b){var c,e;for(b=b||{},c=new d,e=0;e<a.length;e++)c.append(a[e]);return b.type?c.getBlob(b.type):c.getBlob()}var d=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,e=function(){try{var a=new Blob(["hi"]);return 2==a.size}catch(b){return!1}}(),f=d&&d.prototype.append&&d.prototype.getBlob;b.exports=function(){return e?a.Blob:f?c:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(a,b){(function(c){function d(a){function b(a){var d,f;if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(f in a)if(a.hasOwnProperty(f)&&b(a[f]))return!0}return!1}return b(a)}var e=a(36);b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{36:36}],36:[function(a,b){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],37:[function(a,b,c){(function(a){!function(d){function e(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=m(b>>>10&1023|55296),b=56320|1023&b),e+=m(b);return e}function g(a,b){return m(a>>b&63|128)}function h(a){if(0==(4294967168&a))return m(a);var b="";return 0==(4294965248&a)?b=m(a>>6&31|192):0==(4294901760&a)?(b=m(a>>12&15|224),b+=g(a,6)):0==(4292870144&a)&&(b=m(a>>18&7|240),b+=g(a,12),b+=g(a,6)),b+=m(63&a|128)}function i(a){for(var b,c=e(a),d=c.length,f=-1,g="";++f<d;)b=c[f],g+=h(b);return g}function j(){if(p>=o)throw Error("Invalid byte index");var a=255&n[p];if(p++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function k(){var a,b,c,d,e;if(p>o)throw Error("Invalid byte index");if(p==o)return!1;if(a=255&n[p],p++,0==(128&a))return a;if(192==(224&a)){if(b=j(),e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=j(),c=j(),e=(15&a)<<12|b<<6|c,e>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=j(),c=j(),d=j(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&1114111>=e))return e;throw Error("Invalid UTF-8 detected")}function l(a){var b,c;for(n=e(a),o=n.length,p=0,b=[];(c=k())!==!1;)b.push(c);return f(b)}var m,n,o,p,q,r,s,t,u="object"==typeof c&&c,v="object"==typeof b&&b&&b.exports==u&&b,w="object"==typeof a&&a;if((w.global===w||w.window===w)&&(d=w),m=String.fromCharCode,q={version:"2.0.0",encode:i,decode:l},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return q});else if(u&&!u.nodeType)if(v)v.exports=q;else{r={},s=r.hasOwnProperty;for(t in q)s.call(q,t)&&(u[t]=q[t])}else d.utf8=q}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(a,b){var c=a(39);try{b.exports="XMLHttpRequest"in c&&"withCredentials"in new c.XMLHttpRequest}catch(d){b.exports=!1}},{39:39}],39:[function(a,b){b.exports=function(){return this}()},{}],40:[function(a,b){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(a,b,c){c.encode=function(a){var b,c="";for(b in a)a.hasOwnProperty(b)&&(c.length&&(c+="&"),c+=encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c},c.decode=function(a){var b,c,d,e={},f=a.split("&");for(b=0,c=f.length;c>b;b++)d=f[b].split("="),e[decodeURIComponent(d[0])]=decodeURIComponent(d[1]);return e}},{}],42:[function(a,b){var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b,e,f,g=a,h=a.indexOf("["),i=a.indexOf("]");for(-1!=h&&-1!=i&&(a=a.substring(0,h)+a.substring(h,i).replace(/:/g,";")+a.substring(i,a.length)),b=c.exec(a||""),e={},f=14;f--;)e[d[f]]=b[f]||"";return-1!=h&&-1!=i&&(e.source=g,e.host=e.host.substring(1,e.host.length-1).replace(/;/g,":"),e.authority=e.authority.replace("[","").replace("]","").replace(/;/g,":"),e.ipv6uri=!0),e}},{}],43:[function(a,b){function c(a,b){var c;return c=b?new e(a,b):new e(a)}var d=function(){return this}(),e=d.WebSocket||d.MozWebSocket;b.exports=e?c:null,e&&(c.prototype=e.prototype)},{}],44:[function(a,b){(function(c){function d(a){function b(a){var d,f;if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a(45);b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{45:45}],45:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{36:36}],46:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],47:[function(a,b,c){var d=Object.prototype.hasOwnProperty;c.keys=Object.keys||function(a){var b,c=[];for(b in a)d.call(a,b)&&c.push(b);return c},c.values=function(a){var b,c=[];for(b in a)d.call(a,b)&&c.push(a[b]);return c},c.merge=function(a,b){for(var c in b)d.call(b,c)&&(a[c]=b[c]);return a},c.length=function(a){return c.keys(a).length},c.isEmpty=function(a){return 0==c.length(a)}},{}],48:[function(a,b){var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){for(var b=c.exec(a||""),e={},f=14;f--;)e[d[f]]=b[f]||"";return e}},{}],49:[function(a,b){function c(a,b){var c,d=[];for(b=b||0,c=b||0;c<a.length;c++)d[c-b]=a[c];return d}b.exports=c},{}],50:[function(a,b,c){(function(b){var d=a(55),e=a(52);c.deconstructPacket=function(a){function b(a){var f,g,h,i;if(!a)return a;if(e(a))return f={_placeholder:!0,num:c.length},c.push(a),f;if(d(a)){for(g=Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){g={};for(i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){var e,f,g;if(a&&a._placeholder)return e=b[a.num];if(d(a)){for(f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){var k,l,m;if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File)g++,k=new FileReader,k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a);else if(d(a))for(l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{52:52,55:55}],51:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)&&(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b,d,e,f={},g=0;if(f.type=+a.charAt(0),null==c.types[f.type])return j();if(c.BINARY_EVENT==f.type||c.BINARY_ACK==f.type){for(b="";"-"!=a.charAt(++g)&&(b+=a.charAt(g),g!=a.length););if(b!=+b||"-"!=a.charAt(g))throw Error("Illegal attachments");f.attachments=+b}if("/"==a.charAt(g+1))for(f.nsp="";++g&&(d=a.charAt(g),","!=d)&&(f.nsp+=d,g!=a.length););else f.nsp="/";if(e=a.charAt(g+1),""!==e&&+e==e){for(f.id="";++g;){if(d=a.charAt(g),null==d||+d!=d){--g;break}if(f.id+=a.charAt(g),g==a.length)break}f.id=+f.id}if(a.charAt(++g))try{f.data=l.parse(a.substr(g))}catch(h){return j()}return k("decoded %s as %j",a,f),f}function i(a){this.reconPack=a,this.buffers=[]}function j(){return{type:c.ERROR,data:"parser error"}}var k=a(54)("socket.io-parser"),l=a(56),m=(a(55),a(53)),n=a(50),o=a(52);c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw Error("Unknown type: "+a);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{50:50,52:52,53:53,54:54,55:55,56:56}],52:[function(a,b){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(a,b,c){arguments[4][13][0].apply(c,arguments)},{13:13}],54:[function(a,b,c){arguments[4][14][0].apply(c,arguments)},{14:14}],55:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{36:36}],56:[function(a,b,c){!function(a){function b(a){var c,d,e,h,i,j,k;if(b[a]!==f)return b[a];if("bug-string-char-index"==a)c="a"!="a"[0];else if("json"==a)c=b("json-stringify")&&b("json-parse");else{if(e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',"json-stringify"==a){if(h=L.stringify,i="function"==typeof h&&g){(d=function(){return 1}).toJSON=d;try{i="0"===h(0)&&"0"===h(new Number)&&'""'==h(new String)&&h(I)===f&&h(f)===f&&h()===f&&"1"===h(d)&&"[1]"==h([d])&&"[null]"==h([f])&&"null"==h(null)&&"[null,null,null]"==h([f,I,null])&&h({a:[d,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===h(null,d)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new Date(-1))}catch(l){i=!1}}c=i}if("json-parse"==a){if(j=L.parse,"function"==typeof j)try{if(0===j("0")&&!j(!1)&&(d=j(e),k=5==d.a.length&&1===d.a[0])){try{k=!j('"	"')}catch(l){}if(k)try{k=1!==j("01")}catch(l){}if(k)try{k=1!==j("1.")}catch(l){}}}catch(l){k=!1}c=k}}return b[a]=!!c}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I={}.toString,J="function"==typeof define&&define.amd,K="object"==typeof JSON&&JSON,L="object"==typeof c&&c&&!c.nodeType&&c;L&&K?(L.stringify=K.stringify,L.parse=K.parse):L=a.JSON=K||{},g=new Date(-0xc782b5b800cec);try{g=-109252==g.getUTCFullYear()&&0===g.getUTCMonth()&&1===g.getUTCDate()&&10==g.getUTCHours()&&37==g.getUTCMinutes()&&6==g.getUTCSeconds()&&708==g.getUTCMilliseconds()}catch(M){}b("json")||(h="[object Function]",i="[object Date]",j="[object Number]",k="[object String]",l="[object Array]",m="[object Boolean]",n=b("bug-string-char-index"),g||(o=Math.floor,p=[0,31,59,90,120,151,181,212,243,273,304,334],q=function(a,b){return p[b]+365*(a-1970)+o((a-1969+(b=+(b>1)))/4)-o((a-1901+b)/100)+o((a-1601+b)/400)}),(d={}.hasOwnProperty)||(d=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=I?d=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,d=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,d.call(this,a)}),r={"boolean":1,number:1,string:1,undefined:1},s=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!r[c]},e=function(a,b){var c,f,g,i=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,f=new c;for(g in f)d.call(f,g)&&i++;return c=f=null,i?e=2==i?function(a,b){var c,e={},f=I.call(a)==h;for(c in a)f&&"prototype"==c||d.call(e,c)||!(e[c]=1)||!d.call(a,c)||b(c)}:function(a,b){var c,e,f=I.call(a)==h;for(c in a)f&&"prototype"==c||!d.call(a,c)||(e="constructor"===c)||b(c);(e||d.call(a,c="constructor"))&&b(c)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],e=function(a,b){var c,e,g=I.call(a)==h,i=!g&&"function"!=typeof a.constructor&&s(a,"hasOwnProperty")?a.hasOwnProperty:d;for(c in a)g&&"prototype"==c||!i.call(a,c)||b(c);for(e=f.length;c=f[--e];i.call(a,c)&&b(c));}),e(a,b)},b("json-stringify")||(t={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},u="000000",v=function(a,b){return(u+(b||0)).slice(-a)},w="\\u00",x=function(a){var b,c,d='"',e=0,f=a.length,g=f>10&&n;for(g&&(b=a.split(""));f>e;e++)switch(c=a.charCodeAt(e)){case 8:case 9:case 10:case 12:case 13:case 34:case 92:d+=t[c];break;default:if(32>c){d+=w+v(2,c.toString(16));break}d+=g?b[e]:n?a.charAt(e):a[e]}return d+'"'},y=function(a,b,c,g,h,n,p){var r,s,t,u,w,z,A,B,C,D,E,F,G,H,J,K;try{r=b[a]}catch(L){}if("object"==typeof r&&r)if(s=I.call(r),s!=i||d.call(r,"toJSON"))"function"==typeof r.toJSON&&(s!=j&&s!=k&&s!=l||d.call(r,"toJSON"))&&(r=r.toJSON(a));else if(r>-1/0&&1/0>r){if(q){for(w=o(r/864e5),t=o(w/365.2425)+1970-1;q(t+1,0)<=w;t++);for(u=o((w-q(t,0))/30.42);q(t,u+1)<=w;u++);w=1+w-q(t,u),z=(r%864e5+864e5)%864e5,A=o(z/36e5)%24,B=o(z/6e4)%60,C=o(z/1e3)%60,D=z%1e3}else t=r.getUTCFullYear(),u=r.getUTCMonth(),w=r.getUTCDate(),A=r.getUTCHours(),B=r.getUTCMinutes(),C=r.getUTCSeconds(),D=r.getUTCMilliseconds();r=(0>=t||t>=1e4?(0>t?"-":"+")+v(6,0>t?-t:t):v(4,t))+"-"+v(2,u+1)+"-"+v(2,w)+"T"+v(2,A)+":"+v(2,B)+":"+v(2,C)+"."+v(3,D)+"Z"}else r=null;if(c&&(r=c.call(b,a,r)),null===r)return"null";if(s=I.call(r),s==m)return""+r;if(s==j)return r>-1/0&&1/0>r?""+r:"null";if(s==k)return x(""+r);if("object"==typeof r){for(H=p.length;H--;)if(p[H]===r)throw TypeError();if(p.push(r),E=[],J=n,n+=h,s==l){for(G=0,H=r.length;H>G;G++)F=y(G,r,c,g,h,n,p),E.push(F===f?"null":F);K=E.length?h?"[\n"+n+E.join(",\n"+n)+"\n"+J+"]":"["+E.join(",")+"]":"[]"}else e(g||r,function(a){var b=y(a,r,c,g,h,n,p);b!==f&&E.push(x(a)+":"+(h?" ":"")+b)}),K=E.length?h?"{\n"+n+E.join(",\n"+n)+"\n"+J+"}":"{"+E.join(",")+"}":"{}";return p.pop(),K}},L.stringify=function(a,b,c){var d,e,f,g,i,m,n;if("function"==typeof b||"object"==typeof b&&b)if((g=I.call(b))==h)e=b;else if(g==l)for(f={},i=0,m=b.length;m>i;n=b[i++],g=I.call(n),(g==k||g==j)&&(f[n]=1));if(c)if((g=I.call(c))==j){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else g==k&&(d=c.length<=10?c:c.slice(0,10));return y("",(n={},n[""]=a,n),e,f,d,"",[])}),b("json-parse")||(z=String.fromCharCode,A={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},D=function(){throw B=C=null,SyntaxError()},E=function(){for(var a,b,c,d,e,f=C,g=f.length;g>B;)switch(e=f.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=n?f.charAt(B):f[B],B++,a;case 34:for(a="@",B++;g>B;)if(e=f.charCodeAt(B),32>e)D();else if(92==e)switch(e=f.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=A[e],B++;break;case 117:for(b=++B,c=B+4;c>B;B++)e=f.charCodeAt(B),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||D();a+=z("0x"+f.slice(b,B));break;default:D()}else{if(34==e)break;for(e=f.charCodeAt(B),b=B;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++B);a+=f.slice(b,B)}if(34==f.charCodeAt(B))return B++,a;D();default:if(b=B,45==e&&(d=!0,e=f.charCodeAt(++B)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(B+1),e>=48&&57>=e)&&D(),d=!1;g>B&&(e=f.charCodeAt(B),e>=48&&57>=e);B++);if(46==f.charCodeAt(B)){for(c=++B;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==B&&D(),B=c}if(e=f.charCodeAt(B),101==e||69==e){for(e=f.charCodeAt(++B),(43==e||45==e)&&B++,c=B;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==B&&D(),B=c}return+f.slice(b,B)}if(d&&D(),"true"==f.slice(B,B+4))return B+=4,!0;if("false"==f.slice(B,B+5))return B+=5,!1;if("null"==f.slice(B,B+4))return B+=4,null;D()}return"$"},F=function(a){var b,c;if("$"==a&&D(),"string"==typeof a){if("@"==(n?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=E(),"]"!=a;c||(c=!0))c&&(","==a?(a=E(),"]"==a&&D()):D()),","==a&&D(),b.push(F(a));return b}if("{"==a){for(b={};a=E(),"}"!=a;c||(c=!0))c&&(","==a?(a=E(),"}"==a&&D()):D()),(","==a||"string"!=typeof a||"@"!=(n?a.charAt(0):a[0])||":"!=E())&&D(),b[a.slice(1)]=F(E());return b}D()}return a},G=function(a,b,c){var d=H(a,b,c);d===f?delete a[b]:a[b]=d},H=function(a,b,c){var d,f=a[b];if("object"==typeof f&&f)if(I.call(f)==l)for(d=f.length;d--;)G(f,d,c);else e(f,function(a){G(f,a,c)});return c.call(a,b,f)},L.parse=function(a,b){var c,d;return B=0,C=""+a,c=F(E()),"$"!=E()&&D(),B=C=null,b&&I.call(b)==h?H((d={},d[""]=c,d),"",b):c})),J&&define(function(){return L})}(this)},{}],57:[function(a,b){b.exports={"private":!0,name:"solar-crusaders",version:"0.0.1",description:"A multiplayer strategy game featuring 4X gameplay, sandbox universe, and simulated virtual economy.",author:"Oliver J Dyla",contributors:[],dependencies:{express:"4.13.x","express-session":"1.11.x",compression:"1.5.x",morgan:"1.6.x","serve-favicon":"2.3.x","body-parser":"1.13.x",jade:"1.11.x",redis:"0.12.x","connect-redis":"2.5.x","socket.io":"1.3.x","socket.io-express-session":"0.1.x",stripe:"3.7.x",brfs:"1.4.x","bundle-collapser":"1.2.x",earcut:"2.0.x",async:"1.4.x","resource-loader":"1.6.x","object-assign":"4.0.x",eventemitter3:"1.1.x"},devDependencies:{grunt:"0.4.x","grunt-develop":"0.4.x","grunt-browserify":"4.0.x","grunt-node-inspector":"0.2.x","grunt-contrib-concat":"0.5.x","grunt-contrib-watch":"0.6.x","grunt-contrib-uglify":"0.9.x","grunt-contrib-compress":"0.13.x"}}},{}],58:[function(a,b){function c(a,b,c,d,e,f,g){void 0===g&&(g=!1),this.game=a,this.name=c,this._parent=b,this._frameData=d,this._frames=[],this._frames=this._frames.concat(e),this.delay=1e3/f,this.loop=g,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex])}c.prototype={play:function(a,b,c){return"number"==typeof a&&(this.delay=1e3/a),"boolean"==typeof b&&(this.loop=b),void 0!==c&&(this.killOnComplete=c),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.updateCurrentFrame(!1,!0),this._parent.animations.currentAnim=this,this._parent.animations.currentFrame=this.currentFrame,this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setFrame(this.currentFrame),this._parent.animations.currentAnim=this,this._parent.animations.currentFrame=this.currentFrame},setFrame:function(a,b){var c,d;if(void 0===b&&(b=!1),"string"==typeof a)for(d=0;d<this._frames.length;d++)this._frameData.getFrame(this._frames[d]).name===a&&(c=d);else if("number"==typeof a)if(b)c=a;else for(d=0;d<this._frames.length;d++)this._frames[d]===c&&(c=d);c&&(this._frameIndex=c-1,this._timeNextFrame=this.game.clock.time,this.update())},stop:function(a,b){void 0===a&&(a=!1),void 0===b&&(b=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,a&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this._parent.setFrame(this.currentFrame))},onPause:function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.clock.time)},onResume:function(){this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this._frameDiff)},update:function(){return this.isPaused?!1:this.isPlaying&&this.game.clock.time>=this._timeNextFrame?(this._frameSkip=1,this._frameDiff=this.game.clock.time-this._timeNextFrame,this._timeLastFrame=this.game.clock.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.clock.time+(this.delay-this._frameDiff),this._frameIndex+=this._frameSkip,this._frameIndex>=this._frames.length?this.loop?(this._frameIndex%=this._frames.length,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setFrame(this.currentFrame),this.loopCount++,this.onUpdate?!!this._frameData:!0):(this.complete(),!1):this.updateCurrentFrame(!0)):!1},updateCurrentFrame:function(a,b){if(void 0===b&&(b=!1),!this._frameData)return!1;var c=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(b||!b&&c!==this.currentFrame.index)&&this._parent.setFrame(this.currentFrame),this.onUpdate&&a?!!this._frameData:!0},next:function(a){void 0===a&&(a=1);var b=this._frameIndex+a;b>=this._frames.length&&(this.loop?b%=this._frames.length:b=this._frames.length-1),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame(!0))},previous:function(a){void 0===a&&(a=1);var b=this._frameIndex-a;0>b&&(this.loop?b=this._frames.length+b:b++),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame(!0))},updateFrameData:function(a){this._frameData=a,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},destroy:function(){this._frameData&&(this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1)},complete:function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this.killOnComplete&&this._parent.kill()}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"paused",{get:function(){return this.isPaused},set:function(a){this.isPaused=a,a?this._pauseStartTime=this.game.clock.time:this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this.delay)}}),Object.defineProperty(c.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(c.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(a){this.currentFrame=this._frameData.getFrame(this._frames[a]),null!==this.currentFrame&&(this._frameIndex=a,this._parent.setFrame(this.currentFrame),this.onUpdate)}}),Object.defineProperty(c.prototype,"speed",{get:function(){return Math.round(1e3/this.delay)},set:function(a){a>=1&&(this.delay=1e3/a)}}),Object.defineProperty(c.prototype,"enableUpdate",{get:function(){return null!==this.onUpdate},set:function(a){a&&null===this.onUpdate?this.onUpdate=new Phaser.Signal:a||null===this.onUpdate||(this.onUpdate.dispose(),this.onUpdate=null)}}),c.generateFrameNames=function(a,b,c,d,e){var f,g,h;if(void 0===d&&(d=""),f=[],g="",c>b)for(h=b;c>=h;h++)g="number"==typeof e?Phaser.Utils.pad(""+h,e,"0",1):""+h,g=a+g+d,f.push(g);else for(h=b;h>=c;h--)g="number"==typeof e?Phaser.Utils.pad(""+h,e,"0",1):""+h,g=a+g+d,f.push(g);return f},b.exports=c},{}],59:[function(a,b){function c(a){this.sprite=a,this.game=a.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]}var d=a(58);c.prototype={loadFrameData:function(a,b){if(void 0===a)return!1;if(this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(a);return this._frameData=a,void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},copyFrameData:function(a,b){if(this._frameData=a.clone(),this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(this._frameData);return void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},add:function(a,b,c,e,f){return b=b||[],c=c||60,void 0===e&&(e=!1),void 0===f&&(f=b&&"number"==typeof b[0]?!0:!1),this._outputFrames=[],this._frameData.getFrameIndexes(b,f,this._outputFrames),this._anims[a]=new d(this.game,this.sprite,a,this._frameData,this._outputFrames,c,e),this.currentAnim=this._anims[a],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[a]},validateFrames:function(a,b){void 0===b&&(b=!0);for(var c=0;c<a.length;c++)if(b===!0){if(a[c]>this._frameData.total)return!1}else if(this._frameData.checkFrameName(a[c])===!1)return!1;return!0},play:function(a,b,c,d){return this._anims[a]?this.currentAnim===this._anims[a]?this.currentAnim.isPlaying===!1?(this.currentAnim.paused=!1,this.currentAnim.play(b,c,d)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[a],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(b,c,d)):void 0},stop:function(a,b){void 0===b&&(b=!1),"string"==typeof a?this._anims[a]&&(this.currentAnim=this._anims[a],this.currentAnim.stop(b)):this.currentAnim&&this.currentAnim.stop(b)},update:function(){return this.updateIfVisible&&!this.sprite.visible?!1:this.currentAnim&&this.currentAnim.update()?(this.currentFrame=this.currentAnim.currentFrame,!0):!1},next:function(a){this.currentAnim&&(this.currentAnim.next(a),this.currentFrame=this.currentAnim.currentFrame)},previous:function(a){this.currentAnim&&(this.currentAnim.previous(a),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(a){return"string"==typeof a&&this._anims[a]?this._anims[a]:null},refreshFrame:function(){console.warn("refreshFrame is not implemented, see engine/animation/AnimationManager")},destroy:function(){var a=null;for(a in this._anims)this._anims.hasOwnProperty(a)&&this._anims[a].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(c.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(c.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(a){this.currentAnim.paused=a}}),Object.defineProperty(c.prototype,"name",{get:function(){return this.currentAnim?this.currentAnim.name:void 0}}),Object.defineProperty(c.prototype,"frame",{get:function(){return this.currentFrame?this.currentFrame.index:void 0},set:function(a){"number"==typeof a&&this._frameData&&null!==this._frameData.getFrame(a)&&(this.currentFrame=this._frameData.getFrame(a),this.currentFrame&&this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(c.prototype,"frameName",{get:function(){return this.currentFrame?this.currentFrame.name:void 0},set:function(a){"string"==typeof a&&this._frameData&&null!==this._frameData.getFrameByName(a)?(this.currentFrame=this._frameData.getFrameByName(a),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame))):console.warn("Cannot set frameName: "+a)}}),b.exports=c},{58:58}],60:[function(a,b){var c=a(61),d=a(62);AnimationParser={spriteSheet:function(a,b,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s=b;if("string"==typeof b&&(s=a.cache.getImage(b)),null===s)return null;if(j=s.width,k=s.height,0>=e&&(e=Math.floor(-j/Math.min(-1,e))),0>=f&&(f=Math.floor(-k/Math.min(-1,f))),l=Math.floor((j-h)/(e+i)),m=Math.floor((k-h)/(f+i)),n=l*m,-1!==g&&(n=g),0===j||0===k||e>j||f>k||0===n)return console.warn("AnimationParser.spriteSheet: '"+b+"'s width/height zero or width/height < given frameWidth/frameHeight"),null;for(o=new d,p=h,q=h,r=0;n>r;r++)o.addFrame(new c(r,p,q,e,f,"")),p+=e+i,p+e>j&&(p=h,q+=f+i);return o},JSONData:function(a,b){var e,f,g,h;if(!b.frames)return console.warn("AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),void console.log(b);for(e=new d,f=b.frames,
h=0;h<f.length;h++)g=e.addFrame(new c(h,f[h].frame.x,f[h].frame.y,f[h].frame.w,f[h].frame.h,f[h].filename)),f[h].trimmed&&g.setTrim(f[h].trimmed,f[h].sourceSize.w,f[h].sourceSize.h,f[h].spriteSourceSize.x,f[h].spriteSourceSize.y,f[h].spriteSourceSize.w,f[h].spriteSourceSize.h);return e},JSONDataHash:function(a,b){var e,f,g,h,i;if(!b.frames)return console.warn("AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),void console.log(b);e=new d,f=b.frames,h=0;for(i in f)g=e.addFrame(new c(h,f[i].frame.x,f[i].frame.y,f[i].frame.w,f[i].frame.h,i)),f[i].trimmed&&g.setTrim(f[i].trimmed,f[i].sourceSize.w,f[i].sourceSize.h,f[i].spriteSourceSize.x,f[i].spriteSourceSize.y,f[i].spriteSourceSize.w,f[i].spriteSourceSize.h),h++;return e}},b.exports=AnimationParser},{61:61,62:62}],61:[function(a,b){(function(c){function d(a,b,d,e,g,h){this.index=a,this.x=b,this.y=d,this.width=e,this.height=g,this.name=h,this.centerX=c.Math.floor(e/2),this.centerY=c.Math.floor(g/2),this.distance=f.distance(0,0,e,g),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=e,this.sourceSizeH=g,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height}var e=a(97),f=a(123);d.prototype={resize:function(a,b){this.width=a,this.height=b,this.centerX=c.Math.floor(a/2),this.centerY=c.Math.floor(b/2),this.distance=f.distance(0,0,a,b),this.sourceSizeW=a,this.sourceSizeH=b,this.right=this.x+a,this.bottom=this.y+b},setTrim:function(a,b,d,e,f,g,h){this.trimmed=a,a&&(this.sourceSizeW=b,this.sourceSizeH=d,this.centerX=c.Math.floor(b/2),this.centerY=c.Math.floor(d/2),this.spriteSourceSizeX=e,this.spriteSourceSizeY=f,this.spriteSourceSizeW=g,this.spriteSourceSizeH=h)},clone:function(){var a,b=new d(this.index,this.x,this.y,this.width,this.height,this.name);for(a in this)this.hasOwnProperty(a)&&(b[a]=this[a]);return b},getRect:function(a){return void 0===a?a=new e(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a}},d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{123:123,97:97}],62:[function(a,b){function c(){this._frames=[],this._frameNames=[]}c.prototype={addFrame:function(a){return a.index=this._frames.length,this._frames.push(a),""!==a.name&&(this._frameNames[a.name]=a.index),a},getFrame:function(a){return a>=this._frames.length&&(a=0),this._frames[a]},getFrameByName:function(a){return"number"==typeof this._frameNames[a]?this._frames[this._frameNames[a]]:null},checkFrameName:function(a){return null==this._frameNames[a]?!1:!0},clone:function(){var a,b,d=new c;for(a=0;a<this._frames.length;a++)d._frames.push(this._frames[a].clone());for(b in this._frameNames)this._frameNames.hasOwnProperty(b)&&d._frameNames.push(this._frameNames[b]);return d},getFrameRange:function(a,b,c){void 0===c&&(c=[]);for(var d=a;b>=d;d++)c.push(this._frames[d]);return c},getFrames:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d]);else for(d=0;d<a.length;d++)b?c.push(this.getFrame(a[d])):c.push(this.getFrameByName(a[d]));return c},getFrameIndexes:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d].index);else for(d=0;d<a.length;d++)b?c.push(this._frames[a[d]].index):this.getFrameByName(a[d])&&c.push(this.getFrameByName(a[d]).index);return c}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"total",{get:function(){return this._frames.length}}),b.exports=c},{}],63:[function(a,b){var c={VERSION:a(57).version,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,TILEMAPSPRITE:27,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,STRIP:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,Loader:{TEXTURE_ATLAS_JSON_ARRAY:0,TEXTURE_ATLAS_JSON_HASH:1,TEXTURE_ATLAS_XML_STARLING:2},BlendMode:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16}};b.exports=c},{57:57}],64:[function(a,b){function c(a){this.parent=a,this.game=a.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.duration=0,this.timeUp=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0}c.prototype={start:function(a,b){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.duration=0,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},stop:function(a,b){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},reset:function(){this.isDown=!1,this.isUp=!0,this.timeDown=this.game.clock.time,this.duration=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.parent=null,this.game=null}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),b.exports=c},{}],65:[function(a,b){function c(a){this.game=a,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.pollRate=1,this.enabled=!0,this.multiInputOverride=c.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.minPriorityID=0,this.resetLocked=!1,this.onDown=null,this.onUp=null,this.onTap=null,this.onHold=null,this.interactiveItems=new i,this._pollCounter=0,this._oldPosition=null,this._localPoint=new h,this._x=0,this._y=0}var d=a("pixi"),e=a(70),f=a(69),g=a(68),h=a(96),i=a(119);c.MOUSE_OVERRIDES_TOUCH=0,c.TOUCH_OVERRIDES_MOUSE=1,c.MOUSE_TOUCH_COMBINE=2,c.prototype={boot:function(){this.mousePointer=new e(this.game,0),this.mouse=new f(this.game),this.keyboard=new g(this.game),this.scale=new h(1,1),this.speed=new h,this.position=new h,this._oldPosition=new h,this.activePointer=this.mousePointer,this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.mousePointer.active=!0,this.keyboard.start();var a=this;this._onClickTrampoline=function(b){a.onClickTrampoline(b)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},destroy:function(){this.mouse.stop(),this.keyboard.stop(),this.moveCallbacks=[],this.game.canvas.removeEventListener("click",this._onClickTrampoline)},addMoveCallback:function(a,b){this.moveCallbacks.push({callback:a,context:b})},deleteMoveCallback:function(a,b){for(var c=this.moveCallbacks.length;c--;)if(this.moveCallbacks[c].callback===a&&this.moveCallbacks[c].context===b)return void this.moveCallbacks.splice(c,1)},update:function(){return this.keyboard.update(),this.pollRate>0&&this._pollCounter<this.pollRate?void this._pollCounter++:(this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),void(this._pollCounter=0))},reset:function(a){this.game.isBooted&&!this.resetLocked&&(void 0===a&&(a=!1),this.mousePointer.reset(),this.keyboard.reset(a),"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),a&&(this.moveCallbacks=[]),this._pollCounter=0)},resetSpeed:function(a,b){this._oldPosition.setTo(a,b),this.speed.setTo(0,0)},getLocalPosition:function(a,b,c){var d,e;return void 0===c&&(c=new h),d=a.worldTransform,e=1/(d.a*d.d+d.c*-d.b),c.setTo(d.d*e*b.x+-d.c*e*b.y+(d.ty*d.c-d.tx*d.d)*e,d.a*e*b.y+-d.b*e*b.x+(-d.ty*d.a+d.tx*d.b)*e)},hitTest:function(a,b,c){var e,f,g,h,i,j;if(!a.worldVisible)return!1;if(this.getLocalPosition(a,b,this._localPoint),c.copyFrom(this._localPoint),a.hitArea&&a.hitArea.contains)return a.hitArea.contains(this._localPoint.x,this._localPoint.y);if(a instanceof d.Sprite&&(e=a.texture.frame.width,f=a.texture.frame.height,g=-e*a.anchor.x,this._localPoint.x>=g&&this._localPoint.x<g+e&&(h=-f*a.anchor.y,this._localPoint.y>=h&&this._localPoint.y<h+f)))return!0;for(i=0,j=a.children.length;j>i;i++)if(this.hitTest(a.children[i],b,c))return!0;return!1},onClickTrampoline:function(){this.activePointer.processClickTrampolines()}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"x",{get:function(){return this._x},set:function(a){this._x=Math.floor(a)}}),Object.defineProperty(c.prototype,"y",{get:function(){return this._y},set:function(a){this._y=Math.floor(a)}}),Object.defineProperty(c.prototype,"pollLocked",{get:function(){return this.pollRate>0&&this._pollCounter<this.pollRate}}),Object.defineProperty(c.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(c.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),b.exports=c},{119:119,68:68,69:69,70:70,96:96,pixi:"pixi"}],66:[function(a,b){var c=a(96);InputHandler=function(a){this.sprite=a,this.game=a.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.consumePointerEvent=!1,this.scaleLayer=!1,this.dragFromCenter=!1,this.dragStartPoint=new c,this.dragOffset=new c,this.snapPoint=new c,this._dragPoint=new c,this._tempPoint=new c,this._dragPhase=!1,this._wasEnabled=!1,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},InputHandler.prototype={start:function(a,b){return void 0===b&&(b=!1),a=a||0,this.enabled===!1&&(this.game.input.interactiveItems.add(this),this.useHandCursor=b,this.priorityID=a,this.snapOffset=new c,this.enabled=!0,this._wasEnabled=!0),this.flagged=!1,this.sprite},addedToGroup:function(){this._dragPhase||this._wasEnabled&&!this.enabled&&this.start()},removedFromGroup:function(){this._dragPhase||(this.enabled?(this._wasEnabled=!0,this.stop()):this._wasEnabled=!1)},reset:function(){this.enabled=!1,this.flagged=!1;for(var a=0;10>a;a++)this._pointerData[a]={id:a,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(a,b,c){return void 0===c&&(c=!0),0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID?!1:(c||!this.pixelPerfectClick&&!this.pixelPerfectOver)&&(this.priorityID>a||this.priorityID===a&&this.sprite.renderOrderID<b)?!0:!1},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(a){return a=a||0,this._pointerData[a].x},pointerY:function(a){return a=a||0,this._pointerData[a].y},pointerDown:function(a){return a=a||0,this._pointerData[a].isDown},pointerUp:function(a){return a=a||0,this._pointerData[a].isUp},pointerTimeDown:function(a){return a=a||0,this._pointerData[a].timeDown},pointerTimeUp:function(a){return a=a||0,this._pointerData[a].timeUp},pointerOver:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOver;for(var b=0;10>b;b++)if(this._pointerData[b].isOver)return!0}return!1},pointerOut:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOut;for(var b=0;10>b;b++)if(this._pointerData[b].isOut)return!0}return!1},pointerTimeOver:function(a){return a=a||0,this._pointerData[a].timeOver},pointerTimeOut:function(a){return a=a||0,this._pointerData[a].timeOut},pointerDragged:function(a){return a=a||0,this._pointerData[a].isDragged},checkPointerDown:function(a,b){return a.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,a,this._tempPoint)?(void 0===b&&(b=!1),!b&&this.pixelPerfectClick?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0):!1},checkPointerOver:function(a,b){return this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,a,this._tempPoint)?(void 0===b&&(b=!1),!b&&this.pixelPerfectOver?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0):!1},checkPixel:function(a,b,c){var d;if(this.sprite.texture.baseTexture.source){if(null===a&&null===b&&(this.game.input.getLocalPosition(this.sprite,c,this._tempPoint),a=this._tempPoint.x,b=this._tempPoint.y),0!==this.sprite.anchor.x&&(a-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(b-=-this.sprite.texture.frame.height*this.sprite.anchor.y),a+=this.sprite.texture.frame.x,b+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(a-=this.sprite.texture.trim.x,b-=this.sprite.texture.trim.y,a<this.sprite.texture.crop.x||a>this.sprite.texture.crop.right||b<this.sprite.texture.crop.y||b>this.sprite.texture.crop.bottom))return this._dx=a,this._dy=b,!1;if(this._dx=a,this._dy=b,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,a,b,1,1,0,0,1,1),d=this.game.input.hitContext.getImageData(0,0,1,1),d.data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(a){return null!==this.sprite&&void 0!==this.sprite.parent?this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this.draggable&&this._draggedPointerID===a.id?this.updateDrag(a):this._pointerData[a.id].isOver?this.checkPointerOver(a)?(this._pointerData[a.id].x=a.x-this.sprite.x,this._pointerData[a.id].y=a.y-this.sprite.y,!0):(this._pointerOutHandler(a),!1):void 0:(this._pointerOutHandler(a),!1):void 0},_pointerOverHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];(b.isOver===!1||a.dirty)&&(b.isOver=!0,b.isOut=!1,b.timeOver=this.game.clock.time,b.x=a.x-this.sprite.x,b.y=a.y-this.sprite.y,this.useHandCursor&&b.isDragged===!1&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),this.sprite&&this.sprite.events&&this.sprite.events.onInputOver$dispatch(this.sprite,a))}},_pointerOutHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];b.isOver=!1,b.isOut=!0,b.timeOut=this.game.clock.time,this.useHandCursor&&b.isDragged===!1&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.sprite&&this.sprite.events&&this.sprite.events.onInputOut$dispatch(this.sprite,a)}},_touchedHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];if(!b.isDown&&b.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,a))return;b.isDown=!0,b.isUp=!1,b.timeDown=this.game.clock.time,this.sprite&&this.sprite.events&&this.sprite.events.onInputDown$dispatch(this.sprite,a),a.dirty=!0,this.draggable&&this.isDragged===!1&&this.startDrag(a),this.bringToTop&&this.sprite.bringToTop()}return this.consumePointerEvent}},_releasedHandler:function(a){var b,c;null!==this.sprite&&(b=this._pointerData[a.id],b.isDown&&a.isUp&&(b.isDown=!1,b.isUp=!0,b.timeUp=this.game.clock.time,b.downDuration=b.timeUp-b.timeDown,c=this.checkPointerOver(a),this.sprite&&this.sprite.events&&(this.sprite.events.onInputUp$dispatch(this.sprite,a,c),c&&(c=this.checkPointerOver(a))),b.isOver=c,!c&&this.useHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),a.dirty=!0,this.draggable&&this.isDragged&&this._draggedPointerID===a.id&&this.stopDrag(a)))},updateDrag:function(a){var b,c;return a.isUp?(this.stopDrag(a),!1):(b=this.globalToLocalX(a.x)+this._dragPoint.x+this.dragOffset.x,c=this.globalToLocalY(a.y)+this._dragPoint.y+this.dragOffset.y,this.sprite.fixedToCamera?(this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=b),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y))):(this.allowHorizontalDrag&&(this.sprite.x=b),this.allowVerticalDrag&&(this.sprite.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))),this.sprite.events.onDragUpdate.dispatch(this.sprite,a,b,c,this.snapPoint),!0)},justOver:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOver&&this.overDuration(a)<b},justOut:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOut&&this.game.clock.time-this._pointerData[a].timeOut<b},justPressed:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isDown&&this.downDuration(a)<b},justReleased:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isUp&&this.game.clock.time-this._pointerData[a].timeUp<b},overDuration:function(a){return a=a||0,this._pointerData[a].isOver?this.game.clock.time-this._pointerData[a].timeOver:-1},downDuration:function(a){return a=a||0,this._pointerData[a].isDown?this.game.clock.time-this._pointerData[a].timeDown:-1},enableDrag:function(a,b,d,e,f,g){void 0===a&&(a=!1),void 0===b&&(b=!1),void 0===d&&(d=!1),void 0===e&&(e=255),void 0===f&&(f=null),void 0===g&&(g=null),this._dragPoint=new c,this.draggable=!0,this.bringToTop=b,this.dragOffset=new c,this.dragFromCenter=a,this.pixelPerfectClick=d,this.pixelPerfectAlpha=e,f&&(this.boundsRect=f),g&&(this.boundsSprite=g)},disableDrag:function(){if(this._pointerData)for(var a=0;10>a;a++)this._pointerData[a].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1},startDrag:function(a){var b,c=this.sprite.x,d=this.sprite.y;this.isDragged=!0,this._draggedPointerID=a.id,this._pointerData[a.id].isDragged=!0,this.sprite.fixedToCamera?this.dragFromCenter?(this.sprite.centerOn(a.x,a.y),this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y)):this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y):(this.dragFromCenter&&(b=this.sprite.getBounds(),this.sprite.x=this.globalToLocalX(a.x)+(this.sprite.x-b.centerX),this.sprite.y=this.globalToLocalY(a.y)+(this.sprite.y-b.centerY)),this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(a.x),this.sprite.y-this.globalToLocalY(a.y))),this.updateDrag(a),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(c,d),this.sprite.events.onDragStart$dispatch(this.sprite,a,c,d)},globalToLocalX:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.x,a*=this.game.scale.grid.scaleFluidInversed.x),a},globalToLocalY:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.y,a*=this.game.scale.grid.scaleFluidInversed.y),a},stopDrag:function(a){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[a.id].isDragged=!1,this._dragPhase=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.events.onDragStop$dispatch(this.sprite,a),this.checkPointerOver(a)===!1&&this._pointerOutHandler(a)},setDragLock:function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!0),this.allowHorizontalDrag=a,this.allowVerticalDrag=b},enableSnap:function(a,b,c,d,e,f){void 0===c&&(c=!0),void 0===d&&(d=!1),void 0===e&&(e=0),void 0===f&&(f=0),this.snapX=a,this.snapY=b,this.snapOffsetX=e,this.snapOffsetY=f,this.snapOnDrag=c,this.snapOnRelease=d},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},InputHandler.prototype.constructor=InputHandler,b.exports=InputHandler},{96:96}],67:[function(a,b){function c(a,b){this.game=a,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=b,this.onHoldCallback=null,this.onHoldContext=null,this._justDown=!1,this._justUp=!1}c.prototype={update:function(){this._enabled&&this.isDown&&(this.duration=this.game.clock.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(a){this._enabled&&(this.event=a,this.isDown||(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.duration=0,this.repeats=0,this._justDown=!0))},processKeyUp:function(a){this._enabled&&(this.event=a,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=this.game.clock.time-this.timeDown,this._justUp=!0))},reset:function(a){void 0===a&&(a=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=0,this._enabled=!0,this._justDown=!1,this._justUp=!1,a&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(a){return void 0===a&&(a=50),this.isDown&&this.duration<a},upDuration:function(a){return void 0===a&&(a=50),!this.isDown&&this.game.clock.time-this.timeUp<a}},Object.defineProperty(c.prototype,"justDown",{get:function(){var a=this._justDown;return this._justDown=!1,a}}),Object.defineProperty(c.prototype,"justUp",{get:function(){var a=this._justUp;return this._justUp=!1,a}}),Object.defineProperty(c.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a=!!a,a!==this._enabled&&(a||this.reset(!1),this._enabled=a)}}),c.prototype.constructor=c,b.exports=c},{}],68:[function(a,b){(function(c){function d(a){this.game=a,this.enabled=!0,this.event=null,this.pressEvent=null,this.callbackContext=this,this.onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0}var e=a(67);d.prototype={addCallbacks:function(a,b,c,d){this.callbackContext=a,void 0!==b&&(this.onDownCallback=b),void 0!==c&&(this.onUpCallback=c),void 0!==d&&(this.onPressCallback=d)},addKey:function(a){return this._keys[a]||(this._keys[a]=new e(this.game,a),this.addKeyCapture(a)),this._keys[a]},addKeys:function(a){var b,c={};for(b in a)c[b]=this.addKey(a[b]);return c},removeKey:function(a){this._keys[a]&&(this._keys[a]=null,this.removeKeyCapture(a))},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT})},start:function(){if(null===this._onKeyDown){var a=this;this._onKeyDown=function(b){return a.processKeyDown(b)},this._onKeyUp=function(b){return a.processKeyUp(b)},this._onKeyPress=function(b){return a.processKeyPress(b)},c.addEventListener("keydown",this._onKeyDown,!1),c.addEventListener("keyup",this._onKeyUp,!1),c.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){c.removeEventListener("keydown",this._onKeyDown),c.removeEventListener("keyup",this._onKeyUp),c.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(a){if("object"==typeof a)for(var b in a)this._capture[a[b]]=!0;else this._capture[a]=!0},removeKeyCapture:function(a){delete this._capture[a]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyDown(a),this._k=a.keyCode,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,a))},processKeyPress:function(a){this.pressEvent=a,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,String.fromCharCode(a.charCode),a)},processKeyUp:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyUp(a),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,a))},reset:function(a){void 0===a&&(a=!0),this.event=null;for(var b=this._keys.length;b--;)this._keys[b]&&this._keys[b].reset(a)},downDuration:function(a,b){return this._keys[a]?this._keys[a].downDuration(b):null},upDuration:function(a,b){return this._keys[a]?this._keys[a].upDuration(b):null},isDown:function(a){return this._keys[a]?this._keys[a].isDown:null}},Object.defineProperty(d.prototype,"lastChar",{get:function(){return 32===this.event.charCode?"":String.fromCharCode(this.pressEvent.charCode)}}),Object.defineProperty(d.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),d.prototype.constructor=d,d.A="A".charCodeAt(0),d.B="B".charCodeAt(0),d.C="C".charCodeAt(0),d.D="D".charCodeAt(0),d.E="E".charCodeAt(0),d.F="F".charCodeAt(0),d.G="G".charCodeAt(0),d.H="H".charCodeAt(0),d.I="I".charCodeAt(0),d.J="J".charCodeAt(0),d.K="K".charCodeAt(0),d.L="L".charCodeAt(0),d.M="M".charCodeAt(0),d.N="N".charCodeAt(0),d.O="O".charCodeAt(0),d.P="P".charCodeAt(0),d.Q="Q".charCodeAt(0),d.R="R".charCodeAt(0),d.S="S".charCodeAt(0),d.T="T".charCodeAt(0),d.U="U".charCodeAt(0),d.V="V".charCodeAt(0),d.W="W".charCodeAt(0),d.X="X".charCodeAt(0),d.Y="Y".charCodeAt(0),d.Z="Z".charCodeAt(0),d.ZERO="0".charCodeAt(0),d.ONE="1".charCodeAt(0),d.TWO="2".charCodeAt(0),d.THREE="3".charCodeAt(0),d.FOUR="4".charCodeAt(0),d.FIVE="5".charCodeAt(0),d.SIX="6".charCodeAt(0),d.SEVEN="7".charCodeAt(0),d.EIGHT="8".charCodeAt(0),d.NINE="9".charCodeAt(0),d.NUMPAD_0=96,d.NUMPAD_1=97,d.NUMPAD_2=98,d.NUMPAD_3=99,d.NUMPAD_4=100,d.NUMPAD_5=101,d.NUMPAD_6=102,d.NUMPAD_7=103,d.NUMPAD_8=104,d.NUMPAD_9=105,d.NUMPAD_MULTIPLY=106,d.NUMPAD_ADD=107,d.NUMPAD_ENTER=108,d.NUMPAD_SUBTRACT=109,d.NUMPAD_DECIMAL=110,d.NUMPAD_DIVIDE=111,d.F1=112,d.F2=113,d.F3=114,d.F4=115,d.F5=116,d.F6=117,d.F7=118,d.F8=119,d.F9=120,d.F10=121,d.F11=122,d.F12=123,d.F13=124,d.F14=125,d.F15=126,d.COLON=186,d.EQUALS=187,d.COMMA=188,d.UNDERSCORE=189,d.PERIOD=190,d.QUESTION_MARK=191,d.TILDE=192,d.OPEN_BRACKET=219,d.BACKWARD_SLASH=220,d.CLOSED_BRACKET=221,d.QUOTES=222,d.BACKSPACE=8,d.TAB=9,d.CLEAR=12,d.ENTER=13,d.SHIFT=16,d.CONTROL=17,d.ALT=18,d.CAPS_LOCK=20,d.ESC=27,d.SPACEBAR=32,d.PAGE_UP=33,d.PAGE_DOWN=34,d.END=35,d.HOME=36,d.LEFT=37,d.UP=38,d.RIGHT=39,d.DOWN=40,d.PLUS=43,d.MINUS=44,d.INSERT=45,d.DELETE=46,d.HELP=47,d.NUM_LOCK=144,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{67:67}],69:[function(a,b){(function(c){function d(a){this.game=a,this.input=a.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null}function e(a,b){this._scaleFactor=a,this._deltaMode=b,this.originalEvent=null}var f=a(106),g=a(123);d.NO_BUTTON=-1,d.LEFT_BUTTON=0,d.MIDDLE_BUTTON=1,d.RIGHT_BUTTON=2,d.BACK_BUTTON=3,d.FORWARD_BUTTON=4,d.WHEEL_UP=1,d.WHEEL_DOWN=-1,d.prototype={start:function(){var a,b,d;f.android&&f.chrome===!1||null===this._onMouseDown&&(a=this,this._onMouseDown=function(b){return a.onMouseDown(b)},this._onMouseMove=function(b){return a.onMouseMove(b)},this._onMouseUp=function(b){return a.onMouseUp(b)},this._onMouseUpGlobal=function(b){return a.onMouseUpGlobal(b)},this._onMouseOut=function(b){return a.onMouseOut(b)},this._onMouseOver=function(b){return a.onMouseOver(b)},this._onMouseWheel=function(b){return a.onMouseWheel(b)},b=this.game.canvas,b.addEventListener("mousedown",this._onMouseDown,!0),b.addEventListener("mousemove",this._onMouseMove,!0),b.addEventListener("mouseup",this._onMouseUp,!0),c.addEventListener("mouseup",this._onMouseUpGlobal,!0),b.addEventListener("mouseover",this._onMouseOver,!0),
b.addEventListener("mouseout",this._onMouseOut,!0),d=f.wheelEvent,d&&(b.addEventListener(d,this._onMouseWheel,!0),"mousewheel"===d?this._wheelEvent=new e(-1/40,1):"DOMMouseScroll"===d&&(this._wheelEvent=new e(1,1))))},onMouseDown:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.start(a))},onMouseMove:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.move(a))},onMouseUp:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseUpGlobal:function(a){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),a.identifier=0,this.input.mousePointer.stop(a))},onMouseOut:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&this.stopOnGameOut&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseOver:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,a)},onMouseWheel:function(a){this._wheelEvent&&(a=this._wheelEvent.bindEvent(a)),this.event=a,this.capture&&a.preventDefault(),this.wheelDelta=g.clamp(-a.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,a)},stop:function(){var a,b=this.game.canvas;b.removeEventListener("mousedown",this._onMouseDown,!0),b.removeEventListener("mousemove",this._onMouseMove,!0),b.removeEventListener("mouseup",this._onMouseUp,!0),b.removeEventListener("mouseover",this._onMouseOver,!0),b.removeEventListener("mouseout",this._onMouseOut,!0),a=f.wheelEvent,a&&b.removeEventListener(a,this._onMouseWheel,!0),c.removeEventListener("mouseup",this._onMouseUpGlobal,!0)}},d.prototype.constructor=d,e.prototype={},e.prototype.constructor=e,e.prototype.bindEvent=function(a){var b,c;if(!e._stubsGenerated&&a){b=function(a){return function(){var b=this.originalEvent[a];return"function"!=typeof b?b:b.bind(this.originalEvent)}};for(c in a)c in e.prototype||Object.defineProperty(e.prototype,c,{get:b(c)});e._stubsGenerated=!0}return this.originalEvent=a,this},Object.defineProperties(e.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{106:106,123:123}],70:[function(a,b){function c(a,b){this.game=a,this.id=b,this.type=d.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.target=null,this.button=null,this.leftButton=new e(this,c.LEFT_BUTTON),this.middleButton=new e(this,c.MIDDLE_BUTTON),this.rightButton=new e(this,c.RIGHT_BUTTON),this.backButton=new e(this,c.BACK_BUTTON),this.forwardButton=new e(this,c.FORWARD_BUTTON),this.eraserButton=new e(this,c.ERASER_BUTTON),this._holdSent=!1,this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===b,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.active=!1,this.dirty=!1,this.position=new g,this.positionDown=new g,this.positionUp=new g,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null}var d=a(63),e=a(64),f=a(65),g=a(96),h=a(69);c.NO_BUTTON=0,c.LEFT_BUTTON=1,c.RIGHT_BUTTON=2,c.MIDDLE_BUTTON=4,c.BACK_BUTTON=8,c.FORWARD_BUTTON=16,c.ERASER_BUTTON=32,c.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(a,b){c.LEFT_BUTTON&a&&this.leftButton.start(b),c.RIGHT_BUTTON&a&&this.rightButton.start(b),c.MIDDLE_BUTTON&a&&this.middleButton.start(b),c.BACK_BUTTON&a&&this.backButton.start(b),c.FORWARD_BUTTON&a&&this.forwardButton.start(b),c.ERASER_BUTTON&a&&this.eraserButton.start(b)},processButtonsUp:function(a,b){a===h.LEFT_BUTTON&&this.leftButton.stop(b),a===h.RIGHT_BUTTON&&this.rightButton.stop(b),a===h.MIDDLE_BUTTON&&this.middleButton.stop(b),a===h.BACK_BUTTON&&this.backButton.stop(b),a===h.FORWARD_BUTTON&&this.forwardButton.stop(b),5===a&&this.eraserButton.stop(b)},updateButtons:function(a){this.button=a.button;var b="down"===a.type.toLowerCase().substr(-4);void 0!==a.buttons?b?this.processButtonsDown(a.buttons,a):this.processButtonsUp(a.button,a):b?this.leftButton.start(a):(this.leftButton.stop(a),this.rightButton.stop(a)),a.ctrlKey&&this.leftButton.isDown&&this.rightButton.start(a),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(a){return a.pointerId&&(this.pointerId=a.pointerId),this.identifier=a.identifier,this.target=a.target,this.isMouse?this.updateButtons(a):(this.isDown=!0,this.isUp=!1),this._history=[],this.active=!0,this.withinGame=!0,this.dirty=!1,this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.clock.time-this.timeDown,this.timeDown=this.game.clock.time,this._holdSent=!1,this.move(a,!0),this.positionDown.setTo(this.x,this.y),(this.game.input.multiInputOverride===f.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===f.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===f.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.totalActivePointers)&&(this.game.input.x=this.x,this.game.input.y=this.y,this.game.input.position.setTo(this.x,this.y),this.game.input.onDown.dispatch(this,a),this.game.input.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){this.active&&(this.dirty&&(this.game.input.interactiveItems.total>0&&this.processInteractiveObjects(!1),this.dirty=!1),this._holdSent===!1&&this.duration>=this.game.input.holdRate&&((this.game.input.multiInputOverride===f.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===f.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===f.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.totalActivePointers)&&this.game.input.onHold.dispatch(this),this._holdSent=!0),this.game.input.recordPointerHistory&&this.game.clock.time>=this._nextDrop&&(this._nextDrop=this.game.clock.time+this.game.input.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>this.game.input.recordLimit&&this._history.shift()))},move:function(a,b){var c,d=this.game.input;if(!d.pollLocked){if(void 0===b&&(b=!1),void 0!==a.button&&(this.button=a.button),b&&this.isMouse&&this.updateButtons(a),this.clientX=a.clientX,this.clientY=a.clientY,this.pageX=a.pageX,this.pageY=a.pageY,this.screenX=a.screenX,this.screenY=a.screenY,this.isMouse&&d.mouse.locked&&!b&&(this.rawMovementX=a.movementX||a.mozMovementX||a.webkitMovementX||0,this.rawMovementY=a.movementY||a.mozMovementY||a.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-0)*d.scale.x,this.y=(this.pageY-0)*d.scale.y,this.position.setTo(this.x,this.y),(d.multiInputOverride===f.MOUSE_OVERRIDES_TOUCH||d.multiInputOverride===f.MOUSE_TOUCH_COMBINE||d.multiInputOverride===f.TOUCH_OVERRIDES_MOUSE&&0===d.totalActivePointers)&&(d.activePointer=this,d.x=this.x,d.y=this.y,d.position.setTo(d.x,d.y),d.circle.x=d.x,d.circle.y=d.y),this.withinGame=!0,this.game.paused)return this;for(c=d.moveCallbacks.length;c--;)d.moveCallbacks[c].callback.call(d.moveCallbacks[c].context,this,this.x,this.y,b);return null!==this.targetObject&&this.targetObject.isDragged===!0?this.targetObject.update(this)===!1&&(this.targetObject=null):d.interactiveItems.total>0&&this.processInteractiveObjects(b),this}},processInteractiveObjects:function(a){for(var b=Number.MAX_VALUE,c=-1,d=null,e=this.game.input.interactiveItems.first;e;)e.checked=!1,e.validForInput(c,b,!1)&&(e.checked=!0,(a&&e.checkPointerDown(this,!0)||!a&&e.checkPointerOver(this,!0))&&(b=e.sprite.renderOrderID,c=e.priorityID,d=e)),e=this.game.input.interactiveItems.next;for(e=this.game.input.interactiveItems.first;e;)!e.checked&&e.validForInput(c,b,!0)&&(a&&e.checkPointerDown(this,!1)||!a&&e.checkPointerOver(this,!1))&&(b=e.sprite.renderOrderID,c=e.priorityID,d=e),e=this.game.input.interactiveItems.next;return null===d?this.targetObject&&(this.targetObject._pointerOutHandler(this),this.targetObject=null):null===this.targetObject?(this.targetObject=d,d._pointerOverHandler(this)):this.targetObject===d?d.update(this)===!1&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this),this.targetObject=d,this.targetObject._pointerOverHandler(this)),null!==this.targetObject},leave:function(a){this.withinGame=!1,this.move(a,!1)},stop:function(a){var b=this.game,c=b.input;return this._stateReset&&this.withinGame?void a.preventDefault():(this.timeUp=b.clock.time,(c.multiInputOverride===f.MOUSE_OVERRIDES_TOUCH||c.multiInputOverride===f.MOUSE_TOUCH_COMBINE||c.multiInputOverride===f.TOUCH_OVERRIDES_MOUSE&&0===c.totalActivePointers)&&(c.onUp.dispatch(this,a),this.duration>=0&&this.duration<=c.tapRate&&(this.timeUp-this.previousTapTime<c.doubleTapRate?c.onTap.dispatch(this,!0):c.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.isMouse?this.updateButtons(a):(this.isDown=!1,this.isUp=!0),this.id>0&&(this.active=!1),this.withinGame=b.scale.bounds.contains(a.pageX,a.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),this.isMouse===!1&&c.currentPointers--,c.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this)},justPressed:function(a){return a=a||this.game.input.justPressedRate,this.isDown===!0&&this.timeDown+a>this.game.clock.time},justReleased:function(a){return a=a||this.game.input.justReleasedRate,this.isUp&&this.timeUp+a>this.game.clock.time},addClickTrampoline:function(a,b,c,d){var e,f;if(this.isDown){for(e=this._clickTrampolines=this._clickTrampolines||[],f=0;f<e.length;f++)if(e[f].name===a){e.splice(f,1);break}e.push({name:a,targetObject:this.targetObject,callback:b,callbackContext:c,callbackArgs:d})}},processClickTrampolines:function(){var a,b,c=this._clickTrampolines;if(c){for(a=0;a<c.length;a++)b=c[a],b.targetObject===this._trampolineTargetObject&&b.callback.apply(b.callbackContext,b.callbackArgs);this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){this.isMouse===!1&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),Object.defineProperty(c.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(c.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),b.exports=c},{63:63,64:64,65:65,69:69,96:96}],71:[function(a,b){(function(c){function d(a,b,c,d,g,h){this.game=a,this.world=a.world,this.target=null,this.deadzone=null,this.view=new e(c,d,g,h),this.bounds=new e(c,d,g,h),this.smooth=!1,this.roundPx=!1,this.atLimit={x:!1,y:!1},this.totalInView=0,this._position=new f,this._smoothPosition=new f,this._targetPosition=new f}var e=a(97),f=a(96);d.FOLLOW_LOCKON=0,d.FOLLOW_SMOOTH=1,d.FOLLOW_TOPDOWN=2,d.FOLLOW_TOPDOWN_TIGHT=3,d.prototype.constructor=d,d.prototype.preUpdate=function(){this.totalInView=0},d.prototype.follow=function(a,b){void 0===b&&(b=d.FOLLOW_SMOOTH),this.target=a;var f;switch(b){case d.FOLLOW_TOPDOWN:f=c.Math.max(this.width,this.height)/4,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_TOPDOWN_TIGHT:f=c.Math.max(this.width,this.height)/8,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_SMOOTH:this.smooth=!0,this.deadzone=null;break;case d.FOLLOW_LOCKON:default:this.deadzone=null}},d.prototype.update=function(){this.target&&this.updateTarget(),this.bounds&&this.checkBounds(),this.roundPx&&this.view.floor(),this.displayObject.pivot.x=-this.view.x,this.displayObject.pivot.y=-this.view.y},d.prototype.updateTarget=function(){var a,b;this._targetPosition.copyFrom(this.target),this.deadzone?(this._edge=this._targetPosition.x-this.view.x,this._edge<this.deadzone.left?a=this._targetPosition.x-this.deadzone.left:this._edge>this.deadzone.right&&(a=this._targetPosition.x-this.deadzone.right),this._edge=this._targetPosition.y-this.view.y,this._edge<this.deadzone.top?b=this._targetPosition.y-this.deadzone.top:this._edge>this.deadzone.bottom&&(b=this._targetPosition.y-this.deadzone.bottom)):(a=-this._targetPosition.x,b=-this._targetPosition.y),this.smooth&&(this._smoothPosition=f.interpolate(this.view,{x:a,y:b},.04,this._smoothPosition),a=this._smoothPosition.x,b=this._smoothPosition.y),this.view.x=a,this.view.y=b},d.prototype.unfollow=function(){this.target=null},d.prototype.focusOn=function(a){this.setPosition(c.Math.round(-a.x),c.Math.round(-a.y))},d.prototype.focusOnXY=function(a,b){this.setPosition(c.Math.round(-a),c.Math.round(-b))},d.prototype.setBoundsToWorld=function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},d.prototype.checkBounds=function(){this.atLimit.x=!1,this.atLimit.y=!1,this.view.x<=this.bounds.x&&(this.atLimit.x=!0),this.view.right>=this.bounds.right&&(this.atLimit.x=!0),this.view.y<=this.bounds.top&&(this.atLimit.y=!0),this.view.bottom>=this.bounds.bottom&&(this.atLimit.y=!0)},d.prototype.setPosition=function(a,b){this.view.x=a,this.view.y=b,this.bounds&&this.checkBounds()},d.prototype.setSize=function(a,b){this.view.width=a,this.view.height=b},d.prototype.reset=function(){this.view.x=0,this.view.y=0},Object.defineProperty(d.prototype,"x",{get:function(){return this.view.x},set:function(a){this.view.x=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.view.y},set:function(a){this.view.y=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"position",{get:function(){return this._position.set(this.view.centerX,this.view.centerY),this._position},set:function(a){void 0!==a.x&&(this.view.x=a.x),void 0!==a.y&&(this.view.y=a.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"width",{get:function(){return this.view.width},set:function(a){this.view.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.view.height},set:function(a){this.view.height=a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{96:96,97:97}],72:[function(a,b){(function(c){function d(a){a||(a={}),this.config=a,this.width=a.width||800,this.height=a.height||600,this.enableDebug=a.enableDebug||!0,this.parent=a.parent||"",this.canvasID=a.canvasID||null,this.transparent=a.transparent||!1,this.autoResize=a.autoResize||!1,this.antialias=a.antialias||!1,this.forceFXAA=a.forceFXAA||!1,this.resolution=a.resolution||1,this.clearBeforeRender=a.clearBeforeRender||!0,this.preserveDrawingBuffer=a.preserveDrawingBuffer||!1,this.isBooted=!1,this.forceSingleUpdate=!1,this.lockRender=!1,this.currentUpdateID=0,this._deltaTime=0,this._lastCount=0,this._spiraling=0,this._kickstart=!0,this._nextFpsNotification=0,this._paused=!1,this._codePaused=!1,this.rnd=new o([""+c.Date.now()*c.Math.random()]),this.state=new p(this,new q),f.whenReady(this.boot,this)}var e=a("pixi"),f=a(106),g=a(105),h=a(107),i=a(114),j=a(99),k=a(98),l=a(65),m=a(75),n=a(78),o=a(124),p=a(77),q=a(76),r=a(74),s=a(118),t=a(102),u=a(104),v=a(100);d.prototype.constructor=d,d.prototype.boot=function(){this.isBooted||(this.isBooted=!0,this.scale=new r(this,this.width,this.height),this.stage=new m(this),this.setupRenderer(),this.world=new n(this),this.cache=new k(this),this.load=new j(this),this.clock=new i(this),this.tweens=new s(this),this.input=new l(this),this.sound=new u(this),this.particles=new t(this),this.net=new v(this),this.clock.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.raf=new h(this,!1),this._kickstart=!0,this.raf.start())},d.prototype.setupRenderer=function(){if(this.canvas=g.create(this.width,this.height,this.canvasID),f.webGL!==!0)throw Error("WebGL support required");this.renderer=new e.WebGLRenderer(this.width,this.height,{view:this.canvas,transparent:this.transparent,autoResize:this.autoResize,resolution:this.resolution,antialias:this.antialias,clearBeforeRender:this.clearBeforeRender,preserveDrawingBuffer:this.preserveDrawingBuffer}),g.addToDOM(this.canvas,this.parent,!1),g.setUserSelect(this.canvas,"none"),g.setTouchAction(this.canvas,"none")},d.prototype.update=function(a){var b,d;if(this.clock.update(a),this._kickstart)return this.updateLogic(1/this.clock.desiredFps),this.updateRender(this.clock.slowMotion*this.clock.desiredFps),void(this._kickstart=!1);if(this._spiraling>1&&!this.forceSingleUpdate)this.clock.time>this._nextFpsNotification&&(this._nextFpsNotification=this.clock.time+1e4),this._deltaTime=0,this._spiraling=0,this.updateRender(this.clock.slowMotion*this.clock.desiredFps);else{for(b=0,d=1e3*this.clock.slowMotion/this.clock.desiredFps,this._deltaTime+=c.Math.max(c.Math.min(3*d,this.clock.elapsed),0),this.updatesThisFrame=c.Math.floor(this._deltaTime/d),this.forceSingleUpdate&&(this.updatesThisFrame=c.Math.min(1,this.updatesThisFrame));this._deltaTime>=d&&(this._deltaTime-=d,this.currentUpdateID=b,this.updateLogic(1/this.clock.desiredFps),b++,!this.forceSingleUpdate||1!==b););b>this._lastCount?this._spiraling++:b<this._lastCount&&(this._spiraling=0),this._lastCount=b,this.updateRender(this._deltaTime/d)}},d.prototype.updateLogic=function(){this._paused?(this.scale.pauseUpdate(),this.state.pauseUpdate()):(this.scale.preUpdate(),this.world.camera.preUpdate(),this.state.preUpdate(),this.stage.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.input.update(),this.sound.update(),this.particles.update(),this.stage.postUpdate())},d.prototype.updateRender=function(){this.lockRender||this.renderer.render(this.stage)},d.prototype.destroy=function(){this.raf.stop(),this.state.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.sound.destroy(),this.state=null,this.cache=null,this.input=null,this.load=null,this.sound=null,this.stage=null,this.time=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{100:100,102:102,104:104,105:105,106:106,107:107,114:114,118:118,124:124,65:65,74:74,75:75,76:76,77:77,78:78,98:98,99:99,pixi:"pixi"}],73:[function(a,b){function c(a,b){void 0===typeof b&&(b=a.world),d.Container.call(this),this.game=a,this.z=0,this.type=e.GROUP,this.cursor=null,this.pendingDestroy=!1,this.exists=!0,b&&(this.z=b.children.length,b.addChild(this))}var d=a("pixi"),e=a(63);c.RETURN_NONE=0,c.RETURN_TOTAL=1,c.RETURN_CHILD=2,c.SORT_ASCENDING=-1,c.SORT_DESCENDING=1,c.prototype=Object.create(d.Container.prototype),c.prototype.constructor=c,c.prototype.add=function(a,b){return void 0===b&&(b=!1),a.parent!==this&&(this.addChild(a),a.z=this.children.length,!b&&a.onAddedToGroup&&a.onAddedToGroup(this),null===this.cursor&&(this.cursor=a)),a},c.prototype.getFirstExists=function(a){return"boolean"!=typeof a&&(a=!0),this.iterate("exists",a,c.RETURN_CHILD)},c.prototype.iterate=function(a,b,d,e,f,g){var h,i;if(d===c.RETURN_TOTAL&&0===this.children.length)return 0;for(h=0,i=0;i<this.children.length;i++)if(this.children[i][a]===b&&(h++,e&&(g?(g[0]=this.children[i],e.apply(f,g)):e.call(f,this.children[i])),d===c.RETURN_CHILD))return this.children[i];return d===c.RETURN_TOTAL?h:null},c.prototype.removeAll=function(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=!1),0!==this.children.length){var c;do!b&&this.children[0]&&this.children[0].onRemovedFromGroup&&this.children[0].onRemovedFromGroup(this),c=this.removeChild(this.children[0]),this.removeFromHash(c),a&&c&&c.destroy(!0);while(this.children.length>0);this.cursor=null}},c.prototype.preUpdate=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var a=this.children.length;a--;)this.children[a].preUpdate();return!0},c.prototype.update=function(){for(var a=this.children.length;a--;)this.children[a].update()},c.prototype.postUpdate=function(){for(var a=this.children.length;a--;)this.children[a].postUpdate()},c.prototype.destroy=function(a,b){null===this.game||this.ignoreDestroy||(void 0===a&&(a=!0),void 0===b&&(b=!1),this.onDestroy&&this.onDestroy(a,b),this.removeAll(a),this.cursor=null,this.filters=null,this.pendingDestroy=!1,b||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1,d.Container.prototype.destroy(this)))},b.exports=c},{63:63,pixi:"pixi"}],74:[function(a,b){(function(c){function d(a,b,g){this.game=a,this.dom={getScreenOrientation:function(){},getOffset:function(){},visualBounds:{width:c.Math.max(c.innerWidth,c.document.documentElement.clientWidth),height:c.Math.max(c.innerHeight,c.document.documentElement.clientHeight)}},this.dom.layoutBounds=this.dom.visualBounds,this.width=0,this.height=0,this.event=null,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.sourceAspectRatio=0,this.aspectRatio=0,this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new f,this.offset=new e,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.screenOrientation=this.dom.getScreenOrientation(),this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.scaleFactor=new e(1,1),this.scaleFactorInversed=new e(1,1),this.windowConstraints={right:"layout",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=d.RESIZE,this._fullScreenScaleMode=d.RESIZE,this.trackParentInterval=2e3,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new e(1,1),this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new f,this._userScaleFactor=new e(1,1),this._userScaleTrim=new e(0,0),this._booted=!1,this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._parentBounds=new f,this._tempBounds=new f,this._lastReportedCanvasSize=new f,this._lastReportedGameSize=new f,a.config&&this.parseConfig(a.config),this.setupScale(b,g)}var e=a(96),f=a(97),g=a(106),h=a(123),i=a(63);d.EXACT_FIT=0,d.NO_SCALE=1,d.SHOW_ALL=2,d.RESIZE=3,d.USER_SCALE=4,d.prototype={boot:function(){var a,b=this.compatibility;b.supportsFullScreen=g.fullscreen,g.desktop?(b.orientationFallback="screen",b.clickTrampoline="when-not-mouse"):(b.orientationFallback="",b.clickTrampoline=""),a=this,this._orientationChange=function(b){return a.orientationChange(b)},this._windowResize=function(b){return a.windowResize(b)},c.addEventListener("orientationchange",this._orientationChange,!1),c.addEventListener("resize",this._windowResize,!1),b.supportsFullScreen&&(this._fullScreenChange=function(b){return a.fullScreenChange(b)},this._fullScreenError=function(b){return a.fullScreenError(b)},c.document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.addEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this._booted=!0,this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(a){a.scaleMode&&(this._booted?this.scaleMode=a.scaleMode:this._pendingScaleMode=a.scaleMode),a.fullScreenScaleMode&&(this.fullScreenScaleMode=a.fullScreenScaleMode),a.fullScreenTarget&&(this.fullScreenTarget=a.fullScreenTarget)},setupScale:function(a,b){var d,e,g,h=new f;""!==this.game.parent&&("string"==typeof this.game.parent?d=c.document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(d=this.game.parent)),d?(this.parentNode=d,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds),h.width=this._parentBounds.width,h.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,h.width=this.dom.visualBounds.width,h.height=this.dom.visualBounds.height,this.offset.set(0,0)),e=0,g=0,"number"==typeof a?e=a:(this.parentScaleFactor.x=parseInt(a,10)/100,e=h.width*this.parentScaleFactor.x),"number"==typeof b?g=b:(this.parentScaleFactor.y=parseInt(b,10)/100,g=h.height*this.parentScaleFactor.y),this._gameSize.setTo(0,0,e,g),this.updateDimensions(e,g,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(a,b){this._gameSize.setTo(0,0,a,b),this.currentScaleMode!==d.RESIZE&&this.updateDimensions(a,b,!0),this.queueUpdate(!0)},setUserScale:function(a,b,c,d){this._userScaleFactor.setTo(a,b),this._userScaleTrim.setTo(0|c,0|d),this.queueUpdate(!0)},setResizeCallback:function(a,b){this.onResize=a,this.onResizeContext=b},signalSizeChange:function(){var a,b;f.sameDimensions(this,this._lastReportedCanvasSize)&&f.sameDimensions(this.game,this._lastReportedGameSize)||(a=this.width,b=this.height,this._lastReportedCanvasSize.setTo(0,0,a,b),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.currentScaleMode===d.RESIZE&&(this.game.state.resize(a,b),this.game.load.resize(a,b)))},setMinMax:function(a,b,c,d){this.minWidth=a,this.minHeight=b,void 0!==c&&(this.maxWidth=c),void 0!==d&&(this.maxHeight=d)},preUpdate:function(){var a,b,d,e,f,g,i;this.game.clock.time<this._lastUpdate+this._updateThrottle||(a=this._updateThrottle,this._updateThrottleReset=a>=400?0:100,this.dom.getOffset(this.game.canvas,this.offset),b=this._parentBounds.width,d=this._parentBounds.height,e=this.getParentBounds(this._parentBounds),f=e.width!==b||e.height!==d,g=this.updateOrientationState(),(f||g)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,e),this.updateLayout(),this.signalSizeChange()),i=2*this._updateThrottle,this._updateThrottle<a&&(i=c.Math.min(a,this._updateThrottleReset)),this._updateThrottle=h.clamp(i,25,this.trackParentInterval),this._lastUpdate=this.game.clock.time)},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(a,b,c){this.width=a*this.parentScaleFactor.x,this.height=b*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),c&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(a,b){void 0===b&&(b=!1),this.forceLandscape=a,this.forcePortrait=b,this.queueUpdate(!0)},classifyOrientation:function(a){return"portrait-primary"===a||"portrait-secondary"===a?"portrait":"landscape-primary"===a||"landscape-secondary"===a?"landscape":null},updateOrientationState:function(){var a,b,c=this.screenOrientation,d=this.incorrectOrientation;return this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait,a=c!==this.screenOrientation,b=d!==this.incorrectOrientation,b&&this.incorrectOrientation,a||b},orientationChange:function(a){this.event=a,this.queueUpdate(!0)},windowResize:function(a){this.event=a,this.queueUpdate(!0)},refresh:function(){this.queueUpdate(!0)},updateLayout:function(){var a,b=this.currentScaleMode;return b===d.RESIZE?void this.reflowGame():(this.compatibility.forceMinimumDocumentHeight&&(c.document.documentElement.style.minHeight=c.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():b===d.EXACT_FIT?this.setExactFit():b===d.SHOW_ALL?!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent?(this.setShowAll(!0),this.resetCanvas(),this.setShowAll()):this.setShowAll():b===d.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):b===d.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),this.compatibility.canExpandParent||b!==d.SHOW_ALL&&b!==d.USER_SCALE||(a=this.getParentBounds(this._tempBounds),this.width=c.Math.min(this.width,a.width),this.height=c.Math.min(this.height,a.height)),this.width=0|this.width,this.height=0|this.height,void this.reflowCanvas())},getParentBounds:function(a){var b,d,e,g=a||new f,h=this.boundingParent,i=this.dom.visualBounds,j=this.dom.layoutBounds;return h?(b=h.getBoundingClientRect(),g.setTo(b.left,b.top,b.width,b.height),d=this.windowConstraints,d.right&&(e="layout"===d.right?j:i,g.right=c.Math.min(g.right,e.width)),d.bottom&&(e="layout"===d.bottom?j:i,g.bottom=c.Math.min(g.bottom,e.height))):g.setTo(0,0,i.width,i.height),g.setTo(c.Math.round(g.x),c.Math.round(g.y),c.Math.round(g.width),c.Math.round(g.height)),g},alignCanvas:function(a,b){var d,e,f,g,h=this.getParentBounds(this._tempBounds),i=this.game.canvas,j=this.margin;a&&(j.left=j.right=0,d=i.getBoundingClientRect(),this.width<h.width&&!this.incorrectOrientation&&(e=d.left-h.x,f=h.width/2-this.width/2,f=c.Math.max(f,0),g=f-e,j.left=c.Math.round(g)),i.style.marginLeft=j.left+"px",0!==j.left&&(j.right=-(h.width-d.width-j.left),i.style.marginRight=j.right+"px")),b&&(j.top=j.bottom=0,d=i.getBoundingClientRect(),this.height<h.height&&!this.incorrectOrientation&&(e=d.top-h.y,
f=h.height/2-this.height/2,f=c.Math.max(f,0),g=f-e,j.top=c.Math.round(g)),i.style.marginTop=j.top+"px",0!==j.top&&(j.bottom=-(h.height-d.height-j.top),i.style.marginBottom=j.bottom+"px")),j.x=j.left,j.y=j.top},reflowGame:function(){this.resetCanvas("","");var a=this.getParentBounds(this._tempBounds);this.updateDimensions(a.width,a.height,!0)},reflowCanvas:function(){this.incorrectOrientation||(this.width=h.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=h.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(a,b){void 0===a&&(a=this.width+"px"),void 0===b&&(b=this.height+"px");var c=this.game.canvas;this.compatibility.noMargins||(c.style.marginLeft="",c.style.marginTop="",c.style.marginRight="",c.style.marginBottom=""),c.style.width=a,c.style.height=b},queueUpdate:function(a){a&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(a){},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(a){var b,d=this.getParentBounds(this._tempBounds),e=d.width,f=d.height;b=a?c.Math.max(f/this.game.height,e/this.game.width):c.Math.min(f/this.game.height,e/this.game.width),this.width=c.Math.round(this.game.width*b),this.height=c.Math.round(this.game.height*b)},setExactFit:function(){var a=this.getParentBounds(this._tempBounds);this.width=a.width,this.height=a.height,this.isFullScreen||(this.maxWidth&&(this.width=c.Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=c.Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var a=c.document.createElement("div");return a.style.margin="0",a.style.padding="0",a.style.background="#000",a},startFullScreen:function(a,b){var c,d,e,f,h,j;return this.isFullScreen?!1:this.compatibility.supportsFullScreen?"when-not-mouse"===this.compatibility.clickTrampoline&&(d=this.game.input,d.activePointer&&d.activePointer!==d.mousePointer&&(b||b!==!1))?void d.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[a,!1]):(void 0!==a&&this.game.renderType===i.CANVAS&&(this.game.stage.smoothed=a),e=this.fullScreenTarget,e||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),e=this._createdFullScreenTarget),f={targetElement:e},this._createdFullScreenTarget&&(h=this.game.canvas,j=h.parentNode,j.insertBefore(e,h),e.appendChild(h)),g.fullscreenKeyboard?e[g.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):e[g.requestFullscreen](),!0):(c=this,void setTimeout(function(){c.fullScreenError()},10))},stopFullScreen:function(){return this.isFullScreen&&this.compatibility.supportsFullScreen?(c.document[g.cancelFullscreen](),!0):!1},cleanupCreatedTarget:function(){var a,b=this._createdFullScreenTarget;b&&b.parentNode&&(a=b.parentNode,a.insertBefore(this.game.canvas,b),a.removeChild(b)),this._createdFullScreenTarget=null},prepScreenMode:function(a){var b=!!this._createdFullScreenTarget,c=this._createdFullScreenTarget||this.fullScreenTarget;a?(b||this.fullScreenScaleMode===d.EXACT_FIT)&&c!==this.game.canvas&&(this._fullScreenRestore={targetWidth:c.style.width,targetHeight:c.style.height},c.style.width="100%",c.style.height="100%"):(this._fullScreenRestore&&(c.style.width=this._fullScreenRestore.targetWidth,c.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(a){this.event=a,this.isFullScreen?(this.prepScreenMode(!0),this.updateLayout(),this.queueUpdate(!0)):(this.prepScreenMode(!1),this.cleanupCreatedTarget(),this.updateLayout(),this.queueUpdate(!0))},fullScreenError:function(a){this.event=a,this.cleanupCreatedTarget(),console.warn("ScaleManager: requestFullscreen failed or device does not support the Fullscreen API")},scaleSprite:function(a,b,d,e){var f,g,h,i,j;return void 0===b&&(b=this.width),void 0===d&&(d=this.height),void 0===e&&(e=!1),a&&a.scale?(a.scale.x=1,a.scale.y=1,a.width<=0||a.height<=0||0>=b||0>=d?a:(f=b,g=a.height*b/a.width,h=a.width*d/a.height,i=d,j=h>b,j=j?e:!e,j?(a.width=c.Math.floor(f),a.height=c.Math.floor(g)):(a.width=c.Math.floor(h),a.height=c.Math.floor(i)),a)):a},destroy:function(){this.game.onResume.remove(this._gameResumed,this),c.removeEventListener("orientationchange",this._orientationChange,!1),c.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(c.document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(d.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){return a!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=a),this._scaleMode}}),Object.defineProperty(d.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(a){return a!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=a,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=a),this._fullScreenScaleMode}}),Object.defineProperty(d.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(d.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(a){a!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(a){a!==this._pageAlignVertically&&(this._pageAlignVertically=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"isFullScreen",{get:function(){return!!(c.document.fullscreenElement||c.document.webkitFullscreenElement||c.document.mozFullScreenElement||c.document.msFullscreenElement)}}),Object.defineProperty(d.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(d.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{106:106,123:123,63:63,96:96,97:97}],75:[function(a,b){function c(a){d.Container.call(this),this.game=a,this.exists=!0,this.currentRenderOrderID=0}var d=a("pixi");c.prototype=Object.create(d.Container.prototype),c.prototype.constructor=c,c.prototype.boot=function(){this.checkVisibility()},c.prototype.preUpdate=function(){this.currentRenderOrderID=0;for(var a=0;a<this.children.length;a++)this.children[a].preUpdate()},c.prototype.update=function(){for(var a=this.children.length;a--;)this.children[a].update()},c.prototype.postUpdate=function(){var a;if(this.game.world.camera.target)for(this.game.world.camera.target.postUpdate(),this.game.world.camera.update(),a=this.children.length;a--;)this.children[a]!==this.game.world.camera.target&&this.children[a].postUpdate();else for(this.game.world.camera.update(),a=this.children.length;a--;)this.children[a].postUpdate()},c.prototype.checkVisibility=function(){},c.prototype.destroy=function(){d.Container.prototype.destroy.call(this)},b.exports=c},{pixi:"pixi"}],76:[function(a,b){function c(){this.game=null,this.key=""}c.prototype={init:function(){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},c.prototype.constructor=c,b.exports=c},{}],77:[function(a,b){function c(a,b){this.game=a,this.states={},this.backgroundStates={},this.current="",this._pendingBackgroundStates=[],this._pendingState=b||null,this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.callbackContext=null,this.backgroundStateContext=null}c.prototype.constructor=c,c.prototype.boot=function(){null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},c.prototype.add=function(a,b,c,d){return c=c||!1,d=d||!1,d===!1?this.states[a]=b:this.backgroundStates[a]=b,c&&(d?this._pendingBackgroundStates.push(a):this.game.isBooted?this.start(a):this._pendingState=a),b},c.prototype.remove=function(a){this.current===a&&(this.callbackContext=null),delete this.states[a]},c.prototype.checkState=function(a){return this.states[a]?!0:(console.warn("StateManager - No state found with the key: "+a),!1)},c.prototype.start=function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!1),this.checkState(a)&&(this._pendingState=a,this._clearWorld=b,this._clearCache=c,arguments.length>3&&(this._args=Array.prototype.splice.call(arguments,3)))},c.prototype.restart=function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!1),this._pendingState=this.current,this._clearWorld=a,this._clearCache=b,arguments.length>2&&(this._args=Array.prototype.slice.call(arguments,2))},c.prototype.clearCurrentState=function(){this.current&&(this.callbackContext.shutdown&&this.callbackContext.shutdown(),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.clock.removeAll(),this.game.scale.reset(this._clearWorld),this._clearWorld&&(this.game.world.shutdown(),this._clearCache===!0&&this.game.cache.destroy()))},c.prototype.clearBackgroundStates=function(){var a,b=this.backgroundStates;for(a in b)b[a].shutdown()},c.prototype.setCurrentBackgroundState=function(a){this.backgroundStateContext=this.backgroundStates[a],this.backgroundStateContext.game=this.game,this.backgroundStateContext.init(),this.game._kickstart=!0},c.prototype.setCurrentState=function(a){this.callbackContext=this.states[a],this.states[a].game=this.game,this.current=a,this._created=!1,this.callbackContext.init&&this.callbackContext.init(this._args),a===this._pendingState&&(this._args=[]),this.game._kickstart=!0},c.prototype.getCurrentState=function(){return this.states[this.current]},c.prototype.getBackgroundState=function(a){return this.backgroundStates[a]},c.prototype.preUpdate=function(){if(!this.backgroundStateContext)if(this._pendingBackgroundStates.length>0)this.setCurrentBackgroundState(this._pendingBackgroundStates.pop()),this.backgroundStateContext.preload?(this.backgroundStateContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.backgroundLoadComplete():this.game.load.start()):this.backgroundLoadComplete();else if(this._pendingState&&this.game.isBooted){this.current;if(this.clearCurrentState(),this.setCurrentState(this._pendingState),this.current!==this._pendingState)return;this._pendingState=null,this.callbackContext.preload?(this.game.load.reset(!0),this.callbackContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},c.prototype.loadComplete=function(){this._created===!1&&(this._created=!0,this.callbackContext.create&&this.callbackContext.create())},c.prototype.backgroundLoadComplete=function(){this.backgroundStateContext.create(),this.backgroundStateContext=null},c.prototype.pause=function(){this._created&&this.callbackContext.paused&&this.callbackContext.paused()},c.prototype.resume=function(){this._created&&this.callbackContext.resumed&&this.callbackContext.resumed()},c.prototype.update=function(){this.backgroundStateContext&&(this.backgroundStateContext.loadUpdate&&!this.game.load.hasLoaded?this.backgroundStateContext.loadUpdate():this.game.load.hasLoaded&&this.backgroundLoadComplete()),this._created?this.callbackContext.update&&this.callbackContext.update():this.callbackContext&&(this.callbackContext.loadUpdate&&!this.game.load.hasLoaded?this.callbackContext.loadUpdate():this.game.load.hasLoaded&&this.loadComplete())},c.prototype.pauseUpdate=function(){this._created?this.callbackContext.pauseUpdate&&this.callbackContext.pauseUpdate():this.callbackContext.loadUpdate&&this.callbackContext.loadUpdate()},c.prototype.preRender=function(a){this._created&&this.callbackContext.preRender&&this.callbackContext.preRender(a)},c.prototype.resize=function(a,b){this._created&&this.callbackContext.resize&&this.callbackContext.resize(a,b);for(var c in this.backgroundStates)this.backgroundStates[c].resize(a,b)},c.prototype.render=function(){this._created?this.callbackContext.render&&this.callbackContext.render():this.callbackContext.loadRender&&this.callbackContext.loadRender()},c.prototype.destroy=function(){this.clearCurrentState(),this.clearBackgroundStates(),this.callbackContext=null,this.game=null,this.states={},this.backgroundStates={},this._pendingState=null,this.current=""},Object.defineProperty(c.prototype,"hasPendingState",{get:function(){return null!==this._pendingState}}),b.exports=c},{}],78:[function(a,b){(function(c){function d(a){f.call(this,a,null),this.game=a,this.camera=null,this.bounds=new e(0,0,a.width,a.height),this._definedSize=!1,this._width=a.width,this._height=a.height}var e=a(97),f=a(73),g=a(71),h=a(96);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.background=new f(this.game,null),this.foreground=new f(this.game,null),this.camera=new g(this.game,0,0,0,this.game.width,this.game.height),this.camera.displayObject=this,this.camera.scale=this.scale,this.game.camera=this.camera,this.game.stage.addChild(this.background),this.game.stage.addChild(this.foreground),this.game.stage.addChild(this)},d.prototype.setBounds=function(a,b,d,e){this._definedSize=!0,this._width=d,this._height=e,this.bounds.setTo(a,b,d,e),this.pivot.x=-a,this.pivot.y=-b,this.camera.bounds&&this.camera.bounds.setTo(a,b,c.Math.max(d,this.game.width),c.Math.max(e,this.game.height))},d.prototype.update=function(){var a=this.background,b=this.foreground,c=this.camera.view;a.scale.x=this.scale.x/2+.5,a.scale.y=this.scale.y/2+.5,a.pivot.x=-c.x/10+this._width/2.2,a.pivot.y=-c.y/10+this._height/2.2,b.scale.x=this.scale.x/2+.5,b.scale.y=this.scale.y/2+.5,b.pivot.x=-c.x/4+this._width/2.6,b.pivot.y=-c.y/4+this._height/2.6,f.prototype.update.call(this)},d.prototype.resize=function(a,b){var d,e=this.game,f=c.Math.round;this._definedSize&&(a<this._width&&(a=this._width),b<this._height&&(b=this._height)),d=new h(f(e.width/2),f(e.height/2)),this.bounds.width=a,this.bounds.height=b,this.position.copy(d),this.background.position.copy(d),this.foreground.position.copy(d),this.camera.setBoundsToWorld()},d.prototype.stateChange=function(){this.x=0,this.y=0,this.camera.reset()},d.prototype.shutdown=function(){this.destroy(!0,!0)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{71:71,73:73,96:96,97:97}],79:[function(a,b){function c(a){this.type=e.GRAPHICS,d.Graphics.call(this),f.init.call(this,a,"",null)}var d=a("pixi"),e=a(63),f=a(87),g=a(88),h=a(90),j=a(96);c.prototype=Object.create(d.Graphics.prototype),c.prototype.constructor=c,f.install.call(c.prototype,["Mixin","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld"]),c.prototype.preUpdateInWorld=h.preUpdate,c.prototype.preUpdateCore=f.preUpdate,c.prototype.preUpdate=function(){this.preUpdateInWorld(),this.preUpdateCore()},c.prototype.destroy=function(a){this.clear(),g.prototype.destroy.call(this,a)},c.prototype.drawTriangle=function(a,b){var c,d,e,f,g;void 0===b&&(b=!1),c=new Polygon(a),b?(d=new j(this.game.camera.x-a[0].x,this.game.camera.y-a[0].y),e=new j(a[1].x-a[0].x,a[1].y-a[0].y),f=new j(a[1].x-a[2].x,a[1].y-a[2].y),g=f.cross(e),d.dot(g)>0&&this.drawPolygon(c)):this.drawPolygon(c)},c.prototype.drawTriangles=function(a,b,c){void 0===c&&(c=!1);var d=new j;if(point2=new j,point3=new j,points=[],i,b)if(a[0]instanceof j)for(i=0;i<b.length/3;i++)points.push(a[b[3*i]]),points.push(a[b[3*i+1]]),points.push(a[b[3*i+2]]),3===points.length&&(this.drawTriangle(points,c),points=[]);else for(i=0;i<b.length;i++)d.x=a[2*b[i]],d.y=a[2*b[i]+1],points.push(d.copyTo({})),3===points.length&&(this.drawTriangle(points,c),points=[]);else if(a[0]instanceof j)for(i=0;i<a.length/3;i++)this.drawTriangle([a[3*i],a[3*i+1],a[3*i+2]],c);else for(i=0;i<a.length/6;i++)d.x=a[6*i+0],d.y=a[6*i+1],point2.x=a[6*i+2],point2.y=a[6*i+3],point3.x=a[6*i+4],point3.y=a[6*i+5],this.drawTriangle([d,point2,point3],c)},b.exports=c},{63:63,87:87,88:88,90:90,96:96,pixi:"pixi"}],80:[function(a,b){(function(c){function d(a,b,d){e.call(this,a,b,d),this.position=new f(0,0),this.vector=new f(0,0),this.velocity=new f(0,0),this.drag=new f(0,0),this.angularVelocity=0,this.angularDrag=0,this.autoScale=!1,this.autoAlpha=!1,this.scaleData=null,this.alphaData=null,this.tintData=null,this._s=0,this._a=0,this._t=0,this.rotation=c.Math.random()*c.Math.PI}var e=a(82),f=a(96);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.game.clock.elapsedMS/1e3;this.rotation+=this.angularVelocity*a,this.position.add(this.velocity.x*this.vector.x*a,this.velocity.y*this.vector.y*a),this.autoScale||this.autoAlpha||this.autoTint||(this.exists=!1),this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1),this.autoTint&&(this._t--,this._t?this.tint=this.tintData[this._t].color:this.autoTint=!1)},d.prototype.onEmit=function(){},d.prototype.setAlphaData=function(a){this.alphaData=a,this._a=a.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},d.prototype.setScaleData=function(a){this.scaleData=a,this._s=a.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},d.prototype.setTintData=function(a){this.tintData=a,this._t=a.length-1,this.tint=this.tintData[this._t].color,this.autoTint=!0},d.prototype.reset=function(a,b){return this.position.set(a,b),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{82:82,96:96}],81:[function(a,b){function c(a,b,g){return a.cache.checkImageKey(b)?(void 0===g&&(g={}),void 0===g.chars&&(g.chars=c.TEXT_SET),this.type=e.RETROFONT,this.align="left",this.currentText="",this.grabData=[],this.fontSet=a.cache.getImage(b,!0).data,this.characterWidth=g.characterWidth||this.fontSet.width/g.chars.length,this.characterHeight=g.characterHeight||this.fontSet.height,this.characterSpacingX=g.xSpacing||0,this.characterSpacingY=g.ySpacing||0,this.characterPerRow=g.charsPerRow||this.fontSet.width/this.characterWidth,this.offsetX=g.xOffset||0,this.offsetY=g.yOffset||0,this.multiLine=!1,this.autoUpperCase=!0,this.fixedWidth=0,this.customSpacingX=0,this.customSpacingY=0,this.frameData=new h,a.cache.updateFrameData(b,this._generateRects(g.chars)),this.stamp=new f(a,b),void d.RenderTexture.call(this,a.renderer,100,100,d.SCALE_MODES.NEAREST)):(console.warn("RetroFont - Can't find font:"+b),!1)}var d=a("pixi"),e=a(63),f=a(82),g=a(61),h=a(62);c.prototype=Object.create(d.RenderTexture.prototype),c.prototype.constructor=c,c.ALIGN_LEFT="left",c.ALIGN_RIGHT="right",c.ALIGN_CENTER="center",c.TEXT_SET="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",c.prototype.setFixedWidth=function(a,b){void 0===b&&(b="left"),this.fixedWidth=a,this.align=b},c.prototype.setText=function(a,b,c,d,e,f){this.multiLine=b||!1,this.customSpacingX=c||0,this.customSpacingY=d||0,this.align=e||"left",f?this.autoUpperCase=!1:this.autoUpperCase=!0,a.length>0&&(this.text=a)},c.prototype.buildRetroFontText=function(){var a,b,d=0,e=0;if(this.clear(),this.multiLine)for(a=this.currentText.split("\n"),this.fixedWidth>0?this.resize(this.fixedWidth,a.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),a.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0),b=0;b<a.length;b++)d=0,this.align===c.ALIGN_RIGHT?d=this.width-a[b].length*(this.characterWidth+this.customSpacingX):this.align===c.ALIGN_CENTER&&(d=this.width/2-a[b].length*(this.characterWidth+this.customSpacingX)/2,d+=this.customSpacingX/2),0>d&&(d=0),this.pasteLine(a[b],d,e,this.customSpacingX),e+=this.characterHeight+this.customSpacingY;else this.fixedWidth>0?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this.currentText.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),d=0,this.align===c.ALIGN_RIGHT?d=this.width-this.currentText.length*(this.characterWidth+this.customSpacingX):this.align===c.ALIGN_CENTER&&(d=this.width/2-this.currentText.length*(this.characterWidth+this.customSpacingX)/2,d+=this.customSpacingX/2),0>d&&(d=0),this.pasteLine(this.currentText,d,0,this.customSpacingX);this.requiresReTint=!0},c.prototype.pasteLine=function(a,b,c,e){var f,g=new d.Matrix;for(f=0;f<a.length;f++)if(" "===a.charAt(f))b+=this.characterWidth+e;else if(this.grabData[a.charCodeAt(f)]>=0&&(g.tx=b,g.ty=c,this.stamp.frame=this.grabData[a.charCodeAt(f)],this.render(this.stamp,g,!1,!1),b+=this.characterWidth+e,b>this.width))break},c.prototype.getLongestLine=function(){var a,b,c=0;if(this.currentText.length>0)for(a=this.currentText.split("\n"),b=0;b<a.length;b++)a[b].length>c&&(c=a[b].length);return c},c.prototype.removeUnsupportedCharacters=function(a){var b,c,d,e="";for(b=0;b<this.currentText.length;b++)c=this.currentText[b],d=c.charCodeAt(0),(this.grabData[d]>=0||!a&&"\n"===c)&&(e=e.concat(c));return e},c.prototype.updateOffset=function(a,b){var c,d,e,f;if(this.offsetX!==a||this.offsetY!==b){for(c=a-this.offsetX,d=b-this.offsetY,e=this.game.cache.getFrameData(this.stamp.key).getFrames(),f=e.length;f--;)e[f].x+=c,e[f].y+=d;this.buildRetroFontText()}},c.prototype._generateRects=function(a){var b,c,d=this.offsetX,e=this.offsetY,f=0;for(c=0;c<a.length;c++)b=this.frameData.addFrame(new g(c,d,e,this.characterWidth,this.characterHeight)),this.grabData[a.charCodeAt(c)]=b.index,f++,f===this.characterPerRow?(f=0,d=this.offsetX,e+=this.characterHeight+this.characterSpacingY):d+=this.characterWidth+this.characterSpacingX;return this.frameData},Object.defineProperty(c.prototype,"text",{get:function(){return this.currentText},set:function(a){var b;b=this.autoUpperCase?a.toUpperCase():a,b!==this.currentText&&(this.currentText=b,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())}}),Object.defineProperty(c.prototype,"smoothed",{get:function(){return this.stamp.smoothed},set:function(a){this.stamp.smoothed=a,this.buildRetroFontText()}}),b.exports=c},{61:61,62:62,63:63,82:82,pixi:"pixi"}],82:[function(a,b){function c(a,b,c){b=b||null,c=c||null,this.type=e.SPRITE,d.Sprite.call(this),f.init.call(this,a,b,c)}var d=a("pixi"),e=a(63),f=(a(96),a(97),a(87)),g=a(90);c.prototype=Object.create(d.Sprite.prototype),c.prototype.constructor=c,f.install.call(c.prototype,["Mixin","Animation","AutoCull","Bounds","Destroy","FixedToCamera","LoadTexture","InWorld","InputEnabled"]),c.prototype.preUpdateCore=f.preUpdate,c.prototype.preUpdateInWorld=g.preUpdate,c.prototype.preUpdate=function(){this.preUpdateInWorld(),this.preUpdateCore()},b.exports=c},{63:63,87:87,90:90,96:96,97:97,pixi:"pixi"}],83:[function(a,b){function c(a,b,c,h){b=b||null,c=c||null,h=h||[],this.points=[],this._hasUpdateAnimation=!1,this._updateAnimationCallback=null,this.type=e.STRIP,d.mesh.Rope.call(this,a.cache.getItem("__default",f.TEXTURE).texture,h),g.init.call(this,a,b,c)}var d=a("pixi"),e=a(63),f=a(98),g=a(87),h=a(90);c.prototype=Object.create(d.mesh.Rope.prototype),c.prototype.constructor=c,g.install.call(c.prototype,["Mixin","AutoCull","Bounds","Destroy","LoadTexture","InWorld"]),c.prototype.preUpdateCore=g.preUpdate,c.prototype.preUpdateInWorld=h.preUpdate,c.prototype.preUpdate=function(){this.preUpdateInWorld(),this.preUpdateCore()},c.prototype.update=function(){this._hasUpdateAnimation&&this.updateAnimation.call(this)},Object.defineProperty(c.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(a){a&&"function"==typeof a?(this._hasUpdateAnimation=!0,this._updateAnimation=a):(this._hasUpdateAnimation=!1,this._updateAnimation=null)}}),b.exports=c},{63:63,87:87,90:90,98:98,pixi:"pixi"}],84:[function(a,b){function c(){}c.prototype={play:function(a,b,c,d){return this.animations?this.animations.play(a,b,c,d):void 0}},b.exports=c},{}],85:[function(a,b){function c(){}c.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},b.exports=c},{}],86:[function(a,b){function c(){}c.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},left:{get:function(){return this.x-this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX}},top:{get:function(){return this.y-this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY}}},b.exports=c},{}],87:[function(a,b){function c(){}var d=a(121),e=a(96),f=(a(97),a(59)),g=a(93),h=a(84),i=a(92),j=a(85),k=a(90),l=a(86),m=a(91),n=a(89),o=a(88);c.modules={Mixin:g,Animation:h,LoadTexture:i,AutoCull:j,InWorld:k,Bounds:l,InputEnabled:m,FixedToCamera:n,Destroy:o},c.install=function(a){var b,e,f;for(d.mixinPrototype(this,c.prototype),this.components={},f=0;f<a.length;f++)b=a[f],e="Destroy"===b?!0:!1,d.mixinPrototype(this,c.modules[b].prototype,e),this.components[b]=!0},c.init=function(a,b,c){this.game=a,this.key=b,this.components.Animation&&(this.animations=new f(this)),this.components.LoadTexture&&null!==b&&this.loadTexture(b,c),this.components.FixedToCamera&&(this.cameraOffset=new e(this.x,this.y))},c.preUpdate=function(){return this.pendingDestroy?void this.destroy():this.exists&&this.parent.exists?(this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),!0):(this.renderOrderID=-1,!1)},c.prototype={game:null,name:"",components:{},z:0,events:void 0,animations:void 0,key:"",world:null,debug:!1,renderOrderID:0,fresh:!0,pendingDestroy:!1,previousPosition:null,previousRotation:0,_exists:!0,exists:{get:function(){return this._exists},set:function(a){a?(this._exists=!0,this.visible=!0):(this._exists=!1,this.visible=!1)}},update:function(){},postUpdate:function(){this.components.FixedToCamera&&n.postUpdate.call(this)}},b.exports=c},{121:121,59:59,84:84,85:85,86:86,88:88,89:89,90:90,91:91,92:92,93:93,96:96,97:97}],88:[function(a,b){function c(){}var d=a("pixi");c.prototype={destroyPhase:!1,destroy:function(a){if(null!==this.game&&!this.destroyPhase){void 0===a&&(a=!0),this.destroyPhase=!0,this.events&&this.events.onDestroy$dispatch(this),this.parent&&(this.parent instanceof Phaser.Group?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy();var b=this.children.length;if(a)for(;b--;)this.children[b].destroy(a);else for(;b--;)this.removeChild(this.children[b]);this._frame&&(this._frame=null),this.alive=!1,this.exists=!1,this.visible=!1,this.game=null,this.renderable=!1,d.Sprite.destroy(this),this.destroyPhase=!1,this.pendingDestroy=!1}}},b.exports=c},{pixi:"pixi"}],89:[function(a,b){function c(){}var d=a(96);c.postUpdate=function(){var a=this.game;this.fixedToCamera&&(this.position.x=-a.camera.view.x+this.cameraOffset.x,this.position.y=-a.camera.view.y+this.cameraOffset.y)},c.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(a){a?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new d},b.exports=c},{96:96}],90:[function(a,b){function c(){}var d=a(97);c.preUpdate=function(){var a;return(this.autoCull||this.checkWorldBounds)&&(this.autoCullBounds.copyFrom(this.getBounds()),this.autoCullBounds.x+=this.game.camera.view.x,this.autoCullBounds.y+=this.game.camera.view.y,this.autoCull&&((a=this.game.world.camera.view.intersects(this.autoCullBounds))?(this.renderable=!0,this.game.world.camera.totalInView++):this.renderable=!1),this.checkWorldBounds&&(this._outOfBoundsFired&&a?(this._outOfBoundsFired=!1,this.onEnterBounds&&this.onEnterBounds()):this._outOfBoundsFired||a||(this._outOfBoundsFired=!0,this.onOutOfBounds&&this.onOutOfBounds()))),!0},c.prototype={autoCullBounds:new d,checkWorldBounds:!1,outOfBoundsKill:!1,_outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},b.exports=c},{97:97}],91:[function(a,b){function c(){}var d=a(66);c.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(a){a?null===this.input?(this.input=new d(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},b.exports=c},{66:66}],92:[function(a,b){function c(){}var d=a("pixi"),e=a(97);c.prototype={customRender:!1,_frame:null,loadTexture:function(a,b,c){b=b||0,(c||void 0===c)&&this.animations&&this.animations.stop(),this.key=a,this.customRender=!1;var f,g=this.game.cache,h=!0,i=!this.texture.baseTexture.scaleMode;a instanceof d.RenderTexture||a instanceof d.Texture?this.texture=a:(f=g.getImage(a,!0),this.key=f.key,this.texture=new d.Texture(f.base),this.animations&&(h=!this.animations.loadFrameData(f.frameData,b))),h&&(this._frame=e.clone(this.texture.frame)),i||(this.texture.baseTexture.scaleMode=1),f.base.isPowerOfTwo&&(f.base.mipmap=!0)},setFrame:function(a){this._frame=a,this.texture.frame.x=a.x,this.texture.frame.y=a.y,this.texture.frame.width=a.width,this.texture.frame.height=a.height,this.texture.crop.x=a.x,this.texture.crop.y=a.y,this.texture.crop.width=a.width,this.texture.crop.height=a.height,a.trimmed?(this.texture.trim?(this.texture.trim.x=a.spriteSourceSizeX,this.texture.trim.y=a.spriteSourceSizeY,this.texture.trim.width=a.sourceSizeW,this.texture.trim.height=a.sourceSizeH):this.texture.trim={x:a.spriteSourceSizeX,y:a.spriteSourceSizeY,width:a.sourceSizeW,height:a.sourceSizeH},this.texture.width=a.sourceSizeW,this.texture.height=a.sourceSizeH,this.texture.frame.width=a.sourceSizeW,this.texture.frame.height=a.sourceSizeH):!a.trimmed&&this.texture.trim&&(this.texture.trim=null),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(a,b,c){this.texture.frame.resize(b,c),this.texture.setFrame(this.texture.frame);
},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(a){this.animations.frame=a}}},b.exports=c},{97:97,pixi:"pixi"}],93:[function(a,b){function c(){}var d=a(121);c.prototype={mixinPrototype:function(a){d.mixinPrototype(this,a,!0)}},b.exports=c},{121:121}],94:[function(a,b){(function(c){function d(a,b,c){a=a||0,b=b||0,c=c||0,this.x=a,this.y=b,this._diameter=c,this._radius=0,c>0&&(this._radius=.5*c),this.type=f.CIRCLE}var e=a("pixi"),f=a(63),g=a(96),h=a(97),i=a(123);d.prototype={circumference:function(){return 2*(i.PI*this._radius)},random:function(a){var b,d,e,f,h;return void 0===a&&(a=new g),b=2*c.Math.PI*c.Math.random(),d=c.Math.random()+c.Math.random(),e=d>1?2-d:d,f=e*c.Math.cos(b),h=e*c.Math.sin(b),a.x=this.x+f*this.radius,a.y=this.y+h*this.radius,a},getBounds:function(){return new h(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(a,b,c){return this.x=a,this.y=b,this._diameter=c,this._radius=.5*c,this},copyFrom:function(a){return this.setTo(a.x,a.y,a.diameter)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.diameter=this._diameter,a},distance:function(a,b){var d=i.distance(this.x,this.y,a.x,a.y);return b?c.Math.round(d):d},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.diameter):a.setTo(this.x,this.y,this.diameter),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c){return d.circumferencePoint(this,a,b,c)},offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},toString:function(){return"[{Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"diameter",{get:function(){return this._diameter},set:function(a){a>0&&(this._diameter=a,this._radius=.5*a)}}),Object.defineProperty(d.prototype,"radius",{get:function(){return this._radius},set:function(a){a>0&&(this._radius=a,this._diameter=2*a)}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.x-this._radius},set:function(a){a>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this._radius},set:function(a){a<this.x?(this._radius=0,this._diameter=0):this.radius=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y-this._radius},set:function(a){a>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-a}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(a){a<this.y?(this._radius=0,this._diameter=0):this.radius=a-this.y}}),Object.defineProperty(d.prototype,"area",{get:function(){return this._radius>0?c.Math.PI*this._radius*this._radius:0}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this._diameter},set:function(a){a===!0&&this.setTo(0,0,0)}}),d.contains=function(a,b,c){var d,e;return a.radius>0&&b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom?(d=(a.x-b)*(a.x-b),e=(a.y-c)*(a.y-c),d+e<=a.radius*a.radius):!1},d.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.diameter==b.diameter},d.intersects=function(a,b){return i.distance(a.x,a.y,b.x,b.y)<=a.radius+b.radius},d.circumferencePoint=function(a,b,d,e){return void 0===d&&(d=!1),void 0===e&&(e=new g),d===!0&&(b=i.degToRad(b)),e.x=a.x+a.radius*c.Math.cos(b),e.y=a.y+a.radius*c.Math.sin(b),e},d.intersectsRectangle=function(a,b){var d,e,f,g,h,i,j,k=c.Math.abs(a.x-b.x-b.halfWidth),l=b.halfWidth+a.radius;return k>l?!1:(d=c.Math.abs(a.y-b.y-b.halfHeight),e=b.halfHeight+a.radius,d>e?!1:k<=b.halfWidth||d<=b.halfHeight?!0:(f=k-b.halfWidth,g=d-b.halfHeight,h=f*f,i=g*g,j=a.radius*a.radius,j>=h+i))},e.Circle=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{123:123,63:63,96:96,97:97,pixi:"pixi"}],95:[function(a,b){(function(c){function d(a,b,c,d){a=a||0,b=b||0,c=c||0,d=d||0,this.x=a,this.y=b,this.width=c,this.height=d,this.type=f.ELLIPSE}var e=a("pixi"),f=a(63),g=a(97),h=a(96);d.prototype={setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},getBounds:function(){return new g(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c){return d.circumferencePoint(this,a,b,c)},random:function(a){var b,d;return void 0===a&&(a=new h),b=c.Math.random()*c.Math.PI*2,d=c.Math.random(),a.x=c.Math.sqrt(d)*c.Math.cos(b),a.y=c.Math.sqrt(d)*c.Math.sin(b),a.x=this.x+a.x*this.width/2,a.y=this.y+a.y*this.height/2,a},toString:function(){return"[{Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"left",{get:function(){return this.x},set:function(a){this.x=a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},set:function(a){this.y=a}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),d.contains=function(a,b,c){var d,e;return a.width<=0||a.height<=0?!1:(d=(b-a.x)/a.width-.5,e=(c-a.y)/a.height-.5,d*=d,e*=e,.25>d+e)},d.circumferencePoint=function(a,b,d,e){return void 0===d&&(d=!1),void 0===e&&(e=new h),d===!0&&(b=c.Math.degToRad(b)),e.x=a.x+a.width*c.Math.cos(b),e.y=a.y+a.height*c.Math.sin(b),e},e.Ellipse=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{63:63,96:96,97:97,pixi:"pixi"}],96:[function(a,b){(function(c){function d(a,b){a=a||0,b=b||0,this.x=a,this.y=b,this.type=f.POINT}var e=a("pixi"),f=a(63),g=a(123);d.prototype={copyFrom:function(a){return this.setTo(a.x,a.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(a,b){return this.x=a||0,this.y=b||(0!==b?this.x:0),this},set:function(a,b){return this.x=a||0,this.y=b||(0!==b?this.x:0),this},add:function(a,b){return this.x+=a,this.y+=b,this},subtract:function(a,b){return this.x-=a,this.y-=b,this},multiply:function(a,b){return this.x*=a,this.y*=b,this},divide:function(a,b){return this.x/=a,this.y/=b,this},clampX:function(a,b){return this.x=g.clamp(this.x,a,b),this},clampY:function(a,b){return this.y=g.clamp(this.y,a,b),this},clamp:function(a,b){return this.x=g.clamp(this.x,a,b),this.y=g.clamp(this.y,a,b),this},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y):a.setTo(this.x,this.y),a},copyTo:function(a){return a.x=this.x,a.y=this.y,a},distance:function(a,b){return d.distance(this,a,b)},equals:function(a){return a.x===this.x&&a.y===this.y},angle:function(a,b){return void 0===b&&(b=!1),b?g.radToDeg(c.Math.atan2(a.y-this.y,a.x-this.x)):c.Math.atan2(a.y-this.y,a.x-this.x)},rotate:function(a,b,c,e,f){return d.rotate(this,a,b,c,e,f)},getMagnitude:function(){return c.Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(a){return this.normalize().multiply(a,a)},normalize:function(){if(!this.isZero()){var a=this.getMagnitude();this.x/=a,this.y/=a}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},floor:function(){return this.setTo(c.Math.floor(this.x),c.Math.floor(this.y))},ceil:function(){return this.setTo(c.Math.ceil(this.x),c.Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},d.prototype.constructor=d,d.add=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x+b.x,c.y=a.y+b.y,c},d.subtract=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x-b.x,c.y=a.y-b.y,c},d.multiply=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x*b.x,c.y=a.y*b.y,c},d.divide=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x/b.x,c.y=a.y/b.y,c},d.equals=function(a,b){return a.x===b.x&&a.y===b.y},d.angle=function(a,b){return c.Math.atan2(a.y-b.y,a.x-b.x)},d.negative=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.x,-a.y)},d.multiplyAdd=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+b.x*c,a.y+b.y*c)},d.interpolate=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+(b.x-a.x)*c,a.y+(b.y-a.y)*c)},d.perp=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.y,a.x)},d.rperp=function(a,b){return void 0===b&&(b=new d),b.setTo(a.y,-a.x)},d.distance=function(a,b,d){var e=g.distance(a.x,a.y,b.x,b.y);return d?c.Math.round(e):e},d.project=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b)/b.getMagnitudeSq();return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.projectUnit=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b);return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.normalRightHand=function(a,b){return void 0===b&&(b=new d),b.setTo(-1*a.y,a.x)},d.normalize=function(a,b){void 0===b&&(b=new d);var c=a.getMagnitude();return 0!==c&&b.setTo(a.x/c,a.y/c),b},d.rotate=function(a,b,d,e,f,h){var i,j,k,l,m;return f&&(e=g.degToRad(e)),void 0===h?(a.subtract(b,d),i=c.Math.sin(e),j=c.Math.cos(e),k=j*a.x-i*a.y,l=i*a.x+j*a.y,a.x=k+b,a.y=l+d):(m=e+c.Math.atan2(a.y-d,a.x-b),a.x=b+h*c.Math.cos(m),a.y=d+h*c.Math.sin(m)),a},d.centroid=function(a,b){var c,e;if(void 0===b&&(b=new d),"[object Array]"!==Object.prototype.toString.call(a))throw Error("Point. Parameter 'points' must be an array");if(c=a.length,1>c)throw Error("Point. Parameter 'points' array must not be empty");if(1===c)return b.copyFrom(a[0]),b;for(e=0;c>e;e++)d.add(b,a[e],b);return b.divide(c,c),b},d.parse=function(a,b,c){b=b||"x",c=c||"y";var e=new d;return a[b]&&(e.x=parseInt(a[b],10)),a[c]&&(e.y=parseInt(a[c],10)),e},e.Point=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{123:123,63:63,pixi:"pixi"}],97:[function(a,b){function c(a,b,c,e){a=a||0,b=b||0,c=c||0,e=e||0,this.x=a,this.y=b,this.width=c,this.height=e,this.type=d.RECTANGLE}var d=a(63),e=a(96);c.prototype={offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},scale:function(a,b){return void 0===b&&(b=a),this.width*=a,this.height*=b,this},centerOn:function(a,b){return this.centerX=a,this.centerY=b,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},inflate:function(a,b){return c.inflate(this,a,b)},size:function(a){return c.size(this,a)},resize:function(a,b){return this.width=a,this.height=b,this},clone:function(a){return c.clone(this,a)},contains:function(a,b){return c.contains(this,a,b)},containsRect:function(a){return c.containsRect(a,this)},equals:function(a){return c.equals(this,a)},intersection:function(a,b){return c.intersection(this,a,b)},intersects:function(a){return c.intersects(this,a)},intersectsRaw:function(a,b,d,e,f){return c.intersectsRaw(this,a,b,d,e,f)},union:function(a,b){return c.union(this,a,b)},random:function(a){return void 0===a&&(a=new e),a.x=this.randomX,a.y=this.randomY,a},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(c.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(c.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(c.prototype,"bottomLeft",{get:function(){return new e(this.x,this.bottom)},set:function(a){this.x=a.x,this.bottom=a.y}}),Object.defineProperty(c.prototype,"bottomRight",{get:function(){return new e(this.right,this.bottom)},set:function(a){this.right=a.x,this.bottom=a.y}}),Object.defineProperty(c.prototype,"left",{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}}),Object.defineProperty(c.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(c.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(c.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(c.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(a){this.x=a-this.halfWidth}}),Object.defineProperty(c.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(a){this.y=a-this.halfHeight}}),Object.defineProperty(c.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(c.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(c.prototype,"top",{get:function(){return this.y},set:function(a){a>=this.bottom?(this.height=0,this.y=a):this.height=this.bottom-a}}),Object.defineProperty(c.prototype,"topLeft",{get:function(){return new e(this.x,this.y)},set:function(a){this.x=a.x,this.y=a.y}}),Object.defineProperty(c.prototype,"topRight",{get:function(){return new e(this.x+this.width,this.y)},set:function(a){this.right=a.x,this.y=a.y}}),Object.defineProperty(c.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),c.inflate=function(a,b,c){return a.x-=b,a.width+=2*b,a.y-=c,a.height+=2*c,a},c.inflatePoint=function(a,b){return c.inflate(a,b.x,b.y)},c.size=function(a,b){return void 0===b||null===b?b=new e(a.width,a.height):b.setTo(a.width,a.height),b},c.clone=function(a,b){return void 0===b||null===b?b=new c(a.x,a.y,a.width,a.height):b.setTo(a.x,a.y,a.width,a.height),b},c.contains=function(a,b,c){return a.width<=0||a.height<=0?!1:b>=a.x&&b<a.right&&c>=a.y&&c<a.bottom},c.containsRaw=function(a,b,c,d,e,f){return e>=a&&a+c>e&&f>=b&&b+d>f},c.containsPoint=function(a,b){return c.contains(a,b.x,b.y)},c.containsRect=function(a,b){return a.volume>b.volume?!1:a.x>=b.x&&a.y>=b.y&&a.right<b.right&&a.bottom<b.bottom},c.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.width==b.width&&a.height==b.height},c.sameDimensions=function(a,b){return a.width===b.width&&a.height===b.height},c.intersection=function(a,b,d){return void 0===d&&(d=new c),c.intersects(a,b)&&(d.x=Math.max(a.x,b.x),d.y=Math.max(a.y,b.y),d.width=Math.min(a.right,b.right)-d.x,d.height=Math.min(a.bottom,b.bottom)-d.y),d},c.intersects=function(a,b){return a.width<=0||a.height<=0||b.width<=0||b.height<=0?!1:!(a.right<b.x||a.bottom<b.y||a.x>b.right||a.y>b.bottom)},c.intersectsRaw=function(a,b,c,d,e,f){return void 0===f&&(f=0),!(b>a.right+f||c<a.left-f||d>a.bottom+f||e<a.top-f)},c.union=function(a,b,d){return void 0===d&&(d=new c),d.setTo(Math.min(a.x,b.x),Math.min(a.y,b.y),Math.max(a.right,b.right)-Math.min(a.left,b.left),Math.max(a.bottom,b.bottom)-Math.min(a.top,b.top))},c.aabb=function(a,b){void 0===b&&(b=new c);var d=Number.MIN_VALUE,e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MAX_VALUE;return a.forEach(function(a){a.x>d&&(d=a.x),a.x<e&&(e=a.x),a.y>f&&(f=a.y),a.y<g&&(g=a.y)}),b.setTo(e,g,d-e,f-g),b},b.exports=c},{63:63,96:96}],98:[function(a,b){function c(a){this.game=a,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this._cacheMap=[],this._cacheMap[c.CANVAS]=this._cache.canvas,this._cacheMap[c.IMAGE]=this._cache.image,this._cacheMap[c.TEXTURE]=this._cache.texture,this._cacheMap[c.SOUND]=this._cache.sound,this._cacheMap[c.TEXT]=this._cache.text,this._cacheMap[c.PHYSICS]=this._cache.physics,this._cacheMap[c.TILEMAP]=this._cache.tilemap,this._cacheMap[c.BINARY]=this._cache.binary,this._cacheMap[c.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[c.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[c.JSON]=this._cache.json,this._cacheMap[c.XML]=this._cache.xml,this._cacheMap[c.VIDEO]=this._cache.video,this._cacheMap[c.SHADER]=this._cache.shader,this._cacheMap[c.RENDER_TEXTURE]=this._cache.renderTexture,this.addDefaultImage(),this.addDefaultTexture(),this.addMissingImage()}var d=a(61),e=a(62),f=a(60),g=a("pixi");c.CANVAS=1,c.IMAGE=2,c.TEXTURE=3,c.SOUND=4,c.TEXT=5,c.PHYSICS=6,c.TILEMAP=7,c.BINARY=8,c.BITMAPDATA=9,c.BITMAPFONT=10,c.JSON=11,c.XML=12,c.VIDEO=13,c.SHADER=14,c.RENDER_TEXTURE=15,c.prototype={addCanvas:function(a,b,c){void 0===c&&(c=b.getContext("2d")),this._cache.canvas[a]={canvas:b,context:c}},addImage:function(a,b,c){this.checkImageKey(a)&&this.removeImage(a);var f=new g.BaseTexture(c),h={key:a,url:b,data:c,base:f,frame:new d(0,0,0,c.width,c.height,a),frameData:new e};h.frameData.addFrame(new d(0,0,0,c.width,c.height,b)),this._cache.image[a]=h,this._resolveURL(b,h),g.utils.BaseTextureCache[a]=f,f.resolution=g.utils.getResolutionOfUrl(b)},addDefaultImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",this.addImage("__default",null,a)},addMissingImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",this.addImage("__missing",null,a)},addDefaultTexture:function(){var a=this.getImage("__default",!0).base,b=new g.Texture(a);this.addTexture("__default",b)},addSound:function(a,b,c,d,e){void 0===d&&(d=!0,e=!1),void 0===e&&(d=!1,e=!0);var f=!1;e&&(f=!0),this._cache.sound[a]={url:b,data:c,isDecoding:!1,decoded:f,webAudio:d,audioTag:e,locked:this.game.sound.touchLocked},this._resolveURL(b,this._cache.sound[a])},addText:function(a,b,c){this._cache.text[a]={url:b,data:c},this._resolveURL(b,this._cache.text[a])},addTilemap:function(a,b,c){this._cache.tilemap[a]={url:b,data:c},this._resolveURL(b,this._cache.tilemap[a])},addBinary:function(a,b){this._cache.binary[a]=b},addBitmapData:function(a,b,c){return b.key=a,void 0===c&&(c=new e,c.addFrame(b.textureFrame)),this._cache.bitmapData[a]={data:b,frameData:c},b},addJSON:function(a,b,c){this._cache.json[a]={url:b,data:c},this._resolveURL(b,this._cache.json[a])},addXML:function(a,b,c){this._cache.xml[a]={url:b,data:c},this._resolveURL(b,this._cache.xml[a])},addShader:function(a,b,c){this._cache.shader[a]={url:b,data:c},this._resolveURL(b,this._cache.shader[a])},addRenderTexture:function(a,b){this._cache.renderTexture[a]={texture:b,frame:new d(0,0,0,b.width,b.height,"","")}},addTexture:function(a,b){this._cache.texture[a]={texture:b}},addSpriteSheet:function(a,b,c,d,e,h,i,j){void 0===h&&(h=-1),void 0===i&&(i=0),void 0===j&&(j=0);var k={key:a,url:b,data:c,frameWidth:d,frameHeight:e,margin:i,spacing:j,base:new g.BaseTexture(c),frameData:f.spriteSheet(this.game,c,d,e,h,i,j)};this._cache.image[a]=k,this._resolveURL(b,k)},reloadSound:function(a){var b=this,c=this.getSound(a);c&&(c.data.src=c.url,c.data.addEventListener("canplaythrough",function(){return b.reloadSoundComplete(a)},!1),c.data.load())},reloadSoundComplete:function(a){var b=this.getSound(a);b&&(b.locked=!1,this.onSoundUnlock.dispatch(a))},updateSound:function(a,b,c){var d=this.getSound(a);d&&(d[b]=c)},decodedSound:function(a,b){var c=this.getSound(a);c.data=b,c.decoded=!0,c.isDecoding=!1},isSoundDecoded:function(a){var b=this.getItem(a,c.SOUND,"isSoundDecoded");return b?b.decoded:void 0},isSoundReady:function(a){var b=this.getItem(a,c.SOUND,"isSoundDecoded");return b?b.decoded&&!this.game.sound.touchLocked:void 0},checkKey:function(a,b){return this._cacheMap[a][b]?!0:!1},checkURL:function(a){return this._urlMap[this._resolveURL(a)]?!0:!1},checkCanvasKey:function(a){return this.checkKey(c.CANVAS,a)},checkImageKey:function(a){return this.checkKey(c.IMAGE,a)},checkTextureKey:function(a){return this.checkKey(c.TEXTURE,a)},checkSoundKey:function(a){return this.checkKey(c.SOUND,a)},checkTextKey:function(a){return this.checkKey(c.TEXT,a)},checkTilemapKey:function(a){return this.checkKey(c.TILEMAP,a)},checkBinaryKey:function(a){return this.checkKey(c.BINARY,a)},checkBitmapDataKey:function(a){return this.checkKey(c.BITMAPDATA,a)},checkJSONKey:function(a){return this.checkKey(c.JSON,a)},checkXMLKey:function(a){return this.checkKey(c.XML,a)},checkShaderKey:function(a){return this.checkKey(c.SHADER,a)},checkRenderTextureKey:function(a){return this.checkKey(c.RENDER_TEXTURE,a)},getItem:function(a,b,c,d){return this.checkKey(b,a)?void 0===d?this._cacheMap[b][a]:this._cacheMap[b][a][d]:(c&&console.warn("Cache."+c+': Key "'+a+'" not found in Cache.'),null)},getCanvas:function(a){return this.getItem(a,c.CANVAS,"getCanvas","canvas")},getImage:function(a,b){(void 0===a||null===a)&&(a="__default"),void 0===b&&(b=!1);var d=this.getItem(a,c.IMAGE,"getImage");return null===d&&(d=this.getItem("__missing",c.IMAGE,"getImage")),b?d:d.data},getTextureFrame:function(a){return this.getItem(a,c.TEXTURE,"getTextureFrame","frame")},getSound:function(a){return this.getItem(a,c.SOUND,"getSound")},getSoundData:function(a){return this.getItem(a,c.SOUND,"getSoundData","data")},getText:function(a){return this.getItem(a,c.TEXT,"getText","data")},getTilemapData:function(a){return this.getItem(a,c.TILEMAP,"getTilemapData")},getBinary:function(a){return this.getItem(a,c.BINARY,"getBinary")},getBitmapData:function(a){return this.getItem(a,c.BITMAPDATA,"getBitmapData","data")},getJSON:function(a){var b=this.getItem(a,c.JSON,"getJSON","data");return b?b:null},getXML:function(a){return this.getItem(a,c.XML,"getXML","data")},getShader:function(a){return this.getItem(a,c.SHADER,"getShader","data")},getRenderTexture:function(a){return this.getItem(a,c.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(a,b){return void 0===b&&(b=c.IMAGE),this.getItem(a,b,"getBaseTexture","base")},getFrame:function(a,b){return void 0===b&&(b=c.IMAGE),this.getItem(a,b,"getFrame","frame")},getFrameCount:function(a,b){var c=this.getFrameData(a,b);return c?c.total:0},getFrameData:function(a,b){return void 0===b&&(b=c.IMAGE),this.getItem(a,b,"getFrameData","frameData")},hasFrameData:function(a,b){return void 0===b&&(b=c.IMAGE),null!==this.getItem(a,b,"","frameData")},updateFrameData:function(a,b,d){void 0===d&&(d=c.IMAGE),this._cacheMap[d][a]&&(this._cacheMap[d][a].frameData=b)},getFrameByIndex:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrame(b):null},getFrameByName:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrameByName(b):null},getPixiTexture:function(a){return g.TextureCache[a]?g.TextureCache[a]:(console.warn('Cache.getPixiTexture: Invalid key: "'+a+'"'),null)},getPixiBaseTexture:function(a){return g.BaseTextureCache[a]?g.BaseTextureCache[a]:(console.warn('Cache.getPixiBaseTexture: Invalid key: "'+a+'"'),null)},getURL:function(a){var a=this._resolveURL(a);return a?this._urlMap[a]:(console.warn('Cache.getUrl: Invalid url: "'+a+'" or Cache.autoResolveURL was false'),null)},getKeys:function(a){var b,d;if(void 0===a&&(a=c.IMAGE),b=[],this._cacheMap[a])for(d in this._cacheMap[a])"__default"!==d&&"__missing"!==d&&b.push(d);return b},removeCanvas:function(a){delete this._cache.canvas[a]},removeImage:function(a){var b=this.getImage(a,!0);b.base.destroy(),delete this._cache.image[a]},removeSound:function(a){delete this._cache.sound[a]},removeText:function(a){delete this._cache.text[a]},removeTilemap:function(a){delete this._cache.tilemap[a]},removeBinary:function(a){delete this._cache.binary[a]},removeBitmapData:function(a){delete this._cache.bitmapData[a]},removeJSON:function(a){delete this._cache.json[a]},removeXML:function(a){delete this._cache.xml[a]},removeShader:function(a){delete this._cache.shader[a]},removeRenderTexture:function(a){delete this._cache.renderTexture[a]},removeSpriteSheet:function(a){delete this._cache.spriteSheet[a]},_resolveURL:function(a,b){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+a,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",b&&(this._urlMap[this._urlTemp]=b),this._urlTemp):null},destroy:function(){var a,b,c;for(a=0;a<this._cacheMap.length;a++){b=this._cacheMap[a];for(c in b)"__default"!==c&&"__missing"!==c&&(b[c].destroy&&b[c].destroy(),delete b[c])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null}},c.prototype.constructor=c,b.exports=c},{60:60,61:61,62:62,pixi:"pixi"}],99:[function(a,b){(function(c){function d(a){this.game=a,this.cache=a.cache,this.isLoading=!1,this.hasLoaded=!1,this.resetLocked=!1,this.crossOrigin=!1,this.baseURL="",this.path="",this.useXDomainRequest=!1,this.enableParallel=!0,this.maxParallelDownloads=6,this._withSyncPointDepth=0,this._warnedAboutXDomainRequest=!1,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0,g.call(this)}var e=(a(63),a(123)),f=(a(109),a(106)),g=a(3);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.resize=function(){},d.prototype.checkKeyExists=function(a,b){return this.getAssetIndex(a,b)>-1},d.prototype.getAssetIndex=function(a,b){var c,d,e=-1;for(c=0;c<this._fileList.length&&(d=this._fileList[c],d.type!==a||d.key!==b||(e=c,d.loaded||d.loading));c++);return e},d.prototype.getAsset=function(a,b){var c=this.getAssetIndex(a,b);return c>-1?{index:c,file:this._fileList[c]}:!1},d.prototype.reset=function(a,b){void 0===b&&(b=!1),this.resetLocked||(this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,b&&this.removeAllListeners())},d.prototype.addToFileList=function(a,b,c,d,e,f){var g,h,i,j;if(void 0===e&&(e=!1),void 0===b||""===b)return console.warn("Loader: Invalid or no key given of type "+a),this;if(void 0===c||null===c){if(!f)return console.warn("Loader: No URL given for file type: "+a+" key: "+b),this;c=b+f}if(g={type:a,key:b,path:this.path,url:c,syncPoint:this._withSyncPointDepth>0,data:null,loading:!1,loaded:!1,error:!1},d)for(h in d)g[h]=d[h];return i=this.getAssetIndex(a,b),e&&i>-1?(j=this._fileList[i],j.loading||j.loaded?(this._fileList.push(g),this._totalFileCount++):this._fileList[i]=g):-1===i&&(this._fileList.push(g),this._totalFileCount++),this},d.prototype.replaceInFileList=function(a,b,c,d){return this.addToFileList(a,b,c,d,!0)},d.prototype.image=function(a,b,c){return this.addToFileList("image",a,b,void 0,c,".png")},d.prototype.text=function(a,b,c){return this.addToFileList("text",a,b,void 0,c,".txt")},d.prototype.json=function(a,b,c){return this.addToFileList("json",a,b,void 0,c,".json")},d.prototype.shader=function(a,b,c){return this.addToFileList("shader",a,b,void 0,c,".frag")},d.prototype.xml=function(a,b,c){return this.addToFileList("xml",a,b,void 0,c,".xml")},d.prototype.script=function(a,b,c,d){return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("script",a,b,{syncPoint:!0,callback:c,callbackContext:d},!1,".js")},d.prototype.binary=function(a,b,c,d){return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("binary",a,b,{callback:c,callbackContext:d},!1,".bin")},d.prototype.spritesheet=function(a,b,c,d,e,f,g){return void 0===e&&(e=-1),void 0===f&&(f=0),void 0===g&&(g=0),this.addToFileList("spritesheet",a,b,{frameWidth:c,frameHeight:d,frameMax:e,margin:f,spacing:g},!1,".png")},d.prototype.audio=function(a,b,c){return this.game.sound.noAudio?this:(void 0===c&&(c=!0),"string"==typeof b&&(b=[b]),this.addToFileList("audio",a,b,{buffer:null,autoDecode:c}))},d.prototype.audiosprite=function(a,b,c,d,e){return this.game.sound.noAudio?this:(void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!0),this.audio(a,b,e),c?this.json(a+"-audioatlas",c):d?("string"==typeof d&&(d=JSON.parse(d)),this.cache.addJSON(a+"-audioatlas","",d)):console.warn("Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object"),this)},d.prototype.tilemap=function(a,b,c){return void 0===b&&(b=null),void 0===c&&(c=null),b||c||(b=a+".json"),c?(c=JSON.parse(c),this.cache.addTilemap(a,null,c)):this.addToFileList("tilemap",a,b),this},d.prototype.withSyncPoint=function(a,b){this._withSyncPointDepth++;try{a.call(b||this,this)}finally{this._withSyncPointDepth--}return this},d.prototype.addSyncPoint=function(a,b){var c=this.getAsset(a,b);return c&&(c.file.syncPoint=!0),this},d.prototype.removeFile=function(a,b){var c=this.getAsset(a,b);c&&(c.loaded||c.loading||this._fileList.splice(c.index,1))},d.prototype.removeAll=function(){this._fileList.length=0,this._flightQueue.length=0},d.prototype.start=function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},d.prototype.processLoadQueue=function(){var a,b,c,d,f;if(!this.isLoading)return console.warn("Loader - active loading canceled / reset"),void this.finishedLoading(!0);for(a=0;a<this._flightQueue.length;a++)b=this._flightQueue[a],(b.loaded||b.error)&&(this._flightQueue.splice(a,1),a--,b.loading=!1,b.requestUrl=null,b.requestObject=null,b.error&&this.emit("fileerror",b.key,b),this._loadedFileCount++,this.emit("filecomplete",this.progress,b.key,!b.error,this._loadedFileCount,this._totalFileCount));for(c=!1,d=this.enableParallel?e.clamp(this.maxParallelDownloads,1,12):1,a=this._processingHead;a<this._fileList.length&&(b=this._fileList[a],b.loaded||b.error?a===this._processingHead&&(this._processingHead=a+1):!b.loading&&this._flightQueue.length<d&&(c||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this._flightQueue.push(b),b.loading=!0,this.emit("filestart",this.progress,b.key,b.url),this.loadFile(b))),!b.loaded&&b.syncPoint&&(c=!0),!(this._flightQueue.length>=d||c&&this._loadedPackCount===this._totalPackCount));a++);this.updateProgress(),this._processingHead>=this._fileList.length?this.finishedLoading():this._flightQueue.length||(console.warn("Loader - aborting: processing queue empty, loading may have stalled"),f=this,setTimeout(function(){f.finishedLoading(!0)},2e3))},d.prototype.finishedLoading=function(a){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,a||this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this.emit("loadcomplete"),this.reset())},d.prototype.asyncComplete=function(a,b){void 0===b&&(b=""),a.loaded=!0,a.error=!!b,b&&(a.errorMessage=b,console.warn("Loader - "+a.type+"["+a.key+"]: "+b)),
this.processLoadQueue()},d.prototype.transformUrl=function(a,b){return a?a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?a:this.baseURL+b.path+a:!1},d.prototype.loadFile=function(a){switch(a.type){case"image":case"spritesheet":this.loadImageTag(a);break;case"audio":a.url=this.getAudioURL(a.url),a.url?this.game.sound.usingWebAudio?this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(a):this.fileError(a,null,"No supported audio URL specified or device does not have audio playback support");break;case"json":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.xmlLoadComplete);break;case"tilemap":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"text":case"script":case"shader":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.fileComplete);break;case"binary":this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete)}},d.prototype.loadImageTag=function(a){var b=this;a.data=new Image,a.data.name=a.key,this.crossOrigin&&(a.data.crossOrigin=this.crossOrigin),a.data.onload=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileComplete(a))},a.data.onerror=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileError(a))},a.data.src=this.transformUrl(a.url,a),a.data.complete&&a.data.width&&a.data.height&&(a.data.onload=null,a.data.onerror=null,this.fileComplete(a))},d.prototype.loadAudioTag=function(a){var b,c=this;this.game.sound.touchLocked?(a.data=new Audio,a.data.name=a.key,a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),this.fileComplete(a)):(a.data=new Audio,a.data.name=a.key,b=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null,Phaser.GAMES[c.game.id].load.fileComplete(a)},a.data.onerror=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null,c.fileError(a)},a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),a.data.addEventListener("canplaythrough",b,!1),a.data.load())},d.prototype.xhrLoad=function(a,b,c,d,e){var f,g=new XMLHttpRequest;g.open("GET",b,!0),g.responseType=c,e=e||this.fileError,f=this,g.onload=function(){try{return d.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},g.onerror=function(){try{return e.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},a.requestObject=g,a.requestUrl=b,g.send()},d.prototype.getAudioURL=function(a){var b,d,e,g;if(this.game.sound.noAudio)return null;for(b=0;b<a.length;b++){if(d=a[b],d.uri)d=d.uri,e=d.type;else{if(0===d.indexOf("blob:")||0===d.indexOf("data:"))return d;d.indexOf("?")>=0&&(d=d.substr(0,d.indexOf("?"))),g=d.substr((c.Math.max(0,d.lastIndexOf("."))||1/0)+1),e=g.toLowerCase()}if(f.canPlayAudio(e))return a[b]}return null},d.prototype.fileError=function(a,b,c){var d=a.requestUrl||this.transformUrl(a.url,a),e="error loading asset from URL "+d;!c&&b&&(c=b.status),c&&(e=e+" ("+c+")"),this.asyncComplete(a,e)},d.prototype.fileComplete=function(a,b){var c=!0;switch(a.type){case"image":this.cache.addImage(a.key,a.url,a.data);break;case"spritesheet":this.cache.addSpriteSheet(a.key,a.url,a.data,a.frameWidth,a.frameHeight,a.frameMax,a.margin,a.spacing);break;case"audio":this.game.sound.usingWebAudio?(a.data=b.response,this.cache.addSound(a.key,a.url,a.data,!0,!1),a.autoDecode&&this.game.sound.decode(a.key)):this.cache.addSound(a.key,a.url,a.data,!1,!0);break;case"text":a.data=b.responseText,this.cache.addText(a.key,a.url,a.data);break;case"shader":a.data=b.responseText,this.cache.addShader(a.key,a.url,a.data);break;case"script":a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=b.responseText,document.head.appendChild(a.data),a.callback&&(a.data=a.callback.call(a.callbackContext,a.key,b.responseText));break;case"binary":a.callback?a.data=a.callback.call(a.callbackContext,a.key,b.response):a.data=b.response,this.cache.addBinary(a.key,a.data)}c&&this.asyncComplete(a)},d.prototype.jsonLoadComplete=function(a,b){var c=JSON.parse(b.responseText);"tilemap"===a.type?this.cache.addTilemap(a.key,a.url,c):"json"===a.type&&this.cache.addJSON(a.key,a.url,c),this.asyncComplete(a)},d.prototype.xmlLoadComplete=function(a,b){var c,d=b.responseText,e=this.parseXml(d);return e?("xml"===a.type&&this.cache.addXML(a.key,a.url,e),void this.asyncComplete(a)):(c=b.responseType||b.contentType,console.warn("Loader - "+a.key+": invalid XML ("+c+")"),void this.asyncComplete(a,"invalid XML"))},d.prototype.parseXml=function(a){var b,c;try{window.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=null}return b&&b.documentElement&&!b.getElementsByTagName("parsererror").length?b:null},d.prototype.updateProgress=function(){},d.prototype.totalLoadedFiles=function(){return this._loadedFileCount},d.prototype.totalQueuedFiles=function(){return this._totalFileCount-this._loadedFileCount},d.prototype.totalLoadedPacks=function(){return this._totalPackCount},d.prototype.totalQueuedPacks=function(){return this._totalPackCount-this._loadedPackCount},Object.defineProperty(d.prototype,"progressRaw",{get:function(){var a=this._loadedFileCount/this._totalFileCount;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progressFloat",{get:function(){var a=this._loadedFileCount/this._totalFileCount*100;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progress",{get:function(){return c.Math.round(this.progressFloat)}}),d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{106:106,109:109,123:123,3:3,63:63}],100:[function(a,b){function c(a){this.game=a;this.socket=d({reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:1e4});this.socket.on("connect",this.connect),this.socket.on("reconnecting",this.reconnecting),this.socket.on("reconnect_failed",this.reconnectingFailed),this.socket.on("event",this.event),this.socket.on("error",this.error),this.socket.on("disconnect",this.disconnect)}var d=a("socket");c.prototype={connect:function(){console.log("connected")},reconnecting:function(a){console.log("trying to reconnect (attempt "+a+")")},reconnectingFailed:function(){console.log("could not reconnect, try again later.")},reconnect:function(){console.log("successfully reconnected")},event:function(a){console.log("event",a)},error:function(a){console.log("error",a)},disconnect:function(){console.log("socket close")}},c.prototype.constructor=c,b.exports=c},{socket:"socket"}],101:[function(a,b){(function(c){function d(a,b,c,d){i.call(this,a),this.maxParticles=d||50,this.name="emitter"+this.game.particles.ID++,this.type=e.EMITTER,this.area=new f(b,c,1,1),this.gravity=0,this.vector=new g(0,0),this.minParticleSpeed=new g(15,15),this.maxParticleSpeed=new g(25,25),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.startTint=16777215,this.endTint=16777215,this.tintData=null,this.minRotation=-6,this.maxRotation=6,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.particleClass=h,this.angularDrag=1,this.frequency=100,this.lifespan=2e3,this.bounce=new g,this.particleAnchor=new g(.5,.5),this.particleDrag=new g(0,0),this.blendMode=e.BlendMode.NORMAL,this.emitX=b,this.emitY=c,this.on=!1,this.autoScale=!1,this.autoAlpha=!1,this.autoTint=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new g(1,1),this._maxParticleScale=new g(1,1),this._quantity=0,this._timer=0,this._counter=0,this._flowQuantity=0,this._flowTotal=0,this._explode=!0,this._frames=null}var e=a(63),f=a(97),g=a(96),h=a(80),i=a(73),j=a(115),k=a(122),l=a(123);d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a;if(this.on&&this.game.clock.time>=this._timer)if(this._timer=this.game.clock.time+this.frequency*this.game.clock.slowMotion,0!==this._flowTotal)if(this._flowQuantity>0){for(a=0;a<this._flowQuantity;a++)if(this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal)){this.on=!1;break}}else this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal&&(this.on=!1));else this.emitParticle()&&(this._counter++,this._quantity>0&&this._counter>=this._quantity&&(this.on=!1));for(a=this.children.length;a--;)this.children[a].exists&&this.children[a].update()},d.prototype.makeParticles=function(a,b,c,d,e){var f,g,h,i;for(void 0===b&&(b=0),void 0===c&&(c=this.maxParticles),void 0===d&&(d=!1),void 0===e&&(e=!1),g=0,h=a,i=b,this._frames=b,c>this.maxParticles&&(this.maxParticles=c);c>g;)Array.isArray(a)&&(h=this.game.rnd.pick(a)),Array.isArray(b)&&(i=this.game.rnd.pick(b)),f=new this.particleClass(this.game,h,i),f.exists=!1,f.visible=!1,f.anchor.copy(this.particleAnchor),this.add(f),g++;return this},d.prototype.kill=function(){this.on=!1,this.alive=!1,this.exists=!1},d.prototype.revive=function(){this.alive=!0,this.exists=!0},d.prototype.explode=function(a,b){this._flowTotal=0,this.start(!0,a,0,b,!1)},d.prototype.flow=function(a,b,c,d,e){(void 0===c||0===c)&&(c=1),void 0===d&&(d=-1),void 0===e&&(e=!0),c>this.maxParticles&&(c=this.maxParticles),this._counter=0,this._flowQuantity=c,this._flowTotal=d,e?(this.start(!0,a,b,c),this._counter+=c,this.on=!0,this._timer=this.game.clock.time+b*this.game.clock.slowMotion):this.start(!1,a,b,c)},d.prototype.start=function(a,b,c,d){if(void 0===a&&(a=!0),void 0===b&&(b=this.lifespan),(void 0===c||null===c)&&(c=250),void 0===d&&(d=0),d>this.maxParticles&&(d=this.maxParticles),this.revive(),this.visible=!0,this.lifespan=b,this.frequency=c,a)for(var e=0;d>e;e++)this.emitParticle();else this.on=!0,this._quantity+=d,this._counter=0,this._timer=this.game.clock.time+c*this.game.clock.slowMotion},d.prototype.emitParticle=function(){var a=this.getFirstExists(!1);return null===a?!1:(this.width>1||this.height>1?a.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):a.reset(this.emitX,this.emitY),a.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(a):this.particleSendToBack&&this.sendToBack(a),this.autoScale?a.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?a.scale.set(this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale)):(this._minParticleScale.x!==this._maxParticleScale.x||this._minParticleScale.y!==this._maxParticleScale.y)&&a.scale.set(this.game.rnd.realInRange(this._minParticleScale.x,this._maxParticleScale.x),this.game.rnd.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),Array.isArray("object"===this._frames)?a.frame=this.game.rnd.pick(this._frames):a.frame=this._frames,this.autoAlpha?a.setAlphaData(this.alphaData):a.alpha=this.game.rnd.realInRange(this.minParticleAlpha,this.maxParticleAlpha),this.autoTint&&a.setTintData(this.tintData),a.vector=this.vector,a.blendMode=this.blendMode,a.velocity.x=this.game.rnd.between(this.minParticleSpeed.x,this.maxParticleSpeed.x),a.velocity.y=this.game.rnd.between(this.minParticleSpeed.y,this.maxParticleSpeed.y),a.drag.x=this.particleDrag.x,a.drag.y=this.particleDrag.y,a.angularVelocity=l.degToRad(this.game.rnd.between(this.minRotation,this.maxRotation)),a.angularDrag=l.degToRad(this.angularDrag),a.onEmit(),!0)},d.prototype.destroy=function(){this.game.particles.remove(this),i.prototype.destroy.call(this,!0,!1)},d.prototype.setSize=function(a,b){this.area.width=a,this.area.height=b},d.prototype.setXSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.x=a,this.maxParticleSpeed.x=b},d.prototype.setYSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.y=a,this.maxParticleSpeed.y=b},d.prototype.setRotation=function(a,b){a=a||0,b=b||0,this.minRotation=a,this.maxRotation=b},d.prototype.setAlpha=function(a,b,c,d,e){var f,g;void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),void 0===e&&(e=!1),this.minParticleAlpha=a,this.maxParticleAlpha=b,this.autoAlpha=!1,c>0&&a!==b&&(f={v:a},g=this.game.tweens.create(f).to({v:b},c,d),g.yoyo(e),this.alphaData=g.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0)},d.prototype.setScale=function(a,b,c,d,e,f,g){var h,i;void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=0),void 0===f&&(f=j.Linear.None),void 0===g&&(g=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(a,c),this._maxParticleScale.set(b,d),this.autoScale=!1,e>0&&(a!==b||c!==d)&&(h={x:a,y:c},i=this.game.tweens.create(h).to({x:b,y:d},e,f),i.yoyo(g),this.scaleData=i.generateData(60),this.scaleData.reverse(),this.autoScale=!0)},d.prototype.setTint=function(a,b,c,d,e){var f,g,h;if(void 0===a&&(minX=16777215),void 0===b&&(maxX=16777215),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),void 0===e&&(e=!1),this.startTint=a,this.endTint=b,this.autoTint=!1,c>0&&a!==b){for(f={step:0},g=this.game.tweens.create(f).to({step:100},c,d),g.yoyo(e),this.tintData=g.generateData(60),h=0;h<this.tintData.length;h++)this.tintData[h].color=k.interpolateColor(a,b,100,this.tintData[h].step);this.tintData.reverse(),this.autoTint=!0}},d.prototype.at=function(a){a.center?(this.emitX=a.center.x,this.emitY=a.center.y):(this.emitX=a.world.x+a.anchor.x*a.width,this.emitY=a.world.y+a.anchor.y*a.height)},Object.defineProperty(d.prototype,"width",{get:function(){return this.area.width},set:function(a){this.area.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.area.height},set:function(a){this.area.height=a}}),Object.defineProperty(d.prototype,"x",{get:function(){return this.emitX},set:function(a){this.emitX=a}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.emitY},set:function(a){this.emitY=a}}),Object.defineProperty(d.prototype,"left",{get:function(){return c.Math.floor(this.x-this.area.width/2)}}),Object.defineProperty(d.prototype,"right",{get:function(){return c.Math.floor(this.x+this.area.width/2)}}),Object.defineProperty(d.prototype,"top",{get:function(){return c.Math.floor(this.y-this.area.height/2)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return c.Math.floor(this.y+this.area.height/2)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{115:115,122:122,123:123,63:63,73:73,80:80,96:96,97:97}],102:[function(a,b){function c(a){this.game=a,this.emitters={},this.ID=0}a(101);c.prototype={add:function(a){return this.emitters[a.name]=a,a},remove:function(a){delete this.emitters[a.name]},update:function(){for(var a in this.emitters)this.emitters[a].exists&&this.emitters[a].update()}},c.prototype.constructor=c,b.exports=c},{101:101}],103:[function(a,b){function c(a,b,c,d,e){void 0===c&&(c=1),void 0===d&&(d=!1),void 0===e&&(e=a.sound.connectToMaster),this.game=a,this.name=b,this.key=b,this.loop=d,this.volume=c,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this._sound=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=c*this.game.sound.volume,e&&this.gainNode.connect(this.masterGainNode)):this.usingAudioTag&&(this.game.cache.getSound(b)&&this.game.cache.isSoundReady(b)?(this._sound=this.game.cache.getSoundData(b),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)),this._volume=c,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1}var d=a(106);c.prototype={soundHasUnlocked:function(a){a===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(a,b,c,d,e){(void 0===d||null===d)&&(d=1),void 0===e&&(e=!1),this.markers[a]={name:a,start:b,stop:b+c,volume:d,duration:c,durationMS:1e3*c,loop:e}},removeMarker:function(a){delete this.markers[a]},onEndedHandler:function(){this.isPlaying=!1,this.stop()},update:function(){return this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.onDecoded&&this.onDecoded.call(this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),void(this.isPlaying&&(this.currentTime=this.game.clock.time-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.clock.time):this.play(this.currentMarker,0,this.volume,!0,!0):""!==this.currentMarker&&this.stop():this.loop?this.play(this.currentMarker,0,this.volume,!0,!0):this.stop())))):void this.destroy()},loopFull:function(a){this.play(null,0,a,!0)},play:function(a,b,c,e,f){if((void 0===a||a===!1||null===a)&&(a=""),void 0===f&&(f=!0),this.isPlaying&&!this.allowMultiple&&!f&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||f))if(this.usingWebAudio)if(this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode),void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(g){}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(""===a&&Object.keys(this.markers).length>0)return this;if(""!==a){if(this.currentMarker=a,!this.markers[a])return this;this.position=this.markers[a].start,this.volume=this.markers[a].volume,this.loop=this.markers[a].loop,this.duration=this.markers[a].duration,this.durationMS=this.markers[a].durationMS,void 0!==c&&(this.volume=c),void 0!==e&&(this.loop=e),this._tempMarker=a,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else b=b||0,void 0===c&&(c=this._volume),void 0===e&&(e=this.loop),this.position=b,this.volume=c,this.loop=e,this.duration=0,this.durationMS=0,this._tempMarker=a,this._tempPosition=b,this._tempVolume=c,this._tempLoop=e;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===a&&(this._sound.loop=!0),!this.loop&&""===a,this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===a?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.clock.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===!1&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(d.cocoonJS||4===this._sound.readyState)?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._muted?this._sound.volume=0:this._sound.volume=this._volume,this.isPlaying=!0,this.startTime=this.game.clock.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS):this.pendingPlayback=!0,this},restart:function(a,b,c,d){a=a||"",b=b||0,c=c||1,void 0===d&&(d=!1),this.play(a,b,c,d,!0)},pause:function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.clock.time,this.stop())},resume:function(){var a,b;this.paused&&this._sound&&(this.usingWebAudio?(a=this.position+this.pausedPosition/1e3,this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this.loop&&(this._sound.loop=!0),!this.loop&&""===this.currentMarker,b=this.duration-this.pausedPosition/1e3,void 0===this._sound.start?this._sound.noteGrainOn(0,a,b):this.loop&&d.chrome?42===d.chromeVersion?this._sound.start(0):this._sound.start(0,a):this._sound.start(0,a,b)):this._sound.play(),this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.clock.time-this.pausedTime)},stop:function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio)if(this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode),void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(a){}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);this.pendingPlayback=!1,this.isPlaying=!1;this.currentMarker;""!==this.currentMarker,this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),!this.paused},fadeIn:function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=this.currentMarker),this.paused||(this.play(c,0,0,b),this.fadeTo(a,1))},fadeOut:function(a){this.fadeTo(a,0)},fadeTo:function(a,b){if(this.isPlaying&&!this.paused&&b!==this.volume){if(void 0===a&&(a=1e3),void 0===b)return void console.warn("Sound.fadeTo: No Volume Specified.");this.fadeTween=this.game.tweens.create(this),this.fadeTween.to({volume:b},a,void 0,!0)}},fadeComplete:function(){0===this.volume&&this.stop()},destroy:function(a){void 0===a&&(a=!0),this.stop(),a?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null)}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(c.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(c.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(a){a=a||!1,a!==this._muted&&(a?(this._muted=!0,this._muteVolume=this._tempVolume,this.usingWebAudio?this.gainNode.gain.value=0:this.usingAudioTag&&this._sound&&(this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)))}}),Object.defineProperty(c.prototype,"volume",{get:function(){return this._volume},set:function(a){return d.firefox&&this.usingAudioTag&&(a=this.game.math.clamp(a,0,1)),this._muted?void(this._muteVolume=a):(this._tempVolume=a,this._volume=a,void(this.usingWebAudio?this.gainNode.gain.value=a:this.usingAudioTag&&this._sound&&(this._sound.volume=a)))}}),b.exports=c},{106:106}],104:[function(a,b){function c(a){this.game=a,this.context=null,this.usingWebAudio=!1,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new f,this._watching=!1,this._watchCallback=null,this._watchContext=null}var d=a(103),e=a(106),f=a(119);c.prototype={boot:function(){if(e.iOS&&e.webAudio===!1&&(this.channels=1),window.AudioContext)try{this.context=new window.AudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}if(null===this.context){if(void 0===window.Audio)return void(this.noAudio=!0);this.usingAudioTag=!0}else this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination)},stopAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].stop()},pauseAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].pause()},resumeAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].resume()},decode:function(a,b){var c,d;if(b=b||null,c=this.game.cache.getSoundData(a),c&&this.game.cache.isSoundDecoded(a)===!1){this.game.cache.updateSound(a,"isDecoding",!0),d=this;try{this.context.decodeAudioData(c,function(b){b&&d.game.cache.decodedSound(a,b)})}catch(e){}}},setDecodedCallback:function(a,b,c){"string"==typeof a&&(a=[a]),this._watchList.reset();for(var e=0;e<a.length;e++)a[e]instanceof d?this.game.cache.isSoundDecoded(a[e].key)||this._watchList.add(a[e].key):this.game.cache.isSoundDecoded(a[e])||this._watchList.add(a[e]);0===this._watchList.total?(this._watching=!1,b.call(c)):(this._watching=!0,this._watchCallback=b,this._watchContext=c)},update:function(){var a,b;if(!this.noAudio){for(!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.touchLocked=!1,this._unlockSource=null),a=0;a<this._sounds.length;a++)this._sounds[a].update();if(this._watching){for(b=this._watchList.first;b;)this.game.cache.isSoundDecoded(b)&&this._watchList.remove(b),b=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(a,b,c,e){void 0===b&&(b=1),void 0===c&&(c=!1),void 0===e&&(e=this.connectToMaster);var f=new d(this.game,a,b,c,e);return this._sounds.push(f),f},addSprite:function(a){var b=new AudioSprite(this.game,a);return b},remove:function(a){for(var b=this._sounds.length;b--;)if(this._sounds[b]===a)return this._sounds[b].destroy(!1),this._sounds.splice(b,1),!0;return!1},removeByKey:function(a){for(var b=this._sounds.length,c=0;b--;)this._sounds[b].key===a&&(this._sounds[b].destroy(!1),this._sounds.splice(b,1),c++);return c},play:function(a,b,c){if(!this.noAudio){var d=this.add(a,b,c);return d.play(),d}},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var a=0;a<this._sounds.length;a++)this._sounds[a].usingAudioTag&&(this._sounds[a].mute=!0)}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var a=0;a<this._sounds.length;a++)this._sounds[a].usingAudioTag&&(this._sounds[a].mute=!1)}},destroy:function(){this.stopAll();for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].destroy();this._sounds=[]}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"mute",{get:function(){return this._muted},set:function(a){if(a=a||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(c.prototype,"volume",{get:function(){return this._volume},set:function(a){if(0>a?a=0:a>1&&(a=1),this._volume!==a)if(this._volume=a,this.usingWebAudio)this.masterGain.gain.value=a;else for(var b=0;b<this._sounds.length;b++)this._sounds[b].usingAudioTag&&(this._sounds[b].volume=this._sounds[b].volume*a)}}),b.exports=c},{103:103,106:106,119:119}],105:[function(a,b){(function(a){var c={create:function(b,c,d){b=b||256,c=c||256;var e=a.document.createElement("canvas");return"string"==typeof d&&""!==d&&(e.id=d),e.width=b,e.height=c,e.style.display="block",e},addToDOM:function(a,b){var c;return b&&("string"==typeof b?c=document.getElementById(b):"object"==typeof b&&1===b.nodeType&&(c=b)),c||(c=document.body),c.appendChild(a),a},setTouchAction:function(a,b){return b=b||"none",a.style.msTouchAction=b,a.style["ms-touch-action"]=b,a.style["touch-action"]=b,a},setUserSelect:function(a,b){return b=b||"none",a.style["-webkit-touch-callout"]=b,a.style["-webkit-user-select"]=b,a.style["-khtml-user-select"]=b,a.style["-moz-user-select"]=b,a.style["-ms-user-select"]=b,a.style["user-select"]=b,a.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",a}};b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],106:[function(a,b){(function(c,d){var e=a("pixi"),f={android:!1,chromeOS:!1,iOS:!1,linux:!1,macOS:!1,windows:!1,windowsPhone:!1,desktop:!1,canvas:!1,file:!1,fileSystem:!1,webGL:!1,worker:!1,canvasBitBltShift:!1,audioData:!1,webAudio:!1,chrome:!1,chromeVersion:!1,arora:!1,epiphany:!1,firefox:!1,firefoxVersion:!1,safari:!1,mobileSafari:!1,ie:!1,ieVersion:!1,trident:!1,tridentVersion:!1,cocoonJS:!1,node:!1,nodeWebkit:!1,electron:!1,fullscreen:!1,requestFullscreen:"",cancelFullscreen:"",fullscreenKeyboard:!1,pointerLock:!1,quirksMode:!1,touch:!1,mspointer:!1,wheelEvent:"",whenReady:function(a,b,c){var e=this._readyCheck;this.deviceReadyAt||!e?a.call(b,this):e._monitor||c?(e._queue=e._queue||[],e._queue.push([a,b])):(e._monitor=e.bind(this),e._queue=e._queue||[],e._queue.push([a,b]),"complete"===d.document.readyState||"interactive"===d.document.readyState?d.setTimeout(e._monitor,0):(d.document.addEventListener("DOMContentLoaded",e._monitor,!1),d.addEventListener("load",e._monitor,!1)))},_readyCheck:function(){var a,b,c,e=this._readyCheck;if(d.document.body){if(!this.deviceReadyAt){for(this.deviceReadyAt=Date.now(),d.document.removeEventListener("DOMContentLoaded",e._monitor),d.removeEventListener("load",e._monitor),this._initialize(),this.initialized=!0;a=e._queue.shift();)b=a[0],c=a[1],b.call(c,this);this._readyCheck=null,this._initialize=null}}else d.setTimeout(e._monitor,20)},_initialize:function(){function b(){var a=d.navigator.userAgent;/Android/.test(a)?k.android=!0:/CrOS/.test(a)?k.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?k.iOS=!0:/Linux/.test(a)?k.linux=!0:/Mac OS/.test(a)?k.macOS=!0:/Windows/.test(a)&&(k.windows=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(k.android=!1,k.iOS=!1,k.macOS=!1,k.windows=!0,k.windowsPhone=!0),(k.windows||k.macOS||k.linux||k.chromeOS)&&(k.desktop=!0),(k.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(k.desktop=!1)}function f(){k.audioData=!!d.window.Audio,k.webAudio=!(!d.window.AudioContext&&!d.window.webkitAudioContext);var a=document.createElement("audio"),b=!1;try{(b=!!a.canPlayType)&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(k.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(k.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(k.mp3=!0),a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(k.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(k.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(k.webm=!0))}catch(c){}}function g(){k.canvas=!!d.CanvasRenderingContext2D,k.file=!!(d.File&&d.FileReader&&d.FileList&&d.Blob),k.fileSystem=!!d.requestFileSystem,k.webGL=e.utils.isWebGLSupported(),k.worker=!!d.Worker,k.pointerLock="pointerLockElement"in d.document||"mozPointerLockElement"in d.document||"webkitPointerLockElement"in d.document,k.quirksMode="CSS1Compat"===d.document.compatMode?!1:!0,
!k.iOS&&(k.ie||k.firefox||k.chrome)&&(k.canvasBitBltShift=!0),(k.safari||k.mobileSafari)&&(k.canvasBitBltShift=!1)}function h(){("ontouchstart"in document.documentElement||d.navigator.maxTouchPoints&&d.navigator.maxTouchPoints>=1)&&(k.touch=!0),(d.navigator.msPointerEnabled||d.navigator.pointerEnabled)&&(k.mspointer=!0),"onwheel"in d||k.ie&&"WheelEvent"in d?k.wheelEvent="wheel":"onmousewheel"in d&&(k.wheelEvent="mousewheel")}function i(){var a,b=document.createElement("div"),c=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];for(a=0;a<c.length;a++)if(b[c[a]]){k.fullscreen=!0,k.requestFullscreen=c[a];break}if(k.fullscreen)for(a=0;a<e.length;a++)if(document[e[a]]){k.cancelFullscreen=e[a];break}d.Element&&d.Element.ALLOW_KEYBOARD_INPUT&&(k.fullscreenKeyboard=!0)}function j(){var b=d.navigator.userAgent;if(/Arora/.test(b)?k.arora=!0:/Chrome\/(\d+)/.test(b)&&!k.windowsPhone?(k.chrome=!0,k.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(b)?k.epiphany=!0:/Firefox\D+(\d+)/.test(b)?(k.firefox=!0,k.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(b)&&k.iOS?k.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(b)?(k.ie=!0,k.ieVersion=parseInt(RegExp.$1,10)):/Safari/.test(b)&&!k.windowsPhone?k.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(b)&&(k.ie=!0,k.trident=!0,k.tridentVersion=parseInt(RegExp.$1,10),k.ieVersion=parseInt(RegExp.$3,10)),void 0!==c&&void 0!==a&&(k.node=!0),k.node&&"object"==typeof c.versions&&(k.nodeWebkit=!!c.versions["node-webkit"],k.electron=!!c.versions.electron),navigator.isCocoonJS&&(k.cocoonJS=!0),k.cocoonJS)try{k.cocoonJSApp=void 0!==CocoonJS}catch(e){k.cocoonJSApp=!1}void 0!==window.ejecta&&(k.ejecta=!0)}var k=this;b(),f(),j(),g(),h(),i()},canPlayAudio:function(a){return"mp3"===a&&this.mp3?!0:"ogg"===a&&(this.ogg||this.opus)?!0:"m4a"===a&&this.m4a?!0:"opus"===a&&this.opus?!0:"wav"===a&&this.wav?!0:"webm"===a&&this.webm?!0:!1}};b.exports=f}).call(this,a(4),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{4:4,pixi:"pixi"}],107:[function(a,b){(function(a){function c(b){var c,d;for(this.game=b,this.isRunning=!1,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;d++)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null}c.prototype.constructor=c,c.prototype.start=function(){var b=this;this.isRunning=!0,a.requestAnimationFrame?(this._isSetTimeOut=!1,this._onLoop=function(a){return b.updateRequestAnimationFrame(a)},this._timeOutID=a.requestAnimationFrame(this._onLoop)):(this._isSetTimeOut=!0,this._onLoop=function(){return b.updateSetTimeout()},this._timeOutID=a.setTimeout(this._onLoop,0))},c.prototype.updateRequestAnimationFrame=function(b){this.game.update(Math.floor(b)),this._timeOutID=a.requestAnimationFrame(this._onLoop)},c.prototype.updateSetTimeout=function(){this.game.update(Date.now()),this._timeOutID=a.setTimeout(this._onLoop,this.game.time.timeToCall)},c.prototype.stop=function(){this.isRunning=!1,this._isSetTimeOut?clearTimeout(this._timeOutID):a.cancelAnimationFrame(this._timeOutID)},c.prototype.isSetTimeOut=function(){return this._isSetTimeOut},c.prototype.isRAF=function(){return this._isSetTimeOut===!1},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],108:[function(a,b){(function(a){function c(b,c,d,e,f,g){this.layer=b,this.index=c,this.x=d,this.y=e,this.rotation=0,this.flipped=!1,this.worldX=d*f,this.worldY=e*g,this.width=f,this.height=g,this.centerX=a.Math.abs(f/2),this.centerY=a.Math.abs(g/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this}c.prototype={containsPoint:function(a,b){return!(a<this.worldX||b<this.worldY||a>this.right||b>this.bottom)},intersects:function(a,b,c,d){return c<=this.worldX?!1:d<=this.worldY?!1:a>=this.worldX+this.width?!1:b>=this.worldY+this.height?!1:!0},setCollisionCallback:function(a,b){this.collisionCallback=a,this.collisionCallbackContext=b},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(a,b,c,d){this.collideLeft=a,this.collideRight=b,this.collideUp=c,this.collideDown=d,this.faceLeft=a,this.faceRight=b,this.faceTop=c,this.faceBottom=d},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(a,b){return a&&b?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:a?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:b?this.faceTop||this.faceBottom||this.faceLeft||this.faceRight:!1},copy:function(a){this.index=a.index,this.alpha=a.alpha,this.properties=a.properties,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(c.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(c.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(c.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(c.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(c.prototype,"bottom",{get:function(){return this.worldY+this.height}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],109:[function(a,b){function c(a,b,c,e,f,g){this.game=a,this.key=b;var h=d.parse(this.game,b,c,e,f,g);null!==h&&(this.width=h.width,this.height=h.height,this.tileWidth=h.tileWidth,this.tileHeight=h.tileHeight,this.orientation=h.orientation,this.format=h.format,this.version=h.version,this.properties=h.properties,this.widthInPixels=h.widthInPixels,this.heightInPixels=h.heightInPixels,this.layers=h.layers,this.tilesets=h.tilesets,this.imagecollections=h.imagecollections,this.tiles=h.tiles,this.objects=h.objects,this.collideIndexes=[],this.collision=h.collision,this.images=h.images,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0)}var d=a(111),e=a(108),f=a(110),g=a(112),h=a(82),i=a(120);c.NORTH=0,c.EAST=1,c.SOUTH=2,c.WEST=3,c.prototype={create:function(a,b,c,d,e,f){return void 0===f&&(f=this.game.world),this.width=b,this.height=c,this.setTileSize(d,e),this.layers.length=0,this.createBlankLayer(a,b,c,d,e,f)},setTileSize:function(a,b){this.tileWidth=a,this.tileHeight=b,this.widthInPixels=this.width*a,this.heightInPixels=this.height*b},addTilesetImage:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q;if(void 0===a)return null;if(void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),0===c&&(c=32),0===d&&(d=32),h=null,(void 0===b||null===b)&&(b=a),!this.game.cache.checkImageKey(b))return console.warn('Tilemap.addTilesetImage: Invalid image key given: "'+b+'"'),null;if(h=this.game.cache.getImage(b),i=this.getTilesetIndex(a),null===i)return console.warn('Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "'+b+'"'),null;if(this.tilesets[i])return this.tilesets[i].setImage(h),this.tilesets[i];for(j=new Tileset(a,g,c,d,e,f,{}),j.setImage(h),this.tilesets.push(j),k=this.tilesets.length-1,l=e,m=e,n=0,o=0,p=0,q=g;q<g+j.total&&(this.tiles[q]=[l,m,k],l+=c+f,n++,n!==j.total)&&(o++,o!==j.columns||(l=e,m+=d+f,o=0,p++,p!==j.rows));q++);return j},createFromObjects:function(a,b,c,d,e,f,g,i,j){var k,l,m,n,o;if(void 0===e&&(e=!0),void 0===f&&(f=!1),void 0===g&&(g=this.game.world),void 0===i&&(i=h),void 0===j&&(j=!0),!this.objects[a])return void console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: "+a);for(n=0;n<this.objects[a].length;n++)if(k=!1,l=this.objects[a][n],void 0!==l.gid&&"number"==typeof b&&l.gid===b?k=!0:void 0!==l.id&&"number"==typeof b&&l.id===b?k=!0:void 0!==l.name&&"string"==typeof b&&l.name===b&&(k=!0),k){m=new i(this.game,parseFloat(l.x,10),parseFloat(l.y,10),c,d),m.name=l.name,m.visible=l.visible,m.autoCull=f,m.exists=e,l.width&&(m.width=l.width),l.height&&(m.height=l.height),l.rotation&&(m.angle=l.rotation),j&&(m.y-=m.height),g.add(m);for(o in l.properties)g.set(m,o,l.properties[o],!1,!1,0,!0)}},createFromTiles:function(a,b,c,d,e,f){var g,i,j,k,l,m,n;if("number"==typeof a&&(a=[a]),void 0===b||null===b?b=[]:"number"==typeof b&&(b=[b]),d=this.getLayer(d),void 0===e&&(e=this.game.world),void 0===f&&(f={}),void 0===f.customClass&&(f.customClass=h),void 0===f.adjustY&&(f.adjustY=!0),g=this.layers[d].width,i=this.layers[d].height,this.copy(0,0,g,i,d),this._results.length<2)return 0;for(j=0,l=1,m=this._results.length;m>l;l++)if(-1!==a.indexOf(this._results[l].index)){k=new f.customClass(this.game,this._results[l].worldX,this._results[l].worldY,c);for(n in f)k[n]=f[n];e.add(k),j++}if(1===b.length)for(l=0;l<a.length;l++)this.replace(a[l],b[0],0,0,g,i,d);else if(b.length>1)for(l=0;l<a.length;l++)this.replace(a[l],b[l],0,0,g,i,d);return j},createSprite:function(a,b,c,d){void 0===b&&(b=this.widthInPixels),void 0===c&&(c=this.heightInPixels),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new g(this.game,this,e,b,c))},createLayer:function(a,b,c,d){void 0===b&&(b=this.game.width),void 0===c&&(c=this.game.height),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new f(this.game,this,e,b,c))},createBlankLayer:function(a,b,c,d,g,h){var i,j,k,l,m,n,o;if(void 0===h&&(h=this.game.world),null!==this.getLayerIndex(a))return void console.warn("Tilemap.createBlankLayer: Layer with matching name already exists");for(i={name:a,x:0,y:0,width:b,height:c,widthInPixels:b*d,heightInPixels:c*g,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},k=[],l=0;c>l;l++){for(j=[],m=0;b>m;m++)j.push(new e(i,-1,m,l,d,g));k.push(j)}return i.data=k,this.layers.push(i),this.currentLayer=this.layers.length-1,n=i.widthInPixels,o=i.heightInPixels,n>this.game.width&&(n=this.game.width),o>this.game.height&&(o=this.game.height),k=new f(this.game,this,this.layers.length-1,n,o),k.name=a,h.add(k)},getIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return c;return null},getLayerIndex:function(a){return this.getIndex(this.layers,a)},getTilesetIndex:function(a){return this.getIndex(this.tilesets,a)},getImageIndex:function(a){return this.getIndex(this.images,a)},getObjectIndex:function(a){return this.getIndex(this.objects,a)},setTileIndexCallback:function(a,b,c,d){if(d=this.getLayer(d),"number"==typeof a)this.layers[d].callbacks[a]={callback:b,callbackContext:c};else for(var e=0,f=a.length;f>e;e++)this.layers[d].callbacks[a[e]]={callback:b,callbackContext:c}},setTileLocationCallback:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(a,b,c,d,g),!(this._results.length<2))for(var h=1;h<this._results.length;h++)this._results[h].setCollisionCallback(e,f)},setCollision:function(a,b,c,d){if(void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c),"number"==typeof a)return this.setCollisionByIndex(a,b,c,!0);if(Array.isArray(a)){for(var e=0;e<a.length;e++)this.setCollisionByIndex(a[e],b,c,!1);d&&this.calculateFaces(c)}},setCollisionBetween:function(a,b,c,d,e){if(void 0===c&&(c=!0),void 0===e&&(e=!0),d=this.getLayer(d),!(a>b)){for(var f=a;b>=f;f++)this.setCollisionByIndex(f,c,d,!1);e&&this.calculateFaces(d)}},setCollisionByExclusion:function(a,b,c,d){void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c);for(var e=0,f=this.tiles.length;f>e;e++)-1===a.indexOf(e)&&this.setCollisionByIndex(e,b,c,!1);d&&this.calculateFaces(c)},setCollisionByIndex:function(a,b,c,d){var e,f,g,h;for(void 0===b&&(b=!0),void 0===c&&(c=this.currentLayer),void 0===d&&(d=!0),b?this.collideIndexes.push(a):(e=this.collideIndexes.indexOf(a),e>-1&&this.collideIndexes.splice(e,1)),f=0;f<this.layers[c].height;f++)for(g=0;g<this.layers[c].width;g++)h=this.layers[c].data[f][g],h&&h.index===a&&(b?h.setCollision(!0,!0,!0,!0):h.resetCollision(),h.faceTop=b,h.faceBottom=b,h.faceLeft=b,h.faceRight=b);return d&&this.calculateFaces(c),c},getLayer:function(a){return void 0===a?a=this.currentLayer:"string"==typeof a?a=this.getLayerIndex(a):a instanceof f&&(a=a.index),a},setPreventRecalculate:function(a){if(a===!0&&this.preventingRecalculate!==!0&&(this.preventingRecalculate=!0,this.needToRecalculate={}),a===!1&&this.preventingRecalculate===!0){this.preventingRecalculate=!1;for(var b in this.needToRecalculate)this.calculateFaces(b);this.needToRecalculate=!1}},calculateFaces:function(a){var b,c,d,e,f,g,h,i,j;if(this.preventingRecalculate)return void(this.needToRecalculate[a]=!0);for(b=null,c=null,d=null,e=null,f=0,g=this.layers[a].height;g>f;f++)for(h=0,i=this.layers[a].width;i>h;h++)j=this.layers[a].data[f][h],j&&(b=this.getTileAbove(a,h,f),c=this.getTileBelow(a,h,f),d=this.getTileLeft(a,h,f),e=this.getTileRight(a,h,f),j.collides&&(j.faceTop=!0,j.faceBottom=!0,j.faceLeft=!0,j.faceRight=!0),b&&b.collides&&(j.faceTop=!1),c&&c.collides&&(j.faceBottom=!1),d&&d.collides&&(j.faceLeft=!1),e&&e.collides&&(j.faceRight=!1))},getTileAbove:function(a,b,c){return c>0?this.layers[a].data[c-1][b]:null},getTileBelow:function(a,b,c){return c<this.layers[a].height-1?this.layers[a].data[c+1][b]:null},getTileLeft:function(a,b,c){return b>0?this.layers[a].data[c][b-1]:null},getTileRight:function(a,b,c){return b<this.layers[a].width-1?this.layers[a].data[c][b+1]:null},setLayer:function(a){a=this.getLayer(a),this.layers[a]&&(this.currentLayer=a)},hasTile:function(a,b,c){return c=this.getLayer(c),this.layers[c].data[b][a].index>-1},removeTile:function(a,b,c){if(c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height&&this.hasTile(a,b,c)){var d=this.layers[c].data[b][a];return this.layers[c].data[b][a]=new e(this.layers[c],-1,a,b,this.tileWidth,this.tileHeight),this.layers[c].dirty=!0,this.calculateFaces(c),d}},removeTileWorldXY:function(a,b,c,d,e){return e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.removeTile(a,b,e)},putTile:function(a,b,c,d){if(null===a)return this.removeTile(b,c,d);if(d=this.getLayer(d),b>=0&&b<this.layers[d].width&&c>=0&&c<this.layers[d].height){var f;return a instanceof e?(f=a.index,this.hasTile(b,c,d)?this.layers[d].data[c][b].copy(a):this.layers[d].data[c][b]=new e(d,f,b,c,a.width,a.height)):(f=a,this.hasTile(b,c,d)?this.layers[d].data[c][b].index=f:this.layers[d].data[c][b]=new e(this.layers[d],f,b,c,this.tileWidth,this.tileHeight)),this.collideIndexes.indexOf(f)>-1?this.layers[d].data[c][b].setCollision(!0,!0,!0,!0):this.layers[d].data[c][b].resetCollision(),this.layers[d].dirty=!0,this.calculateFaces(d),this.layers[d].data[c][b]}return null},putTileWorldXY:function(a,b,c,d,e,f){return f=this.getLayer(f),b=this.game.math.snapToFloor(b,d)/d,c=this.game.math.snapToFloor(c,e)/e,this.putTile(a,b,c,f)},searchTileIndex:function(a,b,c,d){var e,f,g;if(void 0===b&&(b=0),void 0===c&&(c=!1),d=this.getLayer(d),e=0,c){for(f=this.layers[d].height-1;f>=0;f--)for(g=this.layers[d].width-1;g>=0;g--)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}}else for(f=0;f<this.layers[d].height;f++)for(g=0;g<this.layers[d].width;g++)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}return null},getTile:function(a,b,c,d){return void 0===d&&(d=!1),c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height?-1===this.layers[c].data[b][a].index?d?this.layers[c].data[b][a]:null:this.layers[c].data[b][a]:null},getTileWorldXY:function(a,b,c,d,e,f){return void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.getTile(a,b,e,f)},copy:function(a,b,c,d,e){var f,g;if(e=this.getLayer(e),!this.layers[e])return void(this._results.length=0);for(void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=this.layers[e].width),void 0===d&&(d=this.layers[e].height),0>a&&(a=0),0>b&&(b=0),c>this.layers[e].width&&(c=this.layers[e].width),d>this.layers[e].height&&(d=this.layers[e].height),this._results.length=0,this._results.push({x:a,y:b,width:c,height:d,layer:e}),f=b;b+d>f;f++)for(g=a;a+c>g;g++)this._results.push(this.layers[e].data[f][g]);return this._results},paste:function(a,b,c,d){var e,f,g;if(void 0===a&&(a=0),void 0===b&&(b=0),d=this.getLayer(d),c&&!(c.length<2)){for(e=a-c[1].x,f=b-c[1].y,g=1;g<c.length;g++)this.layers[d].data[f+c[g].y][e+c[g].x].copy(c[g]);this.layers[d].dirty=!0,this.calculateFaces(d)}},swap:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._tempA=a,this._tempB=b,this._results.forEach(this.swapHandler,this),this.paste(c,d,this._results,g))},swapHandler:function(a){a.index===this._tempA?a.index=this._tempB:a.index===this._tempB&&(a.index=this._tempA)},forEach:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._results.forEach(a,b),this.paste(c,d,this._results,g))},replace:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(c,d,e,f,g),!(this._results.length<2)){for(var h=1;h<this._results.length;h++)this._results[h].index===a&&(this._results[h].index=b);this.paste(c,d,this._results,g)}},random:function(a,b,c,d,e){var f,g,h,i;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&(h=this._results[g].index,-1===f.indexOf(h)&&f.push(h));for(i=1;i<this._results.length;i++)this._results[i].index=this.game.rnd.pick(f);this.paste(a,b,this._results,e)}},shuffle:function(a,b,c,d,e){var f,g,h;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&f.push(this._results[g].index);for(i.shuffle(f),h=1;h<this._results.length;h++)this._results[h].index=f[h-1];this.paste(a,b,this._results,e)}},fill:function(a,b,c,d,e,f){if(f=this.getLayer(f),this.copy(b,c,d,e,f),!(this._results.length<2)){for(var g=1;g<this._results.length;g++)this._results[g].index=a;this.paste(b,c,this._results,f)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){var a,b,c="",d=[""];for(a=0;a<this.layers[this.currentLayer].height;a++){for(b=0;b<this.layers[this.currentLayer].width;b++)c+="%c  ",this.layers[this.currentLayer].data[a][b]>1?this.debugMap[this.layers[this.currentLayer].data[a][b]]?d.push("background: "+this.debugMap[this.layers[this.currentLayer].data[a][b]]):d.push("background: #ffffff"):d.push("background: rgb(0, 0, 0)");c+="\n"}d[0]=c,console.log.apply(console,d)},destroy:function(){this.removeAllLayers(),this.data=[],this.game=null}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(a){a!==this.currentLayer&&this.setLayer(a)}}),b.exports=c},{108:108,110:110,111:111,112:112,120:120,82:82}],110:[function(a,b){(function(c){function d(a,b,c,j,k){j|=0,k|=0,g.call(this,a,0,0),this.pivot.set(a.width/2,a.height/2),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPLAYER,this.canvas=h.create(j,k),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.renderSettings={enableScrollDelta:!0,overdrawRatio:.2,copyCanvas:null},this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:!0,debugAlpha:.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"},this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._wrap=!1,this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._scrollX=0,this._scrollY=0,this._results=[],i.canvasBitBltShift||(this.renderSettings.copyCanvas=d.ensureSharedCopyCanvas()),this.fixedToCamera=!0}var e=a("pixi"),f=a(63),g=a(82),h=a(105),i=a(106);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.sharedCopyCanvas=null,d.ensureSharedCopyCanvas=function(){return this.sharedCopyCanvas||(this.sharedCopyCanvas=h.create(2,2)),this.sharedCopyCanvas},d.prototype.postUpdate=function(){var a=this.game.camera;g.prototype.postUpdate.call(this),this.scrollX=-a.view.x-a.view.halfWidth,this.scrollY=-a.view.y-a.view.halfHeight,this.render()},d.prototype.destroy=function(){h.remove(this),Destroy.prototype.destroy.call(this)},d.prototype.resize=function(a,b){this.canvas.width=a,this.canvas.height=b,this.texture.frame.width=a,this.texture.frame.height=b,this.texture.width=a,this.texture.height=b,this.texture.crop.width=a,this.texture.crop.height=b,this.texture.baseTexture.width=a,this.texture.baseTexture.height=b,this.texture.update(),this.texture.requiresUpdate=!0,this.texture._updateUvs(),this.dirty=!0},d.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)},d.prototype._fixX=function(a){return 0>a&&(a=0),1===this.scrollFactorX?a:this._scrollX+(a-this._scrollX/this.scrollFactorX)},d.prototype._unfixX=function(a){return 1===this.scrollFactorX?a:this._scrollX/this.scrollFactorX+(a-this._scrollX)},d.prototype._fixY=function(a){return 0>a&&(a=0),1===this.scrollFactorY?a:this._scrollY+(a-this._scrollY/this.scrollFactorY)},d.prototype._unfixY=function(a){return 1===this.scrollFactorY?a:this._scrollY/this.scrollFactorY+(a-this._scrollY)},d.prototype.getTileX=function(a){return c.Math.floor(this._fixX(a)/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(this._fixY(a)/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),a=this._fixX(a),b=this._fixY(b),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;j+l>m;m++)for(n=i;i+k>n;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(2e3>a)for(;d.length<a;)d.push(void 0);return b=this.map.tiles[a]&&this.map.tiles[a][2],null!=b&&(c=this.map.tilesets[b],c&&c.containsTileIndex(a))?d[a]=c:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.setScale=function(a,b){var c,d,e,f;for(a=a||1,b=b||a,c=0;c<this.layer.data.length;c++)for(d=this.layer.data[c],e=0;e<d.length;e++)f=d[e],f.width=this.map.tileWidth*a,f.height=this.map.tileHeight*b,f.worldX=f.x*f.width,f.worldY=f.y*f.height;this.scale.setTo(a,b)},d.prototype.shiftCanvas=function(a,b,d){var e,f,g=a.canvas,h=g.width-c.Math.abs(b),i=g.height-c.Math.abs(d),j=0,k=0,l=b,m=d;0>b&&(j=-b,l=0),0>d&&(k=-d,m=0),e=this.renderSettings.copyCanvas,e?((e.width<h||e.height<i)&&(e.width=h,e.height=i),f=e.getContext("2d"),f.clearRect(0,0,h,i),f.drawImage(g,j,k,h,i,0,0,h,i),a.clearRect(l,m,h,i),a.drawImage(e,0,0,h,i,l,m,h,i)):(a.save(),a.globalCompositeOperation="copy",a.drawImage(g,j,k,h,i,l,m,h,i),a.restore())},d.prototype.renderRegion=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.context,w=this.layer.width,x=this.layer.height,y=this._mc.tileWidth,z=this._mc.tileHeight,A=this._mc.tilesets,B=NaN;for(this._wrap||(f>=d&&(d=c.Math.max(0,d),f=c.Math.min(w-1,f)),g>=e&&(e=c.Math.max(0,e),g=c.Math.min(x-1,g))),h=d*y-a,i=e*z-b,j=(d+(1<<20)*w)%w,k=(e+(1<<20)*x)%x,v.fillStyle=this.tileColor,o=k,q=g-e,m=i;q>=0;o++,q--,m+=z)for(o>=x&&(o-=x),r=this.layer.data[o],n=j,p=f-d,l=h;p>=0;n++,p--,l+=y)n>=w&&(n-=w),s=r[n],!s||s.index<0||(t=s.index,u=A[t],void 0===u&&(u=this.resolveTileset(t)),s.alpha===B||this.debug||(v.globalAlpha=s.alpha,B=s.alpha),u?s.rotation||s.flipped?(v.save(),v.translate(l+s.centerX,m+s.centerY),v.rotate(s.rotation),s.flipped&&v.scale(-1,1),u.draw(v,-s.centerX,-s.centerY,t),v.restore()):u.draw(v,l,m,t):this.debugSettings.missingImageFill&&(v.fillStyle=this.debugSettings.missingImageFill,v.fillRect(l,m,y,z)),s.debug&&this.debugSettings.debuggedTileOverfill&&(v.fillStyle=this.debugSettings.debuggedTileOverfill,v.fillRect(l,m,y,z)))},d.prototype.renderDeltaScroll=function(a,b){var d,e,f,g,h=this._mc.scrollX,i=this._mc.scrollY,j=this.canvas.width,k=this.canvas.height,l=this._mc.tileWidth,m=this._mc.tileHeight,n=0,o=-l,p=0,q=-m;0>a?(n=j+a,o=j-1):a>0&&(o=a),0>b?(p=k+b,q=k-1):b>0&&(q=b),this.shiftCanvas(this.context,a,b),n=c.Math.floor((n+h)/l),o=c.Math.floor((o+h)/l),p=c.Math.floor((p+i)/m),q=c.Math.floor((q+i)/m),o>=n&&(this.context.clearRect(n*l-h,0,(o-n+1)*l,k),d=c.Math.floor((0+i)/m),e=c.Math.floor((k-1+i)/m),this.renderRegion(h,i,n,d,o,e)),q>=p&&(this.context.clearRect(0,p*m-i,j,(q-p+1)*m),f=c.Math.floor((0+h)/l),g=c.Math.floor((j-1+h)/l),this.renderRegion(h,i,f,p,g,q))},d.prototype.renderFull=function(){var a=this._mc.scrollX,b=this._mc.scrollY,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=c.Math.floor(a/f),i=c.Math.floor((d-1+a)/f),j=c.Math.floor(b/g),k=c.Math.floor((e-1+b)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,j,i,k)},d.prototype.render=function(){var a,b,d,e,f,g,h,i=!1;if(this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,i=!0),a=this.canvas.width,b=this.canvas.height,d=0|this._scrollX,e=0|this._scrollY,f=this._mc,g=f.scrollX-d,h=f.scrollY-e,i||0!==g||0!==h||f.renderWidth!==a||f.renderHeight!==b))return this.context.save(),f.scrollX=d,f.scrollY=e,(f.renderWidth!==a||f.renderHeight!==b)&&(f.renderWidth=a,f.renderHeight=b),this.debug&&(this.context.globalAlpha=this.debugSettings.debugAlpha,this.debugSettings.forceFullRedraw&&(i=!0)),!i&&this.renderSettings.enableScrollDelta&&c.Math.abs(g)+c.Math.abs(h)<c.Math.min(a,b)?this.renderDeltaScroll(g,h):this.renderFull(),this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.texture.update(),this.dirty=!1,this.context.restore(),!0},d.prototype.renderDebug=function(){var a,b,d,e,f,g,h,i,j=this._mc.scrollX,k=this._mc.scrollY,l=this.context,m=this.canvas.width,n=this.canvas.height,o=this.layer.width,p=this.layer.height,q=this._mc.tileWidth,r=this._mc.tileHeight,s=c.Math.floor(j/q),t=c.Math.floor((m-1+j)/q),u=c.Math.floor(k/r),v=c.Math.floor((n-1+k)/r),w=s*q-j,x=u*r-k,y=(s+(1<<20)*o)%o,z=(u+(1<<20)*p)%p;for(l.strokeStyle=this.debugSettings.facingEdgeStroke,e=z,g=v-u,b=x;g>=0;e++,g--,b+=r)for(e>=p&&(e-=p),h=this.layer.data[e],d=y,f=t-s,a=w;f>=0;d++,f--,a+=q)d>=o&&(d-=o),i=h[d],!i||i.index<0||!i.collides||(this.debugSettings.collidingTileOverfill&&(l.fillStyle=this.debugSettings.collidingTileOverfill,l.fillRect(a,b,this._mc.cw,this._mc.ch)),this.debugSettings.facingEdgeStroke&&(l.beginPath(),i.faceTop&&(l.moveTo(a,b),l.lineTo(a+this._mc.cw,b)),i.faceBottom&&(l.moveTo(a,b+this._mc.ch),l.lineTo(a+this._mc.cw,b+this._mc.ch)),i.faceLeft&&(l.moveTo(a,b),l.lineTo(a,b+this._mc.ch)),i.faceRight&&(l.moveTo(a+this._mc.cw,b),l.lineTo(a+this._mc.cw,b+this._mc.ch)),l.stroke()))},Object.defineProperty(d.prototype,"wrap",{get:function(){return this._wrap},set:function(a){this._wrap=a,this.dirty=!0}}),Object.defineProperty(d.prototype,"scrollX",{get:function(){return this._scrollX},set:function(a){this._scrollX=a}}),Object.defineProperty(d.prototype,"scrollY",{get:function(){return this._scrollY},set:function(a){this._scrollY=a}}),Object.defineProperty(d.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(a){this._mc.cw=0|a,this.dirty=!0}}),Object.defineProperty(d.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(a){this._mc.ch=0|a,this.dirty=!0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{105:105,106:106,63:63,82:82,pixi:"pixi"}],111:[function(a,b){var c=a(108),d=a(113),e=a(121),f={parse:function(a,b,c,d,e,f){if(void 0===c&&(c=32),void 0===d&&(d=32),void 0===e&&(e=10),void 0===f&&(f=10),void 0===b)return this.getEmptyData();if(null===b)return this.getEmptyData(c,d,e,f);var g=a.cache.getTilemapData(b);return g?this.parseTiledJSON(g.data):void console.warn("TilemapParser.parse - No map data found for key "+b)},getEmptyData:function(a,b,c,d){var e,f,g={};return g.width=0,g.height=0,g.tileWidth=0,g.tileHeight=0,void 0!==a&&null!==a&&(g.tileWidth=a),void 0!==b&&null!==b&&(g.tileHeight=b),void 0!==c&&null!==c&&(g.width=c),void 0!==d&&null!==d&&(g.height=d),g.orientation="orthogonal",g.version="1",g.properties={},g.widthInPixels=0,g.heightInPixels=0,e=[],f={name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:[]},e.push(f),g.layers=e,g.images=[],g.objects={},g.collision={},g.tilesets=[],g.tiles=[],g},parseTiledJSON:function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;if("orthogonal"!==a.orientation)return console.warn("TilemapParser.parseTiledJSON - Only orthogonal map types are supported in this version of Phaser"),null;for(b={},b.width=a.width,b.height=a.height,b.tileWidth=a.tilewidth,b.tileHeight=a.tileheight,b.orientation=a.orientation,b.version=a.version,b.properties=a.properties,b.widthInPixels=b.width*b.tileWidth,b.heightInPixels=b.height*b.tileHeight,f=[],g=0;g<a.layers.length;g++)if("tilelayer"===a.layers[g].type){for(h={name:a.layers[g].name,x:a.layers[g].x,y:a.layers[g].y,width:a.layers[g].width,height:a.layers[g].height,widthInPixels:a.layers[g].width*a.tilewidth,heightInPixels:a.layers[g].height*a.tileheight,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{},indexes:[],callbacks:[],bodies:[]},a.layers[g].properties&&(h.properties=a.layers[g].properties),i=0,j=[],k=[],p=0,q=a.layers[g].data.length;q>p;p++){if(l=0,m=!1,o=a.layers[g].data[p],o>536870912)switch(n=0,o>2147483648&&(o-=2147483648,n+=4),o>1073741824&&(o-=1073741824,n+=2),o>536870912&&(o-=536870912,n+=1),n){case 5:l=Math.PI/2;break;case 6:l=Math.PI;break;case 3:l=3*Math.PI/2;break;case 4:l=0,m=!0;break;case 7:l=Math.PI/2,m=!0;break;case 2:l=Math.PI,m=!0;break;case 1:l=3*Math.PI/2,m=!0}o>0?(j.push(new c(h,o,i,k.length,a.tilewidth,a.tileheight)),j[j.length-1].rotation=l,j[j.length-1].flipped=m):j.push(new c(h,-1,i,k.length,a.tilewidth,a.tileheight)),
i++,i===a.layers[g].width&&(k.push(j),i=0,j=[])}h.data=k,f.push(h)}for(b.layers=f,r=[],g=0;g<a.layers.length;g++)"imagelayer"===a.layers[g].type&&(s={name:a.layers[g].name,image:a.layers[g].image,x:a.layers[g].x,y:a.layers[g].y,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{}},a.layers[g].properties&&(s.properties=a.layers[g].properties),r.push(s));for(b.images=r,t=[],u=[],g=0;g<a.tilesets.length;g++)v=a.tilesets[g],v.image&&(w=new d(v.name,v.firstgid,v.tilewidth,v.tileheight,v.margin,v.spacing,v.properties),v.tileproperties&&(w.tileProperties=v.tileproperties),w.updateTileData(v.imagewidth,v.imageheight),t.push(w));for(b.tilesets=t,b.imagecollections=u,x={},y={},z=function(a,b){var c,d,e={};for(c in b)d=b[c],void 0!==a[d]&&(e[d]=a[d]);return e},g=0;g<a.layers.length;g++)if("objectgroup"===a.layers[g].type)for(x[a.layers[g].name]=[],y[a.layers[g].name]=[],A=0,q=a.layers[g].objects.length;q>A;A++)if(a.layers[g].objects[A].gid)B={gid:a.layers[g].objects[A].gid,name:a.layers[g].objects[A].name,type:a.layers[g].objects[A].hasOwnProperty("type")?a.layers[g].objects[A].type:"",x:a.layers[g].objects[A].x,y:a.layers[g].objects[A].y,visible:a.layers[g].objects[A].visible,properties:a.layers[g].objects[A].properties},a.layers[g].objects[A].rotation&&(B.rotation=a.layers[g].objects[A].rotation),x[a.layers[g].name].push(B);else if(a.layers[g].objects[A].polyline){for(B={name:a.layers[g].objects[A].name,type:a.layers[g].objects[A].type,x:a.layers[g].objects[A].x,y:a.layers[g].objects[A].y,width:a.layers[g].objects[A].width,height:a.layers[g].objects[A].height,visible:a.layers[g].objects[A].visible,properties:a.layers[g].objects[A].properties},a.layers[g].objects[A].rotation&&(B.rotation=a.layers[g].objects[A].rotation),B.polyline=[],C=0;C<a.layers[g].objects[A].polyline.length;C++)B.polyline.push([a.layers[g].objects[A].polyline[C].x,a.layers[g].objects[A].polyline[C].y]);y[a.layers[g].name].push(B),x[a.layers[g].name].push(B)}else if(a.layers[g].objects[A].polygon){for(B=z(a.layers[g].objects[A],["name","type","x","y","visible","rotation","properties"]),B.polygon=[],C=0;C<a.layers[g].objects[A].polygon.length;C++)B.polygon.push([a.layers[g].objects[A].polygon[C].x,a.layers[g].objects[A].polygon[C].y]);x[a.layers[g].name].push(B)}else a.layers[g].objects[A].ellipse?(B=z(a.layers[g].objects[A],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]),x[a.layers[g].name].push(B)):(B=z(a.layers[g].objects[A],["name","type","x","y","width","height","visible","rotation","properties"]),B.rectangle=!0,x[a.layers[g].name].push(B));for(b.objects=x,b.collision=y,b.tiles=[],g=0;g<b.tilesets.length;g++)for(v=b.tilesets[g],i=v.tileMargin,D=v.tileMargin,E=0,F=0,G=0,p=v.firstgid;p<v.firstgid+v.total&&(b.tiles[p]=[i,D,g],i+=v.tileWidth+v.tileSpacing,E++,E!==v.total)&&(F++,F!==v.columns||(i=v.tileMargin,D+=v.tileHeight+v.tileSpacing,F=0,G++,G!==v.rows));p++);for(g=0;g<b.layers.length;g++)for(h=b.layers[g],J=0;J<h.data.length;J++)for(j=h.data[J],K=0;K<j.length;K++)H=j[K],H.index<0||(I=b.tiles[H.index][2],v=b.tilesets[I],v.tileProperties&&v.tileProperties[H.index-v.firstgid]&&(H.properties=e.mixin(v.tileProperties[H.index-v.firstgid],H.properties)));return b}};b.exports=f},{108:108,113:113,121:121}],112:[function(a,b){(function(c){function d(a,b,c,d,i){d|=0,i|=0,g.call(this,a,0,0),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPSPRITE,this.canvas=h.create(d,i),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.renderSettings={copyCanvas:null},this.exists=!0,this.dirty=!0,this.rayStepRate=4,this._mc={renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._results=[]}var e=a("pixi"),f=a(63),g=a(82),h=a(105);a(106);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.postUpdate=function(){g.prototype.postUpdate.call(this),this.render()},d.prototype.destroy=function(){h.remove(this),g.prototype.destroy.call(this)},d.prototype.resize=function(){},d.prototype._fixX=function(a){return 0>a&&(a=0),a},d.prototype._fixY=function(a){return 0>a&&(a=0),a},d.prototype.getTileX=function(a){return c.Math.floor(this._fixX(a)/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(this._fixY(a)/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),a=this._fixX(a),b=this._fixY(b),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;j+l>m;m++)for(n=i;i+k>n;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(2e3>a)for(;d.length<a;)d.push(void 0);return b=this.map.tiles[a]&&this.map.tiles[a][2],null!=b&&(c=this.map.tilesets[b],c&&c.containsTileIndex(a))?d[a]=c:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.setScale=function(a,b){var c,d,e,f;for(a=a||1,b=b||a,c=0;c<this.layer.data.length;c++)for(d=this.layer.data[c],e=0;e<d.length;e++)f=d[e],f.width=this.map.tileWidth*a,f.height=this.map.tileHeight*b,f.worldX=f.x*f.width,f.worldY=f.y*f.height;this.scale.setTo(a,b)},d.prototype.renderRegion=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.context,w=this.layer.width,x=this.layer.height,y=this._mc.tileWidth,z=this._mc.tileHeight,A=this._mc.tilesets,B=NaN;for(this._wrap||(f>=d&&(d=c.Math.max(0,d),f=c.Math.min(w-1,f)),g>=e&&(e=c.Math.max(0,e),g=c.Math.min(x-1,g))),h=d*y-a,i=e*z-b,j=(d+(1<<20)*w)%w,k=(e+(1<<20)*x)%x,v.fillStyle=this.tileColor,o=k,q=g-e,m=i;q>=0;o++,q--,m+=z)for(o>=x&&(o-=x),r=this.layer.data[o],n=j,p=f-d,l=h;p>=0;n++,p--,l+=y)n>=w&&(n-=w),s=r[n],!s||s.index<0||(t=s.index,u=A[t],void 0===u&&(u=this.resolveTileset(t)),s.alpha===B||this.debug||(v.globalAlpha=s.alpha,B=s.alpha),u?s.rotation||s.flipped?(v.save(),v.translate(l+s.centerX,m+s.centerY),v.rotate(s.rotation),s.flipped&&v.scale(-1,1),u.draw(v,-s.centerX,-s.centerY,t),v.restore()):u.draw(v,l,m,t):this.debugSettings.missingImageFill&&(v.fillStyle=this.debugSettings.missingImageFill,v.fillRect(l,m,y,z)),s.debug&&this.debugSettings.debuggedTileOverfill&&(v.fillStyle=this.debugSettings.debuggedTileOverfill,v.fillRect(l,m,y,z)))},d.prototype.renderFull=function(){var a=0,b=0,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=0,i=c.Math.floor((d-1)/f),j=0,k=c.Math.floor((e-1)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,j,i,k)},d.prototype.render=function(){var a=!1;if(this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,a=!0),a))return this.context.save(),this.renderFull(),this.texture.update(),this.dirty=!1,this.context.restore(),!0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{105:105,106:106,63:63,82:82,pixi:"pixi"}],113:[function(a,b){(function(a){function c(a,b,c,d,e,f,g){(void 0===c||0>=c)&&(c=32),(void 0===d||0>=d)&&(d=32),void 0===e&&(e=0),void 0===f&&(f=0),this.name=a,this.firstgid=0|b,this.tileWidth=0|c,this.tileHeight=0|d,this.tileMargin=0|e,this.tileSpacing=0|f,this.properties=g||{},this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]}c.prototype={draw:function(a,b,c,d){var e=d-this.firstgid<<1;e>=0&&e+1<this.drawCoords.length&&a.drawImage(this.image,this.drawCoords[e],this.drawCoords[e+1],this.tileWidth,this.tileHeight,b,c,this.tileWidth,this.tileHeight)},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},setImage:function(a){this.image=a,this.updateTileData(a.width,a.height)},setSpacing:function(a,b){this.tileMargin=0|a,this.tileSpacing=0|b,this.image&&this.updateTileData(this.image.width,this.image.height)},updateTileData:function(b,c){var d,e,f,g,h=(c-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(b-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);for((h%1!==0||i%1!==0)&&console.warn("Tileset - image tile area is not an even multiple of tile size"),h=a.Math.floor(h),i=a.Math.floor(i),(this.rows&&this.rows!==h||this.columns&&this.columns!==i)&&console.warn("Tileset - actual and expected number of tile rows and columns differ"),this.rows=h,this.columns=i,this.total=h*i,this.drawCoords.length=0,d=this.tileMargin,e=this.tileMargin,f=0;f<this.rows;f++){for(g=0;g<this.columns;g++)this.drawCoords.push(d),this.drawCoords.push(e),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin,e+=this.tileHeight+this.tileSpacing}}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],114:[function(a,b){function c(a){this.game=a,this.time=0,this.prevTime=0,this.now=0,this.elapsed=0,this.elapsedMS=0,this.desiredFps=60,this.suggestedFps=null,this.slowMotion=1,this.advancedTiming=!1,this.frames=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]}c.prototype.constructor=c,c.prototype.boot=function(){this._started=Date.now(),this.time=Date.now()},c.prototype.add=function(a){return this._timers.push(a),a},c.prototype.create=function(){},c.prototype.removeAll=function(){for(var a=0;a<this._timers.length;a++)this._timers[a].destroy();this._timers=[]},c.prototype.update=function(a){this.game.raf._isSetTimeOut?this.updateSetTimeout(a):this.updateRAF(a),this.advancedTiming&&this.updateAdvancedTiming(),this.game.paused||this._timers.length&&this.updateTimers()},c.prototype.updateSetTimeout=function(a){var b=this.time;this.time=a,this.elapsedMS=this.time-b,this.prevTime=this.now,this.now=a,this.elapsed=this.now-this.prevTime,this.timeToCall=Math.floor(Math.max(0,1e3/this.desiredFps-(this.timeCallExpected-a))),this.timeCallExpected=a+this.timeToCall},c.prototype.updateRAF=function(a){var b=this.time;this.time=Date.now(),this.elapsedMS=this.time-b,this.prevTime=this.now,this.now=a,this.elapsed=this.now-this.prevTime},c.prototype.updateTimers=function(){for(var a=0,b=this._timers.length;b>a;)this._timers[a].update(this.time)?a++:(this._timers.splice(a,1),b--)},c.prototype.gamePaused=function(){this._pauseStarted=Date.now();for(var a=this._timers.length;a--;)this._timers[a]._pause()},c.prototype.gameResumed=function(){this.time=Date.now(),this.pauseDuration=this.time-this._pauseStarted;for(var a=this._timers.length;a--;)this._timers[a]._resume()},c.prototype.totalElapsedSeconds=function(){return.001*(this.time-this._started)},c.prototype.elapsedSince=function(a){return this.time-a},c.prototype.elapsedSecondsSince=function(a){return.001*(this.time-a)},c.prototype.reset=function(){this._started=this.time,this.removeAll()},b.exports=c},{}],115:[function(a,b){var c={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}}};c.Default=c.Linear.None,b.exports=c},{}],116:[function(a,b){function c(a,b,c){this.game=b,this.target=a,this.manager=c,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=c.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1}var d=a(117),e=a(115),f=a(123);c.prototype={to:function(a,b,c,f,g,h,i){return(void 0===b||0>=b)&&(b=1e3),(void 0===c||null===c)&&(c=e.Default),void 0===f&&(f=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.to cannot be called after Tween.start"),this):(this.timeline.push(new d(this).to(a,b,c,g,h,i)),f&&this.start(),this)},from:function(a,b,c,f,g,h,i){return void 0===b&&(b=1e3),(void 0===c||null===c)&&(c=e.Default),void 0===f&&(f=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.from cannot be called after Tween.start"),this):(this.timeline.push(new d(this).from(a,b,c,g,h,i)),f&&this.start(),this)},start:function(a){var b,c;if(void 0===a&&(a=0),null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(b=0;b<this.timeline.length;b++)for(c in this.timeline[b].vEnd)this.properties[c]=this.target[c]||0,Array.isArray(this.properties[c])||(this.properties[c]*=1);for(b=0;b<this.timeline.length;b++)this.timeline[b].loadValues();return this.manager.add(this),this.isRunning=!0,(0>a||a>this.timeline.length-1)&&(a=0),this.current=a,this.timeline[this.current].start(),this},stop:function(a){return void 0===a&&(a=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,a&&(this.onComplete&&this.onComplete(),this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},updateTweenData:function(a,b,c){if(0===this.timeline.length)return this;if(void 0===c&&(c=0),-1===c)for(var d=0;d<this.timeline.length;d++)this.timeline[d][a]=b;else this.timeline[c][a]=b;return this},delay:function(a,b){return this.updateTweenData("delay",a,b)},repeat:function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("repeatCounter",a,c),this.updateTweenData("repeatDelay",b,c)},repeatDelay:function(a,b){return this.updateTweenData("repeatDelay",a,b)},yoyo:function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("yoyo",a,c),this.updateTweenData("yoyoDelay",b,c)},yoyoDelay:function(a,b){return this.updateTweenData("yoyoDelay",a,b)},easing:function(a,b){return"string"==typeof a&&this.manager.easeMap[a]&&(a=this.manager.easeMap[a]),this.updateTweenData("easingFunction",a,b)},interpolation:function(a,b,c){return void 0===b&&(b=f),this.updateTweenData("interpolationFunction",a,c),this.updateTweenData("interpolationContext",b,c)},repeatAll:function(a){return void 0===a&&(a=0),this.repeatCounter=a,this},chain:function(){for(var a=arguments.length;a--;)a>0?arguments[a-1].chainedTween=arguments[a]:this.chainedTween=arguments[a];return this},loop:function(a){return void 0===a&&(a=!0),a?this.repeatAll(-1):this.repeatCounter=0,this},onUpdateCallback:function(a,b){return this._onUpdateCallback=a,this._onUpdateCallbackContext=b,this},pause:function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},_pause:function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},resume:function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var a=0;a<this.timeline.length;a++)this.timeline[a].isRunning||(this.timeline[a].startTime+=this.game.time.time-this._pausedTime)}},_resume:function(){this._codePaused||this.resume()},update:function(a){var b,c;return this.pendingDelete?!1:this.isPaused?!0:(b=this.timeline[this.current].update(a),b===d.PENDING?!0:b===d.RUNNING?(this._hasStarted||(this.onStart&&this.onStart(this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning):b===d.LOOPED?(this.onLoop&&this.onLoop(this),!0):b===d.COMPLETE?(c=!1,this.reverse?(this.current--,this.current<0&&(this.current=this.timeline.length-1,c=!0)):(this.current++,this.current===this.timeline.length&&(this.current=0,c=!0)),c?-1===this.repeatCounter?(this.timeline[this.current].start(),this.onRepeat&&this.onRepeat(this),!0):this.repeatCounter>0?(this.repeatCounter--,this.timeline[this.current].start(),this.onRepeat&&this.onRepeat(this),!0):(this.isRunning=!1,this.onComplete&&this.onComplete(this),this.chainedTween&&this.chainedTween.start(),!1):(this.onChildComplete&&this.onChildComplete(this),this.timeline[this.current].start(),!0)):void 0)},generateData:function(a,b){var c,d;if(null===this.game||null===this.target)return null;for(void 0===a&&(a=60),void 0===b&&(b=[]),c=0;c<this.timeline.length;c++)for(d in this.timeline[c].vEnd)this.properties[d]=this.target[d]||0,Array.isArray(this.properties[d])||(this.properties[d]*=1);for(c=0;c<this.timeline.length;c++)this.timeline[c].loadValues();for(c=0;c<this.timeline.length;c++)b=b.concat(this.timeline[c].generateData(a));return b}},Object.defineProperty(c.prototype,"totalDuration",{get:function(){var a,b=0;for(a=0;a<this.timeline.length;a++)b+=this.timeline[a].duration;return b}}),c.prototype.constructor=c,b.exports=c},{115:115,117:117,123:123}],117:[function(a,b){function c(a){this.parent=a,this.game=a.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=d.Default,this.interpolationFunction=e.linearInterpolation,this.interpolationContext=e,this.isRunning=!1,this.isFrom=!1}var d=a(115),e=a(123);c.PENDING=0,c.RUNNING=1,c.LOOPED=2,c.COMPLETE=3,c.prototype={to:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!1,this},from:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.clock.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,this.delay>0?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a],this.parent.target[a]=this.vStart[a];return this.value=0,this.yoyoCounter=0,this},loadValues:function(){for(var a in this.parent.properties){if(this.vStart[a]=this.parent.properties[a],Array.isArray(this.vEnd[a])){if(0===this.vEnd[a].length)continue;0===this.percent&&(this.vEnd[a]=[this.vStart[a]].concat(this.vEnd[a]))}void 0!==this.vEnd[a]?("string"==typeof this.vEnd[a]&&(this.vEnd[a]=this.vStart[a]+parseFloat(this.vEnd[a],10)),this.parent.properties[a]=this.vEnd[a]):this.vEnd[a]=this.vStart[a],this.vStartCache[a]=this.vStart[a],this.vEndCache[a]=this.vEnd[a]}return this},update:function(a){var b,d,f,g;if(this.isRunning){if(a<this.startTime)return c.RUNNING}else{if(!(a>=this.startTime))return c.PENDING;this.isRunning=!0}b=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.clock.elapsedMS,this.parent.reverse?(this.dt-=b*this.parent.timeScale,this.dt=e.max(this.dt,0)):(this.dt+=b*this.parent.timeScale,this.dt=e.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);for(d in this.vEnd)f=this.vStart[d],g=this.vEnd[d],Array.isArray(g)?this.parent.target[d]=this.interpolationFunction.call(this.interpolationContext,g,this.value):this.parent.target[d]=f+(g-f)*this.value;return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():c.RUNNING},generateData:function(a){var b,c,d,f,g,h,i,j;this.parent.reverse?this.dt=this.duration:this.dt=0,b=[],c=!1,d=1/a*1e3;do{this.parent.reverse?(this.dt-=d,this.dt=e.max(this.dt,0)):(this.dt+=d,this.dt=e.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),f={};for(g in this.vEnd)h=this.vStart[g],i=this.vEnd[g],Array.isArray(i)?f[g]=this.interpolationFunction(i,this.value):f[g]=h+(i-h)*this.value;b.push(f),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(c=!0)}while(!c);return this.yoyo&&(j=b.slice(),j.reverse(),b=b.concat(j)),b},repeat:function(){var a;if(this.yoyo){if(this.inReverse&&0===this.repeatCounter)return c.COMPLETE;this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return c.COMPLETE;if(this.inReverse)for(a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a];else{for(a in this.vStartCache)this.vStart[a]=this.vStartCache[a],this.vEnd[a]=this.vEndCache[a];this.repeatCounter>0&&this.repeatCounter--}return this.startTime=this.game.clock.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,c.LOOPED}},c.prototype.constructor=c,b.exports=c},{115:115,123:123}],118:[function(a,b){function c(a){this.game=a,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Linear:e.Linear.None,Quad:e.Quadratic.Out,"Quad.easeIn":e.Quadratic.In,"Quad.easeOut":e.Quadratic.Out,"Quad.easeInOut":e.Quadratic.InOut}}var d=a(63),e=a(115),f=a(116);c.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var a=0;a<this._tweens.length;a++)this._tweens[a].pendingDelete=!0;this._add=[]},removeFrom:function(a,b){var c,e;if(void 0===b&&(b=!0),Array.isArray(a))for(c=0,e=a.length;e>c;c++)this.removeFrom(a[c]);else if(a.type===d.GROUP&&b)for(c=0,e=a.children.length;e>c;c++)this.removeFrom(a.children[c]);else{for(c=0,e=this._tweens.length;e>c;c++)a===this._tweens[c].target&&this.remove(this._tweens[c]);for(c=0,e=this._add.length;e>c;c++)a===this._add[c].target&&this.remove(this._add[c])}},add:function(a){a._manager=this,this._add.push(a)},create:function(a){return new f(a,this.game,this)},remove:function(a){var b=this._tweens.indexOf(a);-1!==b?this._tweens[b].pendingDelete=!0:(b=this._add.indexOf(a),-1!==b&&(this._add[b].pendingDelete=!0))},update:function(){var a,b=this._add.length,c=this._tweens.length;if(0===c&&0===b)return!1;for(a=0;c>a;)this._tweens[a].update(this.game.clock.time)?a++:(this._tweens.splice(a,1),c--);return b>0&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(a){return this._tweens.some(function(b){return b.target===a})},_pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._pause()},_resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._resume()},pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].pause()},resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].resume(!0)}},c.prototype.constructor=c,b.exports=c},{115:115,116:116,63:63}],119:[function(a,b){function c(a){this.position=0,this.list=a||[]}c.prototype={add:function(a){return this.exists(a)||this.list.push(a),a},getIndex:function(a){return this.list.indexOf(a)},getByKey:function(a,b){for(var c=this.list.length;c--;)if(this.list[c][a]===b)return this.list[c];return null},exists:function(a){return this.list.indexOf(a)>-1},reset:function(){this.list.length=0},remove:function(a){var b=this.list.indexOf(a);return b>-1?(this.list.splice(b,1),a):void 0},setAll:function(a,b){for(var c=this.list.length;c--;)this.list[c]&&(this.list[c][a]=b)},callAll:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=this.list.length;c--;)this.list[c]&&this.list[c][a]&&this.list[c][a].apply(this.list[c],b)},removeAll:function(a){var b,c;for(void 0===a&&(a=!1),b=this.list.length;b--;)this.list[b]&&(c=this.remove(this.list[b]),a&&c.destroy());this.position=0,this.list=[]}},Object.defineProperty(c.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(c.prototype,"first",{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}}),Object.defineProperty(c.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),c.prototype.constructor=c,b.exports=c},{}],120:[function(a,b){(function(c){var d=a(123),e={getRandomItem:function(a,b,e){if(null==a)return null;void 0===b&&(b=0),void 0===e&&(e=a.length);var f=b+c.Math.floor(d.random()*e);return void 0===a[f]?null:a[f]},removeRandomItem:function(a,b,e){var f,g;return null==a?null:(void 0===b&&(b=0),void 0===e&&(e=a.length),f=b+c.Math.floor(d.random()*e),f<a.length?(g=a.splice(f,1),void 0===g[0]?null:g[0]):null)},shuffle:function(a){var b,e,f;for(b=a.length-1;b>0;b--)e=c.Math.floor(d.random()*(b+1)),f=a[b],a[b]=a[e],a[e]=f;return a},transposeMatrix:function(a){var b,c,d=a.length,e=a[0].length,f=Array(e);for(b=0;e>b;b++)for(f[b]=Array(d),c=d-1;c>-1;c--)f[b][c]=a[c][b];return f},rotateMatrix:function(a,b){if("string"!=typeof b&&(b=(b%360+360)%360),90===b||-270===b||"rotateLeft"===b)a=e.transposeMatrix(a),a=a.reverse();else if(-90===b||270===b||"rotateRight"===b)a=a.reverse(),a=e.transposeMatrix(a);else if(180===d.abs(b)||"rotate180"===b){for(var c=0;c<a.length;c++)a[c].reverse();a=a.reverse()}return a},findClosest:function(a,b){var c,d,e;if(!b.length)return NaN;if(1===b.length||a<b[0])return b[0];for(c=1;b[c]<a;)c++;return d=b[c-1],e=c<b.length?b[c]:Number.POSITIVE_INFINITY,a-d>=e-a?e:d},rotate:function(a){var b=a.shift();return a.push(b),b},numberArray:function(a,b){var c,d=[];for(c=a;b>=c;c++)d.push(c);return d},numberArrayStep:function(a,b,e){var f,g,h;for((void 0===a||null===a)&&(a=0),(void 0===b||null===b)&&(b=a,a=0),void 0===e&&(e=1),f=[],g=c.Math.max(d.roundAwayFromZero((b-a)/(e||1)),0),h=0;g>h;h++)f.push(a),a+=e;return f}};b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{123:123}],121:[function(a,b){var c={isPlainObject:function(a){if("object"!=typeof a||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},extend:function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(b in a)d=h[b],e=a[b],h!==e&&(k&&e&&(c.isPlainObject(e)||(f=Array.isArray(e)))?(f?(f=!1,g=d&&Array.isArray(d)?d:[]):g=d&&c.isPlainObject(d)?d:{},h[b]=c.extend(k,g,e)):void 0!==e&&(h[b]=e));return h},mixinPrototype:function(a,b,c){var d,e,f,g;for(void 0===c&&(c=!1),d=Object.keys(b),e=0;e<d.length;e++)f=d[e],g=b[f],!c&&f in a||(!g||"function"!=typeof g.get&&"function"!=typeof g.set?a[f]=g:"function"==typeof g.clone?a[f]=g.clone():Object.defineProperty(a,f,g))},mixin:function(a,b){var d,e,f;if(!a||"object"!=typeof a)return b;if(Array.isArray(a))return a;for(d in a)e=a[d],e.childNodes||e.cloneNode||(f=typeof a[d],a[d]&&"object"===f?typeof b[d]===f?b[d]=c.mixin(a[d],b[d]):b[d]=c.mixin(a[d],new e.constructor):b[d]=a[d]);return b}};b.exports=c},{}],122:[function(a,b){var c={getColor:function(a,b,c){return a<<16|b<<8|c},getRGB:function(a){return a>16777215?{alpha:a>>>24,red:a>>16&255,green:a>>8&255,blue:255&a,a:a>>>24,r:a>>16&255,g:a>>8&255,b:255&a}:{alpha:255,red:a>>16&255,green:a>>8&255,blue:255&a,a:255,r:a>>16&255,g:a>>8&255,b:255&a}},interpolateColor:function(a,b,d,e){var f=c.getRGB(a),g=c.getRGB(b),h=(g.red-f.red)*e/d+f.red,i=(g.green-f.green)*e/d+f.green,j=(g.blue-f.blue)*e/d+f.blue;return c.getColor(h,i,j)},interpolateColorWithRGB:function(a,b,d,e,f,g){var h=c.getRGB(a),i=(b-h.red)*g/f+h.red,j=(d-h.green)*g/f+h.green,k=(e-h.blue)*g/f+h.blue;return c.getColor(i,j,k)},interpolateRGB:function(a,b,d,e,f,g,h,i){var j=(e-a)*i/h+a,k=(f-b)*i/h+b,l=(g-d)*i/h+d;return c.getColor(j,k,l)}};b.exports=c},{}],123:[function(a,b){(function(a){var c=a.Math.PI/180,d=180/a.Math.PI;b.exports={PI2:2*a.Math.PI,degToRad:function(a){return a*c},radToDeg:function(a){return a*d},fuzzyEqual:function(b,c,d){return void 0===d&&(d=1e-4),a.Math.abs(b-c)<d},fuzzyLessThan:function(a,b,c){return void 0===c&&(c=1e-4),b+c>a},fuzzyGreaterThan:function(a,b,c){return void 0===c&&(c=1e-4),a>b-c},fuzzyCeil:function(b,c){return void 0===c&&(c=1e-4),a.Math.ceil(b-c)},fuzzyFloor:function(b,c){return void 0===c&&(c=1e-4),a.Math.floor(b+c)},average:function(){var a,b=0,c=arguments.length;for(a=0;c>a;a++)b+=+arguments[a];return b/c},shear:function(a){return a%1},snapTo:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.round(b/c),d+b)},snapToFloor:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.floor(b/c),d+b)},snapToCeil:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.ceil(b/c),d+b)},roundTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,-c);return a.Math.round(b*e)/e},floorTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,-c);return a.Math.floor(b*e)/e},ceilTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,-c);return a.Math.ceil(b*e)/e},angleBetween:function(b,c,d,e){return a.Math.atan2(e-c,d-b)},angleBetweenY:function(b,c,d,e){return a.Math.atan2(d-b,e-c)},angleBetweenPoints:function(b,c){return a.Math.atan2(c.y-b.y,c.x-b.x)},angleBetweenPointsY:function(b,c){return a.Math.atan2(c.x-b.x,c.y-b.y)},reverseAngle:function(b){return this.normalizeAngle(b+a.Math.PI,!0)},normalizeAngle:function(b){return b%=2*a.Math.PI,b>=0?b:b+2*a.Math.PI},maxAdd:function(b,c,d){return a.Math.min(b+c,d)},minSub:function(b,c,d){return a.Math.max(b-c,d)},wrap:function(a,b,c){var d,e=c-b;return 0>=e?0:(d=(a-b)%e,0>d&&(d+=e),d+b)},wrapValue:function(b,c,d){var e;return b=a.Math.abs(b),c=a.Math.abs(c),d=a.Math.abs(d),e=(b+c)%d},isOdd:function(a){return!!(1&a)},isEven:function(a){return!(1&a)},min:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;d>b;b++)a[b]<a[c]&&(c=b);return a[c]},max:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;d>b;b++)a[b]>a[c]&&(c=b);return a[c]},minProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;e>c;c++)b[c][a]<b[d][a]&&(d=c);return b[d][a]},maxProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;e>c;c++)b[c][a]>b[d][a]&&(d=c);return b[d][a]},wrapAngle:function(b,c){return c?this.wrap(b,-a.Math.PI,a.Math.PI):this.wrap(b,-180,180)},linearInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return 0>c?this.linear(b[0],b[1],e):c>1?this.linear(b[d],b[d-1],d-e):this.linear(b[f],b[f+1>d?d:f+1],e-f)},bezierInterpolation:function(b,c){var d,e=0,f=b.length-1;for(d=0;f>=d;d++)e+=a.Math.pow(1-c,f-d)*a.Math.pow(c,d)*b[d]*this.bernstein(f,d);return e},catmullRomInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return b[0]===b[d]?(0>c&&(f=a.Math.floor(e=d*(1+c))),this.catmullRom(b[(f-1+d)%d],b[f],b[(f+1)%d],b[(f+2)%d],e-f)):0>c?b[0]-(this.catmullRom(b[0],b[0],b[1],b[1],-e)-b[0]):c>1?b[d]-(this.catmullRom(b[d],b[d],b[d-1],b[d-1],e-d)-b[d]):this.catmullRom(b[f?f-1:0],b[f],b[f+1>d?d:f+1],b[f+2>d?d:f+2],e-f)},linear:function(a,b,c){return(b-a)*c+a},bernstein:function(a,b){return this.factorial(a)/this.factorial(b)/this.factorial(a-b)},factorial:function(a){if(0===a)return 1;for(var b=a;--a;)b*=a;return b},catmullRom:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;return(2*b-2*c+f+g)*i+(-3*b+3*c-2*f-g)*h+f*e+b},difference:function(b,c){return a.Math.abs(b-c)},roundAwayFromZero:function(b){return b>0?a.Math.ceil(b):a.Math.floor(b)},sinCosGenerator:function(b,c,d,e){var f,g,h,i,j,k;for(void 0===c&&(c=1),void 0===d&&(d=1),
void 0===e&&(e=1),f=c,g=d,h=e*a.Math.PI/b,i=[],j=[],k=0;b>k;k++)g-=f*h,f+=g*h,i[k]=g,j[k]=f;return{sin:j,cos:i,length:b}},distance:function(b,c,d,e){var f=b-d,g=c-e;return a.Math.sqrt(f*f+g*g)},distanceSq:function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},distancePow:function(b,c,d,e,f){return void 0===f&&(f=2),a.Math.sqrt(a.Math.pow(d-b,f)+a.Math.pow(e-c,f))},clamp:function(a,b,c){return b>a?b:a>c?c:a},clampBottom:function(a,b){return b>a?b:a},within:function(b,c,d){return a.Math.abs(b-c)<=d},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*(3-2*b)},smootherstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*b*(b*(6*b-15)+10)},sign:function(a){return 0>a?-1:a>0?1:0},percent:function(a,b,c){return void 0===c&&(c=0),a>b||c>b?1:c>a||c>a?0:(a-c)/b}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],124:[function(a,b){(function(a){function c(a){void 0===a&&(a=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.sow(a)}c.prototype={rnd:function(){var a=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|a,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},sow:function(a){var b,c;if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,a)for(c=0;c<a.length&&null!=a[c];c++)b=a[c],this.s0-=this.hash(b),this.s0+=~~(this.s0<0),this.s1-=this.hash(b),this.s1+=~~(this.s1<0),this.s2-=this.hash(b),this.s2+=~~(this.s2<0)},hash:function(a){var b,c,d;for(d=4022871197,a=""+a,c=0;c<a.length;c++)d+=a.charCodeAt(c),b=.02519603282416938*d,d=b>>>0,b-=d,b*=d,d=b>>>0,b-=d,d+=4294967296*b;return 2.3283064365386963e-10*(d>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(b,c){return a.Math.floor(this.realInRange(0,c-b+1)+b)},between:function(a,b){return this.integerInRange(a,b)},realInRange:function(a,b){return this.frac()*(b-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",b="";for(b=a="";a++<36;b+=~a%5|3*a&4?(15^a?8^this.frac()*(20^a?16:4):4).toString(16):"-");return b},pick:function(a){return a[this.integerInRange(0,a.length-1)]},weightedPick:function(b){return b[~~(a.Math.pow(this.frac(),2)*(b.length-1)+.5)]},timestamp:function(a,b){return this.realInRange(a||9466848e5,b||1577862e6)},angle:function(){return this.integerInRange(-180,180)}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],125:[function(a,b){function c(a,b,c){e.Sprite.call(this,new e.Texture(a.cache.getImage("eamon",!0).base)),this.game=a,this.width=b,this.height=c,this.filter=new d(a),this.filter.setResolution(b,c),this.filters=[this.filter]}var d=a(127),e=a("pixi");c.prototype=Object.create(e.Sprite.prototype),c.prototype.constructor=c,c.prototype.preUpdate=function(){},c.prototype.update=function(){},c.prototype.postUpdate=function(){},c.prototype.resize=function(a,b){this.width=a,this.height=b,this.filter.setResolution(a,b)},b.exports=c},{127:127,pixi:"pixi"}],126:[function(a,b){function c(a,b){e.Sprite.call(this,new e.Texture(a.cache.getImage(b,!0).base)),this.game=a,this.width=this.texture.width,this.height=this.texture.height,this.pivot.set(this.texture.width/2,this.texture.width/2),this.scale.set(.5),this.planetShader=new d(a),this.planetShader.setTexture(new e.Texture(a.cache.getImage(b,!0).base)),this.shader=this.planetShader}var d=a(130),e=a("pixi");c.prototype=Object.create(e.Sprite.prototype),c.prototype.constructor=c,c.prototype.preUpdate=function(){},c.prototype.update=function(){this.shader.update()},c.prototype.postUpdate=function(){},b.exports=c},{130:130,pixi:"pixi"}],127:[function(a,b){function c(a,b,c){this.game=a,d.AbstractFilter.call(this,"\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",'\nprecision lowp float;\n\nuniform float scale;\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 transform;\n\n// varying vec2 vTextureCoord;\n// varying vec4 vColor;\n// uniform sampler2D uSampler;\n// void main(void) {\n//   vec4 color = vec4(0.25, 0.5, 0.75, 1.);\n//   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor + color;\n// };\n\n// "const vec3 c1 = vec3(0.0, 0.0, 0.1);",\n// "const vec3 c2 = vec3(0.45, 0.35, 0.4);",\n// "const vec3 c3 = vec3(0.2, 0.0, 0.0);",\n// "const vec3 c4 = vec3(0.2, 0.2, 0.2);",\n// "const vec3 c5 = vec3(0.1);",\n// "const vec3 c6 = vec3(0.9);",\n\n// nebula settings\n// const int niterations = 6;\n// const vec3 c1 = vec3(0.0, 0.0, 0.2);\n// const vec3 c2 = vec3(0.2, 0.2, 0.3);\n// const vec3 c3 = vec3(0.3, 0.0, 0.0);\n// const vec3 c4 = vec3(0.0, 0.2, 0.22);\n// const vec3 c5 = vec3(0.2);\n// const vec3 c6 = vec3(0.44);\n//.. blue ^\n\nconst int niterations = 7;\nconst vec3 c1 = vec3(0.0, 0.0, 0.2);\nconst vec3 c2 = vec3(0.2, 0.1, 0.1);\nconst vec3 c3 = vec3(0.2, 0.0, 0.1);\nconst vec3 c4 = vec3(0.24, 0.1, 0.1);\nconst vec3 c5 = vec3(0.00);\nconst vec3 c6 = vec3(0.32);\n//.. red ^\n\n// starfield\nconst mat2 m2 = mat2(0.2, 0.2, -0.6, 0.2);\n\nfloat rand(vec2 n) {\n  return fract(sin(dot(n.xy, vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat noise(vec2 n) {\n  const vec2 d = vec2(0.0, 1.0);\n  vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n  return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat fbm(vec2 n) {\n  float total = 0.0, amplitude = 1.0;\n  for(int i = 0; i < niterations; i++) {\n    total += noise(n) * amplitude;\n    n += n;\n    amplitude *= 0.5;\n  }\n  return total;\n}\n\nfloat starfield(vec2 position) {\n  vec2 z = position;\n  float q = noise(position);\n\n  position = floor(position * (5.0)) / (5.0) + 0.1;\n\n  float r = (q * 320. + 60.) * dot(z-position, z-position);\n  float t = 0.5 * sin(time / 80.) + 1.0;\n\n  z = position + t;\n  for(int i=0; i<3; i++) {\n    z = m2 * z * 1.1 + 1.3;\n    z += 15.0 * sin(z + 3.0 * sin(position.yx));\n  }\n  return clamp(1.4-length(z), 0.0, 1.0) * exp(-r);\n}\n\n// const int iterations = 9;\n// const float formuparam = 0.88;\n\n// const int volsteps = 1;\n// const float stepsize = 0.1;\n\n// const float brightness = 0.04;\n// const float distfading = 1.0; //0.2;\n// const float saturation = 0.8;\n\n// vec3 starnest(vec2 position) {\n//   float s = 0.1, fade = 1.0;\n\n//   vec3 dir = vec3(position, 1.);\n//   vec3 from = vec3(1.0, 1.0, 1.0);\n//        from += vec3(-transform * 0.00003, -2.0);\n\n//   vec3 v = vec3(0.0);\n//   for(int r=0; r<volsteps; r++) {\n//     vec3 p = from + s * dir;\n\n//     float pa, a = pa = 0.0;\n//     float n = noise(p.xy);\n    \n//     for(int i=0; i<iterations; i++) {\n//       p = abs(p)/dot(p,p)-formuparam; // the magic formula\n//       a += abs(length(p)-pa); // absolute sum of average change\n//       pa = length(p);\n//     }\n        \n//     a *= a*a; // add contrast\n//     //v += fade;\n//     v += vec3(s, s/3., s/3.) * a * (brightness * pow(n, 3.)); // * fade; // coloring based on distance\n//     //fade *= distfading; // distance fading\n//     s += stepsize;\n//   }\n  \n//   return mix(vec3(length(v)), v, saturation);\n// }\n\nvec3 nebula(vec2 position) {\n  float ntime = time * 0.04;\n  float q = fbm(position - ntime * 0.4);\n  vec2 r = vec2(fbm(position + q + ntime * 0.7 - position.x - position.y), fbm(position + q - ntime * 0.4));\n  return mix(c1, c2, fbm(position + r)) + mix(c3, c4, r.x) - mix(c5, c6, r.y);\n}\n\nvoid main(void) {\n  // zoom control\n  float s = 1. / (scale * 10.) + 0.75;\n  vec2 pos = (-resolution.xy + 2. * (gl_FragCoord.xy)) / resolution.y;\n  vec2 position1 = (42. * s) * pos - (transform.xy / 500.);  \n  vec2 position2 = (1.0 * s) * pos - (transform.xy / 8000.);\n\n  vec3 color = vec3(0.0);\n\n  // create starfield\n  color += vec3(starfield(position1)) * 2.0;\n\n  // starnest\n  // color += starnest(position2) * 0.01;\n  \n  // create nebula\n  color += nebula(position2) * 2.0;\n\n  // output\n  gl_FragColor = vec4(color, 1.);\n}\n',{resolution:{type:"v2",value:{x:b,y:c}},transform:{type:"v2",value:{x:0,y:0}},time:{type:"f",value:0},scale:{type:"f",value:1}})}var d=a("pixi");c.prototype=Object.create(d.AbstractFilter.prototype),c.prototype.constructor=c,c.prototype.setResolution=function(a,b){this.uniforms.resolution.value.x=a,this.uniforms.resolution.value.y=b},c.prototype.applyFilter=function(a,b,c){var d=this.getShader(a),e=a.filterManager,f=this.game.camera.view;this.uniforms.time.value=this.game.clock.totalElapsedSeconds(),this.uniforms.transform.value.x=f.x.toFixed(4),this.uniforms.transform.value.y=-f.y.toFixed(4),this.uniforms.scale.value=this.game.world.scale.x.toFixed(4),e.applyFilter(d,b,c)},c.prototype.syncUniform=function(a){console.log(a)},b.exports=c},{pixi:"pixi"}],128:[function(a,b){function c(a){this.game=a,d.AbstractFilter.call(this,null,"\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float scale;\nuniform vec2 resolution;\n\nvoid main(void) {\n  float m = scale * 2. - 1.;\n  vec4 tex = texture2D(uSampler, vTextureCoord);\n  vec4 color = vec4(tex.r * 0.75, tex.g * 0.75, tex.b, tex.a);\n  gl_FragColor = mix(color, tex, max(m, 0.25));\n}\n",{scale:{type:"f",value:1}})}var d=a("pixi");c.prototype=Object.create(d.AbstractFilter.prototype),c.prototype.constructor=c,c.prototype.applyFilter=function(a,b,c){var d=this.getShader(a),e=a.filterManager;this.uniforms.scale.value=this.game.world.scale.x.toFixed(4),e.applyFilter(d,b,c)},b.exports=c},{pixi:"pixi"}],129:[function(a,b){function c(a,b,c){this.game=a,d.AbstractFilter.call(this,null,"\nprecision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float scale;\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 transform;\n\n// nebula settings\nconst int niterations = 2;\nconst vec3 c1 = vec3(0.0, 0.3, 0.6);\nconst vec3 c2 = vec3(0.2, 0.2, 0.2);\nconst vec3 c3 = vec3(0.0, 0.0, 0.0);\nconst vec3 c4 = vec3(0.0, 0.2, 0.2);\nconst vec3 c5 = vec3(0.1);\nconst vec3 c6 = vec3(0.2);\n\nfloat rand(vec2 n) {\n  return fract(sin(dot(n.xy, vec2(2.9898,8.233))) * 3758.5453);\n}\n\nfloat noise(vec2 n) {\n  const vec2 d = vec2(0.0, 1.0);\n  vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\n  return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\n}\n\nfloat fbm(vec2 n) {\n  float total = 0.0, amplitude = 1.0;\n  for (int i = 0; i < niterations; i++) {\n    total += noise(n) * amplitude;\n    n += n;\n    amplitude *= 0.5;\n  }\n  return total;\n}\n\nvec3 nebula(vec2 position) {\n  float ntime = time * 0.2;\n  float q = fbm(position - ntime * 0.1);\n  vec2 r = vec2(fbm(position + q + ntime * 0.7 - position.x - position.y), fbm(position + q - ntime * 0.4));\n  return mix(c1, c2, fbm(position + r)) + mix(c3, c4, r.x) - mix(c5, c6, r.y);\n}\n\nvoid main(void) {\n  float s = 1. / (scale * 4.) + 0.75;\n  vec4 tex = texture2D(uSampler, vTextureCoord);\n  vec2 pos = (-resolution.xy + 2. * (gl_FragCoord.xy)) / resolution.y;\n  vec2 position2 = (1.0 * s) * pos - (transform.xy / 500.);\n  vec4 nebula = vec4(nebula(position2), tex.a);\n  \n  gl_FragColor = mix(tex, tex + (nebula*nebula*nebula*3.), 3.);\n}\n",{scale:{type:"f",value:1},resolution:{type:"v2",value:{x:b,y:c}},transform:{type:"v2",value:{x:0,y:0}},time:{type:"f",value:0}})}var d=a("pixi");c.prototype=Object.create(d.AbstractFilter.prototype),c.prototype.constructor=c,c.prototype.setResolution=function(a,b){this.uniforms.resolution.value.x=a,this.uniforms.resolution.value.y=b},c.prototype.applyFilter=function(a,b,c){var d=this.game,e=this.getShader(a),f=a.filterManager,g=this.game.camera.view;this.uniforms.time.value=d.clock.totalElapsedSeconds(),this.uniforms.scale.value=d.world.scale.x.toFixed(4),this.uniforms.transform.value.x=g.x.toFixed(4),this.uniforms.transform.value.y=-g.y.toFixed(4),f.applyFilter(e,b,c)},b.exports=c},{pixi:"pixi"}],130:[function(a,b){function c(a){var b,c,e;this.game=a,b={time:{type:"f",value:0},channel0:{type:"sampler2D",value:0},channel1:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}},c="\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n  vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",e="precision lowp float;\n\nuniform sampler2D channel0;\n// uniform sampler2D channel1;\n\nuniform float time;\nvarying vec2 vTextureCoord;\n\n// rendering params\nconst float sphsize = 0.8; // planet size\nconst float dist = 0.06; // distance for glow and distortion\nconst float perturb = 0.3;// distortion amount of the flow around the planet\nconst float windspeed = 0.25; // speed of wind flow\nconst float glow = 3.2; // glow amount, mainly on hit side\n\nconst float start = 118.0;\nconst float steps = 194.0; // number of steps for the volumetric rendering\nconst float stepsize = 0.01; \nconst float brightness = 1.0;\n\n// fractal params\nconst int iterations = 7;\nconst float fractparam = 0.88;\nconst vec3 offset = vec3(0.25, 0.5, 0.25);\n\nfloat wind(vec3 p) {\n  float d = max(0.0, dist - max(0.0, length(p) - sphsize) / sphsize) / dist; // for distortion and glow area\n  float x = max(0.6, p.x * -1.8); // to increase glow on left side\n  // p -= d * normalize(p) * perturb; // spheric distortion of flow\n  // p += vec3(0., 0., -time * windspeed * 20.); // flow movement\n  // p = abs(fract((p + offset) * 0.1) - 0.5); // tile folding \n  // for(int i=0; i<iterations; i++) {\n  //   p = abs(p) / dot(p,p) - fractparam; // the magic formula for the hot flow\n  // }\n  return length(p) * (d * glow * x)+ d * glow * x; // return the result with glow applied\n}\n\nvoid main() {\n  // get ray dir\n  vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n  vec3 dir = vec3(uv, 1.0);\n  vec3 from = vec3(0., 0., -2.);\n  vec3 tex = vec3(0.);\n\n  float ttime = 0.4 * sin(time * 2.) + 0.6;\n\n  // volumetric rendering\n  float alpha = 0.0;\n  float v = 0.0;\n  float l = -0.0001;\n  float t = time * windspeed * 0.25;\n  \n  for(float r=start; r<steps; r++) {\n    vec3 p = from + r * dir * stepsize;\n    if(length(p)-sphsize > 0.0) {\n      v += min(50., wind(p));\n    } else if(l < 0.0) {\n      alpha += 1.0;\n      v *= 2.;\n      l = 0.;\n      tex += pow(max(.2, dot(normalize(p), normalize(vec3(-0.75, 0.0, -1.75)))), 3.4) *\n        (0.0 + texture2D(channel0, uv * vec2(2., 2.) * (1.0 + p.z * 0.5) + vec2(t * 0.25, 0.5)).rgb * 1.5);\n    } else {\n      v += min(0.6, wind(p));\n    }\n  }\n\n  // average values and\n  // apply bright factor\n  v /= steps;\n  v *= brightness; \n  v *= pow(v, 1.2);\n\n  // green - vec3(v/4.2, v/1.8, v/3.2);\n  // red - vec3(v/1.4, v/5.8, v/5.2);\n  // blue - vec3(v/4., v/3., v/0.8);\n  vec3 col = vec3(v/1.2, v/3.6, v/3.6);\n       col += tex;\n\n  gl_FragColor = vec4(col, alpha);\n}\n\n",d.Shader.call(this,a.renderer.shaderManager,c,e,b,{aVertexPosition:0,aTextureCoord:0,aColor:0})}var d=a("pixi");c.prototype=Object.create(d.Shader.prototype),c.prototype.constructor=c,c.prototype.setTexture=function(a){this.uniforms.channel0.value=a},c.prototype.update=function(){this.uniforms.time.value=this.game.clock.totalElapsedSeconds()},b.exports=c},{pixi:"pixi"}],131:[function(a){(function(b){a(134);var c=(a("pixi"),a("engine")),d=a(136),e=a(135),f=a(137),g=function(){var a=new c.Game({parent:"content",antialias:!0}),g=new d;guiState=new e,sectorState=new f,a.state.add("loader",g,!0,!0),b.game=a};setTimeout(function(){c.Device.whenReady(function(){var a,d=b.document.getElementById("content"),e=b.document.getElementById("dialog"),f=c.Device;f.desktop&&f.webGL&&(f.firefox||f.chrome||f.safari)?(d.className="running",g()):(d.className="error",a=f.desktop?f.webGL?"your browser is not yet supported":"you need a compatible browser and graphics card to run this demo.":"mobile devices are not supported, but you can still watch!",e.innerHTML=a)})},250)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{134:134,135:135,136:136,137:137,engine:"engine",pixi:"pixi"}],132:[function(a,b){(function(c){function d(a,b){var d,g,h,i,j,k,l=c.Math.floor(4*c.Math.random())+1;if(b=b||"vessel-x0"+l,d=f[b],g=d.engine,this.autoCull=!0,this.checkWorldBounds=!0,this.name=b,this.size=d.size,this.exaustOffset=this.size*g.exaust.offset,this.speed=c.Math.random()>.5?d.speed:-d.speed,this.velocity=1e-4,this.offset=c.Math.random()*c.Math.PI,e.Sprite.call(this,a,b),this._lastPosition=new e.Point,this._tempPosition=new e.Point,this.position.set(2048,2048),this.pivot.set(this.texture.width/2,this.texture.height/2),this.scale.set(this.size,this.size),this.generateRandomOribit(),this.oribitalEllipse=new e.Ellipse(2048,2048,this.owidth,this.oheight),this.exaustEmitter=new e.Emitter(a,this.x,this.y,50),this.exaustEmitter.setScale(g.exaust.scale.startX,g.exaust.scale.endY,g.exaust.scale.startY,g.exaust.scale.endY,g.exaust.scale.rate),this.exaustVector=new e.Point(g.exaust.vector.x,g.exaust.vector.y),this.exaustEmitter.minRotation=g.exaust.rotation.min,this.exaustEmitter.maxRotation=g.exaust.rotation.max,this.exaustEmitter.setAlpha(g.exaust.alpha.start,g.exaust.alpha.end,g.exaust.alpha.rate),this.exaustEmitter.setTint(g.exaust.tint.start,g.exaust.tint.end,g.exaust.tint.rate),this.exaustEmitter.makeParticles(g.exaust.sprite),this.exaustEmitter.start(!1,1e3,g.exaust.frequency),this.exaustEmitter.on=!1,a.particles.add(this.exaustEmitter),a.world.add(this.exaustEmitter),this.glowSprite=new e.Sprite(a,g.glow.sprite),this.glowSprite.pivot.set(128,64),this.glowSprite.rotation=c.Math.PI,this.glowSprite.position.set(g.glow.position.x,g.glow.position.y),this.glowSprite.scale.set(g.glow.scale.startX,g.glow.scale.startY),this.glowSprite.tint=g.glow.tint,this.addChild(this.glowSprite),this.strips=[],this.numOfPoints=8,g.trails)for(j in g.trails){for(h=[],k=0;k<this.numOfPoints;k++)h.push(new e.Point(.01*k,0));i=new e.Strip(a,"engine-glow",null,h),i.position.set(g.trails[j].position.x,g.trails[j].position.y),i.scale.set(.25,.25),i.blendMode=e.BlendMode.SCREEN,i.alpha=.6,this.addChild(i),this.strips.push(i)}this.tempAnimationStart()}var e=a("engine"),f={"vessel-x01":{size:1,speed:2,engine:{exaust:{sprite:"engine-smoke",frequency:25,offset:-58,scale:{startX:.1,endX:.6,startY:.1,endY:.6,rate:500},alpha:{start:1,end:0,rate:750},tint:{start:65280,end:0,rate:500},rotation:{min:-6,max:6},vector:{x:-.25,y:-.25}},glow:{sprite:"engine-glow",tint:3407667,scale:{startX:.1,endX:.2,startY:.3,endY:.3},position:{x:118,y:66}},trails:[{position:{x:94,y:26}},{position:{x:118,y:54}},{position:{x:118,y:78}},{position:{x:94,y:106}}]}},"vessel-x02":{size:1,speed:1,engine:{exaust:{sprite:"engine-smoke",frequency:150,offset:-112,scale:{startX:.25,endX:3,startY:.25,endY:3,rate:3e3},alpha:{start:1,end:0,rate:3e3},tint:{start:16724787,end:2236962,rate:500},rotation:{min:-6,max:6},vector:{x:.5,y:.5}},glow:{sprite:"engine-glow",tint:16711680,scale:{startX:.05,endX:.2,startY:.35,endY:.45},position:{x:231,y:129}},trails:[{position:{x:220,y:90}},{position:{x:220,y:170}},{position:{x:160,y:54}},{position:{x:160,y:202}}]}},"vessel-x03":{size:1,speed:1.2,engine:{exaust:{sprite:"engine-smoke",frequency:50,offset:-62,scale:{startX:.1,endX:.5,startY:.1,endY:.5,rate:500},alpha:{start:1,end:0,rate:500},tint:{start:16777215,end:3355647,rate:500},rotation:{min:-40,max:40},vector:{x:-1,y:-1}},glow:{sprite:"engine-glow",tint:10066431,scale:{startX:.1,endX:.2,startY:.25,endY:.4},position:{x:120,y:64}},trails:[{position:{x:116,y:48}},{position:{x:116,y:80}},{position:{x:72,y:14}},{position:{x:72,y:114}}]}},"vessel-x04":{size:.3,speed:1.5,engine:{exaust:{sprite:"engine-smoke",frequency:10,offset:-45,scale:{startX:.05,endX:.1,startY:.05,endY:.1,rate:1e3},alpha:{start:1,end:0,rate:1e3},tint:{start:16750950,end:3355443,rate:750},rotation:{min:-6,max:6},vector:{x:1,y:1}},glow:{sprite:"engine-glow",tint:16737843,scale:{startX:.02,endX:.14,startY:.3,endY:.35},position:{x:103,y:64}}}},"vessel-x05":{size:.5,speed:2.5,engine:{exaust:{sprite:"engine-smoke",frequency:10,offset:-48,scale:{startX:.1,endX:.2,startY:.1,endY:.2,rate:500},alpha:{start:1,end:0,rate:500},tint:{start:16777215,end:3355647,rate:250},rotation:{min:-6,max:6},vector:{x:0,y:0}},glow:{sprite:"engine-glow",tint:10066431,scale:{startX:.1,endX:.5,startY:.3,endY:.4},position:{x:106,y:64}},trails:[{position:{x:110,y:96}},{position:{x:110,y:32}}]}}};d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.generateRandomOribit=function(){this.owidth=512*c.Math.random().toFixed(2)+256,this.oheight=512*c.Math.random().toFixed(2)+256},d.prototype.onEnterBounds=function(){this.tempAnimationStart()},d.prototype.onOutOfBounds=function(){this.tempAnimationStop(),this.exaustEmitter.on=!1},d.prototype.tempAnimationStop=function(){this.interval&&c.clearInterval(this.interval)},d.prototype.tempAnimationStart=function(){var a=this,b=f[this.name],d=b.engine;this.interval&&c.clearInterval(this.interval),this.interval=c.setInterval(function(){if(!a.tween||!a.tween.isRunning){var b=a.game,f=b.camera.view,g=-f.x-f.width/2,h=-f.y-f.height/2,i=new e.Rectangle(g,h,f.width,f.height),j=e.Easing.Quadratic.Out;a.pickle=!0,!i.contains(a.x,a.y)||c.Math.random()>.8,a.tween=b.tweens.create(a),a.tween.to({velocity:5e-4},5e3,j,!1,1e4*c.Math.random()),a.tween.yoyo(!0,2e3),a.tween.start(),a.tween.onStart=function(){var c=b.tweens.create(a.glowSprite.scale);c.to({x:d.glow.scale.endX,y:d.glow.scale.endY},1e3,j,!0),a.exaustEmitter.on=!0},a.tween.onLoop=function(){var c=b.tweens.create(a.glowSprite.scale);c.to({x:d.glow.scale.startX,y:d.glow.scale.startY},1e3,j,!0),a.exaustEmitter.on=!1}}},1e3*c.Math.random()+1e3)},d.prototype.update=function(){var a,b,d;if(this.oribitalEllipse.circumferencePoint(this.offset*this.speed*c.Math.PI,!1,this.position),this.offset+=this.velocity,this.rotate=this._lastPosition.angle(this.position),this.rotation=this.rotate+c.Math.PI,this.vector=e.Point.subtract(this.position,this._lastPosition,this.vector),this.pickle)for(b in this.strips)for(a=this.strips[b],a.rotation=-this.rotation,d=this.numOfPoints-1;d>=0;d--)d===this.numOfPoints-1||(a.points[d].subtract(4*this.vector.x/this.size,4*this.vector.y/this.size),e.Point.interpolate(a.points[d],a.points[d+1],.005*(d+10),a.points[d]));this._lastPosition.set(this.position.x,this.position.y),this.renderable&&(this._tempPosition.copyFrom(this._lastPosition),this._tempPosition.rotate(this._lastPosition.x,this._lastPosition.y,this.rotate,!1,this.exaustOffset),this.exaustEmitter.emitX=this._tempPosition.x,this.exaustEmitter.emitY=this._tempPosition.y,this.exaustEmitter.vector=this.vector.multiply(this.exaustVector.x,this.exaustVector.y))},d.prototype.destory=function(){this._lastPosition=null,this.oribitalEllipse=null},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],133:[function(a){Object.assign||(Object.assign=a(5))},{5:5}],134:[function(a){a(133)},{133:133}],135:[function(a,b){function c(){}var d=a("engine"),e=a(139),f=a(138),g=a(148),h=a(149),i=(a(150),a(153)),j=a(154),k=a(155),l=a(156),m=a(144);a(157);c.prototype=Object.create(d.State.prototype),c.prototype.constructor=d.State,c.prototype.preload=function(){this.game.load.image("vt323","imgs/game/fonts/vt323.png"),this.game.load.image("icon1","imgs/game/icons/icon-x01.png"),this.game.load.image("icon2","imgs/game/icons/icon-x02.png"),this.game.load.image("icon3","imgs/game/icons/icon-x03.png"),this.game.load.image("icon4","imgs/game/icons/icon-x04.png"),this.game.load.image("deck","imgs/game/tilesets/deck-mini.png"),this.game.load.image("wall","imgs/game/tilesets/wall-mini.png"),this.game.load.image("grid","imgs/game/tilesets/grid-mini.png"),this.game.load.tilemap("ship","data/ship-mini.json"),this.game.load.spritesheet("crew","imgs/game/spritesheets/crew-mini.png",16,16),this.game.load.spritesheet("door","imgs/game/spritesheets/door-mini.png",16,16),this.game.load.image("ship-outline","imgs/game/ships/vessel-x01-outline.png")},c.prototype.create=function(){var a=this.game,b=(new j(a),new k(a)),c=(new i(a),new l(a,"the aurora")),d=new e(a,new h(f.LEFT,f.TOP,f.VERTICAL,6)),n=new m(a,"pilot controls locked",{padding:[0],text:{fontName:"small"},bg:{fillAlpha:0,borderSize:0}});this.root=new e(a,new g(0,0)),this.root.setSize(a.width,a.height),this.toggle(!1),d.setPadding(6),d.addPanel(f.LEFT,c),d.addPanel(f.NONE,n),this.root.addPanel(f.CENTER,d),this.root.addPanel(f.RIGHT,b),this.game.stage.addChild(this.root)},c.prototype.toggle=function(a){this.root.visible=void 0!==a?a:!this.root.visible,this.root.visible&&(this.root.validate(),this.root.repaint())},c.prototype.resize=function(a,b){void 0!==this.root&&(this.root.setSize(a,b),this.root.validate(),this.root.repaint())},b.exports=c},{138:138,139:139,144:144,148:148,149:149,150:150,153:153,154:154,155:155,156:156,157:157,engine:"engine"}],136:[function(a,b){function c(){}var d=a("engine"),e=a(138),f=(a(151),a(145)),g=a(143),h=a(146),i=a(144);c.prototype=Object.create(d.State.prototype),c.prototype.constructor=d.State,c.prototype.preload=function(){this.game.load.image("logo","imgs/game/logo.jpg"),this.game.load.image("small","imgs/game/fonts/small.png")},c.prototype.init=function(){},c.prototype.create=function(){var a=this.game;a.state.add("gui",guiState,!0,!0),a.state.add("sector",sectorState),a.state.start("sector"),this.progress=new h(a),this.image=new g(a,"logo",{padding:[0],border:[0],bg:{color:0}}),this.statusLabel=new i(a,"loading",{bg:{fillAlpha:0,borderSize:0},text:{fontName:"small"}}),this.root=new f(a,{layout:{ax:e.CENTER,ay:e.CENTER,direction:e.VERTICAL},bg:{color:0}}),this.root.setSize(a.width,a.height),this.root.addPanel(e.NONE,this.image),this.root.addPanel(e.NONE,this.progress),this.root.addPanel(e.NONE,this.statusLabel),a.load.on("loadstart",this.loadingStart,this),a.load.on("loadcomplete",this.loadingComplete,this),a.load.on("filecomplete",this.loadingProgressBar,this),this.root.validate(),this.root.repaint(),this.root.invalidate=function(){this.isValid=!1,this.isLayoutValid=!1,this.cachedWidth=-1,this.validate(),this.repaint()},this.game.stage.addChild(this.root)},c.prototype.loadingProgressBar=function(){var a=arguments[3],b=arguments[4],c=arguments[1];this.progress.setProgressBar(a/b),this.statusLabel.text=c},c.prototype.loadingStart=function(){this.root.alpha=1,this.image.visible=!0,this.progress.visible=!0,this.statusLabel.visible=!0},c.prototype.loadingComplete=function(){this.game.state.hasPendingState||(this.tween=this.game.tweens.create(this.root),this.tween.to({alpha:0},3e3),this.tween.delay(500),this.tween.start(),this.image.visible=!1,this.progress.visible=!1,this.statusLabel.visible=!1)},c.prototype.update=function(){this.image.rotation+=.01},c.prototype.resize=function(a,b){void 0!==this.root&&(this.root.setSize(a,b),this.root.validate(),this.root.repaint())},b.exports=c},{138:138,143:143,144:144,145:145,146:146,151:151,engine:"engine"}],137:[function(a,b){(function(c){function d(){}var e=a("engine"),f=a(125),g=(a(128),a(129),a(126)),h=a(132),i=a(161);d.prototype=Object.create(e.State.prototype),d.prototype.constructor=e.State,d.prototype.init=function(){c.state=this,this.ships=[],this.scrollVelocityX=0,this.scrollVelocityY=0},d.prototype.preload=function(){this.game.load.image("eamon","imgs/game/planets/eamon-alpha.jpg"),this.game.load.image("vessel-x01","imgs/game/ships/vessel-x01.png"),this.game.load.image("vessel-x02","imgs/game/ships/vessel-x02.png"),this.game.load.image("vessel-x03","imgs/game/ships/vessel-x03.png"),this.game.load.image("vessel-x04","imgs/game/ships/vessel-x04.png"),this.game.load.image("vessel-x05","imgs/game/ships/vessel-x05.png"),this.game.load.image("engine-glow","imgs/game/fx/engine-glow.png"),this.game.load.image("engine-smoke","imgs/game/fx/engine-smoke.png"),this.game.load.image("engine-energy","imgs/game/fx/engine-energy.png"),this.game.load.image("station-mining","imgs/game/stations/station-refinery-c.png"),this.game.load.audio("background","imgs/game/sounds/background.m4a"),this.game.load.audio("computer","imgs/game/sounds/computer-1.m4a")},d.prototype.create=function(){var a=1e3,b=this.game,d=b.input.mouse;d.capture=!0,d.mouseWheelCallback=function(b){var d=b.deltaY/a,f=e.Math.clamp(this.world.scale.x-d,.5,1.25);c.state.gridLayer;this.world.scale.set(f,f)},this.gui=b.state.getBackgroundState("gui"),b.camera.bounds=null,b.world.setBounds(0,0,4096,4096),this.createSector(),this.createStations(),this.createShips(),this.followship.update(),b.camera.focusOnXY(2048,2048),b.camera.focusOn(this.followship),b.camera.follow(this.followship),this.sound=b.sound.add("background",.5,!0),this.computer=b.sound.add("computer",.5),this.sound.onDecoded=function(){this.fadeIn(12e3,!0)},this.computer.onDecoded=function(){var a=this;setTimeout(function(){a.play()},2e3)},this.gui&&this.gui.toggle(!0),this.share=new i},d.prototype.createSector=function(){var a=this.game;this.background=new f(a,a.width,a.height),self.planet=new g(a,"eamon"),self.planet.inputEnabled=!0,self.planet.position.set(2048,2048),a.world.background.add(self.planet),a.stage.addChildAt(this.background,0)},d.prototype.createShips=function(){var a,b,c,d=this.ships,e=this.game,f={"vessel-x04":{c:3},"vessel-x05":{c:3},"vessel-x01":{c:1},"vessel-x02":{c:1},"vessel-x03":{c:2}};for(b in f){for(c=0;c<f[b].c;c++)a=new h(e,b),d.push(a),e.world.add(a);"vessel-x01"===b&&(this.followship=a)}},d.prototype.createStations=function(){var a=this.game;this.station1=new e.Sprite(a,"station-mining"),this.station1.pivot.set(0,256),this.station1.position.set(2048,2048),a.world.foreground.add(this.station1)},d.prototype.update=function(){var a=this.game,b=a.camera,c=1.5;(a.input.keyboard.isDown(e.Keyboard.A)||a.input.keyboard.isDown(e.Keyboard.LEFT))&&(this.scrollVelocityX+=c),(a.input.keyboard.isDown(e.Keyboard.D)||a.input.keyboard.isDown(e.Keyboard.RIGHT))&&(this.scrollVelocityX-=c),(a.input.keyboard.isDown(e.Keyboard.W)||a.input.keyboard.isDown(e.Keyboard.UP))&&(this.scrollVelocityY+=c),(a.input.keyboard.isDown(e.Keyboard.S)||a.input.keyboard.isDown(e.Keyboard.DOWN))&&(this.scrollVelocityY-=c),b.view.x+=this.scrollVelocityX,b.view.y+=this.scrollVelocityY,(this.scrollVelocityX>0||this.scrollVelocityX<0)&&(this.scrollVelocityX/=1.1),this.scrollVelocityX>-.05&&this.scrollVelocityX<.05&&(this.scrollVelocityX=0),(this.scrollVelocityY>0||this.scrollVelocityY<0)&&(this.scrollVelocityY/=1.1),this.scrollVelocityY>-.05&&this.scrollVelocityY<.05&&(this.scrollVelocityY=0)},d.prototype.resize=function(a,b){void 0!==this.background&&void 0!==this.gridLayer&&this.background.resize(a,b)},d.prototype.shutdown=function(){this.stage.removeChild(this.background),this.background.destroy()},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{125:125,126:126,128:128,129:129,132:132,161:161,engine:"engine"}],138:[function(a,b){function c(){}c.NONE=0,c.LEFT=1,c.RIGHT=2,c.TOP=4,c.BOTTOM=8,c.CENTER=16,c.HORIZONTAL=32,c.VERTICAL=64,c.TEMPORARY=128,c.STRETCH=256,c.UsePsSize=c.USE_PS_SIZE=512,c.TopLeft=c.LEFT|c.TOP,
c.TopRight=c.RIGHT|c.TOP,c.BottomLeft=c.LEFT|c.BOTTOM,c.BottomRight=c.RIGHT|c.prototype.BOTTOM,b.exports=c},{}],139:[function(a,b){function c(a,b,c){d.Group.call(this,a),this.layout=b||new e,this.constraint=c,this.cachedHeight=0,this.psWidth=this.psHeight=this.cachedWidth=-1,this.size={width:0,height:0},this.border=new d.Rectangle,this.padding=new d.Rectangle,this.views=[],this.panels=[],this.isValid=!1,this.isLayoutValid=!1}var d=a("engine"),e=a(151);c.prototype=Object.create(d.Group.prototype),c.prototype.constructor=c,c.prototype.addPanel=function(a,b){null!=b.constraint?constr=b.constraint:b.constraint=a,this.panels.push(b),this.addChild(b),this.invalidate()},c.prototype.addView=function(a){this.views.push(a),this.addChild(a),this.invalidate()},c.prototype.invalidate=function(){this.isValid=!1,this.isLayoutValid=!1,this.cachedWidth=-1,this.parent&&this.parent.invalidate&&this.parent.invalidate()},c.prototype.validate=function(){if(this.validateMetric(),this.size.width>0&&this.size.height>0&&this.isLayoutValid===!1&&this.visible===!0){this.layout.doLayout(this);for(var a=0;a<this.panels.length;a++)this.panels[a].validate();this.isLayoutValid=!0}},c.prototype.validateMetric=function(){this.isValid===!1&&(this.recalc&&this.recalc(),this.isValid=!0)},c.prototype.repaint=function(){if(this.visible===!0)for(var a=0;a<this.panels.length;a++)this.panels[a].repaint();this.paint()},c.prototype.paint=function(){for(var a=0;a<this.views.length;a++)this.views[a].paint(this.top,this.left,this.bottom,this.right)},c.prototype.resize=function(){},c.prototype.setBorder=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),(this.border.top!=a||this.border.left!=b||this.border.bottom!=c||this.border.right!=d)&&(this.border.top=a,this.border.left=b,this.border.bottom=c,this.border.right=d,this.invalidate(),this.repaint()),this},c.prototype.setPadding=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),(this.padding.top!=a||this.padding.left!=b||this.padding.bottom!=c||this.padding.right!=d)&&(this.padding.top=a,this.padding.left=b,this.padding.bottom=c,this.padding.right=d,this.invalidate(),this.repaint()),this},c.prototype.setSize=function(a,b){return(a!=this.size.width||b!=this.size.height)&&(this.size.width=a,this.size.height=b,this.isLayoutValid=!1,this.resize(a,b)),this},c.prototype.setLocation=function(a,b){(a!=this.x||this.y!=b)&&(this.position.x=a,this.position.y=b,null!=this.relocated&&this.relocated(a,b))},c.prototype.setPreferredSize=function(a,b){(a!=this.psWidth||b!=this.psHeight)&&(this.psWidth=a,this.psHeight=b,this.invalidate())},c.prototype.getPreferredSize=function(){if(this.validateMetric(),this.cachedWidth<0){var a=this.psWidth<0||this.psHeight<0?this.layout.calcPreferredSize(this):{width:0,height:0};return a.width=this.psWidth>=0?this.psWidth:a.width+this.left+this.right,a.height=this.psHeight>=0?this.psHeight:a.height+this.top+this.bottom,this.cachedWidth=a.width,this.cachedHeight=a.height,a}return{width:this.cachedWidth,height:this.cachedHeight}},Object.defineProperty(c.prototype,"top",{get:function(){return this.padding.top+this.border.top}}),Object.defineProperty(c.prototype,"left",{get:function(){return this.padding.left+this.border.left}}),Object.defineProperty(c.prototype,"bottom",{get:function(){return this.padding.bottom+this.border.bottom}}),Object.defineProperty(c.prototype,"right",{get:function(){return this.padding.right+this.border.right}}),b.exports=c},{151:151,engine:"engine"}],140:[function(a,b){function c(){this.gap=0}c.prototype.constructor=c,c.prototype.paint=function(){},Object.defineProperty(c.prototype,"top",{get:function(){return this.gap}}),Object.defineProperty(c.prototype,"left",{get:function(){return this.gap}}),Object.defineProperty(c.prototype,"bottom",{get:function(){return this.gap}}),Object.defineProperty(c.prototype,"right",{get:function(){return this.gap}}),b.exports=c},{}],141:[function(a,b){function c(a,b,c){e.call(this,a,new h),this.settings=j.mixin(c,{padding:[2],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:d.BlendMode.ADD,radius:4},label:{bg:{highlight:5802200,fillAlpha:.75,color:3696824,borderSize:2,radius:4}}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.addView(new i(a,this.settings.bg)),this.addPanel(g.USE_PS_SIZE,new f(a,b,this.settings.label))}var d=a("engine"),e=a(139),f=a(144),g=a(138),h=a(151),i=a(157),j=d.Class;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c},{138:138,139:139,144:144,151:151,157:157,engine:"engine"}],142:[function(a,b){function c(a,b,c){e.call(this,a,new h),this.settings=j.mixin(c,{padding:[2],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:d.BlendMode.ADD,radius:4},icon:{bg:{highlight:5802200,fillAlpha:.75,color:3696824,borderSize:2,radius:4}}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.addView(new i(a,this.settings.bg)),this.addPanel(g.USE_PS_SIZE,new f(a,b,this.settings.icon))}var d=a("engine"),e=a(139),f=a(143),g=a(138),h=a(151),i=a(157),j=d.Class;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c},{138:138,139:139,143:143,151:151,157:157,engine:"engine"}],143:[function(a,b){function c(a,b,c){e.call(this,a,this),this.settings=h.mixin(c,{padding:[2,2],border:[1],bg:{fillAlpha:.75,color:3696824,borderSize:0,blendMode:d.BlendMode.SCREEN}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new g(a,c.bg),this.image=new f(a,b),this.addView(this.bg),this.addView(this.image)}var d=a("engine"),e=a(139),f=a(158),g=a(157),h=d.Class;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.prototype.calcPreferredSize=function(){return{width:this.image.width,height:this.image.height}},c.prototype.doLayout=function(){this.image.position.set(this.left,this.top)},b.exports=c},{139:139,157:157,158:158,engine:"engine"}],144:[function(a,b){function c(a,b,c){e.call(this,a,this),this.settings=h.mixin(c,{padding:[6,12],border:[0]}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new g(a,c.bg),this.textView=new f(a,b,c.text),this.addView(this.bg),this.addView(this.textView)}var d=a("engine"),e=a(139),f=a(159),g=a(157),h=d.Class;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.prototype.calcPreferredSize=function(){return{width:this.textView.width,height:this.textView.height}},c.prototype.doLayout=function(){this.textView.position.set(this.left,this.top)},Object.defineProperty(c.prototype,"text",{get:function(){return this.textView.fontTexture.text},set:function(a){this.textView.fontTexture.text=""+a,this.invalidate()}}),b.exports=c},{139:139,157:157,159:159,engine:"engine"}],145:[function(a,b){function c(a,b){e.call(this,a,!0),this.settings=i.mixin(b,{padding:[0],border:[0],layout:{ax:f.LEFT,ay:f.TOP,direction:f.VERTICAL,gap:0},bg:{fillAlpha:1,color:3696824,borderSize:0}}),this.layout=new g(this.settings.layout.ax,this.settings.layout.ay,this.settings.layout.direction,this.settings.layout.gap),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.addView(new h(a,this.settings.bg))}var d=a("engine"),e=a(139),f=a(138),g=a(149),h=a(157),i=d.Class;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c},{138:138,139:139,149:149,157:157,engine:"engine"}],146:[function(a,b){(function(c){function d(a,b){if(f.call(this,a,this),this.decimal=0,this.settings=h.mixin(b,{width:256,height:16,padding:[1],border:[0],bg:{fillAlpha:1,color:4157375,borderSize:0},progress:{fillAlpha:1,color:0,borderSize:0}}),!this.settings.width&&!this.settings.height)throw"ProgressBar component must set a preferred size";this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.background=new g(a,this.settings.bg),this.progress=new g(a,h.mixin(this.settings.progress,{size:{width:0,height:this.settings.height-this.top-this.bottom}})),this.addView(this.background),this.addView(this.progress)}var e=a("engine"),f=a(139),g=(a(138),a(149),a(157)),h=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(){return{width:this.settings.width,height:this.settings.height}},d.prototype.doLayout=function(){this.progress.position.set(this.left,this.top)},d.prototype.setProgressBar=function(a){var b=this.progress;b.settings.size.width=(this.settings.width-this.left-this.right)*a,b.paint(this.top,this.left,this.bottom,this.right),this.decimal=a},Object.defineProperty(f.prototype,"percentage",{get:function(){return c.Math.floor(100*this.decimal)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{138:138,139:139,149:149,157:157,engine:"engine"}],147:[function(a,b){function c(a,b,c,h){e.call(this,a,this),this.setPadding(0),this.setBorder(0),h=h||{},h.bg=h.bg||{fillAlpha:.25,color:0,borderSize:0,blendMode:d.BlendMode.MULTIPLY},this.sprites=[],this.bg=new g(a,h.bg),this.tilemap=new d.Tilemap(a,b),this.addView(this.bg);for(var i in c)this.sprites.push(new f(a,this.tilemap,this.tilemap.getLayerIndex(c[i]),this.tilemap.widthInPixels,this.tilemap.heightInPixels)),this.tilemap.addTilesetImage(c[i]),this.addView(this.sprites[i])}var d=a("engine"),e=a(139),f=a(160),g=a(157);a(151);c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.prototype.calcPreferredSize=function(){return{width:this.tilemap.widthInPixels,height:this.tilemap.heightInPixels}},c.prototype.doLayout=function(){var a,b,c=this.sprites;for(b in c)a=c[b],a.position.set(this.left,this.top)},b.exports=c},{139:139,151:151,157:157,160:160,engine:"engine"}],148:[function(a,b){function c(a,b){this.hgap=a||0,this.vgap=b||0}var d=a(138);c.prototype.calcPreferredSize=function(a){var b,c,e,f,g,h,i,j,k,l={width:0,height:0};for(k=0;k<a.panels.length;k++)if(i=a.panels[k],i.visible===!0)switch(j=i.constraint){case d.CENTER:b=i;break;case d.TOP:f=i;break;case d.BOTTOM:g=i;break;case d.LEFT:c=i;break;case d.RIGHT:e=i;break;default:throw Error("Invalid constraints: "+j)}return void 0!=e&&(h=e.getPreferredSize(),l.width+=h.width+this.hgap,l.height=h.height>l.height?h.height:l.height),void 0!=c&&(h=c.getPreferredSize(),l.width+=h.width+this.hgap,l.height=h.height>l.height?h.height:l.height),void 0!=b&&(h=b.getPreferredSize(),l.width+=h.width,l.height=h.height>l.height?h.height:l.height),void 0!=f&&(h=f.getPreferredSize(),l.width=h.width>l.width?h.width:l.width,l.height+=h.height+this.vgap),void 0!=g&&(h=g.getPreferredSize(),l.width=h.width>l.width?h.width:l.width,l.height+=h.height+this.vgap),l},c.prototype.doLayout=function(a){var b,c,e,f,g,h,i,j,k=a.top,l=a.size.height-a.bottom,m=a.left,n=a.size.width-a.right;for(i=0;i<a.panels.length;i++)if(f=a.panels[i],f.visible===!0)switch(g=f.constraint){case d.CENTER:b=f;break;case d.TOP:j=f.getPreferredSize(),f.setLocation(m,k),f.setSize(n-m,j.height),k+=j.height+this.vgap;break;case d.BOTTOM:j=f.getPreferredSize(),f.setLocation(m,l-j.height),f.setSize(n-m,j.height),l-=j.height+this.vgap;break;case d.LEFT:c=f;break;case d.RIGHT:e=f;break;default:throw Error("Invalid constraints: "+ctr)}void 0!=e&&(h=e.getPreferredSize(),e.setLocation(n-h.width,k),e.setSize(h.width,l-k),n-=h.width+this.hgap),void 0!=c&&(h=c.getPreferredSize(),c.setLocation(m,k),c.setSize(h.width,l-k),m+=h.width+this.hgap),void 0!=b&&(b.setLocation(m,k),b.setSize(n-m,l-k))},b.exports=c},{138:138}],149:[function(a,b){function c(a,b,c,e){this.ax=a||d.LEFT,this.ay=b||d.TOP,this.direction=c||d.HORIZONTAL,this.gap=e||0,this.stretchLast=!1}var d=a(138);c.prototype.calcPreferredSize=function(a){var b,c,e,f,g={width:0,height:0},h=0;for(f=0;f<a.panels.length;f++)c=a.panels[f],c.visible===!0&&(e=c.getPreferredSize(),this.direction==d.HORIZONTAL?(g.width+=e.width,g.height=e.height>g.height?e.height:g.height):(g.width=e.width>g.width?e.width:g.width,g.height+=e.height),h++);return b=this.gap*(h>0?h-1:0),this.direction==d.HORIZONTAL?g.width+=b:g.height+=b,g},c.prototype.doLayout=function(a){var b,c,e,f,g=this.calcPreferredSize(a),h=a.top,i=a.left,j=null,k=a.size.width-i-a.right,l=a.size.height-h-a.bottom,m=(this.ax==d.RIGHT?k-g.width:this.ax==d.CENTER?~~((k-g.width)/2):0)+i,n=(this.ay==d.BOTTOM?l-g.height:this.ay==d.CENTER?~~((l-g.height)/2):0)+h;for(f=0;f<a.panels.length;f++)b=a.panels[f],b.visible===!0&&(c=b.getPreferredSize(),e=b.constraint,this.direction==d.HORIZONTAL?(e===d.STRETCH&&(c.height=a.size.height-h-a.bottom),b.setLocation(m,~~((g.height-c.height)/2)+n),m+=c.width+this.gap):(e===d.STRETCH?(c.width=a.size.width-i-a.right,b.setLocation(i,n)):e===d.LEFT?b.setLocation(i,n):b.setLocation(m+~~((g.width-c.width)/2),n),n+=c.height+this.gap),b.setSize(c.width,c.height),j=b);null!==j&&this.stretchLast===!0&&(this.direction==d.HORIZONTAL?j.setSize(a.size.width-j.x-a.right,j.height):j.setSize(j.width,a.size.height-j.y-a.bottom))},b.exports=c},{138:138}],150:[function(a,b){function c(a){this.flag=a?a:0}var d=a(138);c.prototype.calcPreferredSize=function(a){var b,c,e,f,g,h={width:0,height:0},i=(this.flag&d.USE_PS_SIZE)>0;for(g=0;g<a.panels.length;g++)b=a.panels[g],b.visible===!0&&(c=i?b.getPreferredSize():{width:b.width,height:b.height},e=b.x+c.width,f=b.y+c.height,e>h.width&&(h.width=e),f>h.height&&(h.height=f));return h},c.prototype.doLayout=function(a){var b,c,e,f,g,h,i,j=a.size.width-a.right,k=a.size.height-a.bottom,l=(this.flag&d.USE_PS_SIZE)>0;for(i=0;i<a.panels.length;i++)b=a.panels[i],e=0,f=0,b.visible===!0&&(l?(c=b.getPreferredSize(),e=c.width,f=c.height):(e=b.width,f=b.height),b.constraint&&((b.constraint&d.HORIZONTAL)>0&&(e=j-b.x),(b.constraint&d.VERTICAL)>0&&(f=k-b.y)),b.setSize(e,f),b.constraint&&(g=b.x,h=b.y,b.constraint==d.CENTER?(g=(a.size.width-e)/2,h=(a.size.height-f)/2):((b.constraint&d.TOP)>0?h=0:(b.constraint&d.BOTTOM)>0&&(h=a.size.height-f),(b.constraint&d.LEFT)>0?g=0:(b.constraint&d.RIGHT)>0&&(g=a.size.width-e)),b.setLocation(g,h)))},b.exports=c},{138:138}],151:[function(a,b){function c(){}var d=a(138);c.prototype.calcPreferredSize=function(a){var b,c,d,e=0,f=0;for(d=0;d<a.panels.length;d++)b=a.panels[d],b.visible===!0&&(c=b.getPreferredSize(),c.width>e&&(e=c.width),c.height>f&&(f=c.height));return{width:e,height:f}},c.prototype.doLayout=function(a){var b,c,e,f=a.top,g=a.size.height-a.bottom-f,h=a.left,i=a.size.width-a.right-h;for(e=0;e<a.panels.length;e++)b=a.panels[e],b.visible===!0&&(constraint=b.constraint,constraint==d.USE_PS_SIZE?(c=b.getPreferredSize(),b.setSize(c.width,c.height),b.setLocation(h+~~((i-c.width)/2),f+~~((g-c.height)/2))):(b.setSize(i,g),b.setLocation(h,f)))},b.exports=c},{138:138}],152:[function(a,b){function c(a,b,c){e.call(this,a,new i(0,0)),this.settings=k.mixin(c,{padding:[1,4],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:d.BlendMode.ADD,radius:0},title:{width:17,height:17,padding:[0],bg:{fillAlpha:1,color:8256,radius:0,borderSize:0,blendMode:d.BlendMode.ADD}},content:{padding:[3,3],bg:{fillAlpha:.8,color:0,radius:0,borderSize:0,blendMode:d.BlendMode.MULTIPLY}},label:{padding:[6,8],border:[0],text:{fontName:"small"},bg:{highlight:8256,color:3696824,fillAlpha:.5,blendMode:d.BlendMode.ADD,borderSize:0}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new j(a,this.settings.bg),this.title=new g(a,this.settings.title),this.content=new g(a,this.settings.content),this.label=new h(a,b,this.settings.label),this.addView(this.bg),this.addPanel(f.CENTER,this.content),this.content.addPanel(f.STRETCH,this.title),this.title.addPanel(f.NONE,this.label)}var d=a("engine"),e=a(139),f=a(138),g=a(145),h=a(144),i=a(148),j=a(157),k=d.Class;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.prototype.addContent=function(a,b){this.content.addPanel(a,b)},b.exports=c},{138:138,139:139,144:144,145:145,148:148,157:157,engine:"engine"}],153:[function(a,b){function c(a){e.call(this,a,{layout:{gap:6,direction:d.HORIZONTAL},bg:{fillAlpha:0,borderSize:0,radius:0}}),this.button1=new f(a,"map"),this.button2=new f(a,"planet"),this.button3=new f(a,"galaxy"),this.addPanel(d.NONE,this.button1),this.addPanel(d.NONE,this.button2),this.addPanel(d.NONE,this.button3)}var d=(a("engine"),a(138)),e=(a(139),a(145)),f=a(141);c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c},{138:138,139:139,141:141,145:145,engine:"engine"}],154:[function(a,b){function c(a){e.call(this,a,{padding:[6],layout:{gap:6},bg:{color:3368601,fillAlpha:.2,borderSize:0,radius:1}}),this.icon1=new f(a,"icon1"),this.icon2=new f(a,"icon2"),this.icon3=new f(a,"icon3"),this.icon4=new f(a,"icon4"),this.addPanel(d.NONE,this.icon4),this.addPanel(d.NONE,this.icon2),this.addPanel(d.NONE,this.icon3),this.addPanel(d.NONE,this.icon1)}var d=(a("engine"),a(138)),e=a(145),f=a(142);c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c},{138:138,142:142,145:145,engine:"engine"}],155:[function(a,b){function c(a){f.call(this,a,{padding:[6],layout:{gap:0},bg:{color:3368601,fillAlpha:.2,fillAlpha:0,borderSize:0,radius:0}}),this.titleText=new g(a,"solar crusaders",{padding:[6,8],bg:{color:0,borderSize:0}}),this.descriptionText=new g(a,"game engine demo",{padding:[6,8],text:{fontName:"small"},bg:{color:0,borderSize:0}}),this.wipText=new g(a,"work in progress",{padding:[6,8],text:{fontName:"small"},bg:{color:0,borderSize:0}}),this.controlsText=new g(a,"use arrow keys to move camera",{padding:[6,8],text:{fontName:"small"},bg:{color:0,borderSize:0}}),this.disclaimerText=new g(a,"not representative of final version game",{padding:[6,8],border:[0],text:{fontName:"small"},bg:{color:13382451,fillAlpha:1,borderSize:0,blendMode:d.BlendMode.MULTIPLY}}),this.addPanel(e.STRETCH,this.titleText),this.addPanel(e.STRETCH,this.descriptionText),this.addPanel(e.STRETCH,this.wipText),this.addPanel(e.STRETCH,this.controlsText),this.addPanel(e.STRETCH,this.disclaimerText)}var d=a("engine"),e=a(138),f=a(145),g=a(144);a(143);c.prototype=Object.create(f.prototype),c.prototype.constructor=c,b.exports=c},{138:138,143:143,144:144,145:145,engine:"engine"}],156:[function(a,b){(function(c){function d(a,b,d){var i,j,k;g.call(this,a,b,d),this.shipOutline=new e.Sprite(a,"ship-outline"),this.shipOutline.position.set(6,21),this.shipOutline.blendMode=e.BlendMode.ADD,this.shipOutline.alpha=.8,this.addChild(this.shipOutline),this.tilemapComponent=new h(a,"ship",["grid","deck","wall"]),this.crew1=new e.Sprite(a,"crew"),this.crew1.animations.add("work",[0,1,2,3,4,5],6,!0),this.crew1.animations.play("work"),this.crew1.pivot.set(8,8),this.crew1.position.set(166,104),this.crew1.rotation=-c.Math.PI/2,this.crew2=new e.Sprite(a,"crew"),this.crew2.animations.add("work",[2,3,4,5,0,1],6,!0),this.crew2.animations.play("work"),this.crew2.pivot.set(8,8),this.crew2.position.set(152,103),this.crew3=new e.Sprite(a,"crew"),this.crew3.animations.add("work",[2,5,3,4,1,0],6,!0),this.crew3.animations.play("work"),this.crew3.pivot.set(8,8),this.crew3.position.set(88,103),this.tilemapComponent.addChild(this.crew1),this.tilemapComponent.addChild(this.crew2),this.tilemapComponent.addChild(this.crew3),j=[[5,5,0],[7,5,0],[8,6,0],[10,5,0],[5,3,1],[6,4,1],[6,6,1],[5,7,1],[4,5,2],[4,6,2]];for(k in j)i=new e.Sprite(a,"door",j[k][2]),3===j[k][2]?i.pivot.set(0,-7):2===j[k][2]?i.pivot.set(9,0):1===j[k][2]?i.pivot.set(0,-8):i.pivot.set(8,0),i.position.set(16*j[k][0],16*j[k][1]),this.tilemapComponent.addChild(i);this.addContent(f.STRETCH,this.tilemapComponent)}var e=a("engine"),f=a(138),g=a(152),h=a(147);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{138:138,147:147,152:152,engine:"engine"}],157:[function(a,b){function c(a,b){f.call(this,a),e.call(this),this.settings=g.mixin(b,{color:3355443,fillAlpha:1,blendMode:d.BlendMode.NORMAL,radius:0,borderSize:1,borderColor:0,borderAlpha:1}),this.fillAlpha=this.settings.fillAlpha,this.blendMode=this.settings.blendMode}var d=a("engine"),e=a(140),f=d.Graphics,g=d.Class;c.prototype=Object.create(f.prototype),c.prototype.mixinPrototype(e.prototype),c.prototype.constructor=c,c.prototype.paint=function(){var a=this.settings.size?this.settings.size:this.parent.size,b=this.settings,c=b.radius>0?"drawRoundedRect":"drawRect";this.clear(),b.borderSize>0&&b.borderAlpha>0&&this.lineStyle(b.borderSize,b.borderColor,b.borderAlpha),b.fillAlpha>0&&this.beginFill(b.color,b.fillAlpha),(b.fillAlpha>0||b.borderSize>0&&b.borderAlpha>0)&&this[c](0,0,a.width,a.height,b.radius),b.fillAlpha>0&&this.endFill(),b.highlight&&(this.lineStyle(0),this.beginFill(b.highlight,.75),this[c](1,1,a.width-2,a.height/2-2,b.radius-2),this.endFill())},b.exports=c},{140:140,engine:"engine"}],158:[function(a,b){function c(a,b){f.call(this,a,b),e.call(this)}var d=a("engine"),e=a(140),f=d.Sprite;c.prototype=Object.create(f.prototype),c.prototype.mixinPrototype(e.prototype),c.prototype.constructor=c,b.exports=c},{140:140,engine:"engine"}],159:[function(a,b){function c(a,b,c){f.call(this,a),e.call(this),this.defaultFont=c&&c.fontName?c.fontName:"vt323",this.fonts={vt323:{fontName:"vt323",characterWidth:8,characterHeight:10,xSpacing:2,ySpacing:0,xOffset:1,yOffset:1,charsPerRow:37},small:{fontName:"small",characterWidth:5,characterWidth:5,xSpacing:0,ySpacing:0,xOffset:0,yOffset:0,charsPerRow:0}},this.settings=g.mixin(c,this.fonts[this.defaultFont]),this.fontTexture=new d.RetroFont(a,this.settings.fontName,this.settings),this.fontTexture.multiLine=!0,this.fontTexture.text=b,this.texture=this.fontTexture}var d=a("engine"),e=a(140),f=d.Sprite,g=d.Class;c.prototype=Object.create(d.Sprite.prototype),c.prototype.mixinPrototype(e.prototype),c.prototype.constructor=c,b.exports=c},{140:140,engine:"engine"}],160:[function(a,b){function c(a,b,c,d,g){f.call(this,a,b,c,d,g),e.call(this)}var d=a("engine"),e=a(140),f=d.TilemapSprite;c.prototype=Object.create(f.prototype),c.prototype.mixinPrototype(e.prototype),c.prototype.constructor=c,b.exports=c},{140:140,engine:"engine"}],161:[function(a,b){(function(a){function c(){var a=this;setTimeout(function(){a.init("facebook-jssdk",c.FACEBOOK_SDK_URL),a.init("twitter-wjs",c.TWITTER_SDK_URL),a.init("tumblr-js",c.TUMBLR_SDK_URL)},5e3)}c.FACEBOOK_SDK_URL="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4&appId=1474463249448141",c.TWITTER_SDK_URL="//platform.twitter.com/widgets.js",c.TUMBLR_SDK_URL="https://secure.assets.tumblr.com/share-button.js",c.prototype.constructor=c,c.prototype.init=function(b,c){var d,e=a.document,f="script",g=e.getElementsByTagName(f)[0];d=e.createElement(f),d.id=b,d.src=c,g.parentNode.insertBefore(d,g)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],162:[function(a,b){b.exports={name:"pixi.js",version:"3.0.8-dev",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/","CONTRIBUTING.md","LICENSE","package.json","README.md"],dependencies:{async:"^0.9.0",brfs:"^1.4.0",earcut:"^2.0.2",eventemitter3:"^1.1.1","gulp-header":"^1.2.2","object-assign":"^3.0.0","resource-loader":"^1.6.1"},devDependencies:{browserify:"^11.0.1",chai:"^3.2.0",del:"^1.2.1",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.0.1","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.1.2",mocha:"^2.2.5","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.3.1"},browserify:{transform:["brfs"]}}},{}],163:[function(a,b){var c={VERSION:a(162).version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};b.exports=c},{162:162}],164:[function(a,b){function c(){e.call(this),this.children=[]}var d=a(173),e=a(165),f=a(211),g=new d.Matrix;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c,Object.defineProperties(c.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a}}}),c.prototype.onChildrenChange=function(){},c.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)},c.prototype.addChildAt=function(a,b){if(a===this)return a;if(b>=0&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.onChildrenChange(b),a.emit("added",this),a;throw Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length)},c.prototype.swapChildren=function(a,b){var c,d;if(a!==b){if(c=this.getChildIndex(a),d=this.getChildIndex(b),0>c||0>d)throw Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[c]=b,this.children[d]=a,this.onChildrenChange(d>c?c:d)}},c.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw Error("The supplied DisplayObject must be a child of the caller");return b},c.prototype.setChildIndex=function(a,b){if(0>b||b>=this.children.length)throw Error("The supplied index is out of bounds");var c=this.getChildIndex(a);this.children.splice(c,1),this.children.splice(b,0,a),this.onChildrenChange(b)},c.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[a]},c.prototype.removeChild=function(a){var b=this.children.indexOf(a);if(-1!==b)return this.removeChildAt(b)},c.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,this.children.splice(a,1),this.onChildrenChange(a),b.emit("removed",this),b},c.prototype.removeChildren=function(a,b){var c,d,e=a||0,f="number"==typeof b?b:this.children.length,g=f-e;if(g>0&&f>=g){for(c=this.children.splice(e,g),d=0;d<c.length;++d)c[d].parent=null;for(this.onChildrenChange(a),d=0;d<c.length;++d)c[d].emit("removed",this);return c}if(0===g&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},c.prototype.generateTexture=function(a,b,c){var d=this.getLocalBounds(),e=new f(a,0|d.width,0|d.height,c,b);return g.tx=-d.x,g.ty=-d.y,e.render(this,g),e},c.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var a=0,b=this.children.length;b>a;++a)this.children[a].updateTransform()}},c.prototype.containerUpdateTransform=c.prototype.updateTransform,c.prototype.getBounds=function(){var a,b,c,e,f,g,h,i,j,k,l,m;if(!this._currentBounds){if(0===this.children.length)return d.Rectangle.EMPTY;for(a=1/0,b=1/0,c=-(1/0),e=-(1/0),i=!1,j=0,k=this.children.length;k>j;++j)l=this.children[j],l.visible&&(i=!0,f=this.children[j].getBounds(),a=a<f.x?a:f.x,b=b<f.y?b:f.y,g=f.width+f.x,h=f.height+f.y,c=c>g?c:g,e=e>h?e:h);if(!i)return d.Rectangle.EMPTY;m=this._bounds,m.x=a,m.y=b,m.width=c-a,m.height=e-b,this._currentBounds=m}return this._currentBounds},c.prototype.containerGetBounds=c.prototype.getBounds,c.prototype.getLocalBounds=function(){var a,b,c=this.worldTransform;for(this.worldTransform=d.Matrix.IDENTITY,a=0,b=this.children.length;b>a;++a)this.children[a].updateTransform();return this.worldTransform=c,this._currentBounds=null,this.getBounds(d.Matrix.IDENTITY)},c.prototype.renderWebGL=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var b,c;if(this._mask||this._filters){for(a.currentRenderer.flush(),this._filters&&this._filters.length&&a.filterManager.pushFilter(this,this._filters),this._mask&&a.maskManager.pushMask(this,this._mask),a.currentRenderer.start(),this._renderWebGL(a),b=0,c=this.children.length;c>b;b++)this.children[b].renderWebGL(a);a.currentRenderer.flush(),this._mask&&a.maskManager.popMask(this,this._mask),this._filters&&a.filterManager.popFilter(),a.currentRenderer.start()}else for(this._renderWebGL(a),b=0,c=this.children.length;c>b;++b)this.children[b].renderWebGL(a)}},c.prototype._renderWebGL=function(){},c.prototype._renderCanvas=function(){},c.prototype.renderCanvas=function(a){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask,a),this._renderCanvas(a);for(var b=0,c=this.children.length;c>b;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},c.prototype.destroy=function(a){if(e.prototype.destroy.call(this),a)for(var b=0,c=this.children.length;c>b;++b)this.children[b].destroy(a);this.removeChildren(),this.children=null}},{165:165,173:173,211:211}],165:[function(a,b){function c(){f.call(this),this.position=new d.Point,this.scale=new d.Point(1,1),this.pivot=new d.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new d.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new d.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var d=a(173),e=a(211),f=a(3),g=a(163),h=new d.Matrix;c.prototype=Object.create(f.prototype),c.prototype.constructor=c,b.exports=c,Object.defineProperties(c.prototype,{x:{get:function(){return this.position.x},set:function(a){this.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a}},worldVisible:{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},mask:{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0),this._mask=a,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}}),c.prototype.updateTransform=function(){var a,b,c,d,e,f,h=this.parent.worldTransform,i=this.worldTransform;this.rotation%g.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),
a=this._cr*this.scale.x,b=this._sr*this.scale.x,c=-this._sr*this.scale.y,d=this._cr*this.scale.y,e=this.position.x,f=this.position.y,(this.pivot.x||this.pivot.y)&&(e-=this.pivot.x*a+this.pivot.y*c,f-=this.pivot.x*b+this.pivot.y*d),i.a=a*h.a+b*h.c,i.b=a*h.b+b*h.d,i.c=c*h.a+d*h.c,i.d=c*h.b+d*h.d,i.tx=e*h.a+f*h.c+h.tx,i.ty=e*h.b+f*h.d+h.ty):(a=this.scale.x,d=this.scale.y,e=this.position.x-this.pivot.x*a,f=this.position.y-this.pivot.y*d,i.a=a*h.a,i.b=a*h.b,i.c=d*h.c,i.d=d*h.d,i.tx=e*h.a+f*h.c+h.tx,i.ty=e*h.b+f*h.d+h.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},c.prototype.displayObjectUpdateTransform=c.prototype.updateTransform,c.prototype.getBounds=function(){return d.Rectangle.EMPTY},c.prototype.getLocalBounds=function(){return this.getBounds(d.Matrix.IDENTITY)},c.prototype.toGlobal=function(a){return this.displayObjectUpdateTransform(),this.worldTransform.apply(a)},c.prototype.toLocal=function(a,b){return b&&(a=b.toGlobal(a)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(a)},c.prototype.renderWebGL=function(){},c.prototype.renderCanvas=function(){},c.prototype.generateTexture=function(a,b,c){var d=this.getLocalBounds(),f=new e(a,0|d.width,0|d.height,b,c);return h.tx=-d.x,h.ty=-d.y,f.render(this,h),f},c.prototype.setParent=function(a){if(!a||!a.addChild)throw Error("setParent: Argument must be a Container");return a.addChild(this),a},c.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{163:163,173:173,211:211,3:3}],166:[function(a,b){function c(){d.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=j.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new i.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var d=a(164),e=a(212),f=a(185),g=a(186),h=a(167),i=a(173),j=a(163),k=new i.Point;c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.clone=function(){var a,b=new c;for(b.renderable=this.renderable,b.fillAlpha=this.fillAlpha,b.lineWidth=this.lineWidth,b.lineColor=this.lineColor,b.tint=this.tint,b.blendMode=this.blendMode,b.isMask=this.isMask,b.boundsPadding=this.boundsPadding,b.dirty=!0,b.glDirty=!0,b.cachedSpriteDirty=this.cachedSpriteDirty,a=0;a<this.graphicsData.length;++a)b.graphicsData.push(this.graphicsData[a].clone());return b.currentPath=b.graphicsData[b.graphicsData.length-1],b.updateLocalBounds(),b},c.prototype.lineStyle=function(a,b,c){return this.lineWidth=a||0,this.lineColor=b||0,this.lineAlpha=void 0===c?1:c,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new i.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},c.prototype.moveTo=function(a,b){return this.drawShape(new i.Polygon([a,b])),this},c.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty=!0,this},c.prototype.quadraticCurveTo=function(a,b,c,d){var e,f,g,h,i,j,k,l;for(this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0),g=20,h=this.currentPath.shape.points,0===h.length&&this.moveTo(0,0),i=h[h.length-2],j=h[h.length-1],k=0,l=1;g>=l;++l)k=l/g,e=i+(a-i)*k,f=j+(b-j)*k,h.push(e+(a+(c-a)*k-e)*k,f+(b+(d-b)*k-f)*k);return this.dirty=this.boundsDirty=!0,this},c.prototype.bezierCurveTo=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;for(this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0),g=20,m=this.currentPath.shape.points,n=m[m.length-2],o=m[m.length-1],p=0,q=1;g>=q;++q)p=q/g,h=1-p,i=h*h,j=i*h,k=p*p,l=k*p,m.push(j*n+3*i*p*a+3*h*k*c+l*e,j*o+3*i*p*b+3*h*k*d+l*f);return this.dirty=this.boundsDirty=!0,this},c.prototype.arcTo=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b),f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k),1e-8>m||0===e?(f[f.length-2]!==a||f[f.length-1]!==b)&&f.push(a,b):(n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u),this.arc(u+a,v+b,e,A,B,j*k>l*i)),this.dirty=this.boundsDirty=!0,this},c.prototype.arc=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(f=f||!1,d===e)return this;if(!f&&d>=e?e+=2*Math.PI:f&&e>=d&&(d+=2*Math.PI),g=f?-1*(d-e):e-d,h=40*Math.ceil(Math.abs(g)/(2*Math.PI)),0===g)return this;for(i=a+Math.cos(d)*c,j=b+Math.sin(d)*c,this.currentPath?f&&this.filling?this.currentPath.shape.points.push(a,b):this.currentPath.shape.points.push(i,j):f&&this.filling?this.moveTo(a,b):this.moveTo(i,j),k=this.currentPath.shape.points,l=g/(2*h),m=2*l,n=Math.cos(l),o=Math.sin(l),p=h-1,q=p%1/p,r=0;p>=r;r++)s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t),k.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b);return this.dirty=this.boundsDirty=!0,this},c.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=void 0===b?1:b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},c.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},c.prototype.drawRect=function(a,b,c,d){return this.drawShape(new i.Rectangle(a,b,c,d)),this},c.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new i.RoundedRectangle(a,b,c,d,e)),this},c.prototype.drawCircle=function(a,b,c){return this.drawShape(new i.Circle(a,b,c)),this},c.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new i.Ellipse(a,b,c,d)),this},c.prototype.drawPolygon=function(a){var b,c=a;if(!Array.isArray(c))for(c=Array(arguments.length),b=0;b<c.length;++b)c[b]=arguments[b];return this.drawShape(new i.Polygon(c)),this},c.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},c.prototype.generateTexture=function(a,b,c){var d,h,i;return b=b||1,d=this.getLocalBounds(),h=new f(d.width*b,d.height*b),i=e.fromCanvas(h.canvas,c),i.baseTexture.resolution=b,h.context.scale(b,b),h.context.translate(-d.x,-d.y),g.renderGraphics(this,h.context),i},c.prototype._renderWebGL=function(a){this.glDirty&&(this.dirty=!0,this.glDirty=!1),a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this)},c.prototype._renderCanvas=function(a){var b,c,d,e;this.isMask!==!0&&(this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint),b=a.context,c=this.worldTransform,d=a.blendModes[this.blendMode],d!==b.globalCompositeOperation&&(b.globalCompositeOperation=d),e=a.resolution,b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e,c.ty*e),g.renderGraphics(this,b))},c.prototype.getBounds=function(a){var b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(!this._currentBounds){if(!this.renderable)return i.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1),b=this._localBounds,c=b.x,d=b.width+b.x,e=b.y,f=b.height+b.y,g=a||this.worldTransform,h=g.a,j=g.b,k=g.c,l=g.d,m=g.tx,n=g.ty,o=h*d+k*f+m,p=l*f+j*d+n,q=h*c+k*f+m,r=l*f+j*c+n,s=h*c+k*e+m,t=l*e+j*c+n,u=h*d+k*e+m,v=l*e+j*d+n,w=o,x=p,y=o,z=p,y=y>q?q:y,y=y>s?s:y,y=y>u?u:y,z=z>r?r:z,z=z>t?t:z,z=z>v?v:z,w=q>w?q:w,w=s>w?s:w,w=u>w?u:w,x=r>x?r:x,x=t>x?t:x,x=v>x?v:x,this._bounds.x=y,this._bounds.width=w-y,this._bounds.y=z,this._bounds.height=x-z,this._currentBounds=this._bounds}return this._currentBounds},c.prototype.containsPoint=function(a){var b,c,d;for(this.worldTransform.applyInverse(a,k),b=this.graphicsData,c=0;c<b.length;c++)if(d=b[c],d.fill&&d.shape&&d.shape.contains(k.x,k.y))return!0;return!1},c.prototype.updateLocalBounds=function(){var a,b,c,d,e,f,g,h,i,k,l,m,n=1/0,o=-(1/0),p=1/0,q=-(1/0);if(this.graphicsData.length)for(g=0;g<this.graphicsData.length;g++)if(h=this.graphicsData[g],i=h.type,k=h.lineWidth,a=h.shape,i===j.SHAPES.RECT||i===j.SHAPES.RREC)c=a.x-k/2,d=a.y-k/2,e=a.width+k,f=a.height+k,n=n>c?c:n,o=c+e>o?c+e:o,p=p>d?d:p,q=d+f>q?d+f:q;else if(i===j.SHAPES.CIRC)c=a.x,d=a.y,e=a.radius+k/2,f=a.radius+k/2,n=n>c-e?c-e:n,o=c+e>o?c+e:o,p=p>d-f?d-f:p,q=d+f>q?d+f:q;else if(i===j.SHAPES.ELIP)c=a.x,d=a.y,e=a.width+k/2,f=a.height+k/2,n=n>c-e?c-e:n,o=c+e>o?c+e:o,p=p>d-f?d-f:p,q=d+f>q?d+f:q;else for(b=a.points,l=0;l<b.length;l+=2)c=b[l],d=b[l+1],n=n>c-k?c-k:n,o=c+k>o?c+k:o,p=p>d-k?d-k:p,q=d+k>q?d+k:q;else n=0,o=0,p=0,q=0;m=this.boundsPadding,this._localBounds.x=n-m,this._localBounds.width=o-n+2*m,this._localBounds.y=p-m,this._localBounds.height=q-p+2*m},c.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(b),b.type===j.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b),this.dirty=this.boundsDirty=!0,b},c.prototype.destroy=function(){var a,b,c;for(d.prototype.destroy.apply(this,arguments),a=0;a<this.graphicsData.length;++a)this.graphicsData[a].destroy();for(b in this._webgl)for(c=0;c<this._webgl[b].data.length;++c)this._webgl[b].data[c].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{163:163,164:164,167:167,173:173,185:185,186:186,212:212}],167:[function(a,b){function c(a,b,c,d,e,f,g){this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this._lineTint=b,this.fillColor=d,this.fillAlpha=e,this._fillTint=d,this.fill=f,this.shape=g,this.type=g.type}c.prototype.constructor=c,b.exports=c,c.prototype.clone=function(){return new c(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},c.prototype.destroy=function(){this.shape=null}},{}],168:[function(a,b){function c(a){g.call(this,a),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var d=a(217),e=a(173),f=a(163),g=a(203),h=a(189),i=a(169),j=a(2);c.prototype=Object.create(g.prototype),c.prototype.constructor=c,b.exports=c,h.registerPlugin("graphics",c),c.prototype.onContextChange=function(){},c.prototype.destroy=function(){g.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},c.prototype.render=function(a){var b,c,e,f=this.renderer,g=f.gl,h=f.shaderManager.plugins.primitiveShader;for(a.dirty&&this.updateGraphics(a,g),c=a._webGL[g.id],f.blendModeManager.setBlendMode(a.blendMode),e=0;e<c.data.length;e++)1===c.data[e].mode?(b=c.data[e],f.stencilManager.pushStencil(a,b,f),g.uniform1f(f.shaderManager.complexPrimitiveShader.uniforms.alpha._location,a.worldAlpha*b.alpha),g.drawElements(g.TRIANGLE_FAN,4,g.UNSIGNED_SHORT,2*(b.indices.length-4)),f.stencilManager.popStencil(a,b,f)):(b=c.data[e],h=f.shaderManager.primitiveShader,f.shaderManager.setShader(h),g.uniformMatrix3fv(h.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),g.uniformMatrix3fv(h.uniforms.projectionMatrix._location,!1,f.currentRenderTarget.projectionMatrix.toArray(!0)),g.uniform3fv(h.uniforms.tint._location,d.hex2rgb(a.tint)),g.uniform1f(h.uniforms.alpha._location,a.worldAlpha),g.bindBuffer(g.ARRAY_BUFFER,b.buffer),g.vertexAttribPointer(h.attributes.aVertexPosition,2,g.FLOAT,!1,24,0),g.vertexAttribPointer(h.attributes.aColor,4,g.FLOAT,!1,24,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,b.indexBuffer),g.drawElements(g.TRIANGLE_STRIP,b.indices.length,g.UNSIGNED_SHORT,0)),f.drawCount++},c.prototype.updateGraphics=function(a){var b,c,d,e,g,h=this.renderer.gl,i=a._webGL[h.id];if(i||(i=a._webGL[h.id]={lastIndex:0,data:[],gl:h}),a.dirty=!1,a.clearDirty){for(a.clearDirty=!1,b=0;b<i.data.length;b++)c=i.data[b],c.reset(),this.graphicsDataPool.push(c);i.data=[],i.lastIndex=0}for(b=i.lastIndex;b<a.graphicsData.length;b++)e=a.graphicsData[b],e.type===f.SHAPES.POLY?(e.points=e.shape.points.slice(),e.shape.closed&&(e.points[0]!==e.points[e.points.length-2]||e.points[1]!==e.points[e.points.length-1])&&e.points.push(e.points[0],e.points[1]),e.fill&&e.points.length>=6&&(e.points.length<2*this.maximumSimplePolySize?(d=this.switchMode(i,0),g=this.buildPoly(e,d),g||(d=this.switchMode(i,1),this.buildComplexPoly(e,d))):(d=this.switchMode(i,1),this.buildComplexPoly(e,d))),e.lineWidth>0&&(d=this.switchMode(i,0),this.buildLine(e,d))):(d=this.switchMode(i,0),e.type===f.SHAPES.RECT?this.buildRectangle(e,d):e.type===f.SHAPES.CIRC||e.type===f.SHAPES.ELIP?this.buildCircle(e,d):e.type===f.SHAPES.RREC&&this.buildRoundedRectangle(e,d)),i.lastIndex++;for(b=0;b<i.data.length;b++)d=i.data[b],d.dirty&&d.upload()},c.prototype.switchMode=function(a,b){var c;return a.data.length?(c=a.data[a.data.length-1],(c.points.length>32e4||c.mode!==b||1===b)&&(c=this.graphicsDataPool.pop()||new i(a.gl),c.mode=b,a.data.push(c))):(c=this.graphicsDataPool.pop()||new i(a.gl),c.mode=b,a.data.push(c)),c.dirty=!0,c},c.prototype.buildRectangle=function(a,b){var c,e,f,g,h,i,j,k,l,m=a.shape,n=m.x,o=m.y,p=m.width,q=m.height;a.fill&&(c=d.hex2rgb(a.fillColor),e=a.fillAlpha,f=c[0]*e,g=c[1]*e,h=c[2]*e,i=b.points,j=b.indices,k=i.length/6,i.push(n,o),i.push(f,g,h,e),i.push(n+p,o),i.push(f,g,h,e),i.push(n,o+q),i.push(f,g,h,e),i.push(n+p,o+q),i.push(f,g,h,e),j.push(k,k,k+1,k+2,k+3,k+3)),a.lineWidth&&(l=a.points,a.points=[n,o,n+p,o,n+p,o+q,n,o+q,n,o],this.buildLine(a,b),a.points=l)},c.prototype.buildRoundedRectangle=function(a,b){var c,e,f,g,h,i,k,l,m,n,o,p=a.shape,q=p.x,r=p.y,s=p.width,t=p.height,u=p.radius,v=[];if(v.push(q,r+u),this.quadraticBezierCurve(q,r+t-u,q,r+t,q+u,r+t,v),this.quadraticBezierCurve(q+s-u,r+t,q+s,r+t,q+s,r+t-u,v),this.quadraticBezierCurve(q+s,r+u,q+s,r,q+s-u,r,v),this.quadraticBezierCurve(q+u,r,q,r,q,r+u+1e-10,v),a.fill){for(c=d.hex2rgb(a.fillColor),e=a.fillAlpha,f=c[0]*e,g=c[1]*e,h=c[2]*e,i=b.points,k=b.indices,l=i.length/6,m=j(v,null,2),n=0,n=0;n<m.length;n+=3)k.push(m[n]+l),k.push(m[n]+l),k.push(m[n+1]+l),k.push(m[n+2]+l),k.push(m[n+2]+l);for(n=0;n<v.length;n++)i.push(v[n],v[++n],f,g,h,e)}a.lineWidth&&(o=a.points,a.points=v,this.buildLine(a,b),a.points=o)},c.prototype.quadraticBezierCurve=function(a,b,c,d,e,f,g){function h(a,b,c){var d=b-a;return a+d*c}var i,j,k,l,m,n,o,p=20,q=g||[],r=0;for(o=0;p>=o;o++)r=o/p,i=h(a,c,r),j=h(b,d,r),k=h(c,e,r),l=h(d,f,r),m=h(i,k,r),n=h(j,l,r),q.push(m,n);return q},c.prototype.buildCircle=function(a,b){var c,e,g,h,i,j,k,l,m,n,o,p,q,r,s=a.shape,t=s.x,u=s.y;if(a.type===f.SHAPES.CIRC?(c=s.radius,e=s.radius):(c=s.width,e=s.height),g=Math.floor(30*Math.sqrt(s.radius)),h=2*Math.PI/g,i=0,a.fill){for(j=d.hex2rgb(a.fillColor),k=a.fillAlpha,l=j[0]*k,m=j[1]*k,n=j[2]*k,o=b.points,p=b.indices,q=o.length/6,p.push(q),i=0;g+1>i;i++)o.push(t,u,l,m,n,k),o.push(t+Math.sin(h*i)*c,u+Math.cos(h*i)*e,l,m,n,k),p.push(q++,q++);p.push(q-1)}if(a.lineWidth){for(r=a.points,a.points=[],i=0;g+1>i;i++)a.points.push(t+Math.sin(h*i)*c,u+Math.cos(h*i)*e);this.buildLine(a,b),a.points=r}},c.prototype.buildLine=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=0,R=a.points;if(0!==R.length){if(a.lineWidth%2)for(Q=0;Q<R.length;Q++)R[Q]+=.5;for(c=new e.Point(R[0],R[1]),f=new e.Point(R[R.length-2],R[R.length-1]),c.x===f.x&&c.y===f.y&&(R=R.slice(),R.pop(),R.pop(),f=new e.Point(R[R.length-2],R[R.length-1]),g=f.x+.5*(c.x-f.x),h=f.y+.5*(c.y-f.y),R.unshift(g,h),R.push(g,h)),i=b.points,j=b.indices,k=R.length/2,l=R.length,m=i.length/6,n=a.lineWidth/2,o=d.hex2rgb(a.lineColor),p=a.lineAlpha,q=o[0]*p,r=o[1]*p,s=o[2]*p,v=R[0],w=R[1],x=R[2],y=R[3],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,i.push(v-B,w-C,q,r,s,p),i.push(v+B,w+C,q,r,s,p),Q=1;k-1>Q;Q++)v=R[2*(Q-1)],w=R[2*(Q-1)+1],x=R[2*Q],y=R[2*Q+1],z=R[2*(Q+1)],A=R[2*(Q+1)+1],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,D=-(y-A),E=x-z,P=Math.sqrt(D*D+E*E),D/=P,E/=P,D*=n,E*=n,H=-C+w-(-C+y),I=-B+x-(-B+v),J=(-B+v)*(-C+y)-(-B+x)*(-C+w),K=-E+A-(-E+y),L=-D+x-(-D+z),M=(-D+z)*(-E+y)-(-D+x)*(-E+A),N=H*L-K*I,Math.abs(N)<.1?(N+=10.1,i.push(x-B,y-C,q,r,s,p),i.push(x+B,y+C,q,r,s,p)):(t=(I*M-L*J)/N,u=(K*J-H*M)/N,O=(t-x)*(t-x)+(u-y)+(u-y),O>19600?(F=B-D,G=C-E,P=Math.sqrt(F*F+G*G),F/=P,G/=P,F*=n,G*=n,i.push(x-F,y-G),i.push(q,r,s,p),i.push(x+F,y+G),i.push(q,r,s,p),i.push(x-F,y-G),i.push(q,r,s,p),l++):(i.push(t,u),i.push(q,r,s,p),i.push(x-(t-x),y-(u-y)),i.push(q,r,s,p)));for(v=R[2*(k-2)],w=R[2*(k-2)+1],x=R[2*(k-1)],y=R[2*(k-1)+1],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,i.push(x-B,y-C),i.push(q,r,s,p),i.push(x+B,y+C),i.push(q,r,s,p),j.push(m),Q=0;l>Q;Q++)j.push(m++);j.push(m-1)}},c.prototype.buildComplexPoly=function(a,b){var c,e,f,g,h,i,j,k,l,m=a.points.slice();if(!(m.length<6)){for(c=b.indices,b.points=m,b.alpha=a.fillAlpha,b.color=d.hex2rgb(a.fillColor),e=1/0,f=-(1/0),g=1/0,h=-(1/0),k=0;k<m.length;k+=2)i=m[k],j=m[k+1],e=e>i?i:e,f=i>f?i:f,g=g>j?j:g,h=j>h?j:h;for(m.push(e,g,f,g,f,h,e,h),l=m.length/2,k=0;l>k;k++)c.push(k)}},c.prototype.buildPoly=function(a,b){var c,e,f,g,h,i,k,l,m,n,o,p=a.points;if(!(p.length<6)){if(c=b.points,e=b.indices,f=p.length/2,g=d.hex2rgb(a.fillColor),h=a.fillAlpha,i=g[0]*h,k=g[1]*h,l=g[2]*h,m=j(p,null,2),!m)return!1;for(n=c.length/6,o=0,o=0;o<m.length;o+=3)e.push(m[o]+n),e.push(m[o]+n),e.push(m[o+1]+n),e.push(m[o+2]+n),e.push(m[o+2]+n);for(o=0;f>o;o++)c.push(p[2*o],p[2*o+1],i,k,l,h);return!0}}},{163:163,169:169,173:173,189:189,2:2,203:203,217:217}],169:[function(a,b){function c(a){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}c.prototype.constructor=c,b.exports=c,c.prototype.reset=function(){this.points.length=0,this.indices.length=0},c.prototype.upload=function(){var a=this.gl;this.glPoints=new Float32Array(this.points),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndices,a.STATIC_DRAW),this.dirty=!1},c.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],170:[function(a,b){var c=b.exports=Object.assign(a(163),a(173),{utils:a(217),ticker:a(216),DisplayObject:a(165),Container:a(164),Sprite:a(207),ParticleContainer:a(179),SpriteRenderer:a(208),ParticleRenderer:a(181),Text:a(209),Graphics:a(166),GraphicsData:a(167),GraphicsRenderer:a(168),Texture:a(212),BaseTexture:a(210),RenderTexture:a(211),VideoBaseTexture:a(214),TextureUvs:a(213),CanvasRenderer:a(184),CanvasGraphics:a(186),CanvasBuffer:a(185),WebGLRenderer:a(189),ShaderManager:a(196),Shader:a(201),ObjectRenderer:a(203),RenderTarget:a(205),AbstractFilter:a(190),FXAAFilter:a(191),SpriteMaskFilter:a(192),autoDetectRenderer:function(a,b,d,e){return a=a||800,b=b||600,!e&&c.utils.isWebGLSupported()?new c.WebGLRenderer(a,b,d):new c.CanvasRenderer(a,b,d)}})},{163:163,164:164,165:165,166:166,167:167,168:168,173:173,179:179,181:181,184:184,185:185,186:186,189:189,190:190,191:191,192:192,196:196,201:201,203:203,205:205,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,216:216,217:217}],171:[function(a,b){function c(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var d=a(172);c.prototype.constructor=c,b.exports=c,c.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},c.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},c.prototype.apply=function(a,b){var c,e;return b=b||new d,c=a.x,e=a.y,b.x=this.a*c+this.c*e+this.tx,b.y=this.b*c+this.d*e+this.ty,b},c.prototype.applyInverse=function(a,b){var c,e,f;return b=b||new d,c=1/(this.a*this.d+this.c*-this.b),e=a.x,f=a.y,b.x=this.d*c*e+-this.c*c*f+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*f+-this.b*c*e+(-this.ty*this.a+this.tx*this.b)*c,b},c.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},c.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},c.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},c.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},c.prototype.prepend=function(a){var b,c,d=this.tx;return(1!==a.a||0!==a.b||0!==a.c||1!==a.d)&&(b=this.a,c=this.c,this.a=b*a.a+this.b*a.c,this.b=b*a.b+this.b*a.d,this.c=c*a.a+this.d*a.c,this.d=c*a.b+this.d*a.d),this.tx=d*a.a+this.ty*a.c+a.tx,this.ty=d*a.b+this.ty*a.d+a.ty,this},c.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},c.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},c.prototype.clone=function(){var a=new c;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},c.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},c.IDENTITY=new c,c.TEMP_MATRIX=new c},{172:172}],172:[function(a,b){function c(a,b){this.x=a||0,this.y=b||0}c.prototype.constructor=c,b.exports=c,c.prototype.clone=function(){return new c(this.x,this.y)},c.prototype.copy=function(a){this.set(a.x,a.y)},c.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},c.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)}},{}],173:[function(a,b){b.exports={Point:a(172),Matrix:a(171),Circle:a(174),Ellipse:a(175),Polygon:a(176),Rectangle:a(177),RoundedRectangle:a(178)}},{171:171,172:172,174:174,175:175,176:176,177:177,178:178}],174:[function(a,b){function c(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0,this.type=e.SHAPES.CIRC}var d=a(177),e=a(163);c.prototype.constructor=c,b.exports=c,c.prototype.clone=function(){return new c(this.x,this.y,this.radius)},c.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,e>=c+d},c.prototype.getBounds=function(){return new d(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{163:163,177:177}],175:[function(a,b){function c(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=e.SHAPES.ELIP}var d=a(177),e=a(163);c.prototype.constructor=c,b.exports=c,c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},c.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,1>=c+d},c.prototype.getBounds=function(){return new d(this.x-this.width,this.y-this.height,this.width,this.height)}},{163:163,177:177}],176:[function(a,b){function c(a){var b,c,f,g,h=a;if(!Array.isArray(h))for(h=Array(arguments.length),b=0;b<h.length;++b)h[b]=arguments[b];if(h[0]instanceof d){for(c=[],f=0,g=h.length;g>f;f++)c.push(h[f].x,h[f].y);h=c}this.closed=!0,this.points=h,this.type=e.SHAPES.POLY}var d=a(172),e=a(163);c.prototype.constructor=c,b.exports=c,c.prototype.clone=function(){return new c(this.points.slice())},c.prototype.contains=function(a,b){var c,d,e,f,g,h,i,j=!1,k=this.points.length/2;for(c=0,d=k-1;k>c;d=c++)e=this.points[2*c],f=this.points[2*c+1],g=this.points[2*d],h=this.points[2*d+1],i=f>b!=h>b&&(g-e)*(b-f)/(h-f)+e>a,i&&(j=!j);return j}},{163:163,172:172}],177:[function(a,b){function c(a,b,c,e){this.x=a||0,this.y=b||0,this.width=c||0,this.height=e||0,this.type=d.SHAPES.RECT}var d=a(163);c.prototype.constructor=c,b.exports=c,c.EMPTY=new c(0,0,0,0),c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},c.prototype.contains=function(a,b){return this.width<=0||this.height<=0?!1:a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height?!0:!1}},{163:163}],178:[function(a,b){function c(a,b,c,e,f){this.x=a||0,this.y=b||0,this.width=c||0,this.height=e||0,this.radius=f||20,this.type=d.SHAPES.RREC}var d=a(163);c.prototype.constructor=c,b.exports=c,c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.radius)},c.prototype.contains=function(a,b){return this.width<=0||this.height<=0?!1:a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height?!0:!1}},{163:163}],179:[function(a,b){function c(a,b,c){d.call(this),c=c||15e3,a=a||15e3;var f=16384;c>f&&(c=f),c>a&&(c=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=a,this._batchSize=c,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=e.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(b)}var d=a(164),e=a(163);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},c.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},c.prototype.renderWebGL=function(a){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},c.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},c.prototype.renderCanvas=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable)for(b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform(),i=0;i<this.children.length;++i)j=this.children[i],j.visible&&(k=j.texture.frame,b.globalAlpha=this.worldAlpha*j.alpha,j.rotation%(2*Math.PI)===0?(d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty),d=!1),e=j.anchor.x*(-k.width*j.scale.x)+j.position.x+.5,f=j.anchor.y*(-k.height*j.scale.y)+j.position.y+.5,g=k.width*j.scale.x,h=k.height*j.scale.y):(d||(d=!0),j.displayObjectUpdateTransform(),l=j.worldTransform,a.roundPixels?b.setTransform(l.a,l.b,l.c,l.d,0|l.tx,0|l.ty):b.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty),e=j.anchor.x*-k.width+.5,f=j.anchor.y*-k.height+.5,g=k.width,h=k.height),b.drawImage(j.texture.baseTexture.source,k.x,k.y,k.width,k.height,e,f,g,h))},c.prototype.destroy=function(){if(d.prototype.destroy.apply(this,arguments),this._buffers)for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._properties=null,this._buffers=null}},{163:163,164:164}],180:[function(a,b){function c(a,b,c,d){var e,f;for(this.gl=a,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=d,this.dynamicProperties=[],this.staticProperties=[],e=0;e<b.length;e++)f=b[e],c[e]?this.dynamicProperties.push(f):this.staticProperties.push(f);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}c.prototype.constructor=c,b.exports=c,c.prototype.initBuffers=function(){var a,b,c,d=this.gl,e=0;for(this.dynamicStride=0,a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],b.offset=e,e+=b.size,this.dynamicStride+=b.size;for(this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,this.dynamicBuffer),d.bufferData(d.ARRAY_BUFFER,this.dynamicData,d.DYNAMIC_DRAW),c=0,this.staticStride=0,a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],b.offset=c,c+=b.size,this.staticStride+=b.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,this.staticBuffer),d.bufferData(d.ARRAY_BUFFER,this.staticData,d.DYNAMIC_DRAW)},c.prototype.uploadDynamic=function(a,b,c){var d,e,f=this.gl;for(d=0;d<this.dynamicProperties.length;d++)e=this.dynamicProperties[d],e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset);f.bindBuffer(f.ARRAY_BUFFER,this.dynamicBuffer),f.bufferSubData(f.ARRAY_BUFFER,0,this.dynamicData)},c.prototype.uploadStatic=function(a,b,c){var d,e,f=this.gl;for(d=0;d<this.staticProperties.length;d++)e=this.staticProperties[d],e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset);f.bindBuffer(f.ARRAY_BUFFER,this.staticBuffer),f.bufferSubData(f.ARRAY_BUFFER,0,this.staticData)},c.prototype.bind=function(){var a,b,c=this.gl;for(c.bindBuffer(c.ARRAY_BUFFER,this.dynamicBuffer),a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],c.vertexAttribPointer(b.attribute,b.size,c.FLOAT,!1,4*this.dynamicStride,4*b.offset);for(c.bindBuffer(c.ARRAY_BUFFER,this.staticBuffer),a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],c.vertexAttribPointer(b.attribute,b.size,c.FLOAT,!1,4*this.staticStride,4*b.offset)},c.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],181:[function(a,b){function c(a){var b,c,e;for(d.call(this,a),b=98304,this.indices=new Uint16Array(b),c=0,e=0;b>c;c+=6,e+=4)this.indices[c+0]=e+0,this.indices[c+1]=e+1,this.indices[c+2]=e+2,this.indices[c+3]=e+0,this.indices[c+4]=e+2,this.indices[c+5]=e+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new h.Matrix}var d=a(203),e=a(189),f=a(182),g=a(180),h=a(173);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,e.registerPlugin("particle",c),c.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new f(this.renderer.shaderManager),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},c.prototype.start=function(){var a,b=this.renderer.gl;b.activeTexture(b.TEXTURE0),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a=this.shader,this.renderer.shaderManager.setShader(a)},c.prototype.render=function(a){var b,c,d,e,f,g,h,i=a.children,j=i.length,k=a._maxSize,l=a._batchSize;if(0!==j){if(j>k&&(j=k),a._buffers||(a._buffers=this.generateBuffers(a)),this.renderer.blendModeManager.setBlendMode(a.blendMode),b=this.renderer.gl,c=a.worldTransform.copy(this.tempMatrix),c.prepend(this.renderer.currentRenderTarget.projectionMatrix),
b.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,c.toArray(!0)),b.uniform1f(this.shader.uniforms.uAlpha._location,a.worldAlpha),d=i[0]._texture.baseTexture,d._glTextures[b.id])b.bindTexture(b.TEXTURE_2D,d._glTextures[b.id]);else{if(!this.renderer.updateTexture(d))return;a._properties[0]&&a._properties[3]||(a._bufferToUpdate=0)}for(e=0,f=0;j>e;e+=l,f+=1)g=j-e,g>l&&(g=l),h=a._buffers[f],h.uploadDynamic(i,e,g),a._bufferToUpdate===f&&(h.uploadStatic(i,e,g),a._bufferToUpdate=f+1),h.bind(this.shader),b.drawElements(b.TRIANGLES,6*g,b.UNSIGNED_SHORT,0),this.renderer.drawCount++}},c.prototype.generateBuffers=function(a){var b,c=this.renderer.gl,d=[],e=a._maxSize,f=a._batchSize,h=a._properties;for(b=0;e>b;b+=f)d.push(new g(c,this.properties,h,f));return d},c.prototype.uploadVertices=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p;for(p=0;c>p;p++)g=a[b+p],h=g._texture,j=g.scale.x,k=g.scale.y,h.trim?(i=h.trim,m=i.x-g.anchor.x*i.width,l=m+h.crop.width,o=i.y-g.anchor.y*i.height,n=o+h.crop.height):(l=h._frame.width*(1-g.anchor.x),m=h._frame.width*-g.anchor.x,n=h._frame.height*(1-g.anchor.y),o=h._frame.height*-g.anchor.y),d[f]=m*j,d[f+1]=o*k,d[f+e]=l*j,d[f+e+1]=o*k,d[f+2*e]=l*j,d[f+2*e+1]=n*k,d[f+3*e]=m*j,d[f+3*e+1]=n*k,f+=4*e},c.prototype.uploadPosition=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g].position,d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e},c.prototype.uploadRotation=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g].rotation,d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e},c.prototype.uploadUvs=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g]._texture._uvs,h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)},c.prototype.uploadAlpha=function(a,b,c,d,e,f){var g,h;for(g=0;c>g;g++)h=a[b+g].alpha,d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e},c.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),d.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{173:173,180:180,182:182,189:189,203:203}],182:[function(a,b){function c(a){d.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}","precision lowp float;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}",{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var d=a(202);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c},{202:202}],183:[function(a,b){function c(a,b,c,h){if(g.call(this),d.sayHello(a),h)for(var i in f.DEFAULT_RENDER_OPTIONS)void 0===h[i]&&(h[i]=f.DEFAULT_RENDER_OPTIONS[i]);else h=f.DEFAULT_RENDER_OPTIONS;this.type=f.RENDERER_TYPE.UNKNOWN,this.width=b||800,this.height=c||600,this.view=h.view||document.createElement("canvas"),this.resolution=h.resolution,this.transparent=h.transparent,this.autoResize=h.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=h.preserveDrawingBuffer,this.clearBeforeRender=h.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=h.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new e.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var d=a(217),e=a(173),f=a(163),g=a(3);c.prototype=Object.create(g.prototype),c.prototype.constructor=c,b.exports=c,Object.defineProperties(c.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=d.hex2string(a),d.hex2rgb(a,this._backgroundColorRgb)}}}),c.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},c.prototype.destroy=function(a){a&&this.view.parent&&this.view.parent.removeChild(this.view),this.type=f.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{163:163,173:173,217:217,3:3}],184:[function(a,b){function c(a,b,c){c=c||{},d.call(this,"Canvas",a,b,c),this.type=h.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new e,this.roundPixels=c.roundPixels,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new g.Matrix,worldAlpha:1},this.resize(a,b)}var d=a(183),e=a(187),f=a(217),g=a(173),h=a(163);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,f.pluginTarget.mixin(c),c.prototype.render=function(a){var b=a.parent;this._lastObjectRendered=a,a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=b,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(a,this.context)},c.prototype.destroy=function(a){this.destroyPlugins(),d.prototype.destroy.call(this,a),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.roundPixels=!1,this.smoothProperty=null},c.prototype.renderDisplayObject=function(a,b){var c=this.context;this.context=b,a.renderCanvas(this),this.context=c},c.prototype.resize=function(a,b){d.prototype.resize.call(this,a,b),this.smoothProperty&&(this.context[this.smoothProperty]=h.SCALE_MODES.DEFAULT===h.SCALE_MODES.LINEAR)},c.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},f.canUseNewCanvasBlendModes()?(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[h.BLEND_MODES.SCREEN]="screen",this.blendModes[h.BLEND_MODES.OVERLAY]="overlay",this.blendModes[h.BLEND_MODES.DARKEN]="darken",this.blendModes[h.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[h.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[h.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[h.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[h.BLEND_MODES.HUE]="hue",this.blendModes[h.BLEND_MODES.SATURATION]="saturate",this.blendModes[h.BLEND_MODES.COLOR]="color",this.blendModes[h.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[h.BLEND_MODES.SCREEN]="source-over",this.blendModes[h.BLEND_MODES.OVERLAY]="source-over",this.blendModes[h.BLEND_MODES.DARKEN]="source-over",this.blendModes[h.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[h.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[h.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[h.BLEND_MODES.HUE]="source-over",this.blendModes[h.BLEND_MODES.SATURATION]="source-over",this.blendModes[h.BLEND_MODES.COLOR]="source-over",this.blendModes[h.BLEND_MODES.LUMINOSITY]="source-over"))}},{163:163,173:173,183:183,187:187,217:217}],185:[function(a,b){function c(a,b){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=a,this.canvas.height=b}c.prototype.constructor=c,b.exports=c,Object.defineProperties(c.prototype,{width:{get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},height:{get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}}),c.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},c.prototype.resize=function(a,b){this.canvas.width=a,this.canvas.height=b},c.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],186:[function(a,b){var c=a(163),d={};b.exports=d,d.renderGraphics=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=a.worldAlpha;for(a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1),d=0;d<a.graphicsData.length;d++)if(e=a.graphicsData[d],f=e.shape,g=e._fillTint,h=e._lineTint,b.lineWidth=e.lineWidth,e.type===c.SHAPES.POLY){for(b.beginPath(),i=f.points,b.moveTo(i[0],i[1]),j=1;j<i.length/2;j++)b.lineTo(i[2*j],i[2*j+1]);f.closed&&b.lineTo(i[0],i[1]),i[0]===i[i.length-2]&&i[1]===i[i.length-1]&&b.closePath(),e.fill&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke())}else e.type===c.SHAPES.RECT?((e.fillColor||0===e.fillColor)&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fillRect(f.x,f.y,f.width,f.height)),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.strokeRect(f.x,f.y,f.width,f.height))):e.type===c.SHAPES.CIRC?(b.beginPath(),b.arc(f.x,f.y,f.radius,0,2*Math.PI),b.closePath(),e.fill&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke())):e.type===c.SHAPES.ELIP?(k=2*f.width,l=2*f.height,m=f.x-k/2,n=f.y-l/2,b.beginPath(),o=.5522848,p=k/2*o,q=l/2*o,r=m+k,s=n+l,t=m+k/2,u=n+l/2,b.moveTo(m,u),b.bezierCurveTo(m,u-q,t-p,n,t,n),b.bezierCurveTo(t+p,n,r,u-q,r,u),b.bezierCurveTo(r,u+q,t+p,s,t,s),b.bezierCurveTo(t-p,s,m,u+q,m,u),b.closePath(),e.fill&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke())):e.type===c.SHAPES.RREC&&(v=f.x,w=f.y,x=f.width,y=f.height,z=f.radius,A=Math.min(x,y)/2|0,z=z>A?A:z,b.beginPath(),b.moveTo(v,w+z),b.lineTo(v,w+y-z),b.quadraticCurveTo(v,w+y,v+z,w+y),b.lineTo(v+x-z,w+y),b.quadraticCurveTo(v+x,w+y,v+x,w+y-z),b.lineTo(v+x,w+z),b.quadraticCurveTo(v+x,w,v+x-z,w),b.lineTo(v+z,w),b.quadraticCurveTo(v,w,v,w+z),b.closePath(),(e.fillColor||0===e.fillColor)&&(b.globalAlpha=e.fillAlpha*B,b.fillStyle="#"+("00000"+(0|g).toString(16)).substr(-6),b.fill()),e.lineWidth&&(b.globalAlpha=e.lineAlpha*B,b.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),b.stroke()))},d.renderGraphicsMask=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=a.graphicsData.length;if(0!==z)for(b.beginPath(),d=0;z>d;d++)if(e=a.graphicsData[d],f=e.shape,e.type===c.SHAPES.POLY){for(g=f.points,b.moveTo(g[0],g[1]),h=1;h<g.length/2;h++)b.lineTo(g[2*h],g[2*h+1]);g[0]===g[g.length-2]&&g[1]===g[g.length-1]&&b.closePath()}else e.type===c.SHAPES.RECT?(b.rect(f.x,f.y,f.width,f.height),b.closePath()):e.type===c.SHAPES.CIRC?(b.arc(f.x,f.y,f.radius,0,2*Math.PI),b.closePath()):e.type===c.SHAPES.ELIP?(i=2*f.width,j=2*f.height,k=f.x-i/2,l=f.y-j/2,m=.5522848,n=i/2*m,o=j/2*m,p=k+i,q=l+j,r=k+i/2,s=l+j/2,b.moveTo(k,s),b.bezierCurveTo(k,s-o,r-n,l,r,l),b.bezierCurveTo(r+n,l,p,s-o,p,s),b.bezierCurveTo(p,s+o,r+n,q,r,q),b.bezierCurveTo(r-n,q,k,s+o,k,s),b.closePath()):e.type===c.SHAPES.RREC&&(t=f.x,u=f.y,v=f.width,w=f.height,x=f.radius,y=Math.min(v,w)/2|0,x=x>y?y:x,b.moveTo(t,u+x),b.lineTo(t,u+w-x),b.quadraticCurveTo(t,u+w,t+x,u+w),b.lineTo(t+v-x,u+w),b.quadraticCurveTo(t+v,u+w,t+v,u+w-x),b.lineTo(t+v,u+x),b.quadraticCurveTo(t+v,u,t+v-x,u),b.lineTo(t+x,u),b.quadraticCurveTo(t,u,t,u+x),b.closePath())},d.updateGraphicsTint=function(a){var b,c,d,e,f,g,h;if(16777215!==a.tint)for(b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;e++)f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor,f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},{163:163}],187:[function(a,b){function c(){}var d=a(186);c.prototype.constructor=c,b.exports=c,c.prototype.pushMask=function(a,b){var c,e,f;b.context.save(),c=a.alpha,e=a.worldTransform,f=b.resolution,b.context.setTransform(e.a*f,e.b*f,e.c*f,e.d*f,e.tx*f,e.ty*f),a.texture||(d.renderGraphicsMask(a,b.context),b.context.clip()),a.worldAlpha=c},c.prototype.popMask=function(a){a.context.restore()},c.prototype.destroy=function(){}},{186:186}],188:[function(a,b){var c=a(217),d={};b.exports=d,d.getTintedTexture=function(a,b){var c,e,f,g=a.texture;return b=d.roundColor(b),c="#"+("00000"+(0|b).toString(16)).substr(-6),g.tintCache=g.tintCache||{},g.tintCache[c]?g.tintCache[c]:(e=d.canvas||document.createElement("canvas"),d.tintMethod(g,b,e),d.convertTintToImage?(f=new Image,f.src=e.toDataURL(),g.tintCache[c]=f):(g.tintCache[c]=e,d.canvas=null),e)},d.tintWithMultiply=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},d.tintWithOverlay=function(a,b,c){var d=c.getContext("2d"),e=a.crop;c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},d.tintWithPerPixel=function(a,b,d){var e,f,g,h,i,j,k,l=d.getContext("2d"),m=a.crop;for(d.width=m.width,d.height=m.height,l.globalCompositeOperation="copy",l.drawImage(a.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height),e=c.hex2rgb(b),f=e[0],g=e[1],h=e[2],i=l.getImageData(0,0,m.width,m.height),j=i.data,k=0;k<j.length;k+=4)j[k+0]*=f,j[k+1]*=g,j[k+2]*=h;l.putImageData(i,0,0)},d.roundColor=function(a){var b=d.cacheStepsPerColorChannel,e=c.hex2rgb(a);return e[0]=Math.min(255,e[0]/b*b),e[1]=Math.min(255,e[1]/b*b),e[2]=Math.min(255,e[2]/b*b),c.rgb2hex(e)},d.cacheStepsPerColorChannel=8,d.convertTintToImage=!1,d.canUseMultiply=c.canUseNewCanvasBlendModes(),d.tintMethod=d.canUseMultiply?d.tintWithMultiply:d.tintWithPerPixel},{217:217}],189:[function(a,b){function c(a,b,c){c=c||{},d.call(this,"WebGL",a,b,c),this.type=n.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!c.forceFXAA&&c.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:c.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:c.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new e(this),this.maskManager=new f(this),this.stencilManager=new g(this),this.filterManager=new h(this),this.blendModeManager=new i(this),this.currentRenderTarget=null,this.currentRenderer=new k(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._renderTargetStack=[]}var d=a(183),e=a(196),f=a(195),g=a(197),h=a(194),i=a(193),j=a(205),k=a(203),l=a(191),m=a(217),n=a(163);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,m.pluginTarget.mixin(c),c.glContextId=0,c.prototype._createContext=function(){var a=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=a,!a)throw Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=c.glContextId++,a.id=this.glContextId,a.renderer=this},c.prototype._initContext=function(){var a=this.gl;a.disable(a.DEPTH_TEST),a.disable(a.CULL_FACE),a.enable(a.BLEND),this.renderTarget=new j(a,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",a),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!a.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new l])},c.prototype.render=function(a){var b,c;this.gl.isContextLost()||(this.drawCount=0,this._lastObjectRendered=a,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,a.filterArea=this.renderTarget.size,a.filters=this._FXAAFilter),b=a.parent,a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=b,c=this.gl,this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?c.clearColor(0,0,0,0):c.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),c.clear(c.COLOR_BUFFER_BIT)),this.renderDisplayObject(a,this.renderTarget))},c.prototype.renderDisplayObject=function(a,b,c){this.setRenderTarget(b),c&&b.clear(),this.filterManager.setFilterStack(b.filterStack),a.renderWebGL(this),this.currentRenderer.flush()},c.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},c.prototype.setRenderTarget=function(a){this.currentRenderTarget!==a&&(this.currentRenderTarget=a,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(a.stencilMaskStack))},c.prototype.resize=function(a,b){d.prototype.resize.call(this,a,b),this.filterManager.resize(a,b),this.renderTarget.resize(a,b),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},c.prototype.updateTexture=function(a){if(a=a.baseTexture||a,a.hasLoaded){var b=this.gl;return a._glTextures[b.id]||(a._glTextures[b.id]=b.createTexture(),a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this)),b.bindTexture(b.TEXTURE_2D,a._glTextures[b.id]),b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.source),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a.scaleMode===n.SCALE_MODES.LINEAR?b.LINEAR:b.NEAREST),a.mipmap&&a.isPowerOfTwo?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===n.SCALE_MODES.LINEAR?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST),b.generateMipmap(b.TEXTURE_2D)):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===n.SCALE_MODES.LINEAR?b.LINEAR:b.NEAREST),a.isPowerOfTwo?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)),a._glTextures[b.id]}},c.prototype.destroyTexture=function(a){a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.gl.id]&&this.gl.deleteTexture(a._glTextures[this.gl.id])},c.prototype.handleContextLost=function(a){a.preventDefault()},c.prototype.handleContextRestored=function(){this._initContext();for(var a in m.BaseTextureCache)m.BaseTextureCache[a]._glTextures.length=0},c.prototype.destroy=function(a){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),d.prototype.destroy.call(this,a),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.drawCount=0,this.gl=null},c.prototype._mapGlModes=function(){var a=this.gl;this.blendModes||(this.blendModes={},this.blendModes[n.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.ADD]=[a.SRC_ALPHA,a.DST_ALPHA],this.blendModes[n.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.SCREEN]=[a.SRC_ALPHA,a.ONE],this.blendModes[n.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],this.blendModes[n.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[n.DRAW_MODES.POINTS]=a.POINTS,this.drawModes[n.DRAW_MODES.LINES]=a.LINES,this.drawModes[n.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,this.drawModes[n.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,this.drawModes[n.DRAW_MODES.TRIANGLES]=a.TRIANGLES,this.drawModes[n.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,this.drawModes[n.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN)}},{163:163,183:183,191:191,193:193,194:194,195:195,196:196,197:197,203:203,205:205,217:217}],190:[function(a,b){function c(a,b,c){this.shaders=[],this.padding=0,this.uniforms=c||{},this.vertexSrc=a||d.defaultVertexSrc,this.fragmentSrc=b||d.defaultFragmentSrc}var d=a(202);c.prototype.constructor=c,b.exports=c,c.prototype.getShader=function(a){var b=a.gl,c=this.shaders[b.id];return c||(c=new d(a.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[b.id]=c),c},c.prototype.applyFilter=function(a,b,c,d){var e=this.getShader(a);a.filterManager.applyFilter(e,b,c,d)},c.prototype.syncUniform=function(a){for(var b=0,c=this.shaders.length;c>b;++b)this.shaders[b].syncUniform(a)}},{202:202}],191:[function(a,b){function c(){d.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var d=a(190);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.applyFilter=function(a,b,c){var d=a.filterManager,e=this.getShader(a);d.applyFilter(e,b,c)}},{190:190}],192:[function(a,b){function c(a){var b=new e.Matrix;d.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:a._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:b.toArray(!0)}}),this.maskSprite=a,this.maskMatrix=b}var d=a(190),e=a(173);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.applyFilter=function(a,b,c){var d,e=a.filterManager;this.uniforms.mask.value=this.maskSprite._texture,e.calculateMappedMatrix(b.frame,this.maskSprite,this.maskMatrix),
this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha,d=this.getShader(a),e.applyFilter(d,b,c)},Object.defineProperties(c.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(a){this.uniforms.mask.value=a}},offset:{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}}})},{173:173,190:190}],193:[function(a,b){function c(a){d.call(this,a),this.currentBlendMode=99999}var d=a(198);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;var b=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(b[0],b[1]),!0}},{198:198}],194:[function(a,b){function c(a){d.call(this,a),this.filterStack=[],this.filterStack.push({renderTarget:a.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new h.Rectangle(0,0,a.width,a.height),this.currentFrame=null}var d=a(198),e=a(205),f=a(163),g=a(204),h=a(173);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.onContextChange=function(){this.texturePool.length=0;var a=this.renderer.gl;this.quad=new g(a)},c.prototype.setFilterStack=function(a){this.filterStack=a},c.prototype.pushFilter=function(a,b){var c,d,e,f=a.filterArea?a.filterArea.clone():a.getBounds();f.x=0|f.x,f.y=0|f.y,f.width=0|f.width,f.height=0|f.height,c=0|b[0].padding,f.x-=c,f.y-=c,f.width+=2*c,f.height+=2*c,this.renderer.currentRenderTarget.transform?(d=this.renderer.currentRenderTarget.transform,f.x+=d.tx,f.y+=d.ty,this.capFilterArea(f),f.x-=d.tx,f.y-=d.ty):this.capFilterArea(f),f.width>0&&f.height>0?(this.currentFrame=f,e=this.getRenderTarget(),this.renderer.setRenderTarget(e),e.clear(),this.filterStack.push({renderTarget:e,filter:b})):this.filterStack.push({renderTarget:null,filter:b})},c.prototype.popFilter=function(){var a,b,c,d,e,g,h,i,j=this.filterStack.pop(),k=this.filterStack[this.filterStack.length-1],l=j.renderTarget;if(j.renderTarget){if(a=k.renderTarget,b=this.renderer.gl,this.currentFrame=l.frame,this.quad.map(this.textureSize,l.frame),b.bindBuffer(b.ARRAY_BUFFER,this.quad.vertexBuffer),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer),c=j.filter,b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,b.FLOAT,!1,0,0),b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,b.FLOAT,!1,0,32),b.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,b.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(f.BLEND_MODES.NORMAL),1===c.length)c[0].uniforms.dimensions&&(c[0].uniforms.dimensions.value[0]=this.renderer.width,c[0].uniforms.dimensions.value[1]=this.renderer.height,c[0].uniforms.dimensions.value[2]=this.quad.vertices[0],c[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),c[0].applyFilter(this.renderer,l,a),this.returnRenderTarget(l);else{for(d=l,e=this.getRenderTarget(!0),g=0;g<c.length-1;g++)h=c[g],h.uniforms.dimensions&&(h.uniforms.dimensions.value[0]=this.renderer.width,h.uniforms.dimensions.value[1]=this.renderer.height,h.uniforms.dimensions.value[2]=this.quad.vertices[0],h.uniforms.dimensions.value[3]=this.quad.vertices[5]),h.applyFilter(this.renderer,d,e),i=d,d=e,e=i;c[c.length-1].applyFilter(this.renderer,d,a),this.returnRenderTarget(d),this.returnRenderTarget(e)}return j.filter}},c.prototype.getRenderTarget=function(a){var b=this.texturePool.pop()||new e(this.renderer.gl,this.textureSize.width,this.textureSize.height,f.SCALE_MODES.LINEAR,this.renderer.resolution*f.FILTER_RESOLUTION);return b.frame=this.currentFrame,a&&b.clear(!0),b},c.prototype.returnRenderTarget=function(a){this.texturePool.push(a)},c.prototype.applyFilter=function(a,b,c,d){var e=this.renderer.gl;this.renderer.setRenderTarget(c),d&&c.clear(),this.renderer.shaderManager.setShader(a),a.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),a.syncUniforms(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,b.texture),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),this.renderer.drawCount++},c.prototype.calculateMappedMatrix=function(a,b,c){var d,e,f=b.worldTransform.copy(h.Matrix.TEMP_MATRIX),g=b._texture.baseTexture,i=c.identity(),j=this.textureSize.height/this.textureSize.width;return i.translate(a.x/this.textureSize.width,a.y/this.textureSize.height),i.scale(1,j),d=this.textureSize.width/g.width,e=this.textureSize.height/g.height,f.tx/=g.width*d,f.ty/=g.width*d,f.invert(),i.prepend(f),i.scale(1,1/j),i.scale(d,e),i.translate(b.anchor.x,b.anchor.y),i},c.prototype.capFilterArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0),a.x+a.width>this.textureSize.width&&(a.width=this.textureSize.width-a.x),a.y+a.height>this.textureSize.height&&(a.height=this.textureSize.height-a.y)},c.prototype.resize=function(a,b){this.textureSize.width=a,this.textureSize.height=b;for(var c=0;c<this.texturePool.length;c++)this.texturePool[c].resize(a,b)},c.prototype.destroy=function(){d.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var a=0;a<this.texturePool.length;a++)this.texturePool[a].destroy();this.texturePool=null}},{163:163,173:173,198:198,204:204,205:205}],195:[function(a,b){function c(a){d.call(this,a),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var d=a(198),e=a(192);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.pushMask=function(a,b){b.texture?this.pushSpriteMask(a,b):this.pushStencilMask(a,b)},c.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.popStencilMask(a,b)},c.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool.pop();c||(c=[new e(b)]),c[0].maskSprite=b,this.renderer.filterManager.pushFilter(a,c)},c.prototype.popSpriteMask=function(){var a=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(a)},c.prototype.pushStencilMask=function(a,b){this.renderer.stencilManager.pushMask(b)},c.prototype.popStencilMask=function(a,b){this.renderer.stencilManager.popMask(b)}},{192:192,198:198}],196:[function(a,b){function c(a){d.call(this,a),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var d=a(198),e=a(202),f=a(199),g=a(200),h=a(217);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,h.pluginTarget.mixin(c),b.exports=c,c.prototype.onContextChange=function(){var a,b;for(this.initPlugins(),a=this.renderer.gl,this.maxAttibs=a.getParameter(a.MAX_VERTEX_ATTRIBS),this.attribState=[],b=0;b<this.maxAttibs;b++)this.attribState[b]=!1;this.defaultShader=new e(this),this.primitiveShader=new g(this),this.complexPrimitiveShader=new f(this)},c.prototype.setAttribs=function(a){var b,c,d;for(b=0;b<this.tempAttribState.length;b++)this.tempAttribState[b]=!1;for(c in a)this.tempAttribState[a[c]]=!0;for(d=this.renderer.gl,b=0;b<this.attribState.length;b++)this.attribState[b]!==this.tempAttribState[b]&&(this.attribState[b]=this.tempAttribState[b],this.attribState[b]?d.enableVertexAttribArray(b):d.disableVertexAttribArray(b))},c.prototype.setShader=function(a){return this._currentId===a.uid?!1:(this._currentId=a.uid,this.currentShader=a,this.renderer.gl.useProgram(a.program),this.setAttribs(a.attributes),!0)},c.prototype.destroy=function(){d.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{198:198,199:199,200:200,202:202,217:217}],197:[function(a,b){function c(a){d.call(this,a),this.stencilMaskStack=null}var d=a(198),e=a(217);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.stencilStack.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},c.prototype.pushStencil=function(a,b){var c,d,e;this.renderer.currentRenderTarget.attachStencilBuffer(),c=this.renderer.gl,d=this.stencilMaskStack,this.bindGraphics(a,b,this.renderer),0===d.stencilStack.length&&(c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),d.reverse=!0,d.count=0),d.stencilStack.push(b),e=d.count,c.colorMask(!1,!1,!1,!1),c.stencilFunc(c.ALWAYS,0,255),c.stencilOp(c.KEEP,c.KEEP,c.INVERT),1===b.mode?(c.drawElements(c.TRIANGLE_FAN,b.indices.length-4,c.UNSIGNED_SHORT,0),d.reverse?(c.stencilFunc(c.EQUAL,255-e,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)):(c.stencilFunc(c.EQUAL,e,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)),c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,2*(b.indices.length-4)),d.reverse?c.stencilFunc(c.EQUAL,255-(e+1),255):c.stencilFunc(c.EQUAL,e+1,255),d.reverse=!d.reverse):(d.reverse?(c.stencilFunc(c.EQUAL,e,255),c.stencilOp(c.KEEP,c.KEEP,c.INCR)):(c.stencilFunc(c.EQUAL,255-e,255),c.stencilOp(c.KEEP,c.KEEP,c.DECR)),c.drawElements(c.TRIANGLE_STRIP,b.indices.length,c.UNSIGNED_SHORT,0),d.reverse?c.stencilFunc(c.EQUAL,e+1,255):c.stencilFunc(c.EQUAL,255-(e+1),255)),c.colorMask(!0,!0,!0,!0),c.stencilOp(c.KEEP,c.KEEP,c.KEEP),d.count++},c.prototype.bindGraphics=function(a,b){var c,d;this._currentGraphics=a,c=this.renderer.gl,1===b.mode?(d=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(d),c.uniformMatrix3fv(d.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),c.uniformMatrix3fv(d.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),c.uniform3fv(d.uniforms.tint._location,e.hex2rgb(a.tint)),c.uniform3fv(d.uniforms.color._location,b.color),c.uniform1f(d.uniforms.alpha._location,a.worldAlpha),c.bindBuffer(c.ARRAY_BUFFER,b.buffer),c.vertexAttribPointer(d.attributes.aVertexPosition,2,c.FLOAT,!1,8,0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indexBuffer)):(d=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(d),c.uniformMatrix3fv(d.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),c.uniformMatrix3fv(d.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),c.uniform3fv(d.uniforms.tint._location,e.hex2rgb(a.tint)),c.uniform1f(d.uniforms.alpha._location,a.worldAlpha),c.bindBuffer(c.ARRAY_BUFFER,b.buffer),c.vertexAttribPointer(d.attributes.aVertexPosition,2,c.FLOAT,!1,24,0),c.vertexAttribPointer(d.attributes.aColor,4,c.FLOAT,!1,24,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,b.indexBuffer))},c.prototype.popStencil=function(a,b){var c,d=this.renderer.gl,e=this.stencilMaskStack;e.stencilStack.pop(),e.count--,0===e.stencilStack.length?d.disable(d.STENCIL_TEST):(c=e.count,this.bindGraphics(a,b,this.renderer),d.colorMask(!1,!1,!1,!1),1===b.mode?(e.reverse=!e.reverse,e.reverse?(d.stencilFunc(d.EQUAL,255-(c+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)):(d.stencilFunc(d.EQUAL,c+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)),d.drawElements(d.TRIANGLE_FAN,4,d.UNSIGNED_SHORT,2*(b.indices.length-4)),d.stencilFunc(d.ALWAYS,0,255),d.stencilOp(d.KEEP,d.KEEP,d.INVERT),d.drawElements(d.TRIANGLE_FAN,b.indices.length-4,d.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,e.reverse?d.stencilFunc(d.EQUAL,c,255):d.stencilFunc(d.EQUAL,255-c,255)):(e.reverse?(d.stencilFunc(d.EQUAL,c+1,255),d.stencilOp(d.KEEP,d.KEEP,d.DECR)):(d.stencilFunc(d.EQUAL,255-(c+1),255),d.stencilOp(d.KEEP,d.KEEP,d.INCR)),d.drawElements(d.TRIANGLE_STRIP,b.indices.length,d.UNSIGNED_SHORT,0),this.renderer.drawCount++,e.reverse?d.stencilFunc(d.EQUAL,c,255):d.stencilFunc(d.EQUAL,255-c,255)),d.colorMask(!0,!0,!0,!0),d.stencilOp(d.KEEP,d.KEEP,d.KEEP))},c.prototype.destroy=function(){d.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},c.prototype.pushMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),a.dirty&&this.renderer.plugins.graphics.updateGraphics(a,this.renderer.gl),a._webGL[this.renderer.gl.id].data.length&&this.pushStencil(a,a._webGL[this.renderer.gl.id].data[0],this.renderer)},c.prototype.popMask=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(a,a._webGL[this.renderer.gl.id].data[0],this.renderer)}},{198:198,217:217}],198:[function(a,b){function c(a){this.renderer=a,this.renderer.on("context",this.onContextChange,this)}c.prototype.constructor=c,b.exports=c,c.prototype.onContextChange=function(){},c.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],199:[function(a,b){function c(a){d.call(this,a,"attribute vec2 aVertexPosition;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform vec3 tint;\nuniform float alpha;\nuniform vec3 color;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = vec4(color * alpha * tint, alpha);\n}","precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var d=a(201);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c},{201:201}],200:[function(a,b){function c(a){d.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform float flipY;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}","precision mediump float;\nvarying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}",{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var d=a(201);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c},{201:201}],201:[function(a,b){function c(a,b,c,e,f){if(!b||!c)throw Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=d.uid(),this.gl=a.renderer.gl,this.shaderManager=a,this.program=null,this.uniforms=e||{},this.attributes=f||{},this.textureCount=1,this.vertexSrc=b,this.fragmentSrc=c,this.init()}var d=a(217);c.prototype.constructor=c,b.exports=c,c.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},c.prototype.cacheUniformLocations=function(a){for(var b=0;b<a.length;++b)this.uniforms[a[b]]._location=this.gl.getUniformLocation(this.program,a[b])},c.prototype.cacheAttributeLocations=function(a){for(var b=0;b<a.length;++b)this.attributes[a[b]]=this.gl.getAttribLocation(this.program,a[b])},c.prototype.compile=function(){var a=this.gl,b=this._glCompile(a.VERTEX_SHADER,this.vertexSrc),c=this._glCompile(a.FRAGMENT_SHADER,this.fragmentSrc),d=a.createProgram();return a.attachShader(d,b),a.attachShader(d,c),a.linkProgram(d),a.getProgramParameter(d,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(d,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(d)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(d)),a.deleteProgram(d),d=null),a.deleteShader(b),a.deleteShader(c),this.program=d},c.prototype.syncUniform=function(a){var b,c,e,f=a._location,g=a.value,h=this.gl;switch(a.type){case"b":case"bool":case"boolean":h.uniform1i(f,g?1:0);break;case"i":case"1i":h.uniform1i(f,g);break;case"f":case"1f":h.uniform1f(f,g);break;case"2f":h.uniform2f(f,g[0],g[1]);break;case"3f":h.uniform3f(f,g[0],g[1],g[2]);break;case"4f":h.uniform4f(f,g[0],g[1],g[2],g[3]);break;case"v2":h.uniform2f(f,g.x,g.y);break;case"v3":h.uniform3f(f,g.x,g.y,g.z);break;case"v4":h.uniform4f(f,g.x,g.y,g.z,g.w);break;case"1iv":h.uniform1iv(f,g);break;case"2iv":h.uniform2iv(f,g);break;case"3iv":h.uniform3iv(f,g);break;case"4iv":h.uniform4iv(f,g);break;case"1fv":h.uniform1fv(f,g);break;case"2fv":h.uniform2fv(f,g);break;case"3fv":h.uniform3fv(f,g);break;case"4fv":h.uniform4fv(f,g);break;case"m2":case"mat2":case"Matrix2fv":h.uniformMatrix2fv(f,a.transpose,g);break;case"m3":case"mat3":case"Matrix3fv":h.uniformMatrix3fv(f,a.transpose,g);break;case"m4":case"mat4":case"Matrix4fv":h.uniformMatrix4fv(f,a.transpose,g);break;case"c":"number"==typeof g&&(g=d.hex2rgb(g)),h.uniform3f(f,g[0],g[1],g[2]);break;case"iv1":h.uniform1iv(f,g);break;case"iv":h.uniform3iv(f,g);break;case"fv1":h.uniform1fv(f,g);break;case"fv":h.uniform3fv(f,g);break;case"v2v":for(a._array||(a._array=new Float32Array(2*g.length)),b=0,c=g.length;c>b;++b)a._array[2*b]=g[b].x,a._array[2*b+1]=g[b].y;h.uniform2fv(f,a._array);break;case"v3v":for(a._array||(a._array=new Float32Array(3*g.length)),b=0,c=g.length;c>b;++b)a._array[3*b]=g[b].x,a._array[3*b+1]=g[b].y,a._array[3*b+2]=g[b].z;h.uniform3fv(f,a._array);break;case"v4v":for(a._array||(a._array=new Float32Array(4*g.length)),b=0,c=g.length;c>b;++b)a._array[4*b]=g[b].x,a._array[4*b+1]=g[b].y,a._array[4*b+2]=g[b].z,a._array[4*b+3]=g[b].w;h.uniform4fv(f,a._array);break;case"t":case"sampler2D":if(!a.value||!a.value.baseTexture.hasLoaded)break;h.activeTexture(h["TEXTURE"+this.textureCount]),e=a.value.baseTexture._glTextures[h.id],e||(this.initSampler2D(a),e=a.value.baseTexture._glTextures[h.id]),h.bindTexture(h.TEXTURE_2D,e),h.uniform1i(a._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+a.type)}},c.prototype.syncUniforms=function(){this.textureCount=1;for(var a in this.uniforms)this.syncUniform(this.uniforms[a])},c.prototype.initSampler2D=function(a){var b,c=this.gl,d=a.value.baseTexture;d.hasLoaded&&(a.textureData?(b=a.textureData,d._glTextures[c.id]=c.createTexture(),c.bindTexture(c.TEXTURE_2D,d._glTextures[c.id]),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.premultipliedAlpha),c.texImage2D(c.TEXTURE_2D,0,b.luminance?c.LUMINANCE:c.RGBA,c.RGBA,c.UNSIGNED_BYTE,d.source),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,b.magFilter?b.magFilter:c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,b.wrapS?b.wrapS:c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.wrapS?b.wrapS:c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.wrapT?b.wrapT:c.CLAMP_TO_EDGE)):this.shaderManager.renderer.updateTexture(d))},c.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},c.prototype._glCompile=function(a,b){var c=this.gl.createShader(a);return this.gl.shaderSource(c,b),this.gl.compileShader(c),this.gl.getShaderParameter(c,this.gl.COMPILE_STATUS)?c:(console.log(this.gl.getShaderInfoLog(c)),null)}},{217:217}],202:[function(a,b){function c(a,b,e,f,g){var h,i,j,k={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(f)for(h in f)k[h]=f[h];if(i={aVertexPosition:0,aTextureCoord:0,aColor:0},g)for(j in g)i[j]=g[j];b=b||c.defaultVertexSrc,e=e||c.defaultFragmentSrc,d.call(this,a,b,e,k,i)}var d=a(201);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.defaultVertexSrc="precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}",c.defaultFragmentSrc="precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}"},{201:201}],203:[function(a,b){function c(a){d.call(this,a)}var d=a(198);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.start=function(){},c.prototype.stop=function(){this.flush()},c.prototype.flush=function(){},c.prototype.render=function(){}},{198:198}],204:[function(a,b){function c(a){this.gl=a,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,128,a.DYNAMIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),this.upload()}c.prototype.constructor=c,c.prototype.map=function(a,b){var c=0,d=0;this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this.upload()},c.prototype.upload=function(){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices),a.bufferSubData(a.ARRAY_BUFFER,32,this.uvs),a.bufferSubData(a.ARRAY_BUFFER,64,this.colors)},b.exports=c},{}],205:[function(a,b){var c=a(173),d=a(217),e=a(163),f=a(206),g=function(a,b,g,h,i,j){if(this.gl=a,this.frameBuffer=null,this.texture=null,this.size=new c.Rectangle(0,0,1,1),this.resolution=i||e.RESOLUTION,this.projectionMatrix=new c.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new f,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=h||e.SCALE_MODES.DEFAULT,this.root=j,!this.root){this.frameBuffer=a.createFramebuffer(),this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,h===e.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,h===e.SCALE_MODES.LINEAR?a.LINEAR:a.NEAREST);var k=d.isPowerOfTwo(b,g);k?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)),a.bindFramebuffer(a.FRAMEBUFFER,this.frameBuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture,0)}this.resize(b,g)};g.prototype.constructor=g,b.exports=g,g.prototype.clear=function(a){var b=this.gl;a&&b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT)},g.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var a=this.gl;this.stencilBuffer=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencilBuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencilBuffer),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},g.prototype.activate=function(){var a,b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer),a=this.frame||this.size,this.calculateProjection(a),this.transform&&this.projectionMatrix.append(this.transform),b.viewport(0,0,a.width*this.resolution,a.height*this.resolution)},g.prototype.calculateProjection=function(a){var b=this.projectionMatrix;b.identity(),this.root?(b.a=1/a.width*2,b.d=-1/a.height*2,b.tx=-1-a.x*b.a,b.ty=1-a.y*b.d):(b.a=1/a.width*2,b.d=1/a.height*2,b.tx=-1-a.x*b.a,b.ty=-1-a.y*b.d)},g.prototype.resize=function(a,b){var c,d;a=0|a,b=0|b,(this.size.width!==a||this.size.height!==b)&&(this.size.width=a,this.size.height=b,this.root||(c=this.gl,c.bindTexture(c.TEXTURE_2D,this.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a*this.resolution,b*this.resolution,0,c.RGBA,c.UNSIGNED_BYTE,null),this.stencilBuffer&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencilBuffer),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a*this.resolution,b*this.resolution))),d=this.frame||this.size,this.calculateProjection(d))},g.prototype.destroy=function(){var a=this.gl;a.deleteFramebuffer(this.frameBuffer),a.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{163:163,173:173,206:206,217:217}],206:[function(a,b){function c(){this.stencilStack=[],this.reverse=!0,this.count=0}c.prototype.constructor=c,b.exports=c},{}],207:[function(a,b){function c(a){f.call(this),this.anchor=new d.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=i.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=a||e.EMPTY}var d=a(173),e=a(212),f=a(164),g=a(188),h=a(217),i=a(163),j=new d.Point;c.prototype=Object.create(f.prototype),c.prototype.constructor=c,b.exports=c,Object.defineProperties(c.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(a){this.scale.x=h.sign(this.scale.x)*a/this.texture._frame.width,this._width=a}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(a){this.scale.y=h.sign(this.scale.y)*a/this.texture._frame.height,this._height=a}},texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}}),c.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=h.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=h.sign(this.scale.y)*this._height/this.texture.frame.height)},c.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins.sprite),a.plugins.sprite.render(this)},c.prototype.getBounds=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return this._currentBounds||(b=this._texture._frame.width,c=this._texture._frame.height,d=b*(1-this.anchor.x),e=b*-this.anchor.x,f=c*(1-this.anchor.y),g=c*-this.anchor.y,h=a||this.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty,0===j&&0===k?(0>i&&(i*=-1),0>l&&(l*=-1),o=i*e+m,p=i*d+m,q=l*g+n,r=l*f+n):(s=i*e+k*g+m,t=l*g+j*e+n,u=i*d+k*g+m,v=l*g+j*d+n,w=i*d+k*f+m,x=l*f+j*d+n,y=i*e+k*f+m,z=l*f+j*e+n,o=s,o=o>u?u:o,o=o>w?w:o,o=o>y?y:o,q=t,q=q>v?v:q,q=q>x?x:q,q=q>z?z:q,p=s,p=u>p?u:p,p=w>p?w:p,p=y>p?y:p,r=t,r=v>r?v:r,r=x>r?x:r,r=z>r?z:r),this.children.length&&(A=this.containerGetBounds(),d=A.x,e=A.x+A.width,f=A.y,g=A.y+A.height,o=d>o?o:d,q=f>q?q:f,p=p>e?p:e,r=r>g?r:g),B=this._bounds,B.x=o,B.width=p-o,B.y=q,B.height=r-q,this._currentBounds=B),this._currentBounds},c.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},c.prototype.containsPoint=function(a){var b,c,d,e;return this.worldTransform.applyInverse(a,j),b=this._texture._frame.width,c=this._texture._frame.height,d=-b*this.anchor.x,j.x>d&&j.x<d+b&&(e=-c*this.anchor.y,j.y>e&&j.y<e+c)?!0:!1},c.prototype._renderCanvas=function(a){var b,c,d,e,f,h,j,k,l,m,n;this.texture.crop.width<=0||this.texture.crop.height<=0||(b=a.blendModes[this.blendMode],b!==a.context.globalCompositeOperation&&(a.context.globalCompositeOperation=b),this.texture.valid&&(c=this._texture,d=this.worldTransform,a.context.globalAlpha=this.worldAlpha,k=c.baseTexture.scaleMode===i.SCALE_MODES.LINEAR,a.smoothProperty&&a.context[a.smoothProperty]!==k&&(a.context[a.smoothProperty]=k),c.rotate?(l=d.a,m=d.b,d.a=-d.c,d.b=-d.d,d.c=l,d.d=m,h=c.crop.height,j=c.crop.width,e=c.trim?c.trim.y-this.anchor.y*c.trim.height:this.anchor.y*-c._frame.height,f=c.trim?c.trim.x-this.anchor.x*c.trim.width:this.anchor.x*-c._frame.width):(h=c.crop.width,j=c.crop.height,e=c.trim?c.trim.x-this.anchor.x*c.trim.width:this.anchor.x*-c._frame.width,f=c.trim?c.trim.y-this.anchor.y*c.trim.height:this.anchor.y*-c._frame.height),a.roundPixels?(a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution|0,d.ty*a.resolution|0),e=0|e,f=0|f):a.context.setTransform(d.a,d.b,d.c,d.d,d.tx*a.resolution,d.ty*a.resolution),n=c.baseTexture.resolution,16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=g.getTintedTexture(this,this.tint)),a.context.drawImage(this.tintedTexture,0,0,h*n,j*n,e*a.resolution,f*a.resolution,h*a.resolution,j*a.resolution)):a.context.drawImage(c.baseTexture.source,c.crop.x*n,c.crop.y*n,h*n,j*n,e*a.resolution,f*a.resolution,h*a.resolution,j*a.resolution)))},c.prototype.destroy=function(a,b){f.prototype.destroy.call(this),this.anchor=null,a&&this._texture.destroy(b),this._texture=null,this.shader=null},c.fromFrame=function(a){var b=h.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return new c(b)},c.fromImage=function(a,b,d){return new c(e.fromImage(a,b,d))}},{163:163,164:164,173:173,188:188,212:212,217:217}],208:[function(a,b){function c(a){var b,c,e,g;for(d.call(this,a),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=f.SPRITE_BATCH_SIZE,b=4*this.size*this.vertByteSize,c=6*this.size,this.vertices=new ArrayBuffer(b),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(c),e=0,g=0;c>e;e+=6,g+=4)this.indices[e+0]=g+0,this.indices[e+1]=g+1,this.indices[e+2]=g+2,this.indices[e+3]=g+0,this.indices[e+4]=g+2,this.indices[e+5]=g+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var d=a(203),e=a(189),f=a(163);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,e.registerPlugin("sprite",c),c.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=a.createBuffer(),this.indexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW),this.currentBlendMode=99999},c.prototype.render=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=a._texture;this.currentBatchSize>=this.size&&this.flush(),b=u._uvs,b&&(c=a.anchor.x,d=a.anchor.y,u.trim&&void 0===a.tileScale?(i=u.trim,f=i.x-c*i.width,e=f+u.crop.width,h=i.y-d*i.height,g=h+u.crop.height):(e=u._frame.width*(1-c),f=u._frame.width*-c,g=u._frame.height*(1-d),h=u._frame.height*-d),j=this.currentBatchSize*this.vertByteSize,k=a.worldTransform,l=k.a,m=k.b,n=k.c,o=k.d,p=k.tx,q=k.ty,r=this.colors,s=this.positions,this.renderer.roundPixels?(s[j]=l*f+n*h+p|0,s[j+1]=o*h+m*f+q|0,s[j+5]=l*e+n*h+p|0,s[j+6]=o*h+m*e+q|0,s[j+10]=l*e+n*g+p|0,s[j+11]=o*g+m*e+q|0,s[j+15]=l*f+n*g+p|0,s[j+16]=o*g+m*f+q|0):(s[j]=l*f+n*h+p,s[j+1]=o*h+m*f+q,s[j+5]=l*e+n*h+p,s[j+6]=o*h+m*e+q,s[j+10]=l*e+n*g+p,s[j+11]=o*g+m*e+q,s[j+15]=l*f+n*g+p,s[j+16]=o*g+m*f+q),s[j+2]=b.x0,s[j+3]=b.y0,s[j+7]=b.x1,s[j+8]=b.y1,s[j+12]=b.x2,s[j+13]=b.y2,s[j+17]=b.x3,s[j+18]=b.y3,t=a.tint,r[j+4]=r[j+9]=r[j+14]=r[j+19]=(t>>16)+(65280&t)+((255&t)<<16)+(255*a.worldAlpha<<24),this.sprites[this.currentBatchSize++]=a)},c.prototype.flush=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(0!==this.currentBatchSize){for(a=this.renderer.gl,this.currentBatchSize>.5*this.size?a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices):(c=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize),a.bufferSubData(a.ARRAY_BUFFER,0,c)),g=0,h=0,i=null,j=this.renderer.blendModeManager.currentBlendMode,k=null,l=!1,m=!1,o=0,p=this.currentBatchSize;p>o;o++)n=this.sprites[o],
d=n._texture.baseTexture,e=n.blendMode,f=n.shader||this.shader,l=j!==e,m=k!==f,(i!==d||l||m)&&(this.renderBatch(i,g,h),h=o,g=0,i=d,l&&(j=e,this.renderer.blendModeManager.setBlendMode(j)),m&&(k=f,b=k.shaders?k.shaders[a.id]:k,b||(b=k.getShader(this.renderer)),this.renderer.shaderManager.setShader(b),b.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),b.syncUniforms(),a.activeTexture(a.TEXTURE0))),g++;this.renderBatch(i,g,h),this.currentBatchSize=0}},c.prototype.renderBatch=function(a,b,c){if(0!==b){var d=this.renderer.gl;a._glTextures[d.id]?d.bindTexture(d.TEXTURE_2D,a._glTextures[d.id]):this.renderer.updateTexture(a),d.drawElements(d.TRIANGLES,6*b,d.UNSIGNED_SHORT,6*c*2),this.renderer.drawCount++}},c.prototype.start=function(){var a,b=this.renderer.gl;b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer),a=this.vertByteSize,b.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,b.FLOAT,!1,a,0),b.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,b.FLOAT,!1,a,8),b.vertexAttribPointer(this.shader.attributes.aColor,4,b.UNSIGNED_BYTE,!0,a,16)},c.prototype.destroy=function(){d.prototype.destroy.call(this),this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{163:163,189:189,203:203}],209:[function(a,b){function c(a,b,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=c||h.RESOLUTION,this._text=null,this._style=null;var g=e.fromCanvas(this.canvas);g.trim=new f.Rectangle,d.call(this,g),this.text=a,this.style=b}var d=a(207),e=a(212),f=a(173),g=a(217),h=a(163);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.fontPropertiesCache={},c.fontPropertiesCanvas=document.createElement("canvas"),c.fontPropertiesContext=c.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(c.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(a){this.scale.x=a/this._texture._frame.width,this._width=a}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(a){this.scale.y=a/this._texture._frame.height,this._height=a}},style:{get:function(){return this._style},set:function(a){a=a||{},"number"==typeof a.fill&&(a.fill=g.hex2string(a.fill)),"number"==typeof a.stroke&&(a.stroke=g.hex2string(a.stroke)),"number"==typeof a.dropShadowColor&&(a.dropShadowColor=g.hex2string(a.dropShadowColor)),a.font=a.font||"bold 20pt Arial",a.fill=a.fill||"black",a.align=a.align||"left",a.stroke=a.stroke||"black",a.strokeThickness=a.strokeThickness||0,a.wordWrap=a.wordWrap||!1,a.wordWrapWidth=a.wordWrapWidth||100,a.dropShadow=a.dropShadow||!1,a.dropShadowColor=a.dropShadowColor||"#000000",a.dropShadowAngle=a.dropShadowAngle||Math.PI/6,a.dropShadowDistance=a.dropShadowDistance||5,a.padding=a.padding||0,a.textBaseline=a.textBaseline||"alphabetic",a.lineJoin=a.lineJoin||"miter",a.miterLimit=a.miterLimit||10,this._style=a,this.dirty=!0}},text:{get:function(){return this._text},set:function(a){a=""+a||" ",this._text!==a&&(this._text=a,this.dirty=!0)}}}),c.prototype.updateText=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=this._style;for(this.context.font=o.font,a=o.wordWrap?this.wordWrap(this._text):this._text,b=a.split(/(?:\r\n|\r|\n)/),c=Array(b.length),d=0,e=this.determineFontProperties(o.font),f=0;f<b.length;f++)g=this.context.measureText(b[f]).width,c[f]=g,d=Math.max(d,g);if(h=d+o.strokeThickness,o.dropShadow&&(h+=o.dropShadowDistance),this.canvas.width=(h+this.context.lineWidth)*this.resolution,i=this.style.lineHeight||e.fontSize+o.strokeThickness,j=i*b.length,o.dropShadow&&(j+=o.dropShadowDistance),this.canvas.height=(j+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=o.font,this.context.strokeStyle=o.stroke,this.context.lineWidth=o.strokeThickness,this.context.textBaseline=o.textBaseline,this.context.lineJoin=o.lineJoin,this.context.miterLimit=o.miterLimit,o.dropShadow)for(this.context.fillStyle=o.dropShadowColor,m=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,n=Math.sin(o.dropShadowAngle)*o.dropShadowDistance,f=0;f<b.length;f++)k=o.strokeThickness/2,l=o.strokeThickness/2+f*i+e.ascent,"right"===o.align?k+=d-c[f]:"center"===o.align&&(k+=(d-c[f])/2),o.fill&&this.context.fillText(b[f],k+m,l+n+this._style.padding);for(this.context.fillStyle=o.fill,f=0;f<b.length;f++)k=o.strokeThickness/2,l=o.strokeThickness/2+f*i+e.ascent,"right"===o.align?k+=d-c[f]:"center"===o.align&&(k+=(d-c[f])/2),o.stroke&&o.strokeThickness&&this.context.strokeText(b[f],k,l+this._style.padding),o.fill&&this.context.fillText(b[f],k,l+this._style.padding);this.updateTexture()},c.prototype.updateTexture=function(){var a=this._texture;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.crop.width=a._frame.width=this.canvas.width/this.resolution,a.crop.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=0,a.trim.y=-this._style.padding,a.trim.width=a._frame.width,a.trim.height=a._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,a.baseTexture.emit("update",a.baseTexture),this.dirty=!1},c.prototype.renderWebGL=function(a){this.dirty&&this.updateText(),d.prototype.renderWebGL.call(this,a)},c.prototype._renderCanvas=function(a){this.dirty&&this.updateText(),d.prototype._renderCanvas.call(this,a)},c.prototype.determineFontProperties=function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o=c.fontPropertiesCache[a];if(!o){for(o={},b=c.fontPropertiesCanvas,d=c.fontPropertiesContext,d.font=a,e=Math.ceil(d.measureText("|Mq").width),f=Math.ceil(d.measureText("M").width),g=2*f,f=1.4*f|0,b.width=e,b.height=g,d.fillStyle="#f00",d.fillRect(0,0,e,g),d.font=a,d.textBaseline="alphabetic",d.fillStyle="#000",d.fillText("|Mq",0,f),h=d.getImageData(0,0,e,g).data,i=h.length,j=4*e,m=0,n=!1,k=0;f>k;k++){for(l=0;j>l;l+=4)if(255!==h[m+l]){n=!0;break}if(n)break;m+=j}for(o.ascent=f-k,m=i-j,n=!1,k=g;k>f;k--){for(l=0;j>l;l+=4)if(255!==h[m+l]){n=!0;break}if(n)break;m-=j}o.descent=k-f,o.fontSize=o.ascent+o.descent,c.fontPropertiesCache[a]=o}return o},c.prototype.wordWrap=function(a){var b,c,d,e,f,g,h="",i=a.split("\n"),j=this._style.wordWrapWidth;for(b=0;b<i.length;b++){for(c=j,d=i[b].split(" "),e=0;e<d.length;e++)f=this.context.measureText(d[e]).width,g=f+this.context.measureText(" ").width,0===e||g>c?(e>0&&(h+="\n"),h+=d[e],c=j-f):(c-=g,h+=" "+d[e]);b<i.length-1&&(h+="\n")}return h},c.prototype.getBounds=function(a){return this.dirty&&this.updateText(),d.prototype.getBounds.call(this,a)},c.prototype.destroy=function(a){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===a?!0:a)}},{163:163,173:173,207:207,212:212,217:217}],210:[function(a,b){function c(a,b,c){f.call(this),this.uid=d.uid(),this.resolution=c||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=b||e.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures=[],a&&this.loadSource(a)}var d=a(217),e=a(163),f=a(3);c.prototype=Object.create(f.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=d.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},c.prototype.loadSource=function(a){var b,c=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,c&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=a,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height?this._sourceLoaded():a.getContext||(this.isLoading=!0,b=this,a.onload=function(){a.onload=null,a.onerror=null,b.isLoading&&(b.isLoading=!1,b._sourceLoaded(),b.emit("loaded",b))},a.onerror=function(){a.onload=null,a.onerror=null,b.isLoading&&(b.isLoading=!1,b.emit("error",b))},a.complete&&a.src&&(this.isLoading=!1,a.onload=null,a.onerror=null,a.width&&a.height?(this._sourceLoaded(),c&&this.emit("loaded",this)):c&&this.emit("error",this)))},c.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},c.prototype.destroy=function(){this.imageUrl?(delete d.BaseTextureCache[this.imageUrl],delete d.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete d.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},c.prototype.dispose=function(){this.emit("dispose",this),this._glTextures.length=0},c.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},c.fromImage=function(a,b,e){var f,g=d.BaseTextureCache[a];return void 0===b&&0!==a.indexOf("data:")&&(b=!0),g||(f=new Image,b&&(f.crossOrigin=""),g=new c(f,e),g.imageUrl=a,f.src=a,d.BaseTextureCache[a]=g,g.resolution=d.getResolutionOfUrl(a)),g},c.fromCanvas=function(a,b){a._pixiId||(a._pixiId="canvas_"+d.uid());var e=d.BaseTextureCache[a._pixiId];return e||(e=new c(a,b),d.BaseTextureCache[a._pixiId]=e),e}},{163:163,217:217,3:3}],211:[function(a,b){function c(a,b,c,k,l){var m,n;if(!a)throw Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");b=b||100,c=c||100,l=l||j.RESOLUTION,m=new d,m.width=b,m.height=c,m.resolution=l,m.scaleMode=k||j.SCALE_MODES.DEFAULT,m.hasLoaded=!0,e.call(this,m,new i.Rectangle(0,0,b,c)),this.width=b,this.height=c,this.resolution=l,this.render=null,this.renderer=a,this.renderer.type===j.RENDERER_TYPE.WEBGL?(n=this.renderer.gl,this.textureBuffer=new f(n,this.width,this.height,m.scaleMode,this.resolution),this.baseTexture._glTextures[n.id]=this.textureBuffer.texture,this.filterManager=new g(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(b,c),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()):(this.render=this.renderCanvas,this.textureBuffer=new h(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas),this.valid=!0,this._updateUvs()}var d=a(210),e=a(212),f=a(205),g=a(194),h=a(185),i=a(173),j=a(163),k=new i.Matrix;c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.resize=function(a,b,c){(a!==this.width||b!==this.height)&&(this.valid=a>0&&b>0,this.width=this._frame.width=this.crop.width=a,this.height=this._frame.height=this.crop.height=b,c&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},c.prototype.clear=function(){this.valid&&(this.renderer.type===j.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},c.prototype.renderWebGL=function(a,b,c,d){var e,f,g,h;if(this.valid){if(d=void 0!==d?d:!0,this.textureBuffer.transform=b,this.textureBuffer.activate(),a.worldAlpha=1,d)for(a.worldTransform.identity(),a.currentBounds=null,e=a.children,f=0,g=e.length;g>f;++f)e[f].updateTransform();h=this.renderer.filterManager,this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(a,this.textureBuffer,c),this.renderer.filterManager=h}},c.prototype.renderCanvas=function(a,b,c,d){var e,f,g,h,i,j,l;if(this.valid){for(d=!!d,e=a.worldTransform,f=k,f.identity(),b&&f.append(b),a.worldTransform=f,a.worldAlpha=1,g=a.children,h=0,i=g.length;i>h;++h)g[h].updateTransform();c&&this.textureBuffer.clear(),j=this.textureBuffer.context,l=this.renderer.resolution,this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(a,j),this.renderer.resolution=l,a.worldTransform=e}},c.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},c.prototype.getImage=function(){var a=new Image;return a.src=this.getBase64(),a},c.prototype.getBase64=function(){return this.getCanvas().toDataURL()},c.prototype.getCanvas=function(){var a,b,c,d,e,f;return this.renderer.type===j.RENDERER_TYPE.WEBGL?(a=this.renderer.gl,b=this.textureBuffer.size.width,c=this.textureBuffer.size.height,d=new Uint8Array(4*b*c),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),a.readPixels(0,0,b,c,a.RGBA,a.UNSIGNED_BYTE,d),a.bindFramebuffer(a.FRAMEBUFFER,null),e=new h(b,c),f=e.context.getImageData(0,0,b,c),f.data.set(d),e.context.putImageData(f,0,0),e.canvas):this.textureBuffer.canvas},c.prototype.getPixels=function(){var a,b,c,d;return this.renderer.type===j.RENDERER_TYPE.WEBGL?(c=this.renderer.gl,a=this.textureBuffer.size.width,b=this.textureBuffer.size.height,d=new Uint8Array(4*a*b),c.bindFramebuffer(c.FRAMEBUFFER,this.textureBuffer.frameBuffer),c.readPixels(0,0,a,b,c.RGBA,c.UNSIGNED_BYTE,d),c.bindFramebuffer(c.FRAMEBUFFER,null),d):(a=this.textureBuffer.canvas.width,b=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,a,b).data)},c.prototype.getPixel=function(a,b){var c,d;return this.renderer.type===j.RENDERER_TYPE.WEBGL?(c=this.renderer.gl,d=new Uint8Array(4),c.bindFramebuffer(c.FRAMEBUFFER,this.textureBuffer.frameBuffer),c.readPixels(a,b,1,1,c.RGBA,c.UNSIGNED_BYTE,d),c.bindFramebuffer(c.FRAMEBUFFER,null),d):this.textureBuffer.canvas.getContext("2d").getImageData(a,b,1,1).data}},{163:163,173:173,185:185,194:194,205:205,210:210,212:212}],212:[function(a,b){function c(a,b,d,e,f){g.call(this),this.noFrame=!1,b||(this.noFrame=!0,b=new h.Rectangle(0,0,1,1)),a instanceof c&&(a=a.baseTexture),this.baseTexture=a,this._frame=b,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=d||b,this.rotate=!!f,a.hasLoaded?(this.noFrame&&(b=new h.Rectangle(0,0,a.width,a.height),a.on("update",this.onBaseTextureUpdated,this)),this.frame=b):a.once("loaded",this.onBaseTextureLoaded,this)}var d=a(210),e=a(214),f=a(213),g=a(3),h=a(173),i=a(217);c.prototype=Object.create(g.prototype),c.prototype.constructor=c,b.exports=c,Object.defineProperties(c.prototype,{frame:{get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,this.width=a.width,this.height=a.height,!this.trim&&!this.rotate&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height))throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=a,this.valid&&this._updateUvs()}}}),c.prototype.update=function(){this.baseTexture.update()},c.prototype.onBaseTextureLoaded=function(a){this.noFrame?this.frame=new h.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.emit("update",this)},c.prototype.onBaseTextureUpdated=function(a){this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},c.prototype.destroy=function(a){this.baseTexture&&(a&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},c.prototype.clone=function(){return new c(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},c.prototype._updateUvs=function(){this._uvs||(this._uvs=new f),this._uvs.set(this.crop,this.baseTexture,this.rotate)},c.fromImage=function(a,b,e){var f=i.TextureCache[a];return f||(f=new c(d.fromImage(a,b,e)),i.TextureCache[a]=f),f},c.fromFrame=function(a){var b=i.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return b},c.fromCanvas=function(a,b){return new c(d.fromCanvas(a,b))},c.fromVideo=function(a,b){return"string"==typeof a?c.fromVideoUrl(a,b):new c(e.fromVideo(a,b))},c.fromVideoUrl=function(a,b){return new c(e.fromUrl(a,b))},c.addTextureToCache=function(a,b){i.TextureCache[b]=a},c.removeTextureFromCache=function(a){var b=i.TextureCache[a];return delete i.TextureCache[a],delete i.BaseTextureCache[a],b},c.EMPTY=new c(new d)},{173:173,210:210,213:213,214:214,217:217,3:3}],213:[function(a,b){function c(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}b.exports=c,c.prototype.set=function(a,b,c){var d=b.width,e=b.height;c?(this.x0=(a.x+a.height)/d,this.y0=a.y/e,this.x1=(a.x+a.height)/d,this.y1=(a.y+a.width)/e,this.x2=a.x/d,this.y2=(a.y+a.width)/e,this.x3=a.x/d,this.y3=a.y/e):(this.x0=a.x/d,this.y0=a.y/e,this.x1=(a.x+a.width)/d,this.y1=a.y/e,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/e,this.x3=a.x/d,this.y3=(a.y+a.height)/e)}},{}],214:[function(a,b){function c(a,b){if(!a)throw Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),e.call(this,a,b),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),a.complete||(a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this._onPlayStart.bind(this)),a.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function d(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}var e=a(210),f=a(217);c.prototype=Object.create(e.prototype),c.prototype.constructor=c,b.exports=c,c.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},c.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},c.prototype._onPlayStop=function(){this.autoUpdate=!1},c.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},c.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete f.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),e.prototype.destroy.call(this)},c.fromVideo=function(a,b){a._pixiId||(a._pixiId="video_"+f.uid());var d=f.BaseTextureCache[a._pixiId];return d||(d=new c(a,b),f.BaseTextureCache[a._pixiId]=d),d},c.fromUrl=function(a,b){var e,f=document.createElement("video");if(Array.isArray(a))for(e=0;e<a.length;++e)f.appendChild(d(a[e].src||a[e],a[e].mime));else f.appendChild(d(a.src||a,a.mime));return f.load(),f.play(),c.fromVideo(f,b)},c.fromUrls=c.fromUrl},{210:210,217:217}],215:[function(a,b){function c(){var a=this;this._tick=function(b){a._requestId=null,a.started&&(a.update(b),a.started&&null===a._requestId&&a._emitter.listeners(f,!0)&&(a._requestId=requestAnimationFrame(a._tick)))},this._emitter=new e,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/d.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var d=a(163),e=a(3),f="tick";Object.defineProperties(c.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,d.TARGET_FPMS);this._maxElapsedMS=1/b}}}),c.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(f,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},c.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},c.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},c.prototype.add=function(a,b){return this._emitter.on(f,a,b),this._startIfPossible(),this},c.prototype.addOnce=function(a,b){return this._emitter.once(f,a,b),this._startIfPossible(),this},c.prototype.remove=function(a,b){return this._emitter.off(f,a,b),this._emitter.listeners(f,!0)||this._cancelIfNeeded(),this},c.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},c.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},c.prototype.update=function(a){var b;a=a||performance.now(),b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*d.TARGET_FPMS*this.speed,this._emitter.emit(f,this.deltaTime),this.lastTime=a},b.exports=c},{163:163,3:3}],216:[function(a,b){var c=a(215),d=new c;d.autoStart=!0,b.exports={shared:d,Ticker:c}},{215:215}],217:[function(a,b){var c=a(163),d=b.exports={_uid:0,_saidHello:!1,EventEmitter:a(3),pluginTarget:a(218),async:a(1),uid:function(){return++d._uid},hex2rgb:function(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b},hex2string:function(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},canUseNewCanvasBlendModes:function(){var a,b,c,d,e,f,g;return"undefined"==typeof document?!1:(a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",b="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image,c.src=a+"AP804Oa6"+b,d=new Image,d.src=a+"/wCKxvRF"+b,e=document.createElement("canvas"),e.width=6,e.height=1,f=e.getContext("2d"),f.globalCompositeOperation="multiply",f.drawImage(c,0,0),f.drawImage(d,2,0),g=f.getImageData(2,0,1,1).data,255===g[0]&&0===g[1]&&0===g[2])},getNextPowerOfTwo:function(a){if(a>0&&0===(a&a-1))return a;for(var b=1;a>b;)b<<=1;return b},isPowerOfTwo:function(a,b){return a>0&&0===(a&a-1)&&b>0&&0===(b&b-1)},getResolutionOfUrl:function(a){var b=c.RETINA_PREFIX.exec(a);return b?parseFloat(b[1]):1},sayHello:function(a){if(!d._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+c.VERSION+" -  "+a+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+c.VERSION+" - "+a+" - http://www.pixijs.com/");d._saidHello=!0}},isWebGLSupported:function(){var a,b,c={stencil:!0};try{return window.WebGLRenderingContext?(a=document.createElement("canvas"),b=a.getContext("webgl",c)||a.getContext("experimental-webgl",c),!(!b||!b.getContextAttributes().stencil)):!1}catch(d){return!1}},sign:function(a){return a?0>a?-1:1:0},TextureCache:{},BaseTextureCache:{}}},{1:1,163:163,218:218,3:3}],218:[function(a,b){function c(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}b.exports={mixin:function(a){c(a)}}},{}],219:[function(a,b){function c(a,b,e,f,g){d.Container.call(this),this._texture=null,this.uvs=e||new Float32Array([0,1,1,1,1,0,0,1]),this.vertices=b||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=f||new Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=d.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=g||c.DRAW_MODES.TRIANGLE_MESH,this.texture=a}var d=a(170),e=new d.Point,f=new d.Polygon;c.prototype=Object.create(d.Container.prototype),c.prototype.constructor=c,b.exports=c,Object.defineProperties(c.prototype,{texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}}),c.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins.mesh),a.plugins.mesh.render(this)},c.prototype._renderCanvas=function(a){var b=a.context,d=this.worldTransform;a.roundPixels?b.setTransform(d.a,d.b,d.c,d.d,0|d.tx,0|d.ty):b.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),this.drawMode===c.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(b):this._renderCanvasTriangles(b)},c.prototype._renderCanvasTriangleMesh=function(a){var b,c,d=this.vertices,e=this.uvs,f=d.length/2;for(b=0;f-2>b;b++)c=2*b,this._renderCanvasDrawTriangle(a,d,e,c,c+2,c+4)},c.prototype._renderCanvasTriangles=function(a){var b,c,d,e,f=this.vertices,g=this.uvs,h=this.indices,i=h.length;for(b=0;i>b;b+=3)c=2*h[b],d=2*h[b+1],e=2*h[b+2],this._renderCanvasDrawTriangle(a,f,g,c,d,e)},c.prototype._renderCanvasDrawTriangle=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this._texture.baseTexture.source,v=this._texture.baseTexture.width,w=this._texture.baseTexture.height,x=b[d],y=b[e],z=b[f],A=b[d+1],B=b[e+1],C=b[f+1],D=c[d]*v,E=c[e]*v,F=c[f]*v,G=c[d+1]*w,H=c[e+1]*w,I=c[f+1]*w;this.canvasPadding>0&&(g=this.canvasPadding/this.worldTransform.a,h=this.canvasPadding/this.worldTransform.d,i=(x+y+z)/3,j=(A+B+C)/3,k=x-i,l=A-j,m=Math.sqrt(k*k+l*l),x=i+k/m*(m+g),A=j+l/m*(m+h),k=y-i,l=B-j,m=Math.sqrt(k*k+l*l),y=i+k/m*(m+g),B=j+l/m*(m+h),k=z-i,l=C-j,m=Math.sqrt(k*k+l*l),z=i+k/m*(m+g),C=j+l/m*(m+h)),a.save(),a.beginPath(),a.moveTo(x,A),a.lineTo(y,B),a.lineTo(z,C),a.closePath(),a.clip(),n=D*H+G*F+E*I-H*F-G*E-D*I,o=x*H+G*z+y*I-H*z-G*y-x*I,p=D*y+x*F+E*z-y*F-x*E-D*z,q=D*H*z+G*y*F+x*E*I-x*H*F-G*E*z-D*y*I,r=A*H+G*C+B*I-H*C-G*B-A*I,s=D*B+A*F+E*C-B*F-A*E-D*C,t=D*H*C+G*B*F+A*E*I-A*H*F-G*E*C-D*B*I,a.transform(o/n,r/n,p/n,s/n,q/n,t/n),a.drawImage(u,0,0),a.restore()},c.prototype.renderMeshFlat=function(a){var b,c,d,e,f,g,h,i,j=this.context,k=a.vertices,l=k.length/2;for(j.beginPath(),b=1;l-2>b;b++)c=2*b,d=k[c],e=k[c+2],f=k[c+4],g=k[c+1],h=k[c+3],i=k[c+5],j.moveTo(d,g),j.lineTo(e,h),j.lineTo(f,i);j.fillStyle="#FF0000",j.fill(),j.closePath()},c.prototype._onTextureUpdate=function(){this.updateFrame=!0},c.prototype.getBounds=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(!this._currentBounds){for(b=a||this.worldTransform,c=b.a,e=b.b,f=b.c,g=b.d,h=b.tx,i=b.ty,j=-(1/0),k=-(1/0),l=1/0,m=1/0,n=this.vertices,o=0,p=n.length;p>o;o+=2)q=n[o],r=n[o+1],s=c*q+f*r+h,t=g*r+e*q+i,l=l>s?s:l,m=m>t?t:m,j=s>j?s:j,k=t>k?t:k;if(l===-(1/0)||k===1/0)return d.Rectangle.EMPTY;u=this._bounds,u.x=l,u.width=j-l,u.y=m,u.height=k-m,this._currentBounds=u}return this._currentBounds},c.prototype.containsPoint=function(a){var b,d,g,h,i,j,k,l;if(!this.getBounds().contains(a.x,a.y))return!1;if(this.worldTransform.applyInverse(a,e),b=this.vertices,d=f.points,this.drawMode===c.DRAW_MODES.TRIANGLES){for(i=this.indices,h=this.indices.length,g=0;h>g;g+=3)if(j=2*i[g],k=2*i[g+1],l=2*i[g+2],d[0]=b[j],d[1]=b[j+1],d[2]=b[k],d[3]=b[k+1],d[4]=b[l],d[5]=b[l+1],f.contains(e.x,e.y))return!0}else for(h=b.length,g=0;h>g;g+=6)if(d[0]=b[g],d[1]=b[g+1],d[2]=b[g+2],d[3]=b[g+3],d[4]=b[g+4],d[5]=b[g+5],f.contains(e.x,e.y))return!0;return!1},c.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{170:170}],220:[function(a,b){function c(a,b){d.call(this,a),this.points=b,this.vertices=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length),this._ready=!0,this.refresh()}var d=a(219),e=a(170);c.prototype=Object.create(d.prototype),c.prototype.constructor=c,b.exports=c,c.prototype.refresh=function(){var a,b,c,d,f,g,h,i,j,k,l,m=this.points;if(!(m.length<1)&&this._texture._uvs){for(a=this.uvs,b=this.indices,c=this.colors,d=this._texture._uvs,f=new e.Point(d.x0,d.y0),g=new e.Point(d.x2-d.x0,d.y2-d.y0),a[0]=0+f.x,a[1]=0+f.y,a[2]=0+f.x,a[3]=1*g.y+f.y,c[0]=1,c[1]=1,b[0]=0,b[1]=1,h=m.length,l=1;h>l;l++)i=m[l],j=4*l,k=l/(h-1),a[j]=k*g.x+f.x,a[j+1]=0+f.y,a[j+2]=k*g.x+f.x,a[j+3]=1*g.y+f.y,j=2*l,c[j]=1,c[j+1]=1,j=2*l,b[j]=j,b[j+1]=j+1;this.dirty=!0}},c.prototype._onTextureUpdate=function(){d.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},c.prototype.updateTransform=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this.points;if(!(m.length<1)){for(a=m[0],c=0,d=0,e=this.vertices,f=m.length,l=0;f>l;l++)g=m[l],h=4*l,b=l<m.length-1?m[l+1]:g,d=-(b.x-a.x),c=b.y-a.y,i=10*(1-l/(f-1)),i>1&&(i=1),j=Math.sqrt(c*c+d*d),k=this._texture.height/2,c/=j,d/=j,c*=k,d*=k,e[h]=g.x+c,e[h+1]=g.y+d,e[h+2]=g.x-c,e[h+3]=g.y-d,a=g;this.containerUpdateTransform()}}},{170:170,219:219}],221:[function(a,b){b.exports={Mesh:a(219),Rope:a(220),MeshRenderer:a(222),MeshShader:a(223)}},{219:219,220:220,222:222,223:223}],222:[function(a,b){function c(a){d.ObjectRenderer.call(this,a),this.indices=new Uint16Array(15e3);for(var b=0,c=0;15e3>b;b+=6,c+=4)this.indices[b+0]=c+0,this.indices[b+1]=c+1,this.indices[b+2]=c+2,this.indices[b+3]=c+0,this.indices[b+4]=c+2,this.indices[b+5]=c+3}var d=a(170),e=a(219);c.prototype=Object.create(d.ObjectRenderer.prototype),c.prototype.constructor=c,b.exports=c,d.WebGLRenderer.registerPlugin("mesh",c),c.prototype.onContextChange=function(){},c.prototype.render=function(a){var b,c,d,f,g;a._vertexBuffer||this._initWebGL(a),b=this.renderer,c=b.gl,d=a._texture.baseTexture,f=b.shaderManager.plugins.meshShader,g=a.drawMode===e.DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES,b.blendModeManager.setBlendMode(a.blendMode),c.uniformMatrix3fv(f.uniforms.translationMatrix._location,!1,a.worldTransform.toArray(!0)),c.uniformMatrix3fv(f.uniforms.projectionMatrix._location,!1,b.currentRenderTarget.projectionMatrix.toArray(!0)),c.uniform1f(f.uniforms.alpha._location,a.worldAlpha),a.dirty?(a.dirty=!1,c.bindBuffer(c.ARRAY_BUFFER,a._vertexBuffer),c.bufferData(c.ARRAY_BUFFER,a.vertices,c.STATIC_DRAW),c.vertexAttribPointer(f.attributes.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,a._uvBuffer),c.bufferData(c.ARRAY_BUFFER,a.uvs,c.STATIC_DRAW),c.vertexAttribPointer(f.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),d._glTextures[c.id]?c.bindTexture(c.TEXTURE_2D,d._glTextures[c.id]):this.renderer.updateTexture(d),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a._indexBuffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.indices,c.STATIC_DRAW)):(c.bindBuffer(c.ARRAY_BUFFER,a._vertexBuffer),c.bufferSubData(c.ARRAY_BUFFER,0,a.vertices),c.vertexAttribPointer(f.attributes.aVertexPosition,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,a._uvBuffer),c.vertexAttribPointer(f.attributes.aTextureCoord,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),d._glTextures[c.id]?c.bindTexture(c.TEXTURE_2D,d._glTextures[c.id]):this.renderer.updateTexture(d),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,a._indexBuffer),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,a.indices)),c.drawElements(g,a.indices.length,c.UNSIGNED_SHORT,0)},c.prototype._initWebGL=function(a){var b=this.renderer.gl;a._vertexBuffer=b.createBuffer(),a._indexBuffer=b.createBuffer(),a._uvBuffer=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a._vertexBuffer),b.bufferData(b.ARRAY_BUFFER,a.vertices,b.DYNAMIC_DRAW),b.bindBuffer(b.ARRAY_BUFFER,a._uvBuffer),b.bufferData(b.ARRAY_BUFFER,a.uvs,b.STATIC_DRAW),a.colors&&(a._colorBuffer=b.createBuffer(),
b.bindBuffer(b.ARRAY_BUFFER,a._colorBuffer),b.bufferData(b.ARRAY_BUFFER,a.colors,b.STATIC_DRAW)),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a._indexBuffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.indices,b.STATIC_DRAW)},c.prototype.flush=function(){},c.prototype.start=function(){var a=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(a)},c.prototype.destroy=function(){ObjectRenderer.prototype.destroy.call(this)}},{170:170,219:219}],223:[function(a,b){function c(a){d.Shader.call(this,a,"precision lowp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}","precision lowp float;\nvarying vec2 vTextureCoord;\nuniform float alpha;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;\n}",{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var d=a(170);c.prototype=Object.create(d.Shader.prototype),c.prototype.constructor=c,b.exports=c,d.ShaderManager.registerPlugin("meshShader",c)},{170:170}],engine:[function(a,b){(function(c){var d=a(106),e=a(72),f=a(76),g=a(73),h=a(82),i=a(80),j=a(79),k=a(81),l=a(83),m=a(123),n=a(122),o=a(68),p=a(121),q=a(96),r=a(97),s=a(94),t=a(95),u=a(101),v=a(115),w=a(109),x=a(110),y=a(112),z=a(113),A=a(108),B=b.exports=Object.assign(a(63),{Device:d,Game:e,State:f,Group:g,Sprite:h,Particle:i,Graphics:j,RetroFont:k,Strip:l,Point:q,Rectangle:r,Circle:s,Ellipse:t,Keyboard:o,Emitter:u,Easing:v,Tilemap:w,TilemapLayer:x,TilemapSprite:y,Tileset:z,Tile:A,Math:m,Class:p,Color:n});c.ENGINE=B}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{101:101,106:106,108:108,109:109,110:110,112:112,113:113,115:115,121:121,122:122,123:123,63:63,68:68,72:72,73:73,76:76,79:79,80:80,81:81,82:82,83:83,94:94,95:95,96:96,97:97}],pixi:[function(a,b){(function(c){a(134);var d=b.exports=a(170);d.mesh=a(221),c.PIXI=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{134:134,170:170,221:221}],socket:[function(a,b){b.exports=a(6)},{6:6}]},{},[131]);