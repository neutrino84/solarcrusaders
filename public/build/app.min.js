require=function a(b,c,d){function e(f,h){var i,j,k;if(!c[f]){if(!b[f]){if(i="function"==typeof require&&require,!h&&i)return i(f,!0);if(g)return g(f,!0);throw j=Error("Cannot find module '"+f+"'"),j.code="MODULE_NOT_FOUND",j}k=c[f]={exports:{}},b[f][0].call(k.exports,function(a){var c=b[f][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[f].exports}var f,g="function"==typeof require&&require;for(f=0;f<d.length;f++)e(d[f]);return e}({1:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e,f=32;c.INT_BITS=f,c.INT_MAX=2147483647,c.INT_MIN=-1<<f-1,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>f-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1},e=Array(256),function(a){var b,c,d,e;for(b=0;b<256;++b){for(c=b,d=b,e=7,c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(e),c.reverse=function(a){return e[255&a]<<24|e[a>>>8&255]<<16|e[a>>>16&255]<<8|e[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],2:[function(a,b,c){"use strict";function d(a,b,c){var d,f,h,i,j,k,m,n,o,p,q,r;if(c=c||2,d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[],!h)return i;if(d&&(h=l(a,b,h,c)),a.length>80*c){for(j=m=a[0],k=n=a[1],r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b,c=a.prev,d=a,e=a.next;if(v(c,d,e)>=0)return!1;for(b=a.next.next;b!==a.prev;){if(t(c.x,c.y,d.x,d.y,e.x,e.y,b.x,b.y)&&v(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function i(a,b,c,d){var e,f,g,h,i,j,k,l=a.prev,m=a,n=a.next;if(v(l,m,n)>=0)return!1;for(e=l.x<m.x?l.x<n.x?l.x:n.x:m.x<n.x?m.x:n.x,f=l.y<m.y?l.y<n.y?l.y:n.y:m.y<n.y?m.y:n.y,g=l.x>m.x?l.x>n.x?l.x:n.x:m.x>n.x?m.x:n.x,h=l.y>m.y?l.y>n.y?l.y:n.y:m.y>n.y?m.y:n.y,i=r(e,f,b,c,d),j=r(g,h,b,c,d),k=a.nextZ;k&&k.z<=j;){if(k!==a.prev&&k!==a.next&&t(l.x,l.y,m.x,m.y,n.x,n.y,k.x,k.y)&&v(k.prev,k,k.next)>=0)return!1;k=k.nextZ}for(k=a.prevZ;k&&k.z>=i;){if(k!==a.prev&&k!==a.next&&t(l.x,l.y,m.x,m.y,n.x,n.y,k.x,k.y)&&v(k.prev,k,k.next)>=0)return!1;k=k.prevZ}return!0}function j(a,b,c){var d,e,f=a;do d=f.prev,e=f.next.next,!w(d,e)&&x(d,f,f.next,e)&&z(d,e)&&z(e,d)&&(b.push(d.i/c),b.push(f.i/c),b.push(e.i/c),D(f),D(f.next),f=a=e),f=f.next;while(f!==a);return f}function k(a,b,c,d,e,h){var i,j,k=a;do{for(i=k.next.next;i!==k.prev;){if(k.i!==i.i&&u(k,i))return j=B(k,i),k=f(k,k.next),j=f(j,j.next),g(k,b,c,d,e,h),void g(j,b,c,d,e,h);i=i.next}k=k.next}while(k!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;g<h;g++)i=b[g]*d,j=g<h-1?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d,e,f,g,h,i,j=b,k=a.x,l=a.y,m=-(1/0);do{if(l<=j.y&&l>=j.next.y&&(d=j.x+(l-j.y)*(j.next.x-j.x)/(j.next.y-j.y),d<=k&&d>m)){if(m=d,d===k){if(l===j.y)return j;if(l===j.next.y)return j.next}c=j.x<j.next.x?j:j.next}j=j.next}while(j!==b);if(!c)return null;if(k===m)return c.prev;for(e=c,f=c.x,g=c.y,h=1/0,j=c.next;j!==e;)k>=j.x&&j.x>=f&&t(l<g?k:m,l,f,g,l<g?m:k,l,j.x,j.y)&&(i=Math.abs(l-j.y)/(k-j.x),(i<h||i===h&&j.x>c.x)&&z(j,a)&&(c=j,h=i)),j=j.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ,d);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){var e,f,g=0;for(e=b,f=c-d;e<c;e+=d)g+=(a[f]-a[e])*(a[e+1]+a[f+1]),f=e;return g}b.exports=d,d.deviation=function(a,b,c,d){var e,f,g,h,i,j,k,l,m=b&&b.length,n=m?b[0]*c:a.length,o=Math.abs(F(a,0,n,c));if(m)for(e=0,f=b.length;e<f;e++)g=b[e]*c,h=e<f-1?b[e+1]*c:a.length,o-=Math.abs(F(a,g,h,c));for(i=0,e=0;e<d.length;e+=3)j=d[e]*c,k=d[e+1]*c,l=d[e+2]*c,i+=Math.abs((a[j]-a[l])*(a[k+1]-a[j+1])-(a[j]-a[k])*(a[l+1]-a[j+1]));return 0===o&&0===i?0:Math.abs((i-o)/o)},d.flatten=function(a){var b,c,d,e=a[0][0].length,f={vertices:[],holes:[],dimensions:e},g=0;for(b=0;b<a.length;b++){for(c=0;c<a[b].length;c++)for(d=0;d<e;d++)f.vertices.push(a[b][c][d]);b>0&&(g+=a[b-1].length,f.holes.push(g))}return f}},{}],3:[function(a,b,c){"use strict";function d(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function e(){}var f=Object.prototype.hasOwnProperty,g="function"!=typeof Object.create&&"~";e.prototype._events=void 0,e.prototype.eventNames=function(){var a,b=this._events,c=[];if(!b)return c;for(a in b)f.call(b,a)&&c.push(g?a.slice(1):a);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(b)):c},e.prototype.listeners=function(a,b){var c,d,e,f=g?g+a:a,h=this._events&&this._events[f];if(b)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(c=0,d=h.length,e=Array(d);c<d;c++)e[c]=h[c].fn;return e},e.prototype.emit=function(a,b,c,d,e,f){var h,i,j,k,l,m,n=g?g+a:a;if(!this._events||!this._events[n])return!1;if(h=this._events[n],i=arguments.length,"function"==typeof h.fn){switch(h.once&&this.removeListener(a,h.fn,void 0,!0),i){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,b),!0;case 3:return h.fn.call(h.context,b,c),!0;case 4:return h.fn.call(h.context,b,c,d),!0;case 5:return h.fn.call(h.context,b,c,d,e),!0;case 6:return h.fn.call(h.context,b,c,d,e,f),!0}for(k=1,j=Array(i-1);k<i;k++)j[k-1]=arguments[k];h.fn.apply(h.context,j)}else for(l=h.length,k=0;k<l;k++)switch(h[k].once&&this.removeListener(a,h[k].fn,void 0,!0),i){case 1:h[k].fn.call(h[k].context);break;case 2:h[k].fn.call(h[k].context,b);break;case 3:h[k].fn.call(h[k].context,b,c);break;default:if(!j)for(m=1,j=Array(i-1);m<i;m++)j[m-1]=arguments[m];h[k].fn.apply(h[k].context,j)}return!0},e.prototype.on=function(a,b,c){var e=new d(b,c||this),f=g?g+a:a;return this._events||(this._events=g?{}:Object.create(null)),this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],e]:this._events[f].push(e):this._events[f]=e,this},e.prototype.once=function(a,b,c){var e=new d(b,c||this,(!0)),f=g?g+a:a;return this._events||(this._events=g?{}:Object.create(null)),this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],e]:this._events[f].push(e):this._events[f]=e,this},e.prototype.removeListener=function(a,b,c,d){var e,f,h,i,j=g?g+a:a;if(!this._events||!this._events[j])return this;if(e=this._events[j],f=[],b)if(e.fn)(e.fn!==b||d&&!e.once||c&&e.context!==c)&&f.push(e);else for(h=0,i=e.length;h<i;h++)(e[h].fn!==b||d&&!e[h].once||c&&e[h].context!==c)&&f.push(e[h]);return f.length?this._events[j]=1===f.length?f[0]:f:delete this._events[j],this},e.prototype.removeAllListeners=function(a){return this._events?(a?delete this._events[g?g+a:a]:this._events=g?{}:Object.create(null),this):this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prototype.setMaxListeners=function(){return this},e.prefixed=g,void 0!==b&&(b.exports=e)},{}],4:[function(a,b,c){},{}],5:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){var a,b;if(!k){for(a=setTimeout(d),k=!0,b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b,c=Array(arguments.length-1);if(arguments.length>1)for(b=1;b<arguments.length;b++)c[b-1]=arguments[b];j.push(new f(a,c)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(a,b,c){(function(a){!function(d){function e(a){throw new RangeError(D[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c,d,e=a.split("@"),g="";return e.length>1&&(g=e[0]+"@",a=e[1]),a=a.replace(C,"."),c=a.split("."),d=f(c,b).join("."),g+d}function h(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=G(a>>>10&1023|55296),a=56320|1023&a),b+=G(a)}).join("")}function j(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:s}function k(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?F(a/w):a>>1,a+=F(a/b);a>E*u>>1;d+=s)a=F(a/E);return F(d+(E+1)*a/(a+v))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,v=0,w=y,A=x;for(c=a.lastIndexOf(z),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;f<q;){for(g=v,h=1,k=s;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=s||m>F((r-v)/h))&&e("overflow"),v+=m*h,n=k<=A?t:k>=A+u?u:k-A,!(m<n);k+=s)o=s-n,h>F(r/o)&&e("overflow"),h*=o;b=p.length+1,A=l(v-g,b,0==g),F(v/b)>r-w&&e("overflow"),w+=F(v/b),v%=b,p.splice(v++,0,w)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,v,w,A,B=[];for(a=h(a),q=a.length,b=y,c=0,g=x,i=0;i<q;++i)p=a[i],p<128&&B.push(G(p));for(d=f=B.length,f&&B.push(z);d<q;){for(j=r,i=0;i<q;++i)p=a[i],p>=b&&p<j&&(j=p);for(v=d+1,j-b>F((r-c)/v)&&e("overflow"),c+=(j-b)*v,b=j,i=0;i<q;++i)if(p=a[i],p<b&&++c>r&&e("overflow"),p==b){for(m=c,n=s;o=n<=g?t:n>=g+u?u:n-g,!(m<o);n+=s)A=m-o,w=s-o,B.push(G(k(o+A%w,0))),m=F(A/w);B.push(G(k(m,0))),g=l(c,v,d==f),c=0,++d}++c,++b}return B.join("")}function o(a){return g(a,function(a){return A.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return B.test(a)?"xn--"+n(a):a})}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I="object"==typeof c&&c&&!c.nodeType&&c,J="object"==typeof b&&b&&!b.nodeType&&b,K="object"==typeof a&&a;if(K.global!==K&&K.window!==K&&K.self!==K||(d=K),r=2147483647,s=36,t=1,u=26,v=38,w=700,x=72,y=128,z="-",A=/^xn--/,B=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,D={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=s-t,F=Math.floor,G=String.fromCharCode,q={version:"1.4.1",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return q});else if(I&&J)if(b.exports==I)J.exports=q;else for(H in q)q.hasOwnProperty(H)&&(I[H]=q[H]);else d.punycode=q}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q;if(b=b||"&",c=c||"=",g={},"string"!=typeof a||0===a.length)return g;for(h=/\+/g,a=a.split(b),i=1e3,f&&"number"==typeof f.maxKeys&&(i=f.maxKeys),j=a.length,i>0&&j>i&&(j=i),k=0;k<j;++k)l=a[k].replace(h,"%20"),m=l.indexOf(c),m>=0?(n=l.substr(0,m),o=l.substr(m+1)):(n=l,o=""),p=decodeURIComponent(n),q=decodeURIComponent(o),d(g,p)?e(g[p])?g[p].push(q):g[p]=[g[p],q]:g[p]=q;return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],8:[function(a,b,c){"use strict";function d(a,b){var c,d;if(a.map)return a.map(b);for(c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e,f,g=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(f(a),function(f){var h=encodeURIComponent(g(f))+c;return e(a[f])?d(a[f],function(a){return h+encodeURIComponent(g(a))}).join(b):h+encodeURIComponent(g(a[f]))}).join(b):h?encodeURIComponent(g(h))+c+encodeURIComponent(g(a)):""},e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},f=Object.keys||function(a){var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}},{}],9:[function(a,b,c){"use strict";c.decode=c.parse=a(7),c.encode=c.stringify=a(8)},{7:7,8:8}],10:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&y.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return y.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=a(6),y=a(11);c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d,i=/^([a-z0-9.+-]+:)/i,j=/:[0-9]*$/,k=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(l),n=["'"].concat(m),o=["%","/","?",";","#"].concat(n),p=["/","?","#"],q=255,r=/^[+a-z0-9A-Z_-]{0,63}$/,s=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,t={javascript:!0,"javascript:":!0},u={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=a(9),d.prototype.parse=function(a,b,c){var d,e,f,g,h,j,l,m,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;if(!y.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);if(d=a.indexOf("?"),e=d!==-1&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g,f[0]=f[0].replace(g,"/"),a=f.join(e),h=a,h=h.trim(),!c&&1===a.split("#").length&&(j=k.exec(h)))return this.path=h,this.href=h,this.pathname=j[1],j[2]?(this.search=j[2],b?this.query=w.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this;if(l=i.exec(h),l&&(l=l[0],m=l.toLowerCase(),this.protocol=m,h=h.substr(l.length)),(c||l||h.match(/^\/\/[^@\/]+@[^@\/]+/))&&(z="//"===h.substr(0,2),!z||l&&u[l]||(h=h.substr(2),this.slashes=!0)),!u[l]&&(z||l&&!v[l])){for(A=-1,B=0;B<p.length;B++)C=h.indexOf(p[B]),C!==-1&&(A===-1||C<A)&&(A=C);for(E=A===-1?h.lastIndexOf("@"):h.lastIndexOf("@",A),E!==-1&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1,B=0;B<o.length;B++)C=h.indexOf(o[B]),C!==-1&&(A===-1||C<A)&&(A=C);if(A===-1&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"",F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1],!F)for(G=this.hostname.split(/\./),B=0,H=G.length;B<H;B++)if(I=G[B],I&&!I.match(r)){for(J="",K=0,L=I.length;K<L;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(r)){M=G.slice(0,B),N=G.slice(B+1),O=I.match(s),O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}this.hostname.length>q?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=x.toASCII(this.hostname)),P=this.port?":"+this.port:"",Q=this.hostname||"",this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!t[m])for(B=0,H=n.length;B<H;B++)R=n[B],h.indexOf(R)!==-1&&(S=encodeURIComponent(R),S===R&&(S=escape(R)),h=h.split(R).join(S));return T=h.indexOf("#"),T!==-1&&(this.hash=h.substr(T),h=h.slice(0,T)),U=h.indexOf("?"),U!==-1?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=w.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),v[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(P=this.pathname||"",V=this.search||"",this.path=P+V),this.href=this.format(),this},d.prototype.format=function(){var a,b,c,d,e,f,g=this.auth||"";return g&&(g=encodeURIComponent(g),g=g.replace(/%3A/i,":"),g+="@"),a=this.protocol||"",b=this.pathname||"",c=this.hash||"",d=!1,e="",this.host?d=g+this.host:this.hostname&&(d=g+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(d+=":"+this.port)),this.query&&y.isObject(this.query)&&Object.keys(this.query).length&&(e=w.stringify(this.query)),f=this.search||e&&"?"+e||"",a&&":"!==a.substr(-1)&&(a+=":"),this.slashes||(!a||v[a])&&d!==!1?(d="//"+(d||""),b&&"/"!==b.charAt(0)&&(b="/"+b)):d||(d=""),c&&"#"!==c.charAt(0)&&(c="#"+c),f&&"?"!==f.charAt(0)&&(f="?"+f),b=b.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),f=f.replace("#","%23"),a+d+b+f+c},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,w,x,z,A,B,C,D,E;for(y.isString(a)&&(b=new d,b.parse(a,!1,!0),a=b),c=new d,e=Object.keys(this),f=0;f<e.length;f++)g=e[f],c[g]=this[g];if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(h=Object.keys(a),i=0;i<h.length;i++)j=h[i],"protocol"!==j&&(c[j]=a[j]);return v[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!v[a.protocol]){for(k=Object.keys(a),l=0;l<k.length;l++)m=k[l],c[m]=a[m];return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||u[a.protocol])c.pathname=a.pathname;else{for(n=(a.pathname||"").split("/");n.length&&!(a.host=n.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),c.pathname=n.join("/")}return c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,(c.pathname||c.search)&&(o=c.pathname||"",p=c.search||"",c.path=o+p),c.slashes=c.slashes||a.slashes,c.href=c.format(),c}if(q=c.pathname&&"/"===c.pathname.charAt(0),r=a.host||a.pathname&&"/"===a.pathname.charAt(0),s=r||q||c.host&&a.pathname,t=s,w=c.pathname&&c.pathname.split("/")||[],n=a.pathname&&a.pathname.split("/")||[],x=c.protocol&&!v[c.protocol],x&&(c.hostname="",c.port=null,c.host&&(""===w[0]?w[0]=c.host:w.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===n[0]?n[0]=a.host:n.unshift(a.host)),a.host=null),s=s&&(""===n[0]||""===w[0])),r)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,w=n;else if(n.length)w||(w=[]),w.pop(),w=w.concat(n),c.search=a.search,c.query=a.query;else if(!y.isNullOrUndefined(a.search))return x&&(c.hostname=c.host=w.shift(),z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"),z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())),c.search=a.search,c.query=a.query,y.isNull(c.pathname)&&y.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!w.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(A=w.slice(-1)[0],B=(c.host||a.host||w.length>1)&&("."===A||".."===A)||""===A,C=0,D=w.length;D>=0;D--)A=w[D],"."===A?w.splice(D,1):".."===A?(w.splice(D,1),C++):C&&(w.splice(D,1),C--);if(!s&&!t)for(;C--;C)w.unshift("..");return!s||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),B&&"/"!==w.join("/").substr(-1)&&w.push(""),E=""===w[0]||w[0]&&"/"===w[0].charAt(0),x&&(c.hostname=c.host=E?"":w.length?w.shift():"",z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"),z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())),s=s||c.host&&w.length,s&&!E&&w.unshift(""),w.length?c.pathname=w.join("/"):(c.pathname=null,c.path=null),y.isNull(c.pathname)&&y.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=j.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{11:11,6:6,9:9}],11:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],12:[function(a,b,c){!function(a){var c=/iPhone/i,d=/iPod/i,e=/iPad/i,f=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,g=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,i=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,j=/IEMobile/i,k=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,l=/BlackBerry/i,m=/BB10/i,n=/Opera Mini/i,o=/(CriOS|Chrome)(?=.*\bMobile\b)/i,p=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,q=RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),r=function(a,b){return a.test(b)},s=function(a){var b=a||navigator.userAgent,s=b.split("[FBAN");if(void 0!==s[1]&&(b=s[0]),s=b.split("Twitter"),void 0!==s[1]&&(b=s[0]),this.apple={phone:r(c,b),ipod:r(d,b),tablet:!r(c,b)&&r(e,b),device:r(c,b)||r(d,b)||r(e,b)},this.amazon={phone:r(h,b),tablet:!r(h,b)&&r(i,b),device:r(h,b)||r(i,b)},this.android={phone:r(h,b)||r(f,b),tablet:!r(h,b)&&!r(f,b)&&(r(i,b)||r(g,b)),device:r(h,b)||r(i,b)||r(f,b)||r(g,b)},this.windows={phone:r(j,b),tablet:r(k,b),device:r(j,b)||r(k,b)},this.other={blackberry:r(l,b),blackberry10:r(m,b),opera:r(n,b),firefox:r(p,b),chrome:r(o,b),device:r(l,b)||r(m,b)||r(n,b)||r(p,b)||r(o,b)},this.seven_inch=r(q,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},t=function(){var a=new s;return a.Class=s,a};void 0!==b&&b.exports&&"undefined"==typeof window?b.exports=s:void 0!==b&&b.exports&&"undefined"!=typeof window?b.exports=t():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=t()):a.isMobile=t()}(this)},{}],13:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;b.exports=Object.assign||function(a,b){var c,g,h,i,j,k=d(a);for(h=1;h<arguments.length;h++){c=Object(arguments[h]);for(i in c)e.call(c,i)&&(k[i]=c[i]);if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(c),j=0;j<g.length;j++)f.call(c,g[j])&&(k[g[j]]=c[g[j]])}return k}},{}],14:[function(a,b,c){"use strict";var d=new ArrayBuffer(0),e=function(a,b,c,e){this.gl=a,this.buffer=a.createBuffer(),this.type=b||a.ARRAY_BUFFER,this.drawType=e||a.STATIC_DRAW,this.data=d,c&&this.upload(c)};e.prototype.upload=function(a,b,c){c||this.bind();var d=this.gl;a=a||this.data,b=b||0,this.data.byteLength>=a.byteLength?d.bufferSubData(this.type,b,a):d.bufferData(this.type,a,this.drawType),this.data=a},e.prototype.bind=function(){var a=this.gl;a.bindBuffer(this.type,this.buffer)},e.createVertexBuffer=function(a,b,c){return new e(a,a.ARRAY_BUFFER,b,c)},e.createIndexBuffer=function(a,b,c){return new e(a,a.ELEMENT_ARRAY_BUFFER,b,c)},e.create=function(a,b,c,d){return new e(a,b,d)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},b.exports=e},{}],15:[function(a,b,c){"use strict";var d=a(17),e=function(a,b,c){this.gl=a,this.framebuffer=a.createFramebuffer(),this.stencil=null,this.texture=null,this.width=b||100,this.height=c||100};e.prototype.enableTexture=function(a){var b=this.gl;this.texture=a||new d(b),this.texture.bind(),this.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture.texture,0)},e.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencil),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height)}},e.prototype.clear=function(a,b,c,d){this.bind();var e=this.gl;e.clearColor(a,b,c,d),e.clear(e.COLOR_BUFFER_BIT)},e.prototype.bind=function(){var a=this.gl;this.texture&&this.texture.unbind(),a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)},e.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)},e.prototype.resize=function(a,b){var c=this.gl;this.width=a,this.height=b,this.texture&&this.texture.uploadData(null,a,b),this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b))},e.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy(),a.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},e.createRGBA=function(a,b,c){var f,g=d.fromData(a,null,b,c);return g.enableNearestScaling(),g.enableWrapClamp(),f=new e(a,b,c),f.enableTexture(g),f.unbind(),f},e.createFloat32=function(a,b,c,f){var g,h=new d.fromData(a,f,b,c);return h.enableNearestScaling(),h.enableWrapClamp(),g=new e(a,b,c),g.enableTexture(h),g.unbind(),g},b.exports=e},{17:17}],16:[function(a,b,c){"use strict";var d=a(22),e=a(24),f=a(25),g=a(26),h=function(a,b,c){this.gl=a,this.program=d(a,b,c),this.attributes=e(a,this.program);var h=f(a,this.program);this.uniforms=g(a,h)};h.prototype.bind=function(){this.gl.useProgram(this.program)},h.prototype.destroy=function(){},b.exports=h},{22:22,24:24,25:25,26:26}],17:[function(a,b,c){"use strict";var d,e=function(a,b,c,d,e){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=b||0,this.height=c||0,this.format=d||a.RGBA,this.type=e||a.UNSIGNED_BYTE};e.prototype.upload=function(a){this.bind();var b=this.gl;this.width=a.videoWidth||a.width,this.height=a.videoHeight||a.height,b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,this.type,a)},d=!1,e.prototype.uploadData=function(a,b,c){var e,f;if(this.bind(),e=this.gl,this.width=b||this.width,this.height=c||this.height,a instanceof Float32Array){if(!d){if(f=e.getExtension("OES_texture_float"),!f)throw Error("floating point textures not available");d=!0}this.type=e.FLOAT}else this.type=e.UNSIGNED_BYTE;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.texImage2D(e.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,a||null)},e.prototype.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.texture)},e.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)},e.prototype.minFilter=function(a){var b=this.gl;this.bind(),this.mipmap?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR:b.NEAREST)},e.prototype.magFilter=function(a){var b=this.gl;this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a?b.LINEAR:b.NEAREST)},e.prototype.enableMipmap=function(){var a=this.gl;this.bind(),this.mipmap=!0,a.generateMipmap(a.TEXTURE_2D)},e.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},e.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},e.prototype.enableWrapClamp=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},e.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)},e.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)},e.prototype.destroy=function(){var a=this.gl;a.deleteTexture(this.texture)},e.fromSource=function(a,b,c){
var d=new e(a);return d.premultiplyAlpha=c||!1,d.upload(b),d},e.fromData=function(a,b,c,d){var f=new e(a);return f.uploadData(b,c,d),f},b.exports=e},{}],18:[function(a,b,c){"use strict";function d(a,b){if(this.nativeVaoExtension=null,d.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=b,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(c),attribState:Array(c)}}this.gl=a,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var e=a(21);d.prototype.constructor=d,b.exports=d,d.FORCE_NATIVE=!1,d.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},d.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},d.prototype.activate=function(){var a,b,c=this.gl,d=null;for(a=0;a<this.attributes.length;a++)b=this.attributes[a],d!==b.buffer&&(b.buffer.bind(),d=b.buffer),c.vertexAttribPointer(b.attribute.location,b.attribute.size,b.type||c.FLOAT,b.normalized||!1,b.stride||0,b.start||0);return e(c,this.attributes,this.nativeState),this.indexBuffer.bind(),this},d.prototype.addAttribute=function(a,b,c,d,e,f){return this.attributes.push({buffer:a,attribute:b,location:b.location,type:c||this.gl.FLOAT,normalized:d||!1,stride:e||0,start:f||0}),this.dirty=!0,this},d.prototype.addIndex=function(a){return this.indexBuffer=a,this.dirty=!0,this},d.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},d.prototype.draw=function(a,b,c){var d=this.gl;return d.drawElements(a,b,d.UNSIGNED_SHORT,c||0),this},d.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{21:21}],19:[function(a,b,c){"use strict";var d=function(a,b){var c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!c)throw Error("This browser does not support webGL. Try using the canvas renderer");return c};b.exports=d},{}],20:[function(a,b,c){"use strict";var d={createContext:a(19),setVertexAttribArrays:a(21),GLBuffer:a(14),GLFramebuffer:a(15),GLShader:a(16),GLTexture:a(17),VertexArrayObject:a(18),shader:a(27)};void 0!==b&&b.exports&&(b.exports=d),"undefined"!=typeof window&&(window.pixi={gl:d})},{14:14,15:15,16:16,17:17,18:18,19:19,21:21,27:27}],21:[function(a,b,c){"use strict";var d=function(a,b,c){var d,e,f,g;if(c){for(e=c.tempAttribState,f=c.attribState,d=0;d<e.length;d++)e[d]=!1;for(d=0;d<b.length;d++)e[b[d].attribute.location]=!0;for(d=0;d<f.length;d++)f[d]!==e[d]&&(f[d]=e[d],c.attribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))}else for(d=0;d<b.length;d++)g=b[d],a.enableVertexAttribArray(g.attribute.location)};b.exports=d},{}],22:[function(a,b,c){"use strict";var d=function(a,b,c){var d=e(a,a.VERTEX_SHADER,b),f=e(a,a.FRAGMENT_SHADER,c),g=a.createProgram();return a.attachShader(g,d),a.attachShader(g,f),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(g,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(g)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(g)),a.deleteProgram(g),g=null),a.deleteShader(d),a.deleteShader(f),g},e=function(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.log(a.getShaderInfoLog(d)),null)};b.exports=d},{}],23:[function(a,b,c){"use strict";var d=function(a,b){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*b);case"vec3":return new Float32Array(3*b);case"vec4":return new Float32Array(4*b);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*b);case"ivec3":return new Int32Array(3*b);case"ivec4":return new Int32Array(4*b);case"bool":return!1;case"bvec2":return e(2*b);case"bvec3":return e(3*b);case"bvec4":return e(4*b);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e=function(a){var b,c=Array(a);for(b=0;b<c.length;b++)c[b]=!1;return c};b.exports=d},{}],24:[function(a,b,c){"use strict";var d=a(29),e=a(28),f=function(a,b){var c,f,h,i={},j=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES);for(c=0;c<j;c++)f=a.getActiveAttrib(b,c),h=d(a,f.type),i[f.name]={type:h,size:e(h),location:a.getAttribLocation(b,f.name),pointer:g};return i},g=function(a,b,c,d){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,b||!1,c||0,d||0)};b.exports=f},{28:28,29:29}],25:[function(a,b,c){"use strict";var d=a(29),e=a(23),f=function(a,b){var c,f,g,h,i={},j=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(c=0;c<j;c++)f=a.getActiveUniform(b,c),g=f.name.replace(/\[.*?\]/,""),h=d(a,f.type),i[g]={type:h,size:f.size,location:a.getUniformLocation(b,g),value:e(h,f.size)};return i};b.exports=f},{23:23,29:29}],26:[function(a,b,c){"use strict";var d=function(a,b){var c,d,h,i,j,k,l,m={data:{}};for(m.gl=a,c=Object.keys(b),d=0;d<c.length;d++)h=c[d],i=h.split("."),j=i[i.length-1],k=g(i,m),l=b[h],k.data[j]=l,k.gl=a,Object.defineProperty(k,j,{get:e(j),set:f(j,l)});return m},e=function(a){var b=h.replace("%%",a);return Function(b)},f=function(a,b){var c,d=i.replace(/%%/g,a);return c=1===b.size?j[b.type]:k[b.type],c&&(d+="\nthis.gl."+c+";"),Function("value",d)},g=function(a,b){var c,d,e=b;for(c=0;c<a.length-1;c++)d=e[a[c]]||{data:{}},e[a[c]]=d,e=d;return e},h="return this.data.%%.value;",i="this.data.%%.value = value;\nvar location = this.data.%%.location;",j={"float":"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])","int":"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},k={"float":"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)","int":"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};b.exports=d},{}],27:[function(a,b,c){"use strict";b.exports={compileProgram:a(22),defaultValue:a(23),extractAttributes:a(24),extractUniforms:a(25),generateUniformAccessObject:a(26),mapSize:a(28),mapType:a(29)}},{22:22,23:23,24:24,25:25,26:26,28:28,29:29}],28:[function(a,b,c){"use strict";var d=function(a){return e[a]},e={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};b.exports=d},{}],29:[function(a,b,c){"use strict";var d=function(a,b){var c,d,g;if(!e)for(c=Object.keys(f),e={},d=0;d<c.length;++d)g=c[d],e[a[g]]=f[g];return e[b]},e=null,f={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};b.exports=d},{}],30:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a,b,d,e=arguments,f=this.useColors;return e[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+e[0]+(f?"%c ":" ")+"+"+c.humanize(this.diff),f?(a="color: "+this.color,e=[e[0],a,"color: inherit"].concat(Array.prototype.slice.call(e,1)),b=0,d=0,e[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(b++,"%c"===a&&(d=b))}),e.splice(d,0,a),e):e}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}}function h(){var a;try{a=c.storage.debug}catch(b){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a(31),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{31:31}],31:[function(a,b,c){function d(){return c.colors[j++%c.colors.length]}function e(a){function b(){}function e(){var a,b,f,g=e,h=+new Date,i=h-(k||h);g.diff=i,g.prev=k,g.curr=h,k=h,null==g.useColors&&(g.useColors=c.useColors()),null==g.color&&g.useColors&&(g.color=d()),a=Array.prototype.slice.call(arguments),a[0]=c.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a)),b=0,a[0]=a[0].replace(/%([a-z%])/g,function(d,e){var f,h;return"%%"===d?d:(b++,f=c.formatters[e],"function"==typeof f&&(h=a[b],d=f.call(g,h),a.splice(b,1),b--),d)}),"function"==typeof c.formatArgs&&(a=c.formatArgs.apply(g,a)),f=e.log||c.log||console.log.bind(console),f.apply(g,a)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){var b,d,e;for(c.save(a),b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(RegExp("^"+a.substr(1)+"$")):c.names.push(RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}var j,k;c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a(32),c.names=[],c.skips=[],c.formatters={},j=0},{32:32}],32:[function(a,b,c){function d(a){var b,c,d;if(a=""+a,!(a.length>1e4)&&(b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a)))switch(c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],33:[function(a,b,c){(function(c){function d(a){function b(a){var d,f;if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON());for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a(34);b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{34:34}],34:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],35:[function(a,b,c){function d(a,b){return this instanceof d?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new d(a,b)}var e=a(42),f=a(37),g=a(41),h=a(71),i=a(36),j=a(40),k=a(30)("socket.io-client:manager"),l=a(67),m=a(39),n=Object.prototype.hasOwnProperty;b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)n.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)},d.prototype.updateSocketIds=function(){for(var a in this.nsps)n.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(a){var b,c,d,f,g,h;return k("readyState %s",this.readyState),~this.readyState.indexOf("open")?this:(k("opening %s",this.uri),this.engine=e(this.uri,this.opts),b=this.engine,c=this,this.readyState="opening",this.skipReconnect=!1,d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=Error("Connection error");d.data=b,a(d)}else c.maybeReconnectOnOpen()}),!1!==this._timeout&&(g=this._timeout,k("connect attempt will timeout after %d",g),h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g),this.subs.push({destroy:function(){clearTimeout(h)}})),this.subs.push(d),this.subs.push(f),this)},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(a,"ping",j(this,"onping"))),this.subs.push(i(a,"pong",j(this,"onpong"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a){function b(){~l(c.connecting,d)||c.connecting.push(d)}var c,d=this.nsps[a];return d||(d=new f(this,a),this.nsps[a]=d,c=this,d.on("connecting",b),d.on("connect",function(){d.id=c.engine.id}),this.autoConnect&&b()),d},d.prototype.destroy=function(a){var b=l(this.connecting,a);~b&&this.connecting.splice(b,1),this.connecting.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){k("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){k("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){var a,b,c;return this.reconnecting||this.skipReconnect?this:(a=this,void(this.backoff.attempts>=this._reconnectionAttempts?(k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(b=this.backoff.duration(),k("will wait %dms before reconnect attempt",b),this.reconnecting=!0,c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b),this.subs.push({destroy:function(){clearTimeout(c)}}))))},d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{30:30,36:36,37:37,39:39,40:40,41:41,42:42,67:67,71:71}],36:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],37:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var e,f,g=a(71),h=a(41),i=a(69),j=a(36),k=a(40),l=a(30)("socket.io-client:socket"),m=a(33);b.exports=c=d,e={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=h.prototype.emit,h(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[j(a,"open",k(this,"onopen")),j(a,"packet",k(this,"onpacket")),j(a,"close",k(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var a=i(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){var b,c,d;return e.hasOwnProperty(a)?(f.apply(this,arguments),this):(b=i(arguments),c=g.EVENT,m(b)&&(c=g.BINARY_EVENT),d={type:c,data:b},d.options={},d.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof b[b.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),delete this.flags,this)},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:g.CONNECT})},d.prototype.onclose=function(a){l("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case g.CONNECT:this.onconnect();break;case g.EVENT:this.onevent(a);break;case g.BINARY_EVENT:this.onevent(a);break;case g.ACK:this.onack(a);break;case g.BINARY_ACK:this.onack(a);break;case g.DISCONNECT:this.ondisconnect();break;case g.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];l("emitting event %j",b),null!=a.id&&(l("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?f.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){var d,e;c||(c=!0,d=i(arguments),l("sending ack %j",d),e=m(d)?g.BINARY_ACK:g.ACK,b.packet({type:e,id:a,data:d}))}},d.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(l("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):l("bad ack %s",a.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)f.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:g.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(a){return this.flags=this.flags||{},this.flags.compress=a,this}},{30:30,33:33,36:36,40:40,41:41,69:69,71:71}],38:[function(a,b,c){(function(c){function d(a,b){var d,g,h=a;return b=b||c.location,null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a=void 0!==b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),h=e(a)),h.port||(/^(http|ws)$/.test(h.protocol)?h.port="80":/^(http|ws)s$/.test(h.protocol)&&(h.port="443")),h.path=h.path||"/",d=h.host.indexOf(":")!==-1,g=d?"["+h.host+"]":h.host,h.id=h.protocol+"://"+g+":"+h.port,h.href=h.protocol+"://"+g+(b&&b.port==h.port?"":":"+h.port),h}var e=a(68),f=a(30)("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{30:30,68:68}],39:[function(a,b,c){function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=d,d.prototype.duration=function(){var a,b,c=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(a=Math.random(),b=Math.floor(a*this.jitter*c),c=0==(1&Math.floor(10*a))?c-b:c+b),0|Math.min(c,this.max)},d.prototype.reset=function(){this.attempts=0},d.prototype.setMin=function(a){this.ms=a},d.prototype.setMax=function(a){this.max=a},d.prototype.setJitter=function(a){this.jitter=a}},{}],40:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],41:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){var c,d,e;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(c=this._callbacks["$"+a],!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){var b,c,d,e;if(this._callbacks=this._callbacks||{},b=[].slice.call(arguments,1),c=this._callbacks["$"+a],c)for(c=c.slice(0),d=0,e=c.length;d<e;++d)c[d].apply(this,b);return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],42:[function(a,b,c){b.exports=a(43)},{43:43}],43:[function(a,b,c){b.exports=a(44),b.exports.parser=a(54)},{44:44,54:54}],44:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);b=b||{},a&&"object"==typeof a&&(b=a,a=null),a?(a=k(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=k(b.host).host),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.perMessageDeflate=!1!==b.perMessageDeflate&&(b.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=void 0===b.rejectUnauthorized||b.rejectUnauthorized;var e="object"==typeof c&&c;e.global===e&&b.extraHeaders&&Object.keys(b.extraHeaders).length>0&&(this.extraHeaders=b.extraHeaders),this.open()}function e(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}var f=a(46),g=a(52),h=a(30)("engine.io-client:socket"),i=a(67),j=a(54),k=a(68),l=a(64),m=a(65);b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a(45),d.transports=a(46),d.parser=a(54),d.prototype.createTransport=function(a){var b,c;return h('creating transport "%s"',a),b=e(this.query),b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id),c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},d.prototype.open=function(){var a,b;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)a="websocket";else{if(0===this.transports.length)return b=this,void setTimeout(function(){b.emit("error","No transports available")},0);a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var b=Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){
var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b,c){return this.sendPacket("message",a,b,c),this},d.prototype.sendPacket=function(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"!=this.readyState&&"closed"!=this.readyState){c=c||{},c.compress=!1!==c.compress;var e={type:a,data:b,options:c};this.emit("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b),c.writeBuffer=[],c.prevBufferLen=0}},d.prototype.filterUpgrades=function(a){var b,c,d=[];for(b=0,c=a.length;b<c;b++)~i(this.transports,a[b])&&d.push(a[b]);return d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{30:30,45:45,46:46,52:52,54:54,64:64,65:65,67:67,68:68}],45:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders}var e=a(54),f=a(52);b.exports=d,f(d.prototype),d.prototype.onError=function(a,b){var c=Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!=this.readyState)throw Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{52:52,54:54}],46:[function(a,b,c){(function(b){function d(a){var c,d,h,i=!1,j=!1,k=!1!==a.jsonp;if(b.location&&(d="https:"==location.protocol,h=location.port,h||(h=d?443:80),i=a.hostname!=location.hostname||h!=a.port,j=a.secure!=d),a.xdomain=i,a.xscheme=j,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!k)throw Error("JSONP disabled");return new g(a)}var e=a(51),f=a(48),g=a(47),h=a(50);c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{47:47,48:48,50:50,51:51}],47:[function(a,b,c){(function(c){function d(){}function e(a){j.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f,g,h,i,j=a(49),k=a(53);b.exports=e,f=/\n/g,g=/\\n/g,i=0,k(e,j),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),j.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a,b,c=this,d=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),d.async=!0,d.src=this.uri(),d.onerror=function(a){c.onError("jsonp poll error",a)},a=document.getElementsByTagName("script")[0],a?a.parentNode.insertBefore(d,a):(document.head||document.body).appendChild(d),this.script=d,b="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent),b&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(k.iframe)try{k.form.removeChild(k.iframe)}catch(a){k.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+k.iframeId+'">';j=document.createElement(b)}catch(a){j=document.createElement("iframe"),j.name=k.iframeId,j.src="javascript:0"}j.id=k.iframeId,k.form.appendChild(j),k.iframe=j}var e,h,i,j,k=this;this.form||(e=document.createElement("form"),h=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,e.className="socketio",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.target=i,e.method="POST",e.setAttribute("accept-charset","utf-8"),h.name="d",e.appendChild(h),document.body.appendChild(e),this.form=e,this.area=h),this.form.action=this.uri(),d(),a=a.replace(g,"\\\n"),this.area.value=a.replace(f,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==k.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{49:49,53:53}],48:[function(a,b,c){(function(c){function d(){}function e(a){var b,d;i.call(this,a),c.location?(b="https:"==location.protocol,d=location.port,d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b):this.extraHeaders=a.extraHeaders}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a(51),i=a(49),j=a(52),k=a(53),l=a(30)("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,a.extraHeaders=this.extraHeaders,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){var a,b;l("xhr poll"),a=this.request(),b=this,a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a,b,d,e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,a=this.xhr=new h(e),b=this;try{l("xhr open %s: %s",this.method,this.uri),a.open(this.method,this.uri,this.async);try{if(this.extraHeaders){a.setDisableHeaderCheck(!0);for(d in this.extraHeaders)this.extraHeaders.hasOwnProperty(d)&&a.setRequestHeader(d,this.extraHeaders[d])}}catch(g){}if(this.supportsBinary&&(a.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?a.setRequestHeader("Content-type","application/octet-stream"):a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}"withCredentials"in a&&(a.withCredentials=!0),this.hasXDR()?(a.onload=function(){b.onLoad()},a.onerror=function(){b.onError(a.responseText)}):a.onreadystatechange=function(){4==a.readyState&&(200==a.status||1223==a.status?b.onLoad():setTimeout(function(){b.onError(a.status)},0))},l("xhr data %s",this.data),a.send(this.data)}catch(g){return void setTimeout(function(){b.onError(g)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a,b,c,d,e,f;try{try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(g){}if("application/octet-stream"===b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(g){for(c=new Uint8Array(this.xhr.response),d=[],e=0,f=c.length;e<f;e++)d.push(c[e]);a=String.fromCharCode.apply(null,d)}else a=this.xhr.responseText}catch(g){this.onError(g)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return void 0!==c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{30:30,49:49,51:51,52:52,53:53}],49:[function(a,b,c){function d(a){var b=a&&a.forceBase64;e&&!b||(this.supportsBinary=!1),f.call(this,a)}var e,f=a(45),g=a(65),h=a(54),i=a(53),j=a(66),k=a(30)("engine.io-client:polling");b.exports=d,e=function(){var b=a(51),c=new b({xdomain:!1});return null!=c.responseType}(),i(d,f),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){k("paused"),d.readyState="paused",a()}var c,d=this;this.readyState="pausing",this.polling||!this.writable?(c=0,this.polling&&(k("we are currently polling - waiting to pause"),c++,this.once("pollComplete",function(){k("pre-pause polling complete"),--c||b()})),this.writable||(k("we are currently writing - waiting to pause"),c++,this.once("drain",function(){k("pre-pause writing complete"),--c||b()}))):b()},d.prototype.poll=function(){k("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b,c=this;k("polling got data %s",a),b=function(a,b,d){return"opening"==c.readyState&&c.onOpen(),"close"==a.type?(c.onClose(),!1):void c.onPacket(a)},h.decodePayload(a,this.socket.binaryType,b),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():k('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){k("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(k("transport open - closing"),a()):(k("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b,c=this;this.writable=!1,b=function(){c.writable=!0,c.emit("drain")},c=this,h.encodePayload(a,this.supportsBinary,function(a){c.doWrite(a,b)})},d.prototype.uri=function(){var a,b=this.query||{},c=this.secure?"https":"http",d="";return!1!==this.timestampRequests&&(b[this.timestampParam]=j()),this.supportsBinary||b.sid||(b.b64=1),b=g.encode(b),this.port&&("https"==c&&443!=this.port||"http"==c&&80!=this.port)&&(d=":"+this.port),b.length&&(b="?"+b),a=this.hostname.indexOf(":")!==-1,c+"://"+(a?"["+this.hostname+"]":this.hostname)+d+this.path+b}},{30:30,45:45,51:51,53:53,54:54,65:65,66:66}],50:[function(a,b,c){(function(c){function d(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,e.call(this,a)}var e=a(45),f=a(54),g=a(65),h=a(53),i=a(66),j=a(30)("engine.io-client:websocket"),k=c.WebSocket||c.MozWebSocket,l=k;if(!l&&"undefined"==typeof window)try{l=a(4)}catch(m){}b.exports=d,h(d,e),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){var a,b,c,d;this.check()&&(a=this,b=this.uri(),c=void 0,d={agent:this.agent,perMessageDeflate:this.perMessageDeflate},d.pfx=this.pfx,d.key=this.key,d.passphrase=this.passphrase,d.cert=this.cert,d.ca=this.ca,d.ciphers=this.ciphers,d.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(d.headers=this.extraHeaders),this.ws=k?new l(b):new l(b,c,d),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners())},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),d.prototype.write=function(a){function b(){h.emit("flush"),setTimeout(function(){h.writable=!0,h.emit("drain")},0)}var d,e,g,h=this;for(this.writable=!1,d=a.length,e=0,g=d;e<g;e++)!function(a){f.encodePacket(a,h.supportsBinary,function(e){var f,g;k||(f={},a.options&&(f.compress=a.options.compress),h.perMessageDeflate&&(g="string"==typeof e?c.Buffer.byteLength(e):e.length,g<h.perMessageDeflate.threshold&&(f.compress=!1)));try{k?h.ws.send(e):h.ws.send(e,f)}catch(i){j("websocket closed before onclose event")}--d||b()})}(a[e])},d.prototype.onClose=function(){e.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var a,b=this.query||{},c=this.secure?"wss":"ws",d="";return this.port&&("wss"==c&&443!=this.port||"ws"==c&&80!=this.port)&&(d=":"+this.port),this.timestampRequests&&(b[this.timestampParam]=i()),this.supportsBinary||(b.b64=1),b=g.encode(b),b.length&&(b="?"+b),a=this.hostname.indexOf(":")!==-1,c+"://"+(a?"["+this.hostname+"]":this.hostname)+d+this.path+b},d.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===d.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{30:30,4:4,45:45,53:53,54:54,65:65,66:66}],51:[function(a,b,c){var d=a(63);b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{63:63}],52:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){var c,d,e;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(c=this._callbacks[a],!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){var b,c,d,e;if(this._callbacks=this._callbacks||{},b=[].slice.call(arguments,1),c=this._callbacks[a],c)for(c=c.slice(0),d=0,e=c.length;d<e;++d)c[d].apply(this,b);return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],53:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],54:[function(a,b,c){(function(b){function d(a,b){var d="b"+c.packets[a.type]+a.data.data;return b(d)}function e(a,b,d){var e,f,g,h;if(!b)return c.encodeBase64Packet(a,d);for(e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength),g[0]=i[a.type],h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){var e,g;return b?u?f(a,b,d):(e=new Uint8Array(1),e[0]=i[a.type],g=new l([e.buffer,a.data]),d(g)):c.encodeBase64Packet(a,d)}function h(a,b,c){var d,e=Array(a.length),f=q(a.length,c),g=function(a,c,d){b(c,function(b,c){e[a]=c,d(b,e)})};for(d=0;d<a.length;d++)g(d,a[d],f)}var i,j,k,l,m=a(55),n=a(60),o=a(57),p=a(58),q=a(56),r=a(62),s=navigator.userAgent.match(/Android/i),t=/PhantomJS/i.test(navigator.userAgent),u=s||t;c.protocol=3,i=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},j=m(i),k={type:"error",data:"parser error"},l=a(59),c.encodePacket=function(a,c,f,h){var j,k;return"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null),j=void 0===a.data?void 0:a.data.buffer||a.data,b.ArrayBuffer&&j instanceof ArrayBuffer?e(a,c,h):l&&j instanceof b.Blob?g(a,c,h):j&&j.base64?d(a,h):(k=i[a.type],void 0!==a.data&&(k+=f?r.encode(a.data+""):a.data+""),h(""+k))},c.encodeBase64Packet=function(a,d){var e,f,g,h,i,j="b"+c.packets[a.type];if(l&&a.data instanceof b.Blob)return e=new FileReader,e.onload=function(){var a=e.result.split(",")[1];d(j+a)},e.readAsDataURL(a.data);try{f=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(k){for(g=new Uint8Array(a.data),h=Array(g.length),i=0;i<g.length;i++)h[i]=g[i];f=String.fromCharCode.apply(null,h)}return j+=b.btoa(f),d(j)},c.decodePacket=function(a,b,d){var e,f,g;if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=r.decode(a)}catch(h){return k}return e=a.charAt(0),+e==e&&j[e]?a.length>1?{type:j[e],data:a.substring(1)}:{type:j[e]}:k}return f=new Uint8Array(a),e=f[0],g=o(a,1),l&&"blob"===b&&(g=new l([g])),{type:j[e],data:g}},c.decodeBase64Packet=function(a,c){var d,e=j[a.charAt(0)];return b.ArrayBuffer?(d=p.decode(a.substr(1)),"blob"===c&&l&&(d=new l([d])),{type:e,data:d}):{type:e,data:{base64:!0,data:a.substr(1)}}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,!!g&&b,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=n(a);return b&&g?l&&!u?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){var e,f,g,h,i,j,l,m;if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);if("function"==typeof b&&(d=b,b=null),""==a)return d(k,0,1);for(f="",i=0,j=a.length;i<j;i++)if(l=a.charAt(i),":"!=l)f+=l;else{if(""==f||f!=(g=+f))return d(k,0,1);if(h=a.substr(i+1,g),f!=h.length)return d(k,0,1);if(h.length){if(e=c.decodePacket(h,b,!0),k.type==e.type&&k.data==e.data)return d(k,0,1);if(m=d(e,i+g,j),!1===m)return}i+=g,f=""}return""!=f?d(k,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void h(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+(""+c).length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b,c,d,g="string"==typeof a,h=a;if(g){for(b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);h=b.buffer}for(g?e[f++]=0:e[f++]=1,d=""+h.byteLength,c=0;c<d.length;c++)e[f++]=parseInt(d[c]);for(e[f++]=255,b=new Uint8Array(h),c=0;c<b.length;c++)e[f++]=b[c]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c,d,e,f,g,h,i=new Uint8Array(1);if(i[0]=1,"string"==typeof a){for(c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);a=c.buffer,i[0]=0}for(e=a instanceof ArrayBuffer?a.byteLength:a.size,f=""+e,g=new Uint8Array(f.length+1),d=0;d<f.length;d++)g[d]=parseInt(f[d]);g[f.length]=255,l&&(h=new l([i.buffer,g.buffer,a]),b(null,h))})}h(a,d,function(a,c){return b(new l(c))})},c.decodePayloadAsBinary=function(a,b,d){var e,f,g,h,i,j,l,m,n,p;for("function"==typeof b&&(d=b,b=null),e=a,f=[],g=!1;e.byteLength>0;){for(h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(k,0,1);if(e=o(e,2+j.length),j=parseInt(j),m=o(e,0,j),i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(q){for(n=new Uint8Array(m),m="",l=0;l<n.length;l++)m+=String.fromCharCode(n[l])}f.push(m),e=o(e,j)}p=f.length,f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{55:55,56:56,57:57,58:58,59:59,60:60,62:62}],55:[function(a,b,c){b.exports=Object.keys||function(a){var b,c=[],d=Object.prototype.hasOwnProperty;for(b in a)d.call(a,b)&&c.push(b);return c}},{}],56:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],57:[function(a,b,c){b.exports=function(a,b,c){var d,e,f,g,h=a.byteLength;if(b=b||0,c=c||h,a.slice)return a.slice(b,c);if(b<0&&(b+=h),c<0&&(c+=h),c>h&&(c=h),b>=h||b>=c||0===h)return new ArrayBuffer(0);for(d=new Uint8Array(a),e=new Uint8Array(c-b),f=b,g=0;f<c;f++,g++)e[g]=d[f];return e.buffer}},{}],58:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;c<e;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h,i,j=.75*b.length,k=b.length,l=0;for("="===b[b.length-1]&&(j--,"="===b[b.length-2]&&j--),h=new ArrayBuffer(j),i=new Uint8Array(h),c=0;c<k;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),i[l++]=d<<2|e>>4,i[l++]=(15&e)<<4|f>>2,i[l++]=(3&f)<<6|63&g;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],59:[function(a,b,c){(function(a){function c(a){var b,c,d,e;for(b=0;b<a.length;b++)c=a[b],c.buffer instanceof ArrayBuffer&&(d=c.buffer,c.byteLength!==d.byteLength&&(e=new Uint8Array(c.byteLength),e.set(new Uint8Array(d,c.byteOffset,c.byteLength)),d=e.buffer),a[b]=d)}function d(a,b){var d,e;for(b=b||{},d=new f,c(a),e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}function e(a,b){return c(a),new Blob(a,b||{})}var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,g=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(b){return!1}}(),h=g&&function(){try{var a=new Blob([new Uint8Array([1,2])]);return 2===a.size}catch(b){return!1}}(),i=f&&f.prototype.append&&f.prototype.getBlob;b.exports=function(){return g?h?a.Blob:e:i?d:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(a,b,c){(function(c){function d(a){function b(a){var d,f;if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a(61);b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{61:61}],61:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{34:34}],62:[function(a,b,c){(function(a){!function(d){function e(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=n(b>>>10&1023|55296),b=56320|1023&b),e+=n(b);return e}function g(a){if(a>=55296&&a<=57343)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value")}function h(a,b){return n(a>>b&63|128)}function i(a){if(0==(4294967168&a))return n(a);var b="";return 0==(4294965248&a)?b=n(a>>6&31|192):0==(4294901760&a)?(g(a),b=n(a>>12&15|224),b+=h(a,6)):0==(4292870144&a)&&(b=n(a>>18&7|240),b+=h(a,12),b+=h(a,6)),b+=n(63&a|128)}function j(a){for(var b,c=e(a),d=c.length,f=-1,g="";++f<d;)b=c[f],g+=i(b);return g}function k(){if(q>=p)throw Error("Invalid byte index");var a=255&o[q];if(q++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function l(){var a,b,c,d,e;if(q>p)throw Error("Invalid byte index");if(q==p)return!1;if(a=255&o[q],q++,0==(128&a))return a;if(192==(224&a)){if(b=k(),e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=k(),c=k(),e=(15&a)<<12|b<<6|c,e>=2048)return g(e),e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=k(),c=k(),d=k(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&e<=1114111))return e;throw Error("Invalid UTF-8 detected")}function m(a){var b,c;for(o=e(a),p=o.length,q=0,b=[];(c=l())!==!1;)b.push(c);return f(b)}var n,o,p,q,r,s,t,u,v="object"==typeof c&&c,w="object"==typeof b&&b&&b.exports==v&&b,x="object"==typeof a&&a;if(x.global!==x&&x.window!==x||(d=x),n=String.fromCharCode,r={version:"2.0.0",encode:j,decode:m},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return r});else if(v&&!v.nodeType)if(w)w.exports=r;else{s={},t=s.hasOwnProperty;for(u in r)t.call(r,u)&&(v[u]=r[u])}else d.utf8=r}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],63:[function(a,b,c){try{b.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(d){b.exports=!1}},{}],64:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(a,b,c){c.encode=function(a){var b,c="";for(b in a)a.hasOwnProperty(b)&&(c.length&&(c+="&"),c+=encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return c},c.decode=function(a){var b,c,d,e={},f=a.split("&");for(b=0,c=f.length;b<c;b++)d=f[b].split("="),e[decodeURIComponent(d[0])]=decodeURIComponent(d[1]);return e}},{}],66:[function(a,b,c){"use strict";function d(a){var b="";do b=h[a%i]+b,a=Math.floor(a/i);while(a>0);return b}function e(a){var b=0;for(l=0;l<a.length;l++)b=b*i+j[a.charAt(l)];return b}function f(){var a=d(+new Date);return a!==g?(k=0,g=a):a+"."+d(k++)}for(var g,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,j={},k=0,l=0;l<i;l++)j[h[l]]=l;f.encode=d,f.decode=e,b.exports=f},{}],67:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],68:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b,c,f,g=a,h=a.indexOf("["),i=a.indexOf("]");for(h!=-1&&i!=-1&&(a=a.substring(0,h)+a.substring(h,i).replace(/:/g,";")+a.substring(i,a.length)),b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return h!=-1&&i!=-1&&(c.source=g,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c}},{}],69:[function(a,b,c){function d(a,b){var c,d=[];for(b=b||0,c=b||0;c<a.length;c++)d[c-b]=a[c];return d}b.exports=d},{}],70:[function(a,b,c){(function(b){var d=a(74),e=a(72);c.deconstructPacket=function(a){function b(a){var f,g,h,i;if(!a)return a;if(e(a))return f={_placeholder:!0,num:c.length},c.push(a),f;if(d(a)){for(g=Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){g={};for(i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){var e,f,g;if(a&&a._placeholder)return e=b[a.num];if(d(a)){for(f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){var k,l,m;if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File)g++,k=new FileReader,k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a);else if(d(a))for(l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{72:72,74:74}],71:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,c.BINARY_EVENT!=a.type&&c.BINARY_ACK!=a.type||(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b,d,e,f={},g=0;if(f.type=+a.charAt(0),
null==c.types[f.type])return j();if(c.BINARY_EVENT==f.type||c.BINARY_ACK==f.type){for(b="";"-"!=a.charAt(++g)&&(b+=a.charAt(g),g!=a.length););if(b!=+b||"-"!=a.charAt(g))throw Error("Illegal attachments");f.attachments=+b}if("/"==a.charAt(g+1))for(f.nsp="";++g&&(d=a.charAt(g),","!=d)&&(f.nsp+=d,g!=a.length););else f.nsp="/";if(e=a.charAt(g+1),""!==e&&+e==e){for(f.id="";++g;){if(d=a.charAt(g),null==d||+d!=d){--g;break}if(f.id+=a.charAt(g),g==a.length)break}f.id=+f.id}if(a.charAt(++g))try{f.data=l.parse(a.substr(g))}catch(h){return j()}return k("decoded %s as %j",a,f),f}function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}var k=a(30)("socket.io-parser"),l=a(75),m=(a(74),a(73)),n=a(70),o=a(72);c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw Error("Unknown type: "+a);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{30:30,70:70,72:72,73:73,74:74,75:75}],72:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],73:[function(a,b,c){arguments[4][52][0].apply(c,arguments)},{52:52}],74:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{34:34}],75:[function(a,b,c){(function(a){(function(){function d(a,b){function c(a){var d,g,i,j,k,l,m;if(c[a]!==s)return c[a];if("bug-string-char-index"==a)d="a"!="a"[0];else if("json"==a)d=c("json-stringify")&&c("json-parse");else{if(i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',"json-stringify"==a){if(j=b.stringify,k="function"==typeof j&&t){(g=function(){return 1}).toJSON=g;try{k="0"===j(0)&&"0"===j(new e)&&'""'==j(new f)&&j(p)===s&&j(s)===s&&j()===s&&"1"===j(g)&&"[1]"==j([g])&&"[null]"==j([s])&&"null"==j(null)&&"[null,null,null]"==j([s,p,null])&&j({a:[g,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===j(null,g)&&"[\n 1,\n 2\n]"==j([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==j(new h((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==j(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==j(new h((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==j(new h((-1)))}catch(n){k=!1}}d=k}if("json-parse"==a){if(l=b.parse,"function"==typeof l)try{if(0===l("0")&&!l(!1)&&(g=l(i),m=5==g.a.length&&1===g.a[0])){try{m=!l('"\t"')}catch(n){}if(m)try{m=1!==l("01")}catch(n){}if(m)try{m=1!==l("1.")}catch(n){}}}catch(n){m=!1}d=m}}return c[a]=!!d}var e,f,g,h,i,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;a||(a=l.Object()),b||(b=l.Object()),e=a.Number||l.Number,f=a.String||l.String,g=a.Object||l.Object,h=a.Date||l.Date,i=a.SyntaxError||l.SyntaxError,k=a.TypeError||l.TypeError,m=a.Math||l.Math,n=a.JSON||l.JSON,"object"==typeof n&&n&&(b.stringify=n.stringify,b.parse=n.parse),o=g.prototype,p=o.toString,t=new h((-0xc782b5b800cec));try{t=t.getUTCFullYear()==-109252&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(T){}return c("json")||(u="[object Function]",v="[object Date]",w="[object Number]",x="[object String]",y="[object Array]",z="[object Boolean]",A=c("bug-string-char-index"),t||(B=m.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],D=function(a,b){return C[b]+365*(a-1970)+B((a-1969+(b=+(b>1)))/4)-B((a-1901+b)/100)+B((a-1601+b)/400)}),(q=o.hasOwnProperty)||(q=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=p?q=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,q=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,q.call(this,a)}),r=function(a,b){var c,d,e,f=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(e in d)q.call(d,e)&&f++;return c=d=null,f?r=2==f?function(a,b){var c,d={},e=p.call(a)==u;for(c in a)e&&"prototype"==c||q.call(d,c)||!(d[c]=1)||!q.call(a,c)||b(c)}:function(a,b){var c,d,e=p.call(a)==u;for(c in a)e&&"prototype"==c||!q.call(a,c)||(d="constructor"===c)||b(c);(d||q.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(a,b){var c,e,f=p.call(a)==u,g=!f&&"function"!=typeof a.constructor&&j[typeof a.hasOwnProperty]&&a.hasOwnProperty||q;for(c in a)f&&"prototype"==c||!g.call(a,c)||b(c);for(e=d.length;c=d[--e];g.call(a,c)&&b(c));}),r(a,b)},c("json-stringify")||(E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},F="000000",G=function(a,b){return(F+(b||0)).slice(-a)},H="\\u00",I=function(a){for(var b,c='"',d=0,e=a.length,f=!A||e>10,g=f&&(A?a.split(""):a);d<e;d++)switch(b=a.charCodeAt(d)){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=E[b];break;default:if(b<32){c+=H+G(2,b.toString(16));break}c+=f?g[d]:a.charAt(d)}return c+'"'},J=function(a,b,c,d,e,f,g){var h,i,j,l,m,n,o,t,u,A,C,E,F,H,K,L;try{h=b[a]}catch(M){}if("object"==typeof h&&h)if(i=p.call(h),i!=v||q.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=w&&i!=x&&i!=y||q.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&h<1/0){if(D){for(m=B(h/864e5),j=B(m/365.2425)+1970-1;D(j+1,0)<=m;j++);for(l=B((m-D(j,0))/30.42);D(j,l+1)<=m;l++);m=1+m-D(j,l),n=(h%864e5+864e5)%864e5,o=B(n/36e5)%24,t=B(n/6e4)%60,u=B(n/1e3)%60,A=n%1e3}else j=h.getUTCFullYear(),l=h.getUTCMonth(),m=h.getUTCDate(),o=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),A=h.getUTCMilliseconds();h=(j<=0||j>=1e4?(j<0?"-":"+")+G(6,j<0?-j:j):G(4,j))+"-"+G(2,l+1)+"-"+G(2,m)+"T"+G(2,o)+":"+G(2,t)+":"+G(2,u)+"."+G(3,A)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if(i=p.call(h),i==z)return""+h;if(i==w)return h>-1/0&&h<1/0?""+h:"null";if(i==x)return I(""+h);if("object"==typeof h){for(H=g.length;H--;)if(g[H]===h)throw k();if(g.push(h),C=[],K=f,f+=e,i==y){for(F=0,H=h.length;F<H;F++)E=J(F,h,c,d,e,f,g),C.push(E===s?"null":E);L=C.length?e?"[\n"+f+C.join(",\n"+f)+"\n"+K+"]":"["+C.join(",")+"]":"[]"}else r(d||h,function(a){var b=J(a,h,c,d,e,f,g);b!==s&&C.push(I(a)+":"+(e?" ":"")+b)}),L=C.length?e?"{\n"+f+C.join(",\n"+f)+"\n"+K+"}":"{"+C.join(",")+"}":"{}";return g.pop(),L}},b.stringify=function(a,b,c){var d,e,f,g,h,i,k;if(j[typeof b]&&b)if((g=p.call(b))==u)e=b;else if(g==y)for(f={},h=0,i=b.length;h<i;k=b[h++],g=p.call(k),(g==x||g==w)&&(f[k]=1));if(c)if((g=p.call(c))==w){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else g==x&&(d=c.length<=10?c:c.slice(0,10));return J("",(k={},k[""]=a,k),e,f,d,"",[])}),c("json-parse")||(K=f.fromCharCode,L={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},O=function(){throw M=N=null,i()},P=function(){for(var a,b,c,d,e,f=N,g=f.length;M<g;)switch(e=f.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=A?f.charAt(M):f[M],M++,a;case 34:for(a="@",M++;M<g;)if(e=f.charCodeAt(M),e<32)O();else if(92==e)switch(e=f.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=L[e],M++;break;case 117:for(b=++M,c=M+4;M<c;M++)e=f.charCodeAt(M),e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||O();a+=K("0x"+f.slice(b,M));break;default:O()}else{if(34==e)break;for(e=f.charCodeAt(M),b=M;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++M);a+=f.slice(b,M)}if(34==f.charCodeAt(M))return M++,a;O();default:if(b=M,45==e&&(d=!0,e=f.charCodeAt(++M)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(M+1),e>=48&&e<=57)&&O(),d=!1;M<g&&(e=f.charCodeAt(M),e>=48&&e<=57);M++);if(46==f.charCodeAt(M)){for(c=++M;c<g&&(e=f.charCodeAt(c),e>=48&&e<=57);c++);c==M&&O(),M=c}if(e=f.charCodeAt(M),101==e||69==e){for(e=f.charCodeAt(++M),43!=e&&45!=e||M++,c=M;c<g&&(e=f.charCodeAt(c),e>=48&&e<=57);c++);c==M&&O(),M=c}return+f.slice(b,M)}if(d&&O(),"true"==f.slice(M,M+4))return M+=4,!0;if("false"==f.slice(M,M+5))return M+=5,!1;if("null"==f.slice(M,M+4))return M+=4,null;O()}return"$"},Q=function(a){var b,c;if("$"==a&&O(),"string"==typeof a){if("@"==(A?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=P(),"]"!=a;c||(c=!0))c&&(","==a?(a=P(),"]"==a&&O()):O()),","==a&&O(),b.push(Q(a));return b}if("{"==a){for(b={};a=P(),"}"!=a;c||(c=!0))c&&(","==a?(a=P(),"}"==a&&O()):O()),","!=a&&"string"==typeof a&&"@"==(A?a.charAt(0):a[0])&&":"==P()||O(),b[a.slice(1)]=Q(P());return b}O()}return a},R=function(a,b,c){var d=S(a,b,c);d===s?delete a[b]:a[b]=d},S=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(p.call(e)==y)for(d=e.length;d--;)R(e,d,c);else r(e,function(a){R(e,a,c)});return c.call(a,b,e)},b.parse=function(a,b){var c,d;return M=0,N=""+a,c=Q(P()),"$"!=P()&&O(),M=N=null,b&&p.call(b)==u?S((d={},d[""]=c,d),"",b):c})),b.runInContext=d,b}var e,f,g,h,i="function"==typeof define&&define.amd,j={"function":!0,object:!0},k=j[typeof c]&&c&&!c.nodeType&&c,l=j[typeof window]&&window||this,m=k&&j[typeof b]&&b&&!b.nodeType&&"object"==typeof a&&a;!m||m.global!==m&&m.window!==m&&m.self!==m||(l=m),k&&!i?d(l,k):(e=l.JSON,f=l.JSON3,g=!1,h=d(l,l.JSON3={noConflict:function(){return g||(g=!0,l.JSON=e,l.JSON3=f,e=f=null),h}}),l.JSON={parse:h.parse,stringify:h.stringify}),i&&define(function(){return h})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],76:[function(a,b,c){(function(a){"undefined"!=typeof window?b.exports=window:void 0!==a?b.exports=a:"undefined"!=typeof self?b.exports=self:b.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],77:[function(a,b,c){function d(a){var b=e.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=d;var e=Object.prototype.toString},{}],78:[function(a,b,c){function d(a,b,c){if(!j(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===h.call(a)?e(a,b,c):"string"==typeof a?f(a,b,c):g(a,b,c)}function e(a,b,c){for(var d=0,e=a.length;d<e;d++)i.call(a,d)&&b.call(c,a[d],d,a)}function f(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a.charAt(d),d,a)}function g(a,b,c){for(var d in a)i.call(a,d)&&b.call(c,a[d],d,a)}var h,i,j=a(77);b.exports=d,h=Object.prototype.toString,i=Object.prototype.hasOwnProperty},{77:77}],79:[function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}c=b.exports=d,c.left=function(a){return a.replace(/^\s*/,"")},c.right=function(a){return a.replace(/\s*$/,"")}},{}],80:[function(a,b,c){var d=a(79),e=a(78),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports=function(a){if(!a)return{};var b={};return e(d(a).split("\n"),function(a){var c=a.indexOf(":"),e=d(a.slice(0,c)).toLowerCase(),g=d(a.slice(c+1));void 0===b[e]?b[e]=g:f(b[e])?b[e].push(g):b[e]=[b[e],g]}),b}},{78:78,79:79}],81:[function(a,b,c){function d(){var a,b,c,d={};for(a=0;a<arguments.length;a++){b=arguments[a];for(c in b)e.call(b,c)&&(d[c]=b[c])}return d}b.exports=d;var e=Object.prototype.hasOwnProperty},{}],82:[function(a,b,c){b.exports={"private":!0,name:"solarcrusaders",version:"0.3.2-alpha.6",description:"Solar Crusaders is a multiplayer top-down strategy game featuring a sandbox universe, base building, and exploration.",author:"Oliver J Dyla",contributors:[],dependencies:{colors:"1.1.x",minimist:"1.2.x",nconf:"0.8.x",daemon:"1.1.x",async:"1.5.x",winston:"2.2.x","logrotate-stream":"0.2.x",validator:"5.1.x",passport:"0.3.x","passport-local":"1.0.x",bcryptjs:"2.3.0",xregexp:"3.1.x",uuid:"2.0.x",caminte:"0.2.x",express:"4.13.x","express-session":"1.13.x","express-subdomain":"1.0.x","cookie-parser":"1.4.x",compression:"1.6.x","serve-favicon":"2.3.x","body-parser":"1.14.x",jade:"1.11.x",redis:"2.5.x","connect-redis":"3.0.x","socket.io":"1.4.x","socket.io-express-session":"0.1.x","socket.io-events":"0.4.x",ws:"1.1.x",stripe:"4.5.x",xhr:"2.2.x",earcut:"2.1.x",eventemitter3:"1.2.x","bit-twiddle":"1.0.x","object-assign":"4.0.x","resource-loader":"1.6.x",ismobilejs:"git+https://github.com/kaimallea/isMobile.git","pixi-gl-core":"git+https://github.com/pixijs/pixi-gl-core.git"},devDependencies:{grunt:"0.4.x","grunt-develop":"0.4.x","grunt-browserify":"5.0.x","grunt-node-inspector":"0.4.x","grunt-contrib-concat":"1.0.x","grunt-contrib-watch":"1.0.x","grunt-contrib-uglify":"1.0.x","grunt-contrib-compress":"1.1.x","grunt-contrib-cssmin":"1.0.x",glslify:"5.0.x","browserify-versionify":"1.0.x","bundle-collapser":"1.2.x","babel-preset-es2015":"6.9.x",babelify:"7.3.x"}}},{}],83:[function(a,b,c){function d(a,b,c,d,f,g,h){void 0===h&&(h=!1),this.game=a,this.name=c,this.parent=b,this._frameData=d,this._frames=[],this._frames=this._frames.concat(f),this.delay=1e3/g,this.loop=h,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.game.on("game/pause",this.onPause,this),this.game.on("game/resume",this.onResume,this),e.call(this)}var e=a(3);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.play=function(a,b,c){return"number"==typeof a&&(this.delay=1e3/a),"boolean"==typeof b&&(this.loop=b),void 0!==c&&(this.killOnComplete=c),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.updateCurrentFrame(!0),this.emit("start",this.parent,this),this.parent.emit("animationStart",this),this.parent.animations.currentAnim=this,this.parent.animations.currentFrame=this.currentFrame,this},d.prototype.restart=function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.clock.time,this._timeNextFrame=this.game.clock.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.parent.setFrame(this.currentFrame),this.emit("start",this.parent,this),this.parent.emit("animationStart",this),this.parent.animations.currentAnim=this,this.parent.animations.currentFrame=this.currentFrame},d.prototype.setFrame=function(a,b){var c,d;if(void 0===b&&(b=!1),"string"==typeof a)for(d=0;d<this._frames.length;d++)this._frameData.getFrame(this._frames[d]).name===a&&(c=d);else if("number"==typeof a)if(b)c=a;else for(d=0;d<this._frames.length;d++)this._frames[d]===c&&(c=d);c&&(this._frameIndex=c-1,this._timeNextFrame=this.game.clock.time,this.update())},d.prototype.stop=function(a,b){void 0===a&&(a=!1),void 0===b&&(b=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,a&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this.parent.setFrame(this.currentFrame)),b&&(this.parent.emit("animationComplete",this),this.emit("complete",this.parent,this))},d.prototype.onPause=function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.clock.time)},d.prototype.onResume=function(){this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this._frameDiff)},d.prototype.update=function(){return!this.isPaused&&(!!(this.isPlaying&&this.game.clock.time>=this._timeNextFrame)&&(this._frameSkip=1,this._frameDiff=this.game.clock.time-this._timeNextFrame,this._timeLastFrame=this.game.clock.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.clock.time+(this.delay-this._frameDiff),this._frameIndex+=this._frameSkip,this._frameIndex>=this._frames.length?this.loop?(this._frameIndex%=this._frames.length,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this.parent.setFrame(this.currentFrame),this.loopCount++,!0):(this.complete(),!1):this.updateCurrentFrame()))},d.prototype.updateCurrentFrame=function(a){if(void 0===a&&(a=!1),!this._frameData)return!1;var b=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(a||!a&&b!==this.currentFrame.index)&&this.parent.setFrame(this.currentFrame),!0},d.prototype.next=function(a){void 0===a&&(a=1);var b=this._frameIndex+a;b>=this._frames.length&&(this.loop?b%=this._frames.length:b=this._frames.length-1),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame())},d.prototype.previous=function(a){void 0===a&&(a=1);var b=this._frameIndex-a;b<0&&(this.loop?b=this._frames.length+b:b++),b!==this._frameIndex&&(this._frameIndex=b,this.updateCurrentFrame())},d.prototype.updateFrameData=function(a){this._frameData=a,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},d.prototype.destroy=function(){this._frameData&&(this.game=null,this.parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.removeAllListeners())},d.prototype.complete=function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this.parent.on("animationComplete",this),this.on("complete",this.parent,this),this.killOnComplete&&this.parent.kill()},Object.defineProperty(d.prototype,"paused",{get:function(){return this.isPaused},set:function(a){this.isPaused=a,a?this._pauseStartTime=this.game.clock.time:this.isPlaying&&(this._timeNextFrame=this.game.clock.time+this.delay)}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(d.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(a){this.currentFrame=this._frameData.getFrame(this._frames[a]),null!==this.currentFrame&&(this._frameIndex=a,this.parent.setFrame(this.currentFrame))}}),Object.defineProperty(d.prototype,"speed",{get:function(){return Math.round(1e3/this.delay)},set:function(a){a>=1&&(this.delay=1e3/a)}}),d.generateFrameNames=function(a,b,c,d){var e,f,g;if(void 0===d&&(d=""),e=[],f="",b<c)for(g=b;g<=c;g++)f=a+(""+g)+d,e.push(f);else for(g=b;g>=c;g--)f=a+(""+g)+d,e.push(f);return e},b.exports=d},{3:3}],84:[function(a,b,c){function d(a){this.sprite=a,this.game=a.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]}var e=a(83);d.prototype={loadFrameData:function(a,b){if(void 0===a)return!1;if(this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(a);return this._frameData=a,void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},copyFrameData:function(a,b){if(this._frameData=a.clone(),this.isLoaded)for(var c in this._anims)this._anims[c].updateFrameData(this._frameData);return void 0===b||null===b?this.frame=0:"string"==typeof b?this.frameName=b:this.frame=b,this.isLoaded=!0,!0},add:function(a,b,c,d,f){return b=b||[],c=c||60,void 0===d&&(d=!1),void 0===f&&(f=!(!b||"number"!=typeof b[0])),this._outputFrames=[],this._frameData.getFrameIndexes(b,f,this._outputFrames),this._anims[a]=new e(this.game,this.sprite,a,this._frameData,this._outputFrames,c,d),this.currentAnim=this._anims[a],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[a]},validateFrames:function(a,b){void 0===b&&(b=!0);for(var c=0;c<a.length;c++)if(b===!0){if(a[c]>this._frameData.total)return!1}else if(this._frameData.checkFrameName(a[c])===!1)return!1;return!0},play:function(a,b,c,d){if(this._anims[a])return this.currentAnim===this._anims[a]?this.currentAnim.isPlaying===!1?(this.currentAnim.paused=!1,this.currentAnim.play(b,c,d)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[a],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(b,c,d))},stop:function(a,b){void 0===b&&(b=!1),!this.currentAnim||"string"==typeof a&&a!==this.currentAnim.name||this.currentAnim.stop(b)},update:function(){return!(this.updateIfVisible&&!this.sprite.visible)&&(!(!this.currentAnim||!this.currentAnim.update())&&(this.currentFrame=this.currentAnim.currentFrame,!0))},next:function(a){this.currentAnim&&(this.currentAnim.next(a),this.currentFrame=this.currentAnim.currentFrame)},previous:function(a){this.currentAnim&&(this.currentAnim.previous(a),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(a){return"string"==typeof a&&this._anims[a]?this._anims[a]:null},refreshFrame:function(){console.warn("refreshFrame is not implemented, see engine/animation/AnimationManager")},destroy:function(){var a=null;for(a in this._anims)this._anims.hasOwnProperty(a)&&this._anims[a].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(d.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(d.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(a){this.currentAnim.paused=a}}),Object.defineProperty(d.prototype,"name",{get:function(){if(this.currentAnim)return this.currentAnim.name}}),Object.defineProperty(d.prototype,"frame",{get:function(){if(this.currentFrame)return this.currentFrame.index},set:function(a){"number"==typeof a&&this._frameData&&null!==this._frameData.getFrame(a)&&(this.currentFrame=this._frameData.getFrame(a),this.currentFrame&&this.sprite.setFrame(this.currentFrame)),"string"==typeof a&&this._frameData&&null!==this._frameData.getFrame(a)&&(this.currentFrame=this._frameData.getFrameByName(a),this.currentFrame&&this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(d.prototype,"frameName",{get:function(){if(this.currentFrame)return this.currentFrame.name},set:function(a){"string"==typeof a&&this._frameData&&null!==this._frameData.getFrameByName(a)?(this.currentFrame=this._frameData.getFrameByName(a),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame))):console.warn("Cannot set frameName: "+a)}}),b.exports=d},{83:83}],85:[function(a,b,c){var d=a(86),e=a(87);AnimationParser={spriteSheet:function(a,b,c,f,g,h,i){var j,k,l,m,n,o,p,q,r,s=b;if("string"==typeof b&&(s=a.cache.getImage(b)),null===s)return null;if(j=s.width,k=s.height,c<=0&&(c=Math.floor(-j/Math.min(-1,c))),f<=0&&(f=Math.floor(-k/Math.min(-1,f))),l=Math.floor((j-h)/(c+i)),m=Math.floor((k-h)/(f+i)),n=l*m,g!==-1&&(n=g),0===j||0===k||j<c||k<f||0===n)return console.warn("AnimationParser.spriteSheet: '"+b+"'s width/height zero or width/height < given frameWidth/frameHeight"),null;for(o=new e,p=h,q=h,r=0;r<n;r++)o.addFrame(new d(r,p,q,c,f,"")),p+=c+i,p+c>j&&(p=h,q+=f+i);return o},JSONData:function(a,b){var c,f,g,h;if(!b.frames)return console.warn("AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),void console.log(b);for(c=new e,f=b.frames,h=0;h<f.length;h++)g=c.addFrame(new d(h,f[h].frame.x,f[h].frame.y,f[h].frame.w,f[h].frame.h,f[h].filename)),f[h].trimmed&&g.setTrim(f[h].trimmed,f[h].sourceSize.w,f[h].sourceSize.h,f[h].spriteSourceSize.x,f[h].spriteSourceSize.y,f[h].spriteSourceSize.w,f[h].spriteSourceSize.h);return c},JSONDataHash:function(a,b){var c,f,g,h,i;if(!b.frames)return console.warn("AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),void console.log(b);c=new e,f=b.frames,h=0;for(i in f)g=c.addFrame(new d(h,f[i].frame.x,f[i].frame.y,f[i].frame.w,f[i].frame.h,i)),f[i].trimmed&&g.setTrim(f[i].trimmed,f[i].sourceSize.w,f[i].sourceSize.h,f[i].spriteSourceSize.x,f[i].spriteSourceSize.y,f[i].spriteSourceSize.w,f[i].spriteSourceSize.h),h++;return c}},b.exports=AnimationParser},{86:86,87:87}],86:[function(a,b,c){(function(c){function d(a,b,d,e,g,h){this.index=a,this.x=b,this.y=d,this.width=e,this.height=g,this.name=h,this.centerX=c.Math.floor(e/2),this.centerY=c.Math.floor(g/2),this.distance=f.distance(0,0,e,g),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=e,this.sourceSizeH=g,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height}var e=a(127),f=a(160);d.prototype={resize:function(a,b){this.width=a,this.height=b,this.centerX=c.Math.floor(a/2),this.centerY=c.Math.floor(b/2),this.distance=f.distance(0,0,a,b),this.sourceSizeW=a,this.sourceSizeH=b,this.right=this.x+a,this.bottom=this.y+b},setTrim:function(a,b,d,e,f,g,h){this.trimmed=a,a&&(this.sourceSizeW=b,this.sourceSizeH=d,this.centerX=c.Math.floor(b/2),this.centerY=c.Math.floor(d/2),this.spriteSourceSizeX=e,this.spriteSourceSizeY=f,this.spriteSourceSizeW=g,this.spriteSourceSizeH=h)},clone:function(){var a,b=new d(this.index,this.x,this.y,this.width,this.height,this.name);for(a in this)this.hasOwnProperty(a)&&(b[a]=this[a]);return b},getRect:function(a){return void 0===a?a=new e(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a}},d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{127:127,160:160}],87:[function(a,b,c){function d(){this._frames=[],this._frameNames=[]}d.prototype={addFrame:function(a){return a.index=this._frames.length,this._frames.push(a),""!==a.name&&(this._frameNames[a.name]=a.index),a},getFrame:function(a){return a>=this._frames.length&&(a=0),this._frames[a]},getFrameByName:function(a){return"number"==typeof this._frameNames[a]?this._frames[this._frameNames[a]]:null},checkFrameName:function(a){return null!=this._frameNames[a]},clone:function(){var a,b,c=new d;for(a=0;a<this._frames.length;a++)c._frames.push(this._frames[a].clone());for(b in this._frameNames)this._frameNames.hasOwnProperty(b)&&c._frameNames.push(this._frameNames[b]);return c},getFrameRange:function(a,b,c){void 0===c&&(c=[]);for(var d=a;d<=b;d++)c.push(this._frames[d]);return c},getFrames:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d]);else for(d=0;d<a.length;d++)b?c.push(this.getFrame(a[d])):c.push(this.getFrameByName(a[d]));return c},getFrameIndexes:function(a,b,c){var d;if(void 0===b&&(b=!0),void 0===c&&(c=[]),void 0===a||0===a.length)for(d=0;d<this._frames.length;d++)c.push(this._frames[d].index);else for(d=0;d<a.length;d++)b?c.push(this._frames[a[d]].index):this.getFrameByName(a[d])&&c.push(this.getFrameByName(a[d]).index);return c},destroy:function(){this._frames=null,this._frameNames=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"total",{get:function(){return this._frames.length}}),b.exports=d},{}],88:[function(a,b,c){var d={VERSION:a(82).version,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,TILEMAPSPRITE:27,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,FONT:18,POINTER:19,STRIP:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,Loader:{TEXTURE_ATLAS_JSON_ARRAY:0,TEXTURE_ATLAS_JSON_HASH:1,TEXTURE_ATLAS_XML_STARLING:2},BlendMode:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16}};b.exports=d},{82:82}],89:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0}d.prototype={start:function(a,b){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},stop:function(a,b){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.event=a,this.value=b,a&&(this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.ctrlKey=a.ctrlKey))},reset:function(){this.timeDown=this.game.clock.time,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.parent=null,this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),b.exports=d},{}],90:[function(a,b,c){function d(a){this.game=a,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.pollRate=1,this.enabled=!0,this.multiInputOverride=d.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.defaultCursor="auto",this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.minPriorityID=0,this.resetLocked=!1,this.interactiveItems=new k,this._pollCounter=0,this._oldPosition=null,this._localPoint=new j,this._x=0,this._y=0,g.call(this)}var e=a("pixi"),f=a(95),g=a(3),h=a(94),i=a(93),j=a(126),k=a(156);d.MOUSE_OVERRIDES_TOUCH=0,d.TOUCH_OVERRIDES_MOUSE=1,d.MOUSE_TOUCH_COMBINE=2,d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.mousePointer=new f(this.game,0,f.MODE.CURSOR),this.mouse=new h(this.game),this.keyboard=new i(this.game),this.keyboard.addCallbacks(this,function(a,b){this.emit("keydown",a,b)},function(a,b){this.emit("keyup",a,b)},function(a,b){this.emit("keypress",a,b)}),this.scale=new j(1,1),this.speed=new j,this.position=new j,this._oldPosition=new j,this.activePointer=this.mousePointer,this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.mousePointer.active=!0,this.keyboard.start();var a=this;this._onClickTrampoline=function(b){a.onClickTrampoline(b)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},d.prototype.destroy=function(){this.mouse.stop(),this.keyboard.stop(),this.moveCallbacks=[],this.game.canvas.removeEventListener("click",this._onClickTrampoline)},d.prototype.addMoveCallback=function(a,b){this.moveCallbacks.push({callback:a,context:b})},d.prototype.deleteMoveCallback=function(a,b){for(var c=this.moveCallbacks.length;c--;)if(this.moveCallbacks[c].callback===a&&this.moveCallbacks[c].context===b)return void this.moveCallbacks.splice(c,1)},d.prototype.update=function(){return this.keyboard.update(),this.pollRate>0&&this._pollCounter<this.pollRate?void this._pollCounter++:(this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,
this._oldPosition.copyFrom(this.position),this.mousePointer.update(),void(this._pollCounter=0))},d.prototype.reset=function(a){this.game.isBooted&&!this.resetLocked&&(void 0===a&&(a=!1),this.mousePointer.reset(),this.keyboard.reset(a),"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor=this.defaultCursor),a&&(this.removeAllListeners(),this.moveCallbacks=[]),this._pollCounter=0)},d.prototype.resetSpeed=function(a,b){this._oldPosition.setTo(a,b),this.speed.setTo(0,0)},d.prototype.getLocalPosition=function(a,b,c){var d,e;return void 0===c&&(c=new j),d=a.worldTransform,e=1/(d.a*d.d+d.c*-d.b),c.setTo(d.d*e*b.x+-d.c*e*b.y+(d.ty*d.c-d.tx*d.d)*e,d.a*e*b.y+-d.b*e*b.x+(-d.ty*d.a+d.tx*d.b)*e)},d.prototype.hitTest=function(a,b,c){var d,f,g,h,i,j;if(!a.worldVisible)return!1;if(this.getLocalPosition(a,b,this._localPoint),c.copyFrom(this._localPoint),a.hitArea&&a.hitArea.contains)return a.hitArea.contains(this._localPoint.x,this._localPoint.y);if(a instanceof e.Sprite){if(d=a.texture.frame.width,f=a.texture.frame.height,g=-d*a.anchor.x,this._localPoint.x>=g&&this._localPoint.x<g+d&&(h=-f*a.anchor.y,this._localPoint.y>=h&&this._localPoint.y<h+f))return!0}else if(a instanceof e.Graphics)for(i=0;i<a.graphicsData.length;i++)if(j=a.graphicsData[i],j.fill&&j.shape&&j.shape.contains(this._localPoint.x,this._localPoint.y))return!0;return!1},d.prototype.onClickTrampoline=function(){this.activePointer.processClickTrampolines()},Object.defineProperty(d.prototype,"x",{get:function(){return this._x},set:function(a){this._x=Math.floor(a)}}),Object.defineProperty(d.prototype,"y",{get:function(){return this._y},set:function(a){this._y=Math.floor(a)}}),Object.defineProperty(d.prototype,"pollLocked",{get:function(){return this.pollRate>0&&this._pollCounter<this.pollRate}}),Object.defineProperty(d.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(d.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),b.exports=d},{126:126,156:156,3:3,93:93,94:94,95:95,pixi:"pixi"}],91:[function(a,b,c){function d(a){this.sprite=a,this.game=a.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.customCursor="pointer",this.useCustomCursor=!1,this._setCustomCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.scaleLayer=!1,this.dragFromCenter=!1,this.dragStartPoint=new e,this.dragOffset=new e,this.snapPoint=new e,this._dragPoint=new e,this._tempPoint=new e,this._dragPhase=!1,this._wasEnabled=!1,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})}var e=a(126);d.prototype={start:function(a,b){if(void 0===b&&(b=!1),a=a||0,this.enabled===!1){this.game.input.interactiveItems.add(this),this.useCustomCursor=b,this.priorityID=a;for(var c=0;c<1;c++)this._pointerData[c]={id:c,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new e,this.enabled=!0,this._wasEnabled=!0}return this.flagged=!1,this.sprite},reset:function(){this.enabled=!1,this.flagged=!1;for(var a=0;a<1;a++)this._pointerData[a]={id:a,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setCustomCursor&&(this.game.canvas.style.cursor=this.game.input.defaultCursor,this._setCustomCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(a,b,c){return void 0===c&&(c=!0),!(!this.enabled||0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID)&&(!(!c&&(this.pixelPerfectClick||this.pixelPerfectOver))&&(this.priorityID>a||this.priorityID===a&&this.sprite.renderOrderID<b))},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(a){return a=a||0,this._pointerData[a].x},pointerY:function(a){return a=a||0,this._pointerData[a].y},pointerDown:function(a){return a=a||0,this._pointerData[a].isDown},pointerUp:function(a){return a=a||0,this._pointerData[a].isUp},pointerTimeDown:function(a){return a=a||0,this._pointerData[a].timeDown},pointerTimeUp:function(a){return a=a||0,this._pointerData[a].timeUp},pointerOver:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOver;for(var b=0;b<1;b++)if(this._pointerData[b].isOver)return!0}return!1},pointerOut:function(a){if(this.enabled){if(void 0!==a)return this._pointerData[a].isOut;for(var b=0;b<1;b++)if(this._pointerData[b].isOut)return!0}return!1},pointerTimeOver:function(a){return a=a||0,this._pointerData[a].timeOver},pointerTimeOut:function(a){return a=a||0,this._pointerData[a].timeOut},pointerDragged:function(a){return a=a||0,this._pointerData[a].isDragged},checkPointerDown:function(a,b){return!!(a.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible)&&(!!this.game.input.hitTest(this.sprite,a,this._tempPoint)&&(void 0===b&&(b=!1),!(!b&&this.pixelPerfectClick)||this.checkPixel(this._tempPoint.x,this._tempPoint.y)))},checkPointerOver:function(a,b){return!!(this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible)&&(!!this.game.input.hitTest(this.sprite,a,this._tempPoint)&&(void 0===b&&(b=!1),!(!b&&this.pixelPerfectOver)||this.checkPixel(this._tempPoint.x,this._tempPoint.y)))},checkPixel:function(a,b,c){var d;if(this.sprite.texture.baseTexture.source){if(null===a&&null===b&&(this.game.input.getLocalPosition(this.sprite,c,this._tempPoint),a=this._tempPoint.x,b=this._tempPoint.y),0!==this.sprite.anchor.x&&(a-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(b-=-this.sprite.texture.frame.height*this.sprite.anchor.y),a+=this.sprite.texture.frame.x,b+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(a-=this.sprite.texture.trim.x,b-=this.sprite.texture.trim.y,a<this.sprite.texture.orig.x||a>this.sprite.texture.orig.right||b<this.sprite.texture.orig.y||b>this.sprite.texture.orig.bottom))return this._dx=a,this._dy=b,!1;if(this._dx=a,this._dy=b,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,a,b,1,1,0,0,1,1),d=this.game.input.hitContext.getImageData(0,0,1,1),d.data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(a){if(null!==this.sprite&&void 0!==this.sprite.parent)return this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this.draggable&&this._draggedPointerID===a.id?this.updateDrag(a):this._pointerData[a.id].isOver?this.checkPointerOver(a)?(this._pointerData[a.id].x=a.x-this.sprite.x,this._pointerData[a.id].y=a.y-this.sprite.y,!0):(this._pointerOutHandler(a),!1):void 0:(this._pointerOutHandler(a),!1)},_pointerOverHandler:function(a){if(null!==this.sprite){var b,c=this._pointerData[a.id];(c.isOver===!1||a.dirty)&&(b=c.isOver===!1,c.isOver=!0,c.isOut=!1,c.timeOver=this.game.clock.time,c.x=a.x-this.sprite.x,c.y=a.y-this.sprite.y,this.useCustomCursor&&c.isDragged===!1&&(this.game.canvas.style.cursor=this.customCursor,this._setCustomCursor=!0),b&&this.sprite&&this.sprite.emit("inputOver",this.sprite,a))}},_pointerOutHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];b.isOver=!1,b.isOut=!0,b.timeOut=this.game.clock.time,this.useCustomCursor&&b.isDragged===!1&&(this.game.canvas.style.cursor=this.game.input.defaultCursor,this._setCustomCursor=!1),this.sprite&&this.sprite.emit("inputOut",this.sprite,a)}},_touchedHandler:function(a){if(null!==this.sprite){var b=this._pointerData[a.id];if(!b.isDown&&b.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,a))return;b.isDown=!0,b.isUp=!1,b.timeDown=this.game.clock.time,this.sprite&&this.sprite.emit("inputDown",this.sprite,a),a.dirty=!0,this.draggable&&this.isDragged===!1&&this.startDrag(a),this.bringToTop&&this.sprite.bringToTop()}}},_releasedHandler:function(a){var b,c;null!==this.sprite&&(b=this._pointerData[a.id],b.isDown&&a.isUp&&(b.isDown=!1,b.isUp=!0,b.timeUp=this.game.clock.time,b.downDuration=b.timeUp-b.timeDown,c=this.checkPointerOver(a),this.sprite&&(this.sprite.emit("inputUp",this.sprite,a,c),c&&(c=this.checkPointerOver(a))),b.isOver=c,!c&&this.useCustomCursor&&(this.game.canvas.style.cursor=this.game.input.defaultCursor,this._setCustomCursor=!1),a.dirty=!0,this.draggable&&this.isDragged&&this._draggedPointerID===a.id&&this.stopDrag(a)))},_dropHandler:function(a){if(this.drop){this._pointerData[a.id];a.isUp&&this.checkPointerOver(a)&&(a.targetObject.sprite.caught=!0,this.sprite.emit("inputDropped",a.targetObject.sprite,a))}},updateDrag:function(a){var b,c;return a.isUp?(this.stopDrag(a),!1):(b=this.globalToLocalX(a.x)+this._dragPoint.x+this.dragOffset.x,c=this.globalToLocalY(a.y)+this._dragPoint.y+this.dragOffset.y,this.sprite.fixedToCamera?(this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=b),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y))):(this.allowHorizontalDrag&&(this.sprite.x=b),this.allowVerticalDrag&&(this.sprite.y=c),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))),this.sprite.emit("dragUpdate",this.sprite,a,b,c,this.snapPoint),!0)},justOver:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOver&&this.overDuration(a)<b},justOut:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isOut&&this.game.clock.time-this._pointerData[a].timeOut<b},justPressed:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isDown&&this.downDuration(a)<b},justReleased:function(a,b){return a=a||0,b=b||500,this._pointerData[a].isUp&&this.game.clock.time-this._pointerData[a].timeUp<b},overDuration:function(a){return a=a||0,this._pointerData[a].isOver?this.game.clock.time-this._pointerData[a].timeOver:-1},downDuration:function(a){return a=a||0,this._pointerData[a].isDown?this.game.clock.time-this._pointerData[a].timeDown:-1},enableDrop:function(a){this.drop=!0},disableDrop:function(){this.drop=!1},enableDrag:function(a,b,c,d,f,g){void 0===a&&(a=!1),void 0===b&&(b=!1),void 0===c&&(c=!1),void 0===d&&(d=255),void 0===f&&(f=null),void 0===g&&(g=null),this._dragPoint=new e,this.draggable=!0,this.bringToTop=b,this.dragOffset=new e,this.dragFromCenter=a,this.pixelPerfectClick=c,this.pixelPerfectAlpha=d,f&&(this.boundsRect=f),g&&(this.boundsSprite=g)},disableDrag:function(){if(this._pointerData)for(var a=0;a<1;a++)this._pointerData[a].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1},startDrag:function(a){var b,c=this.sprite.x,d=this.sprite.y;this.isDragged=!0,this._draggedPointerID=a.id,this._pointerData[a.id].isDragged=!0,this.sprite.fixedToCamera?this.dragFromCenter?(this.sprite.centerOn(a.x,a.y),this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y)):this._dragPoint.setTo(this.sprite.cameraOffset.x-a.x,this.sprite.cameraOffset.y-a.y):(this.dragFromCenter&&(b=this.sprite.getBounds(),this.sprite.x=this.globalToLocalX(a.x)+(this.sprite.x-b.centerX),this.sprite.y=this.globalToLocalY(a.y)+(this.sprite.y-b.centerY)),this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(a.x),this.sprite.y-this.globalToLocalY(a.y))),this.updateDrag(a),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(c,d),this.sprite.emit("dragStart",this.sprite,a,c,d)},globalToLocalX:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.x,a*=this.game.scale.grid.scaleFluidInversed.x),a},globalToLocalY:function(a){return this.scaleLayer&&(a-=this.game.scale.grid.boundsFluid.y,a*=this.game.scale.grid.scaleFluidInversed.y),a},stopDrag:function(a){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[a.id].isDragged=!1,this._dragPhase=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.emit("dragStop",this.sprite,a),this.checkPointerOver(a)===!1&&this._pointerOutHandler(a)},setDragLock:function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!0),this.allowHorizontalDrag=a,this.allowVerticalDrag=b},enableSnap:function(a,b,c,d,e,f){void 0===c&&(c=!0),void 0===d&&(d=!1),void 0===e&&(e=0),void 0===f&&(f=0),this.snapX=a,this.snapY=b,this.snapOffsetX=e,this.snapOffsetY=f,this.snapOnDrag=c,this.snapOnRelease=d},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},d.prototype.constructor=d,b.exports=d},{126:126}],92:[function(a,b,c){function d(a,b){this.game=a,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=b,this.onHoldCallback=null,this.onHoldContext=null,this._justDown=!1,this._justUp=!1}d.prototype={update:function(){this._enabled&&this.isDown&&(this.duration=this.game.clock.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(a){this._enabled&&(this.event=a,this.isDown||(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.clock.time,this.duration=0,this.repeats=0,this._justDown=!0))},processKeyUp:function(a){this._enabled&&(this.event=a,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=this.game.clock.time-this.timeDown,this._justUp=!0))},reset:function(a){void 0===a&&(a=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.clock.time,this.duration=0,this._enabled=!0,this._justDown=!1,this._justUp=!1,a&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(a){return void 0===a&&(a=50),this.isDown&&this.duration<a},upDuration:function(a){return void 0===a&&(a=50),!this.isDown&&this.game.clock.time-this.timeUp<a}},Object.defineProperty(d.prototype,"justDown",{get:function(){var a=this._justDown;return this._justDown=!1,a}}),Object.defineProperty(d.prototype,"justUp",{get:function(){var a=this._justUp;return this._justUp=!1,a}}),Object.defineProperty(d.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a=!!a,a!==this._enabled&&(a||this.reset(!1),this._enabled=a)}}),d.prototype.constructor=d,b.exports=d},{}],93:[function(a,b,c){(function(c){function d(a){this.game=a,this.enabled=!0,this.event=null,this.pressEvent=null,this.callbackContext=this,this.onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0}var e=a(92);d.prototype={addCallbacks:function(a,b,c,d){this.callbackContext=a,void 0!==b&&null!==b&&(this.onDownCallback=b),void 0!==c&&null!==c&&(this.onUpCallback=c),void 0!==d&&null!==d&&(this.onPressCallback=d)},addKey:function(a){return this._keys[a]||(this._keys[a]=new e(this.game,a),this.addKeyCapture(a)),this._keys[a]},addKeys:function(a){var b,c={};for(b in a)c[b]=this.addKey(a[b]);return c},removeKey:function(a){this._keys[a]&&(this._keys[a]=null,this.removeKeyCapture(a))},createCursorKeys:function(){return this.addKeys({up:d.UP,down:d.DOWN,left:d.LEFT,right:d.RIGHT})},start:function(){if(null===this._onKeyDown){var a=this;this._onKeyDown=function(b){return a.processKeyDown(b)},this._onKeyUp=function(b){return a.processKeyUp(b)},this._onKeyPress=function(b){return a.processKeyPress(b)},c.addEventListener("keydown",this._onKeyDown,!1),c.addEventListener("keyup",this._onKeyUp,!1),c.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){c.removeEventListener("keydown",this._onKeyDown),c.removeEventListener("keyup",this._onKeyUp),c.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(a){if("object"==typeof a)for(var b in a)this._capture[a[b]]=!0;else this._capture[a]=!0},removeKeyCapture:function(a){if("object"==typeof a)for(var b in a)delete this._capture[a[b]];else delete this._capture[a]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyDown(a),this._k=a.keyCode,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,a,c.String.fromCharCode(a.charCode)))},processKeyPress:function(a){this.pressEvent=a,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,a,c.String.fromCharCode(a.charCode))},processKeyUp:function(a){this.event=a,this.game.input.enabled&&this.enabled&&(this._capture[a.keyCode]&&a.preventDefault(),this._keys[a.keyCode]||(this._keys[a.keyCode]=new e(this.game,a.keyCode)),this._keys[a.keyCode].processKeyUp(a),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,a,c.String.fromCharCode(a.charCode)))},reset:function(a){void 0===a&&(a=!0),this.event=null;for(var b=this._keys.length;b--;)this._keys[b]&&this._keys[b].reset(a)},downDuration:function(a,b){return this._keys[a]?this._keys[a].downDuration(b):null},upDuration:function(a,b){return this._keys[a]?this._keys[a].upDuration(b):null},isDown:function(a){return this._keys[a]?this._keys[a].isDown:null}},Object.defineProperty(d.prototype,"lastChar",{get:function(){return 32===this.event.charCode?"":String.fromCharCode(this.pressEvent.charCode)}}),Object.defineProperty(d.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),d.prototype.constructor=d,d.A="A".charCodeAt(0),d.B="B".charCodeAt(0),d.C="C".charCodeAt(0),d.D="D".charCodeAt(0),d.E="E".charCodeAt(0),d.F="F".charCodeAt(0),d.G="G".charCodeAt(0),d.H="H".charCodeAt(0),d.I="I".charCodeAt(0),d.J="J".charCodeAt(0),d.K="K".charCodeAt(0),d.L="L".charCodeAt(0),d.M="M".charCodeAt(0),d.N="N".charCodeAt(0),d.O="O".charCodeAt(0),d.P="P".charCodeAt(0),d.Q="Q".charCodeAt(0),d.R="R".charCodeAt(0),d.S="S".charCodeAt(0),d.T="T".charCodeAt(0),d.U="U".charCodeAt(0),d.V="V".charCodeAt(0),d.W="W".charCodeAt(0),d.X="X".charCodeAt(0),d.Y="Y".charCodeAt(0),d.Z="Z".charCodeAt(0),d.ZERO="0".charCodeAt(0),d.ONE="1".charCodeAt(0),d.TWO="2".charCodeAt(0),d.THREE="3".charCodeAt(0),d.FOUR="4".charCodeAt(0),d.FIVE="5".charCodeAt(0),d.SIX="6".charCodeAt(0),d.SEVEN="7".charCodeAt(0),d.EIGHT="8".charCodeAt(0),d.NINE="9".charCodeAt(0),d.NUMPAD_0=96,d.NUMPAD_1=97,d.NUMPAD_2=98,d.NUMPAD_3=99,d.NUMPAD_4=100,d.NUMPAD_5=101,d.NUMPAD_6=102,d.NUMPAD_7=103,d.NUMPAD_8=104,d.NUMPAD_9=105,d.NUMPAD_MULTIPLY=106,d.NUMPAD_ADD=107,d.NUMPAD_ENTER=108,d.NUMPAD_SUBTRACT=109,d.NUMPAD_DECIMAL=110,d.NUMPAD_DIVIDE=111,d.F1=112,d.F2=113,d.F3=114,d.F4=115,d.F5=116,d.F6=117,d.F7=118,d.F8=119,d.F9=120,d.F10=121,d.F11=122,d.F12=123,d.F13=124,d.F14=125,d.F15=126,d.COLON=186,d.EQUALS=187,d.COMMA=188,d.UNDERSCORE=189,d.PERIOD=190,d.QUESTION_MARK=191,d.TILDE=192,d.OPEN_BRACKET=219,d.BACKWARD_SLASH=220,d.CLOSED_BRACKET=221,d.QUOTES=222,d.BACKSPACE=8,d.TAB=9,d.CLEAR=12,d.ENTER=13,d.SHIFT=16,d.CONTROL=17,d.ALT=18,d.CAPS_LOCK=20,d.ESC=27,d.SPACEBAR=32,d.PAGE_UP=33,d.PAGE_DOWN=34,d.END=35,d.HOME=36,d.LEFT=37,d.UP=38,d.RIGHT=39,d.DOWN=40,d.PLUS=43,d.MINUS=44,d.INSERT=45,d.DELETE=46,d.HELP=47,d.NUM_LOCK=144,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{92:92}],94:[function(a,b,c){(function(c){function d(a){this.game=a,this.input=a.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null}function e(a,b){this._scaleFactor=a,this._deltaMode=b,this.originalEvent=null}var f=a(140),g=a(160);d.NO_BUTTON=-1,d.LEFT_BUTTON=0,d.MIDDLE_BUTTON=1,d.RIGHT_BUTTON=2,d.BACK_BUTTON=3,d.FORWARD_BUTTON=4,d.WHEEL_UP=1,d.WHEEL_DOWN=-1,d.prototype={start:function(){var a,b,d;f.android&&f.chrome===!1||null===this._onMouseDown&&(a=this,this._onMouseDown=function(b){return a.onMouseDown(b)},this._onMouseMove=function(b){return a.onMouseMove(b)},this._onMouseUp=function(b){return a.onMouseUp(b)},this._onMouseUpGlobal=function(b){return a.onMouseUpGlobal(b)},this._onMouseOut=function(b){return a.onMouseOut(b)},this._onMouseOver=function(b){return a.onMouseOver(b)},this._onMouseWheel=function(b){return a.onMouseWheel(b)},b=this.game.canvas,b.addEventListener("mousedown",this._onMouseDown,!0),b.addEventListener("mousemove",this._onMouseMove,!0),b.addEventListener("mouseup",this._onMouseUp,!0),c.addEventListener("mouseup",this._onMouseUpGlobal,!0),b.addEventListener("mouseover",this._onMouseOver,!0),b.addEventListener("mouseout",this._onMouseOut,!0),d=f.wheelEvent,d&&(b.addEventListener(d,this._onMouseWheel,!0),"mousewheel"===d?this._wheelEvent=new e((-.025),1):"DOMMouseScroll"===d&&(this._wheelEvent=new e(1,1))))},onMouseDown:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.start(a))},onMouseMove:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.move(a))},onMouseUp:function(a){this.event=a,this.capture&&a.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseUpGlobal:function(a){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,a),a.identifier=0,this.input.mousePointer.stop(a))},onMouseOut:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,a),this.input.enabled&&this.enabled&&this.stopOnGameOut&&(a.identifier=0,this.input.mousePointer.stop(a))},onMouseOver:function(a){this.event=a,this.capture&&a.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,a)},onMouseWheel:function(a){this._wheelEvent&&(a=this._wheelEvent.bindEvent(a)),this.event=a,this.capture&&a.preventDefault(),this.wheelDelta=g.clamp(-a.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,a)},stop:function(){var a,b=this.game.canvas;b.removeEventListener("mousedown",this._onMouseDown,!0),b.removeEventListener("mousemove",this._onMouseMove,!0),b.removeEventListener("mouseup",this._onMouseUp,!0),b.removeEventListener("mouseover",this._onMouseOver,!0),b.removeEventListener("mouseout",this._onMouseOut,!0),a=f.wheelEvent,a&&b.removeEventListener(a,this._onMouseWheel,!0),c.removeEventListener("mouseup",this._onMouseUpGlobal,!0)}},d.prototype.constructor=d,e.prototype={},e.prototype.constructor=e,e.prototype.bindEvent=function(a){var b,c;if(!e._stubsGenerated&&a){b=function(a){return function(){var b=this.originalEvent[a];return"function"!=typeof b?b:b.bind(this.originalEvent)}};for(c in a)c in e.prototype||Object.defineProperty(e.prototype,c,{get:b(c)});e._stubsGenerated=!0}return this.originalEvent=a,this},Object.defineProperties(e.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{140:140,160:160}],95:[function(a,b,c){(function(c){function d(a,b,h){this.game=a,this.id=b,this.type=e.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.target=null,this.button=null,this.mode=h||d.MODE.CURSOR,this.leftButton=new f(this,d.LEFT_BUTTON),this.middleButton=new f(this,d.MIDDLE_BUTTON),this.rightButton=new f(this,d.RIGHT_BUTTON),this.backButton=new f(this,d.BACK_BUTTON),this.forwardButton=new f(this,d.FORWARD_BUTTON),this.eraserButton=new f(this,d.ERASER_BUTTON),this._holdSent=!1,this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===b,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=c.Number.MAX_VALUE,this.targetObject=null,this.active=!1,this.dirty=!1,this.position=new g,this.positionDown=new g,this.positionUp=new g,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null}var e=a(88),f=a(89),g=a(126),h=a(94);d.NO_BUTTON=0,d.LEFT_BUTTON=1,d.RIGHT_BUTTON=2,d.MIDDLE_BUTTON=4,d.BACK_BUTTON=8,d.FORWARD_BUTTON=16,d.ERASER_BUTTON=32,d.MODE={CURSOR:1,CONTACT:2},d.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(a,b){d.LEFT_BUTTON&a&&this.leftButton.start(b),d.RIGHT_BUTTON&a&&this.rightButton.start(b),d.MIDDLE_BUTTON&a&&this.middleButton.start(b),d.BACK_BUTTON&a&&this.backButton.start(b),d.FORWARD_BUTTON&a&&this.forwardButton.start(b),d.ERASER_BUTTON&a&&this.eraserButton.start(b)},processButtonsUp:function(a,b){a===h.LEFT_BUTTON&&this.leftButton.stop(b),a===h.RIGHT_BUTTON&&this.rightButton.stop(b),a===h.MIDDLE_BUTTON&&this.middleButton.stop(b),a===h.BACK_BUTTON&&this.backButton.stop(b),a===h.FORWARD_BUTTON&&this.forwardButton.stop(b),5===a&&this.eraserButton.stop(b)},updateButtons:function(a){this.button=a.button;var b="down"===a.type.toLowerCase().substr(-4);void 0!==a.buttons?b?this.processButtonsDown(a.buttons,a):this.processButtonsUp(a.button,a):b?this.leftButton.start(a):(this.leftButton.stop(a),this.rightButton.stop(a)),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(b){b.pointerId&&(this.pointerId=b.pointerId),this.identifier=b.identifier,this.target=b.target,this.isMouse?this.updateButtons(b):(this.isDown=!0,this.isUp=!1),this._history=[],this.active=!0,this.withinGame=!0,this.dirty=!1,this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.clock.time-this.timeDown,this.timeDown=this.game.clock.time,this._holdSent=!1,this.move(b,!0),this.positionDown.setTo(this.x,this.y);var c=this.game.input,d=a(90);return(c.multiInputOverride===d.MOUSE_OVERRIDES_TOUCH||c.multiInputOverride===d.MOUSE_TOUCH_COMBINE||c.multiInputOverride===d.TOUCH_OVERRIDES_MOUSE&&0===c.totalActivePointers)&&(c.x=this.x,c.y=this.y,c.position.setTo(this.x,this.y),c.emit("onDown",this,b),c.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){var b,c;this.active&&(b=this.game.input,b.interactiveItems.total>0&&this.processInteractiveObjects(!1),c=a(90),this._holdSent===!1&&this.duration>=b.holdRate&&((b.multiInputOverride===c.MOUSE_OVERRIDES_TOUCH||b.multiInputOverride===c.MOUSE_TOUCH_COMBINE||b.multiInputOverride===c.TOUCH_OVERRIDES_MOUSE&&0===b.totalActivePointers)&&b.emit("onHold",this),this._holdSent=!0),b.recordPointerHistory&&this.game.clock.time>=this._nextDrop&&(this._nextDrop=this.game.clock.time+b.recordRate,
this._history.push({x:this.position.x,y:this.position.y}),this._history.length>b.recordLimit&&this._history.shift()))},move:function(b,c){var d,e,f=this.game.input;if(void 0===c&&(c=!1),!f.pollLocked||c){if(void 0!==b.button&&(this.button=b.button),c&&this.isMouse&&this.updateButtons(b),this.clientX=b.clientX,this.clientY=b.clientY,this.pageX=b.pageX,this.pageY=b.pageY,this.screenX=b.screenX,this.screenY=b.screenY,this.isMouse&&f.mouse.locked&&!c&&(this.rawMovementX=b.movementX||b.mozMovementX||b.webkitMovementX||0,this.rawMovementY=b.movementY||b.mozMovementY||b.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-0)*f.scale.x,this.y=(this.pageY-0)*f.scale.y,this.position.setTo(this.x,this.y),e=a(90),(f.multiInputOverride===e.MOUSE_OVERRIDES_TOUCH||f.multiInputOverride===e.MOUSE_TOUCH_COMBINE||f.multiInputOverride===e.TOUCH_OVERRIDES_MOUSE&&0===f.totalActivePointers)&&(f.activePointer=this,f.x=this.x,f.y=this.y,f.position.setTo(f.x,f.y)),this.withinGame=!0,this.game.paused)return this;for(d=f.moveCallbacks.length;d--;)f.moveCallbacks[d].callback.call(f.moveCallbacks[d].context,this,this.x,this.y,c);return null!==this.targetObject&&this.targetObject.isDragged===!0?this.targetObject.update(this)===!1&&(this.targetObject=null):c&&f.interactiveItems.total>0&&this.processInteractiveObjects(c),this}},processInteractiveObjects:function(a){for(var b=c.Number.MAX_VALUE,d=-1,e=null,f=this.game.input,g=f.interactiveItems.first;g;)g.checked=!1,g.validForInput(d,b,!1)&&(g.checked=!0,(a&&g.checkPointerDown(this,!0)||!a&&g.checkPointerOver(this,!0))&&(b=g.sprite.renderOrderID,d=g.priorityID,e=g)),g=f.interactiveItems.next;for(g=f.interactiveItems.first;g;)!g.checked&&g.validForInput(d,b,!0)&&(a&&g.checkPointerDown(this,!1)||!a&&g.checkPointerOver(this,!1))&&(b=g.sprite.renderOrderID,d=g.priorityID,e=g),g=f.interactiveItems.next;return null===e?this.targetObject&&(this.targetObject._pointerOutHandler(this),this.targetObject=null):null===this.targetObject?(this.targetObject=e,e._pointerOverHandler(this)):this.targetObject===e?e.update(this)===!1&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this),this.targetObject=e,this.targetObject._pointerOverHandler(this)),null!==this.targetObject},leave:function(a){this.withinGame=!1,this.move(a,!1)},stop:function(b){var c,d=this.game,e=d.input;return this._stateReset&&this.withinGame?void b.preventDefault():(this.timeUp=d.clock.time,this.isMouse?this.updateButtons(b):(this.isDown=!1,this.isUp=!0),c=a(90),(e.multiInputOverride===c.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===c.MOUSE_TOUCH_COMBINE||e.multiInputOverride===c.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&(e.emit("onUp",this,b),this.duration>=0&&this.duration<=e.tapRate&&(this.timeUp-this.previousTapTime<e.doubleTapRate?e.emit("onTap",this,!0):e.emit("onTap",this,!1),this.previousTapTime=this.timeUp)),this.id>0&&(this.active=!1),this.withinGame=d.scale.bounds.contains(b.pageX,b.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),this.isMouse===!1&&e.currentPointers--,e.interactiveItems.callAll("_dropHandler",this),e.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this)},justPressed:function(a){return a=a||this.game.input.justPressedRate,this.isDown===!0&&this.timeDown+a>this.game.clock.time},justReleased:function(a){return a=a||this.game.input.justReleasedRate,this.isUp&&this.timeUp+a>this.game.clock.time},addClickTrampoline:function(a,b,c,d){var e,f;if(this.isDown){for(e=this._clickTrampolines=this._clickTrampolines||[],f=0;f<e.length;f++)if(e[f].name===a){e.splice(f,1);break}e.push({name:a,targetObject:this.targetObject,callback:b,callbackContext:c,callbackArgs:d})}},processClickTrampolines:function(){var a,b,c=this._clickTrampolines;if(c){for(b=0;b<c.length;b++)a=c[b],a.targetObject===this._trampolineTargetObject&&a.callback.apply(a.callbackContext,a.callbackArgs);this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){this.isMouse===!1&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"duration",{get:function(){return this.isUp?-1:this.game.clock.time-this.timeDown}}),Object.defineProperty(d.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(d.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126,88:88,89:89,90:90,94:94}],96:[function(a,b,c){function d(a,b,c,d){e.particles.ParticleContainer.call(this,b,c,d),this.game=a}var e=a("pixi");a(99);d.prototype=Object.create(e.particles.ParticleContainer.prototype),d.prototype.constructor=d,d.prototype.update=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var a=this.children.length;a--;)this.children[a].update()},d.prototype.destroy=function(a,b){null===this.game||this.ignoreDestroy||(void 0===a&&(a=!0),void 0===b&&(b=!1),this.removeAll(a),this.removeAllListeners(),this.filters=null,this.pendingDestroy=!1,b||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},b.exports=d},{99:99,pixi:"pixi"}],97:[function(a,b,c){(function(c){function d(a,b,c,d,g){this.game=a,this.world=a.world,this.target=null,this.deadzone=null,this.view=new e(b,c,d,g),this.bounds=new e(b,c,d,g),this.smooth=!1,this.smoothStep=.1,this.smoothThreshhold=64,this.roundPx=!1,this.atLimit={x:!1,y:!1},this.totalInView=0,this._shaking=0,this._smooth=!1,this._smoothStep=null,this._position=new f,this._targetPosition=new f,this._smoothPosition=new f,this._smoothTween=this.game.tweens.create(this)}var e=a(127),f=a(126),g=a(152);d.FOLLOW_LOCKON=0,d.FOLLOW_SMOOTH=1,d.FOLLOW_TOPDOWN=2,d.FOLLOW_TOPDOWN_TIGHT=3,d.prototype.constructor=d,d.prototype.shake=function(a){a=a||500,this._shaking=0,this.shakeTween&&this.shakeTween.stop(),this.shakeTween=this.game.tweens.create(this),this.shakeTween.to({_shaking:1},a/2),this.shakeTween.yoyo(!0),this.shakeTween.start()},d.prototype.follow=function(a,b){void 0===b&&(b=d.FOLLOW_SMOOTH),this.target=a;var f;switch(b){case d.FOLLOW_TOPDOWN:f=c.Math.max(this.width,this.height)/4,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_TOPDOWN_TIGHT:f=c.Math.max(this.width,this.height)/8,this.deadzone=new e((this.width-f)/2,(this.height-f)/2,f,f);break;case d.FOLLOW_SMOOTH:this._smooth=!1,this.smooth=!0,this.deadzone=null;break;case d.FOLLOW_LOCKON:default:this.deadzone=null}},d.prototype.update=function(){var a=this.view,b=this.displayObject,d=c.Math;this.target&&this.updateTarget(),this.bounds&&this.checkBounds(),this.roundPx&&a.floor(),this._shaking&&(a.x+=(20*d.random()-10)*this._shaking,a.y+=(20*d.random()-10)*this._shaking),b.pivot.x=a.x+a.halfWidth,b.pivot.y=a.y+a.halfHeight},d.prototype.updateTarget=function(){var a,b,c,d=this._smoothPosition,e=this._targetPosition;e.copyFrom(this.target),this.deadzone?(this._edge=e.x-this.view.x,this._edge<this.deadzone.left?a=e.x-this.deadzone.left:this._edge>this.deadzone.right&&(a=e.x-this.deadzone.right),this._edge=e.y-this.view.y,this._edge<this.deadzone.top?b=e.y-this.deadzone.top:this._edge>this.deadzone.bottom&&(b=e.y-this.deadzone.bottom)):(a=e.x,b=e.y),this.smooth&&(this._smooth||(c=e.distance(this.position),c>this.smoothThreshhold&&(this._smooth=!0,this._smoothStep=0,this._smoothTween&&this._smoothTween.isRunning&&this._smoothTween.stop(),this._smoothTween.to({_smoothStep:1},48*c,g.Default,!0),this._smoothTween.once("complete",function(){this._smooth=!1},this))),this._smooth&&(d=f.interpolate(this.position,{x:a,y:b},this._smoothStep,d),a=d.x,b=d.y)),this.setPosition(a,b)},d.prototype.unfollow=function(){this.target=null},d.prototype.focusOn=function(a){this.setPosition(a.x,a.y)},d.prototype.focusOnXY=function(a,b){this.setPosition(a,b)},d.prototype.setBoundsToWorld=function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},d.prototype.checkBounds=function(){this.atLimit.x=!1,this.atLimit.y=!1,this.view.x<=this.bounds.x&&(this.atLimit.x=!0),this.view.right>=this.bounds.right&&(this.atLimit.x=!0),this.view.y<=this.bounds.top&&(this.atLimit.y=!0),this.view.bottom>=this.bounds.bottom&&(this.atLimit.y=!0)},d.prototype.setPosition=function(a,b){var c=this.view;c.x=a-c.halfWidth,c.y=b-c.halfHeight,this.bounds&&this.checkBounds()},d.prototype.pan=function(a,b){var c=this.view;c.x-=a,c.y-=b},d.prototype.setSize=function(a,b){var c=this.view,d=this.displayObject;c.width=a,c.height=b,d.x=c.halfWidth,d.y=c.halfHeight},d.prototype.reset=function(){this.view.x=0,this.view.y=0},Object.defineProperty(d.prototype,"x",{get:function(){return this.view.x},set:function(a){this.view.x=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.view.y},set:function(a){this.view.y=a,this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"shaking",{get:function(){return this._shaking}}),Object.defineProperty(d.prototype,"position",{get:function(){return this._position.set(this.view.centerX,this.view.centerY),this._position},set:function(a){void 0!==a.x&&(this.view.x=a.x),void 0!==a.y&&(this.view.y=a.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(d.prototype,"width",{get:function(){return this.view.width},set:function(a){this.view.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.view.height},set:function(a){this.view.height=a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126,127:127,152:152}],98:[function(a,b,c){(function(c){function d(a){a||(a={}),this.config=a,this.width=a.width||800,this.height=a.height||600,this.enableDebug=a.enableDebug||!0,this.parent=a.parent||"",this.canvasID=a.canvasID||null,this.transparent=a.transparent||!1,this.autoResize=a.autoResize||!1,this.antialias=a.antialias||!1,this.forceFXAA=a.forceFXAA||!1,this.resolution=a.resolution||1,this.clearBeforeRender=a.clearBeforeRender||!1,this.preserveDrawingBuffer=a.preserveDrawingBuffer||!1,this.isBooted=!1,this.currentUpdateID=0,this._paused=!1,this._codePaused=!1,this.rnd=new p([""+c.Date.now()*c.Math.random()]),this.state=new q(this,new r),g.whenReady(this.boot,this),f.call(this)}var e=a("pixi"),f=a(3),g=a(140),h=a(139),i=a(141),j=a(149),k=a(129),l=a(128),m=a(90),n=a(101),o=a(104),p=a(161),q=a(103),r=a(102),s=a(100),t=a(155),u=a(133),v=a(138),w=a(131);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.isBooted||(this.isBooted=!0,this.scale=new s(this,this.width,this.height),this.stage=new n(this),this.setupRenderer(),this.world=new o(this),this.cache=new l(this),this.load=new k(this),this.clock=new j(this),this.tweens=new t(this),this.input=new m(this),this.sound=new v(this),this.particles=new u(this),this.net=new w(this),this.clock.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.net.boot(),this.raf=new i(this,(!1)),this._kickstart=!0,this.raf.start())},d.prototype.setupRenderer=function(){if(this.canvas=h.create(this.width,this.height,this.canvasID),g.webGL!==!0)throw Error("WebGL support required");this.renderer=new e.WebGLRenderer(this.width,this.height,{view:this.canvas,transparent:this.transparent,autoResize:this.autoResize,resolution:this.resolution,antialias:this.antialias,clearBeforeRender:this.clearBeforeRender,preserveDrawingBuffer:this.preserveDrawingBuffer}),h.addToDOM(this.canvas,this.parent,!1),h.setUserSelect(this.canvas,"none"),h.setTouchAction(this.canvas,"none"),h.setContextMenu(this.canvas,!1),h.setSmoothingEnabled(this.canvas,!1)},d.prototype.update=function(a){this.clock.update(a),this.updateLogic(),this.updateRender()},d.prototype.updateLogic=function(){this._paused?(this.scale.pauseUpdate(),this.state.pauseUpdate()):(this.scale.preUpdate(),this.state.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.input.update(),this.sound.update())},d.prototype.updateRender=function(){this.stage.updateTransform(),this.state.preRender(),this.renderer.render(this.stage,null,!1,null,!0)},d.prototype.destroy=function(){this.raf.stop(),this.state.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.sound.destroy(),this.state=null,this.cache=null,this.input=null,this.load=null,this.sound=null,this.stage=null,this.clock=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1)},d.prototype.gamePaused=function(a){this._paused||(this._paused=!0,this.clock.gamePaused(),this.sound.setMute(),this.emit("game/pause",a))},d.prototype.gameResumed=function(a){this._paused&&!this._codePaused&&(this._paused=!1,this.clock.gameResumed(),this.input.reset(),this.sound.unsetMute(),this.emit("game/resume",a))},d.prototype.focusLoss=function(a){this.emit("game/blur",a),this.stage.disableVisibilityChange||this.gamePaused(a)},d.prototype.focusGain=function(a){this.emit("game/focus",a),this.stage.disableVisibilityChange||this.gameResumed(a)},Object.defineProperty(d.prototype,"paused",{get:function(){return this._paused},set:function(a){a===!0?(this._paused===!1&&(this._paused=!0,this.sound.setMute(),this.clock.gamePaused(),this.emit("pause",event)),this._codePaused=!0):(this._paused&&(this._paused=!1,this.input.reset(),this.sound.unsetMute(),this.clock.gameResumed(),this.emit("resume",event)),this._codePaused=!1)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{100:100,101:101,102:102,103:103,104:104,128:128,129:129,131:131,133:133,138:138,139:139,140:140,141:141,149:149,155:155,161:161,3:3,90:90,pixi:"pixi"}],99:[function(a,b,c){function d(a,b){void 0===typeof b&&(b=a.world),e.Container.call(this),this.game=a,this.z=0,this.type=f.GROUP,this.pendingDestroy=!1,this.exists=!0,b&&(this.z=b.children.length,b.addChild(this))}var e=a("pixi"),f=a(88),g=a(156);d.RETURN_NONE=0,d.RETURN_TOTAL=1,d.RETURN_CHILD=2,d.SORT_ASCENDING=-1,d.SORT_DESCENDING=1,d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,d.prototype.add=function(a,b){return void 0===b&&(b=!1),a.parent!==this&&(this.addChild(a),a.z=this.children.length),a},d.prototype.addAt=function(a,b,c){return void 0===c&&(c=!1),a.parent!==this&&this.addChildAt(a,b),a},d.prototype.getFirstExists=function(a){return"boolean"!=typeof a&&(a=!0),this.iterate("exists",a,d.RETURN_CHILD)},d.prototype.iterate=function(a,b,c,e,f,g){var h,i;if(c===d.RETURN_TOTAL&&0===this.children.length)return 0;for(h=0,i=0;i<this.children.length;i++)if(this.children[i][a]===b&&(h++,e&&(g?(g[0]=this.children[i],e.apply(f,g)):e.call(f,this.children[i])),c===d.RETURN_CHILD))return this.children[i];return c===d.RETURN_TOTAL?h:null},d.prototype.filter=function(a,b){for(var c,d=-1,e=this.children.length,f=[];++d<e;)c=this.children[d],(!b||b&&c.exists)&&a(c,d,this.children)&&f.push(c);return new g(f)},d.prototype.forEach=function(a,b,c){var d,e;if(void 0===c&&(c=!1),arguments.length<=3)for(d=0;d<this.children.length;d++)(!c||c&&this.children[d].exists)&&a.call(b,this.children[d]);else{for(e=[null],d=3;d<arguments.length;d++)e.push(arguments[d]);for(d=0;d<this.children.length;d++)(!c||c&&this.children[d].exists)&&(e[0]=this.children[d],a.apply(b,e))}},d.prototype.swap=function(a,b){this.swapChildren(a,b)},d.prototype.remove=function(a,b,c){if(0===this.children.length||this.children.indexOf(a)===-1)return!1;void 0===b&&(b=!1),void 0===c&&(c=!1);var d=this.removeChild(a);return b&&d&&d.destroy(!0),!0},d.prototype.removeAll=function(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=!1),0!==this.children.length){var c;do c=this.removeChild(this.children[0]),a&&c&&c.destroy(!0);while(this.children.length>0)}},d.prototype.update=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var a=this.children.length;a--;)this.children[a].update()},d.prototype.destroy=function(a,b){null===this.game||this.ignoreDestroy||(void 0===a&&(a=!0),void 0===b&&(b=!1),this.removeAll(a),this.removeAllListeners(),this.filters=null,this.pendingDestroy=!1,b||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},b.exports=d},{156:156,88:88,pixi:"pixi"}],100:[function(a,b,c){(function(c){function d(a,b,g){this.game=a,this.dom={getScreenOrientation:function(){},getOffset:function(){},visualBounds:{width:c.Math.max(c.innerWidth,c.document.documentElement.clientWidth),height:c.Math.max(c.innerHeight,c.document.documentElement.clientHeight)}},this.dom.layoutBounds=this.dom.visualBounds,this.width=0,this.height=0,this.event=null,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.sourceAspectRatio=0,this.aspectRatio=0,this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new f,this.offset=new e,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.screenOrientation=this.dom.getScreenOrientation(),this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.scaleFactor=new e(1,1),this.scaleFactorInversed=new e(1,1),this.windowConstraints={right:"",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=d.RESIZE,this._fullScreenScaleMode=d.RESIZE,this.trackParentInterval=2e3,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new e(1,1),this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new f,this._userScaleFactor=new e(1,1),this._userScaleTrim=new e(0,0),this._booted=!1,this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._resolutionLow=1024,this._resolutionMedium=1280,this._resolutionMaximum=1920,this._resolutionMode="auto",this._parentBounds=new f,this._tempBounds=new f,this._lastReportedCanvasSize=new f,this._lastReportedGameSize=new f,a.config&&this.parseConfig(a.config),this.setupScale(b,g),this.game.on("fpsProblem",function(){this.resolutionMode="low",this.scaleMode=d.EXACT_FIT,this.fullScreenScaleMode=d.EXACT_FIT,this.refresh()},this)}var e=a(126),f=a(127),g=a(140),h=a(160),i=a(88);d.EXACT_FIT=0,d.NO_SCALE=1,d.SHOW_ALL=2,d.RESIZE=3,d.USER_SCALE=4,d.prototype={boot:function(){var a,b=this.compatibility;b.supportsFullScreen=g.fullscreen,g.desktop?(b.orientationFallback="screen",b.clickTrampoline="when-not-mouse"):(b.orientationFallback="",b.clickTrampoline=""),a=this,this._orientationChange=function(b){return a.orientationChange(b)},this._windowResize=function(b){return a.windowResize(b)},c.addEventListener("orientationchange",this._orientationChange,!1),c.addEventListener("resize",this._windowResize,!1),b.supportsFullScreen&&(this._fullScreenChange=function(b){return a.fullScreenChange(b)},this._fullScreenError=function(b){return a.fullScreenError(b)},c.document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.addEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.addEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this._booted=!0,this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(a){a.scaleMode&&(this._booted?this.scaleMode=a.scaleMode:this._pendingScaleMode=a.scaleMode),a.fullScreenScaleMode&&(this.fullScreenScaleMode=a.fullScreenScaleMode),a.fullScreenTarget&&(this.fullScreenTarget=a.fullScreenTarget)},setupScale:function(a,b){var d,e,g,h=new f;""!==this.game.parent&&("string"==typeof this.game.parent?d=c.document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(d=this.game.parent)),d?(this.parentNode=d,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds),h.width=this._parentBounds.width,h.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,h.width=this.dom.visualBounds.width,h.height=this.dom.visualBounds.height,this.offset.set(0,0)),e=0,g=0,"number"==typeof a?e=a:(this.parentScaleFactor.x=parseInt(a,10)/100,e=h.width*this.parentScaleFactor.x),"number"==typeof b?g=b:(this.parentScaleFactor.y=parseInt(b,10)/100,g=h.height*this.parentScaleFactor.y),this._gameSize.setTo(0,0,e,g),this.updateDimensions(e,g,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(a,b,c){this._gameSize.setTo(0,0,a,b),this.updateDimensions(a,b,!0),c||this.queueUpdate(!0)},setUserScale:function(a,b,c,d){this._userScaleFactor.setTo(a,b),this._userScaleTrim.setTo(0|c,0|d),this.queueUpdate(!0)},setResizeCallback:function(a,b){this.onResize=a,this.onResizeContext=b},signalSizeChange:function(){var a,b;f.sameDimensions(this,this._lastReportedCanvasSize)&&f.sameDimensions(this.game,this._lastReportedGameSize)||(a=this.width,b=this.height,this._lastReportedCanvasSize.setTo(0,0,a,b),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.game.state.resize(this.game.width,this.game.height))},setMinMax:function(a,b,c,d){this.minWidth=a,this.minHeight=b,void 0!==c&&(this.maxWidth=c),void 0!==d&&(this.maxHeight=d)},preUpdate:function(){var a,b,d,e,f,g,i;this.game.clock.time<this._lastUpdate+this._updateThrottle||(a=this._updateThrottle,this._updateThrottleReset=a>=400?0:100,this.dom.getOffset(this.game.canvas,this.offset),b=this._parentBounds.width,d=this._parentBounds.height,e=this.getParentBounds(this._parentBounds),f=e.width!==b||e.height!==d,g=this.updateOrientationState(),(f||g)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,e),this.updateLayout(),this.signalSizeChange()),i=2*this._updateThrottle,this._updateThrottle<a&&(i=c.Math.min(a,this._updateThrottleReset)),this._updateThrottle=h.clamp(i,25,this.trackParentInterval),this._lastUpdate=this.game.clock.time)},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(a,b,c){this.width=a*this.parentScaleFactor.x,this.height=b*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),c&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(a,b){void 0===b&&(b=!1),this.forceLandscape=a,this.forcePortrait=b,this.queueUpdate(!0)},classifyOrientation:function(a){return"portrait-primary"===a||"portrait-secondary"===a?"portrait":"landscape-primary"===a||"landscape-secondary"===a?"landscape":null},updateOrientationState:function(){var a,b,c=this.screenOrientation,d=this.incorrectOrientation;return this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait,a=c!==this.screenOrientation,b=d!==this.incorrectOrientation,b&&this.incorrectOrientation,a||b},orientationChange:function(a){this.event=a,this.queueUpdate(!0)},windowResize:function(a){this.event=a,this.queueUpdate(!0)},refresh:function(){this.queueUpdate(!0)},updateLayout:function(){var a,b=this.currentScaleMode;return b===d.RESIZE?void this.reflowGame():(this.compatibility.forceMinimumDocumentHeight&&(c.document.documentElement.style.minHeight=c.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():b===d.EXACT_FIT?this.setExactFit():b===d.SHOW_ALL?!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent?(this.setShowAll(!0),this.resetCanvas(),this.setShowAll()):this.setShowAll():b===d.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):b===d.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),this.compatibility.canExpandParent||b!==d.SHOW_ALL&&b!==d.USER_SCALE||(a=this.getParentBounds(this._tempBounds),this.width=c.Math.min(this.width,a.width),this.height=c.Math.min(this.height,a.height)),this.width=0|this.width,this.height=0|this.height,void this.reflowCanvas())},getParentBounds:function(a){var b,d,e,g,h=a||new f,i=this.boundingParent,j=this.dom.visualBounds,k=this.dom.layoutBounds;return i?(b=i.getBoundingClientRect(),d=i.offsetParent?i.offsetParent.getBoundingClientRect():i.getBoundingClientRect(),h.setTo(b.left-d.left,b.top-d.top,b.width,b.height),e=this.windowConstraints,e.right&&(g="layout"===e.right?k:j,h.right=c.Math.min(h.right,g.width)),e.bottom&&(g="layout"===e.bottom?k:j,h.bottom=c.Math.min(h.bottom,g.height))):h.setTo(0,0,j.width,j.height),h.setTo(c.Math.round(h.x),c.Math.round(h.y),c.Math.round(h.width),c.Math.round(h.height)),h},alignCanvas:function(a,b){var d,e,f,g,h=this.getParentBounds(this._tempBounds),i=this.game.canvas,j=this.margin;a&&(j.left=j.right=0,d=i.getBoundingClientRect(),this.width<h.width&&!this.incorrectOrientation&&(e=d.left-h.x,f=h.width/2-this.width/2,f=c.Math.max(f,0),g=f-e,j.left=c.Math.round(g)),i.style.marginLeft=j.left+"px",0!==j.left&&(j.right=-(h.width-d.width-j.left),i.style.marginRight=j.right+"px")),b&&(j.top=j.bottom=0,d=i.getBoundingClientRect(),this.height<h.height&&!this.incorrectOrientation&&(e=d.top-h.y,f=h.height/2-this.height/2,f=c.Math.max(f,0),g=f-e,j.top=c.Math.round(g)),i.style.marginTop=j.top+"px",0!==j.top&&(j.bottom=-(h.height-d.height-j.top),i.style.marginBottom=j.bottom+"px")),j.x=j.left,j.y=j.top},reflowGame:function(){var a=this.getParentBounds(this._tempBounds),b=a.width,c=a.height,d=this._resolutionMaximum;b<d?(this.resetCanvas("",""),this.updateDimensions(b,c,!0)):(this.setExactFit(),this.reflowCanvas())},reflowCanvas:function(){this.incorrectOrientation||(this.width=h.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=h.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(a,b){void 0===a&&(a=this.width+"px"),void 0===b&&(b=this.height+"px");var c=this.game.canvas;this.compatibility.noMargins||(c.style.marginLeft="",c.style.marginTop="",c.style.marginRight="",c.style.marginBottom=""),c.style.width=a,c.style.height=b},queueUpdate:function(a){a&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(a){},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(a){var b,d=this.getParentBounds(this._tempBounds),e=d.width,f=d.height;b=a?c.Math.max(f/this.game.height,e/this.game.width):c.Math.min(f/this.game.height,e/this.game.width),this.width=c.Math.round(this.game.width*b),this.height=c.Math.round(this.game.height*b)},setExactFit:function(){var a=this.getParentBounds(this._tempBounds),b=a.width,d=a.height,e=this.resolution,f=this.resolution*(d/b);this.setGameSize(e,f,!0),this.width=b,this.height=d,this.isFullScreen||(this.maxWidth&&(this.width=c.Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=c.Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var a=c.document.createElement("div");return a.style.margin="0",a.style.padding="0",a.style.background="#000",a},startFullScreen:function(a,b){var c,d,e,f,h,j;return!this.isFullScreen&&(this.compatibility.supportsFullScreen?"when-not-mouse"===this.compatibility.clickTrampoline&&(d=this.game.input,d.activePointer&&d.activePointer!==d.mousePointer&&(b||b!==!1))?void d.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[a,!1]):(void 0!==a&&this.game.renderType===i.CANVAS&&(this.game.stage.smoothed=a),e=this.fullScreenTarget,e||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),e=this._createdFullScreenTarget),f={targetElement:e},this._createdFullScreenTarget&&(h=this.game.canvas,j=h.parentNode,j.insertBefore(e,h),e.appendChild(h)),g.fullscreenKeyboard?e[g.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):e[g.requestFullscreen](),!0):(c=this,void setTimeout(function(){c.fullScreenError()},10)))},stopFullScreen:function(){return!(!this.isFullScreen||!this.compatibility.supportsFullScreen)&&(c.document[g.cancelFullscreen](),!0)},cleanupCreatedTarget:function(){var a,b=this._createdFullScreenTarget;b&&b.parentNode&&(a=b.parentNode,a.insertBefore(this.game.canvas,b),a.removeChild(b)),this._createdFullScreenTarget=null},prepScreenMode:function(a){var b=!!this._createdFullScreenTarget,c=this._createdFullScreenTarget||this.fullScreenTarget;a?(b||this.fullScreenScaleMode===d.EXACT_FIT)&&c!==this.game.canvas&&(this._fullScreenRestore={targetWidth:c.style.width,targetHeight:c.style.height},c.style.width="100%",c.style.height="100%"):(this._fullScreenRestore&&(c.style.width=this._fullScreenRestore.targetWidth,c.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(a){this.event=a,this.isFullScreen?(this.prepScreenMode(!0),this.updateLayout(),this.queueUpdate(!0)):(this.prepScreenMode(!1),this.cleanupCreatedTarget(),this.updateLayout(),this.queueUpdate(!0))},fullScreenError:function(a){this.event=a,this.cleanupCreatedTarget(),console.warn("ScaleManager: requestFullscreen failed or device does not support the Fullscreen API")},scaleSprite:function(a,b,d,e){var f,g,h,i,j;return void 0===b&&(b=this.width),void 0===d&&(d=this.height),void 0===e&&(e=!1),a&&a.scale?(a.scale.x=1,a.scale.y=1,a.width<=0||a.height<=0||b<=0||d<=0?a:(f=b,g=a.height*b/a.width,h=a.width*d/a.height,i=d,j=h>b,j=j?e:!e,j?(a.width=c.Math.floor(f),a.height=c.Math.floor(g)):(a.width=c.Math.floor(h),a.height=c.Math.floor(i)),a)):a},destroy:function(){this.game.onResume.remove(this._gameResumed,this),c.removeEventListener("orientationchange",this._orientationChange,!1),c.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(c.document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),
c.document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),c.document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),c.document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),c.document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),c.document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(d.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){return a!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=a),this._scaleMode}}),Object.defineProperty(d.prototype,"resolutionMode",{get:function(){return this._resolutionMode},set:function(a){this._resolutionMode=a}}),Object.defineProperty(d.prototype,"resolution",{get:function(){switch(this._resolutionMode){case"max":return this._resolutionMaximum;case"medium":return this._resolutionMedium;case"low":return this._resolutionLow;default:return this._resolutionMaximum}}}),Object.defineProperty(d.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(a){return a!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=a,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=a),this._fullScreenScaleMode}}),Object.defineProperty(d.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(d.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(a){a!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(a){a!==this._pageAlignVertically&&(this._pageAlignVertically=a,this.queueUpdate(!0))}}),Object.defineProperty(d.prototype,"isFullScreen",{get:function(){return!!(c.document.fullscreenElement||c.document.webkitFullscreenElement||c.document.mozFullScreenElement||c.document.msFullscreenElement)}}),Object.defineProperty(d.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(d.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(d.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126,127:127,140:140,160:160,88:88}],101:[function(a,b,c){(function(c){function d(a){e.Container.call(this),this.game=a,this.exists=!0,this.disableVisibilityChange=!1,this.currentRenderOrderID=0,this.parent=new e.Container,this._onChange=null,this._hiddenVar=null}var e=a("pixi");d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.checkVisibility()},d.prototype.update=function(){this.currentRenderOrderID=0;for(var a=this.children.length;a--;)this.children[a].update();this.game.world.camera.update()},d.prototype.checkVisibility=function(){void 0!==c.document.webkitHidden?this._hiddenVar="webkitvisibilitychange":void 0!==c.document.mozHidden?this._hiddenVar="mozvisibilitychange":void 0!==c.document.msHidden?this._hiddenVar="msvisibilitychange":void 0!==c.document.hidden?this._hiddenVar="visibilitychange":this._hiddenVar=null;var a=this;this._onChange=function(b){return a.visibilityChange(b)},this._hiddenVar&&c.document.addEventListener(this._hiddenVar,this._onChange,!1),c.onblur=this._onChange,c.onfocus=this._onChange,c.onpagehide=this._onChange,c.onpageshow=this._onChange},d.prototype.visibilityChange=function(a){return"pagehide"===a.type||"blur"===a.type||"pageshow"===a.type||"focus"===a.type?void("pagehide"===a.type||"blur"===a.type?this.game.focusLoss(a):"pageshow"!==a.type&&"focus"!==a.type||this.game.focusGain(a)):void(this.disableVisibilityChange||(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||"pause"===a.type?this.game.gamePaused(a):this.game.gameResumed(a)))},d.prototype.destroy=function(){e.Container.prototype.destroy.call(this)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{pixi:"pixi"}],102:[function(a,b,c){function d(){this.game=null,this.key=""}d.prototype={init:function(a){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},d.prototype.constructor=d,b.exports=d},{}],103:[function(a,b,c){function d(a,b){this.game=a,this.states={},this.backgroundStates={},this._current="",this._pendingBackgroundStates=[],this._pendingState=b||null,this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.callbackContext=null,this.backgroundStateContext=null,e.call(this)}var e=a(3);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.boot=function(){null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},d.prototype.add=function(a,b,c,d){return c=c||!1,d=d||!1,d===!1?this.states[a]=b:this.backgroundStates[a]=b,c&&(d?this._pendingBackgroundStates.push(a):this.game.isBooted?this.start(a):this._pendingState=a),b},d.prototype.remove=function(a){this._current===a&&(this.callbackContext=null),delete this.states[a]},d.prototype.checkState=function(a){return!!this.states[a]||(console.warn("StateManager - No state found with the key: "+a),!1)},d.prototype.start=function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c=!1),this.checkState(a)&&(this._pendingState=a,this._clearWorld=b,this._clearCache=c,arguments.length>3&&(this._args=Array.prototype.splice.call(arguments,3)))},d.prototype.restart=function(a,b){void 0===a&&(a=!0),void 0===b&&(b=!1),this._pendingState=this._current,this._clearWorld=a,this._clearCache=b,arguments.length>2&&(this._args=Array.prototype.slice.call(arguments,2))},d.prototype.clearCurrentState=function(){this._current&&(this.callbackContext.shutdown&&this.callbackContext.shutdown(),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.clock.removeAll(),this.game.scale.reset(this._clearWorld),this.game.debug&&this.game.debug.reset(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache===!0&&this.game.cache.destroy()))},d.prototype.clearBackgroundStates=function(){var a,b=this.backgroundStates;for(a in b)b[a].shutdown()},d.prototype.setCurrentBackgroundState=function(a){this.backgroundStateContext=this.backgroundStates[a],this.backgroundStateContext.game=this.game,this.backgroundStateContext.init(),this.game._kickstart=!0},d.prototype.setCurrentState=function(a){this._current=a,this._created=!1,this.callbackContext=this.states[a],this.states[a].game=this.game,this.callbackContext.init&&this.callbackContext.init(this._args),a===this._pendingState&&(this._args=[]),this.game._kickstart=!0},d.prototype.getBackgroundState=function(a){return this.backgroundStates[a]},d.prototype.preUpdate=function(){if(!this.backgroundStateContext)if(this._pendingBackgroundStates.length>0)this.setCurrentBackgroundState(this._pendingBackgroundStates.pop()),this.backgroundStateContext.preload?(this.backgroundStateContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.backgroundLoadComplete():this.game.load.start()):this.backgroundLoadComplete();else if(this._pendingState&&this.game.isBooted){var a=this._current;if(this._clearWorld=!0,this._clearCache=!0,this.clearCurrentState(),this.setCurrentState(this._pendingState),this.emit("stateChange",this._current,a),this._current!==this._pendingState)return;this._pendingState=null,this.callbackContext.preload?(this.game.load.reset(!0),this.callbackContext.preload(),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},d.prototype.loadComplete=function(){this._created===!1&&(this._created=!0,this.callbackContext.create&&this.callbackContext.create())},d.prototype.backgroundLoadComplete=function(){this.backgroundStateContext.create(),this.backgroundStateContext=null},d.prototype.pause=function(){this._created&&this.callbackContext.paused&&this.callbackContext.paused()},d.prototype.resume=function(){this._created&&this.callbackContext.resumed&&this.callbackContext.resumed()},d.prototype.update=function(){this.backgroundStateContext&&(this.backgroundStateContext.loadUpdate&&!this.game.load.hasLoaded?this.backgroundStateContext.loadUpdate():this.game.load.hasLoaded&&this.backgroundLoadComplete()),this._created?this.callbackContext.update&&this.callbackContext.update():this.callbackContext&&(this.callbackContext.loadUpdate&&!this.game.load.hasLoaded?this.callbackContext.loadUpdate():this.game.load.hasLoaded&&this.loadComplete())},d.prototype.pauseUpdate=function(){this._created?this.callbackContext.pauseUpdate&&this.callbackContext.pauseUpdate():this.backgroundStateContext&&(this.backgroundStateContext.loadUpdate&&!this.game.load.hasLoaded?this.backgroundStateContext.loadUpdate():this.game.load.hasLoaded&&this.backgroundLoadComplete())},d.prototype.preRender=function(){this._created&&this.callbackContext.preRender&&this.callbackContext.preRender()},d.prototype.resize=function(a,b){this._created&&this.callbackContext.resize&&this.callbackContext.resize(a,b);for(var c in this.backgroundStates)this.backgroundStates[c].resize(a,b)},d.prototype.destroy=function(){this.clearCurrentState(),this.clearBackgroundStates(),this.callbackContext=null,this.game=null,this.states={},this.backgroundStates={},this._current="",this._pendingState=null},Object.defineProperty(d.prototype,"current",{get:function(){return this.states[this._current]}}),Object.defineProperty(d.prototype,"hasPendingState",{get:function(){return null!==this._pendingState||this._pendingBackgroundStates.length>0}}),Object.defineProperty(d.prototype,"pendingLength",{get:function(){return this._pendingBackgroundStates.length+(null!==this._pendingState?1:0)}}),b.exports=d},{3:3}],104:[function(a,b,c){(function(c){function d(a){f.call(this,a,null),this.game=a,this.camera=null,this.bounds=new e(0,0,a.width,a.height),this._definedSize=!1,this.game.on("state/change",this.stateChange,this)}var e=a(127),f=a(99),g=a(97);a(126);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.background=new f(this.game,this.game.stage),this.foreground=new f(this.game,this.game.stage),this.camera=new g(this.game,0,0,this.game.width,this.game.height),this.camera.displayObject=this,this.game.camera=this.camera,this.game.stage.addChild(this)},d.prototype.setBounds=function(a,b,d,e){this._definedSize=!0,this._width=d,this._height=e,this.bounds.setTo(a,b,d,e),this.camera.bounds&&this.camera.bounds.setTo(a,b,c.Math.max(d,this.game.width),c.Math.max(e,this.game.height))},d.prototype.update=function(){var a=this.background,b=this.foreground;this.camera.view;a.x=this.x,a.y=this.y,a.pivot.x=this.pivot.x/6,a.pivot.y=this.pivot.y/6,a.scale.x=this.scale.x/3+.5,a.scale.y=this.scale.y/3+.5,b.x=this.x,b.y=this.y,b.pivot.x=this.pivot.x/4,b.pivot.y=this.pivot.y/4,b.scale.x=this.scale.x/2+.5,b.scale.y=this.scale.y/2+.5,f.prototype.update.call(this)},d.prototype.resize=function(a,b){},d.prototype.stateChange=function(){this.camera.reset()},d.prototype.shutdown=function(){this.destroy(!0,!0)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126,127:127,97:97,99:99}],105:[function(a,b,c){function d(a,b,c){this.game=a,this.type=f.FONT,this._text="",this._align=c.align||"left",this._multiline=c.multiline||!1,this._autouppercase=c.autouppercase||!1,this._fixedwidth=c.fixedwidth||0,this._charset=c.charset||d.CHAR_SET,this._character=c.character||{width:10,height:10,size:0,spacing:{x:0,y:0},offset:{x:0,y:0}},this.frameKeys=[],this.frames=new i,this.typer=new g(a,b),this.texture=new e.RenderTexture(new e.BaseRenderTexture(32,32,e.SCALE_MODES.NEAREST)),this.platen=new e.Container,this.platen.addChild(this.typer),this.generateFrameData(this._charset)}var e=a("pixi"),f=a(88),g=a(109),h=a(86),i=a(87);d.prototype.constructor=d,d.CHAR_SET="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-.%+/*",d.CHAR_SET_FULL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"#$%&'()*+.,-/@",d.prototype.generateFrameData=function(a){var b,c,d=0,e=this._character,f=e.spacing,g=e.offset,i=g.x,j=g.y;for(c=0;c<a.length;c++)b=this.frames.addFrame(new h(c,i,j,e.width,e.height)),this.frameKeys[a.charCodeAt(c)]=b.index,d++,d===e.size?(d=0,i=g.x,j+=e.height+f.y):i+=e.width+f.x},d.prototype.update=function(){var a,b=0,c=0,d=this._text.split("\n"),e=this._character,f=(e.spacing,e.offset,d.length);for(this._fixedwidth>0?this.texture.resize(this._fixedwidth,f*e.height,!1):this.texture.resize(this.getLongestLine()*e.width,f*e.height,!1),a=0;a<f;a++)b=0,"right"===this.align?b=this.width-d[a].length*e.width:"center"===this.align&&(b=this.width/2-d[a].length*e.width/2),this.render(d[a],b,c),c+=e.height},d.prototype.render=function(a,b,c){var d,e=this._character;for(d=0;d<a.length;d++)if(" "===a.charAt(d))b+=e.width;else if(this.frameKeys[a.charCodeAt(d)]>=0&&(this.typer.x=b,this.typer.y=c,this.typer.setFrame(this.frames.getFrame(this.frameKeys[a.charCodeAt(d)])),this.game.renderer.render(this.platen,this.texture,0==b&&0==c),b+=e.width,b>this.width))break},d.prototype.getLongestLine=function(){var a,b,c=0;if(this._text.length>0)for(a=this._text.split("\n"),b=0;b<a.length;b++)a[b].length>c&&(c=a[b].length);return c},d.prototype.removeUnsupportedCharacters=function(){var a,b,c,d="";for(c=0;c<this._text.length;c++)a=this._text[c],b=a.charCodeAt(0),(this.frameKeys[b]>=0||!this._multiline&&"\n"===a)&&(d=d.concat(a));return d},Object.defineProperty(d.prototype,"text",{get:function(){return this._text},set:function(a){a=this._autouppercase?a.toUpperCase():a,a!==this._text&&(this._text=a,this.removeUnsupportedCharacters(),this.update())}}),b.exports=d},{109:109,86:86,87:87,88:88,pixi:"pixi"}],106:[function(a,b,c){function d(a){this.type=f.GRAPHICS,this.objectRenderer="graphics",e.Graphics.call(this),g.init.call(this,a,"",null)}var e=a("pixi"),f=a(88),g=a(114),h=a(115),j=a(117),k=a(126),l=a(116);d.prototype=Object.create(e.Graphics.prototype),d.prototype.constructor=d,g.install.call(d.prototype,["Mixin","AutoCull","Bounds","Destroy","FixedToCamera","InWorld","InputEnabled","Overlap"]),d.prototype.preUpdateInWorld=j.preUpdate,d.prototype.preUpdateCore=g.preUpdate,d.prototype.preUpdateFixedToCamera=l.preUpdate,d.prototype.update=function(){this.preUpdateInWorld(),this.preUpdateCore(),this.preUpdateFixedToCamera()},d.prototype.destroy=function(a){this.clear(),h.prototype.destroy.call(this,a)},d.prototype.drawTriangle=function(a,b){var c,d,e,f,g;void 0===b&&(b=!1),c=new Polygon(a),b?(d=new k(this.game.camera.x-a[0].x,this.game.camera.y-a[0].y),e=new k(a[1].x-a[0].x,a[1].y-a[0].y),f=new k(a[1].x-a[2].x,a[1].y-a[2].y),g=f.cross(e),d.dot(g)>0&&this.drawPolygon(c)):this.drawPolygon(c)},d.prototype.drawTriangles=function(a,b,c){void 0===c&&(c=!1);var d=new k;if(point2=new k,point3=new k,points=[],i,b)if(a[0]instanceof k)for(i=0;i<b.length/3;i++)points.push(a[b[3*i]]),points.push(a[b[3*i+1]]),points.push(a[b[3*i+2]]),3===points.length&&(this.drawTriangle(points,c),points=[]);else for(i=0;i<b.length;i++)d.x=a[2*b[i]],d.y=a[2*b[i]+1],points.push(d.copyTo({})),3===points.length&&(this.drawTriangle(points,c),points=[]);else if(a[0]instanceof k)for(i=0;i<a.length/3;i++)this.drawTriangle([a[3*i],a[3*i+1],a[3*i+2]],c);else for(i=0;i<a.length/6;i++)d.x=a[6*i+0],d.y=a[6*i+1],point2.x=a[6*i+2],point2.y=a[6*i+3],point3.x=a[6*i+4],point3.y=a[6*i+5],this.drawTriangle([d,point2,point3],c)},d.prototype._renderWebGL=function(a){this.glDirty&&(this.dirty=!0,this.glDirty=!1),a.setObjectRenderer(a.plugins[this.objectRenderer]),a.plugins[this.objectRenderer].render(this)},b.exports=d},{114:114,115:115,116:116,117:117,126:126,88:88,pixi:"pixi"}],107:[function(a,b,c){(function(c){function d(a,b,d){e.call(this,a,b,d),this.vector=new f(0,0),this.velocity=new f(0,0),this.drag=new f(0,0),this.angularVelocity=0,this.angularDrag=0,this.autoScale=!1,this.autoAlpha=!1,this.scaleData=null,this.alphaData=null,this.tintData=null,this._s=0,this._a=0,this._t=0,this.rotation=c.Math.random()*c.Math.PI}var e=a(109),f=a(126);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.game.clock.elapsedMS/1e3;this.rotation+=this.angularVelocity*a,this.position.set(this.position.x+this.velocity.x*this.vector.x*a,this.position.y+this.velocity.y*this.vector.y*a),this.autoScale||this.autoAlpha||this.autoTint||(this.exists=!1),this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1),this.autoTint&&(this._t--,this._t?this.tint=this.tintData[this._t].color:this.autoTint=!1)},d.prototype.onEmit=function(){},d.prototype.setAlphaData=function(a){this.alphaData=a,this._a=a.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},d.prototype.setScaleData=function(a){this.scaleData=a,this._s=a.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},d.prototype.setTintData=function(a){this.tintData=a,this._t=a.length-1,this.tint=this.tintData[this._t].color,this.autoTint=!0},d.prototype.reset=function(a,b){return this.position.set(a,b),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{109:109,126:126}],108:[function(a,b,c){function d(a,b){e.Sprite.call(this,b),this.game=a,this._cached=!1,this._width=b?b.width:0,this._height=b?b.height:0,this._glDatas=[]}var e=a("pixi");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){},d.prototype.cache=function(a){var b=this.game.renderer,c=e.RenderTexture.create(this._width,this._height);b.render(this,c,a||!1),this._cached=!0,this.texture=c},d.prototype.uncache=function(){this._cached=!1},d.prototype._onTextureUpdate=function(){this._cached&&e.Sprite.prototype._onTextureUpdate.call(this)},d.prototype._renderWebGL=function(a){var b=this._texture;this._cached?e.Sprite.prototype._renderWebGL.call(this,a):b&&b._uvs&&this._renderShaderWebGL(a)},d.prototype._renderShaderWebGL=function(a){var b,c,d;this._texture;a.flush(),b=a.gl,c=this._glDatas[a.CONTEXT_UID],c||(c={shader:this.getShader(b),quad:new e.Quad(b)},this._glDatas[a.CONTEXT_UID]=c,c.quad.initVao(c.shader)),d=c.quad.vertices,d[0]=d[6]=this._width*-this.anchor.x,d[1]=d[3]=this._height*-this.anchor.y,d[2]=d[4]=this._width*(1-this.anchor.x),d[5]=d[7]=this._height*(1-this.anchor.y),c.quad.upload(),a.bindShader(c.shader),this.apply(a,c.shader),c.quad.draw()},d.prototype.apply=function(a,b){b.uniforms.translationMatrix=this.worldTransform.toArray(!0),a.bindTexture(this._texture,0)},d.prototype.getBounds=function(){var a,b,c,d,e=this._width,f=this._height,g=e*(1-this.anchor.x),h=e*-this.anchor.x,i=f*(1-this.anchor.y),j=f*-this.anchor.y,k=this.worldTransform,l=k.a,m=k.b,n=k.c,o=k.d,p=k.tx,q=k.ty,r=l*h+n*j+p,s=o*j+m*h+q,t=l*g+n*j+p,u=o*j+m*g+q,v=l*g+n*i+p,w=o*i+m*g+q,x=l*h+n*i+p,y=o*i+m*h+q,z=r;return z=t<z?t:z,z=v<z?v:z,z=x<z?x:z,b=s,b=u<b?u:b,b=w<b?w:b,b=y<b?y:b,a=r,a=t>a?t:a,a=v>a?v:a,a=x>a?x:a,c=s,c=u>c?u:c,c=w>c?w:c,c=y>c?y:c,d=this._bounds,d.x=z,d.width=a-z,d.y=b,d.height=c-b,this._currentBounds=d,d},d.prototype.getShader=function(a){},d.prototype.getRepeatTexture=function(a){var b=game.cache.getImage(a,!0).base;return b.wrapMode=e.WRAP_MODES.REPEAT,b},b.exports=d},{pixi:"pixi"}],109:[function(a,b,c){function d(a,b,c){b=b||null,c=c||null,this.type=f.SPRITE,this.bounds=new g,e.Sprite.call(this),h.init.call(this,a,b,c)}var e=a("pixi"),f=a(88),g=(a(126),a(127)),h=a(114),i=a(117);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,h.install.call(d.prototype,["Mixin","Animation","AutoCull","Bounds","Destroy","LoadTexture","InWorld","InputEnabled","Overlap"]),d.prototype.preUpdateCore=h.preUpdate,d.prototype.preUpdateInWorld=i.preUpdate,d.prototype.update=function(){this.preUpdateInWorld(),this.preUpdateCore()},d.prototype.getBounds=function(){return this.bounds.copyFrom(e.Sprite.prototype.getBounds.call(this))},b.exports=d},{114:114,117:117,126:126,127:127,88:88,pixi:"pixi"}],110:[function(a,b,c){function d(a,b,c){b=b||null,c=c||[],this.points=[],this._hasUpdateAnimation=!1,this._updateAnimationCallback=null,this.type=f.STRIP,e.mesh.Rope.call(this,a.cache.getItem("__default",g.TEXTURE).texture,c),h.init.call(this,a,b)}var e=a("pixi"),f=a(88),g=a(128),h=a(114);d.prototype=Object.create(e.mesh.Rope.prototype),d.prototype.constructor=d,h.install.call(d.prototype,["Mixin","Bounds","Destroy","LoadTexture"]),d.prototype.preUpdateCore=h.preUpdate,d.prototype.update=function(){this.preUpdateCore(),this._hasUpdateAnimation&&this.updateAnimation.call(this)},Object.defineProperty(d.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(a){a&&"function"==typeof a?(this._hasUpdateAnimation=!0,this._updateAnimation=a):(this._hasUpdateAnimation=!1,this._updateAnimation=null)}}),b.exports=d},{114:114,128:128,88:88,pixi:"pixi"}],111:[function(a,b,c){function d(){}d.prototype={play:function(a,b,c,d){if(this.animations)return this.animations.play(a,b,c,d)}},b.exports=d},{}],112:[function(a,b,c){function d(){}d.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},b.exports=d},{}],113:[function(a,b,c){function d(){}d.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},left:{get:function(){return this.x-this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX}},top:{get:function(){return this.y-this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY}}},b.exports=d},{}],114:[function(a,b,c){function d(){}var e=a(158),f=a(126),g=(a(127),a(84)),h=a(120),i=a(111),j=a(119),k=a(112),l=a(117),m=a(113),n=a(118),o=a(116),p=a(115),q=a(121);d.modules={Mixin:h,Animation:i,LoadTexture:j,AutoCull:k,InWorld:l,Bounds:m,InputEnabled:n,FixedToCamera:o,Destroy:p,Overlap:q},d.install=function(a){var b,c,f;for(e.mixinPrototype(this,d.prototype),this.components={},f=0;f<a.length;f++)b=a[f],c="Destroy"===b,e.mixinPrototype(this,d.modules[b].prototype,c),this.components[b]=!0},d.init=function(a,b,c){this.game=a,this.key=b,this.components.Animation&&(this.animations=new g(this)),this.components.LoadTexture&&null!==b&&this.loadTexture(b,c),this.components.FixedToCamera&&(this.cameraOffset=new f(this.x,this.y))},d.preUpdate=function(){return this.pendingDestroy?void this.destroy():this.exists&&this.parent.exists?(this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),!0):(this.renderOrderID=-1,!1)},d.prototype={game:null,name:"",components:{},z:0,animations:void 0,key:"",debug:!1,renderOrderID:0,pendingDestroy:!1,_exists:!0,exists:{get:function(){return this._exists},set:function(a){a?(this._exists=!0,this.visible=!0):(this._exists=!1,this.visible=!1)}},update:function(){}},b.exports=d},{111:111,112:112,113:113,115:115,116:116,117:117,118:118,119:119,120:120,121:121,126:126,127:127,158:158,84:84}],115:[function(a,b,c){function d(){}var e=a("pixi"),f=a(99);d.prototype={destroyPhase:!1,destroy:function(a){if(null!==this.game&&!this.destroyPhase){void 0===a&&(a=!0),this.destroyPhase=!0,this.parent&&(this.parent instanceof f?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy(),this.game.tweens.removeFrom(this);var b=this.children.length;if(a)for(;b--;)this.children[b].destroy(a);else for(;b--;)this.removeChild(this.children[b]);this._frame&&(this._frame=null),this.exists=!1,this.visible=!1,this.game=null,this.renderable=!1,e.Sprite.prototype.destroy.call(this),this.destroyPhase=!1,this.pendingDestroy=!1}}},b.exports=d},{99:99,pixi:"pixi"}],116:[function(a,b,c){function d(){}var e=a(126);d.preUpdate=function(){var a=this.game;this.fixedToCamera&&(this.position.x=a.camera.x,this.position.y=a.camera.y)},d.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(a){a?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new e},b.exports=d},{126:126}],117:[function(a,b,c){function d(){}var e=a(127);d.preUpdate=function(){var a,b=this.game;(this.autoCull||this.checkWorldBounds)&&(this.autoCullBounds.copyFrom(this.getBounds()),this.autoCullBounds.x+=b.camera.view.x,this.autoCullBounds.y+=b.camera.view.y,this.autoCull&&(a=b.world.camera.view.intersects(this.autoCullBounds),this.autoCullFired&&a?(this.autoCullFired=!1,this.renderable=!0,b.world.camera.totalInView++):this.autoCullFired||a||(this.autoCullFired=!0,this.renderable=!1,b.world.camera.totalInView--)),this.checkWorldBounds&&(this.outOfBoundsFired&&a?(this.outOfBoundsFired=!1,this.emit("enterBounds",this)):this.outOfBoundsFired||a||(this.outOfBoundsFired=!0,this.emit("exitBounds",this))))},d.prototype={autoCullBounds:new e,autoCullFired:!0,checkWorldBounds:!1,outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},b.exports=d},{127:127}],118:[function(a,b,c){function d(){}var e=a(91);d.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(a){a?null===this.input?(this.input=new e(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},b.exports=d},{91:91}],119:[function(a,b,c){function d(){}var e=a("pixi"),f=a(127);d.prototype={customRender:!1,_frame:null,loadTexture:function(a,b,c){(c||void 0===c)&&this.animations&&this.animations.stop(),this.key=a,this.customRender=!1;var d=!0,g=!this.texture.baseTexture.scaleMode;a instanceof e.RenderTexture||a instanceof e.Texture?this.texture=a:(img=this.game.cache.getImage(a,!0),this.key=img.key,this.texture=new e.Texture(img.base),this.animations&&(d=!this.animations.loadFrameData(img.frameData,b||0))),d&&(this._frame=f.clone(this.texture.frame)),g||(this.texture.baseTexture.scaleMode=1),img.base.isPowerOfTwo&&(img.base.mipmap=!0)},setFrame:function(a){this._frame=a,this.texture.frame.x=a.x,this.texture.frame.y=a.y,this.texture.frame.width=a.width,this.texture.frame.height=a.height,this.texture.orig.x=a.x,this.texture.orig.y=a.y,this.texture.orig.width=a.width,this.texture.orig.height=a.height,a.trimmed?(this.texture.trim?(this.texture.trim.x=a.spriteSourceSizeX,this.texture.trim.y=a.spriteSourceSizeY,this.texture.trim.width=a.sourceSizeW,this.texture.trim.height=a.sourceSizeH):this.texture.trim={x:a.spriteSourceSizeX,y:a.spriteSourceSizeY,width:a.sourceSizeW,height:a.sourceSizeH},this.texture.width=a.sourceSizeW,this.texture.height=a.sourceSizeH,this.texture.frame.width=a.sourceSizeW,this.texture.frame.height=a.sourceSizeH):!a.trimmed&&this.texture.trim&&(this.texture.trim=null),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(a,b,c){this.texture.frame.resize(b,c),this.texture.setFrame(this.texture.frame)},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(a){this.animations.frame=a}}},b.exports=d},{127:127,pixi:"pixi"}],120:[function(a,b,c){function d(){}var e=a(158);d.prototype={mixinPrototype:function(a){e.mixinPrototype(this,a,!0)}},b.exports=d},{158:158}],121:[function(a,b,c){function d(){}var e=a(127);d.prototype={overlap:function(a){return e.intersects(this.getBounds(),a)}},b.exports=d},{127:127}],122:[function(a,b,c){function d(){e.Transform.call(this)}var e=a("pixi");d.prototype=Object.create(e.Transform.prototype),d.prototype.constructor=d,d.prototype.updateTransform=function(a){var b,c,d,e,f=a.worldTransform,g=this.worldTransform,h=this.localTransform;b=this._cr*this.scale.x,c=this._sr*this.scale.x,d=-this._sr*this.scale.y,e=this._cr*this.scale.y,h.a=this._cy*b+this._sy*d,h.b=this._cy*c+this._sy*e,h.c=this._nsx*b+this._cx*d,h.d=this._nsx*c+this._cx*e,h.tx=this.position.x-(this.pivot.x*h.a+this.pivot.y*h.c),h.ty=this.position.y-(this.pivot.x*h.b+this.pivot.y*h.d),g.tx=h.tx*f.a+h.ty*f.c+f.tx,g.ty=h.tx*f.b+h.ty*f.d+f.ty},b.exports=d},{pixi:"pixi"}],123:[function(a,b,c){(function(c){function d(a,b,c){a=a||0,b=b||0,c=c||0,this.x=a,this.y=b,this._radius=c,c>0?this._diameter=2*c:this._diameter=0,this.type=e.CIRCLE}var e=a(88),f=a(126),g=a(127),h=a(160);d.prototype={circumference:function(){return 2*(h.PI*this._radius)},random:function(a,b){var d,e,g,h,i;return void 0===a&&(a=!1),void 0===b&&(b=new f),d=2*c.Math.PI*c.Math.random(),e=c.Math.random()+c.Math.random(),g=e>1?2-e:e,h=g*c.Math.cos(d),i=g*c.Math.sin(d),a?(b.x=h*this.radius,b.y=i*this.radius):(b.x=this.x+h*this.radius,b.y=this.y+i*this.radius),b},getBounds:function(){return new g(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(a,b,c){return this.x=a,this.y=b,this._radius=c,this._diameter=2*c,this},copyFrom:function(a){return this.setTo(a.x,a.y,a.diameter)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.radius=this._radius,a},distance:function(a,b){var d=h.distance(this.x,this.y,a.x,a.y);return b?c.Math.round(d):d},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.diameter):a.setTo(this.x,this.y,this.diameter),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c,e){return d.circumferencePoint(this,a,b,c,e)},circumferenceAngle:function(a){return d.circumferenceAngle(this,a)},offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},toString:function(){return"[{Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"diameter",{get:function(){return this._diameter},set:function(a){a>0&&(this._diameter=a,this._radius=.5*a)}}),Object.defineProperty(d.prototype,"radius",{get:function(){return this._radius},set:function(a){a>0&&(this._radius=a,this._diameter=2*a)}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.x-this._radius},set:function(a){a>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this._radius},set:function(a){a<this.x?(this._radius=0,this._diameter=0):this.radius=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y-this._radius},set:function(a){a>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-a;
}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(a){a<this.y?(this._radius=0,this._diameter=0):this.radius=a-this.y}}),Object.defineProperty(d.prototype,"area",{get:function(){return this._radius>0?c.Math.PI*this._radius*this._radius:0}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this._diameter},set:function(a){a===!0&&this.setTo(0,0,0)}}),d.contains=function(a,b,c){var d,e;return a.radius>0&&b>=a.left&&b<=a.right&&c>=a.top&&c<=a.bottom&&(d=(a.x-b)*(a.x-b),e=(a.y-c)*(a.y-c),d+e<=a.radius*a.radius)},d.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.diameter==b.diameter},d.intersects=function(a,b){return h.distance(a.x,a.y,b.x,b.y)<=a.radius+b.radius},d.circumferencePoint=function(a,b,d,e,g){return void 0===d&&(d=!1),void 0===e&&(e=!1),void 0===g&&(g=new f),d===!0&&(b=h.degToRad(b)),e?(g.x=a.radius*c.Math.cos(b),g.y=a.radius*c.Math.sin(b)):(g.x=a.x+a.radius*c.Math.cos(b),g.y=a.y+a.radius*c.Math.sin(b)),g},d.circumferenceAngle=function(a,b){return c.Math.atan2(b.y-a.y,b.x-a.x)},d.intersectsRectangle=function(a,b){var d,e,f,g,h,i,j,k=c.Math.abs(a.x-b.x-b.halfWidth),l=b.halfWidth+a.radius;return!(k>l)&&(d=c.Math.abs(a.y-b.y-b.halfHeight),e=b.halfHeight+a.radius,!(d>e)&&(k<=b.halfWidth||d<=b.halfHeight||(f=k-b.halfWidth,g=d-b.halfHeight,h=f*f,i=g*g,j=a.radius*a.radius,h+i<=j)))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126,127:127,160:160,88:88}],124:[function(a,b,c){(function(c){function d(a,b,c,d){a=a||0,b=b||0,c=c||0,d=d||0,this.x=a,this.y=b,this.width=c,this.height=d,this.type=e.ELLIPSE}var e=a(88),f=a(127),g=a(126);d.prototype={setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},getBounds:function(){return new f(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y,this.width,this.height):a.setTo(this.x,this.y,this.width,this.height),a},contains:function(a,b){return d.contains(this,a,b)},circumferencePoint:function(a,b,c){return d.circumferencePoint(this,a,b,c)},random:function(a){var b,d;return void 0===a&&(a=new g),b=c.Math.random()*c.Math.PI*2,d=c.Math.random(),a.x=c.Math.sqrt(d)*c.Math.cos(b),a.y=c.Math.sqrt(d)*c.Math.sin(b),a.x=this.x+a.x*this.width/2,a.y=this.y+a.y*this.height/2,a},toString:function(){return"[{Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"left",{get:function(){return this.x},set:function(a){this.x=a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},set:function(a){this.y=a}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(d.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),d.contains=function(a,b,c){var d,e;return!(a.width<=0||a.height<=0)&&(d=(b-a.x)/a.width-.5,e=(c-a.y)/a.height-.5,d*=d,e*=e,d+e<.25)},d.circumferencePoint=function(a,b,d,e){return void 0===d&&(d=!1),void 0===e&&(e=new g),d===!0&&(b=c.Math.degToRad(b)),e.x=a.x+a.width*c.Math.cos(b),e.y=a.y+a.height*c.Math.sin(b),e},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126,127:127,88:88}],125:[function(a,b,c){(function(c){function d(a,b,c,d){4===arguments.length||0===arguments.length?(a=a||0,b=b||0,c=c||0,d=d||0,this.start=new f(a,b),this.end=new f(c,d)):(this.start=(new f).copyFrom(a),this.end=(new f).copyFrom(b)),this.type=e.LINE}var e=a(88),f=a(126),g=a(160);d.prototype={setTo:function(a,b,c,d){return this.start.setTo(a,b),this.end.setTo(c,d),this},fromSprite:function(a,b){return this.setTo(a.x,a.y,b.x,b.y)},fromAngle:function(a,b,d,e){return this.start.setTo(a,b),this.end.setTo(a+c.Math.cos(d)*e,b+c.Math.sin(d)*e),this},rotate:function(a,b){var c=(this.start.x+this.end.x)/2,d=(this.start.y+this.end.y)/2;return this.start.rotate(c,d,a,b),this.end.rotate(c,d,a,b),this},rotateAround:function(a,b,c,d){return this.start.rotate(a,b,c,d),this.end.rotate(a,b,c,d),this},intersects:function(a,b,c){return d.intersectsPoints(this.start,this.end,a.start,a.end,b,c)},reflect:function(a){return d.reflect(this,a)},midPoint:function(a){return void 0===a&&(a=new f),a.x=(this.start.x+this.end.x)/2,a.y=(this.start.y+this.end.y)/2,a},centerOn:function(a,b){var c=(this.start.x+this.end.x)/2,d=(this.start.y+this.end.y)/2,e=a-c,f=b-d;return this.start.add(e,f),this.end.add(e,f),this},pointOnLine:function(a,b){return(a-this.start.x)*(this.end.y-this.start.y)===(this.end.x-this.start.x)*(b-this.start.y)},pointOnSegment:function(a,b){var d=c.Math.min(this.start.x,this.end.x),e=c.Math.max(this.start.x,this.end.x),f=c.Math.min(this.start.y,this.end.y),g=c.Math.max(this.start.y,this.end.y);return this.pointOnLine(a,b)&&a>=d&&a<=e&&b>=f&&b<=g},pointAtDistance:function(a,b){return d.pointAtDistance(this.start,this.end,a,b)},random:function(a){void 0===a&&(a=new f);var b=c.Math.random();return a.x=this.start.x+b*(this.end.x-this.start.x),a.y=this.start.y+b*(this.end.y-this.start.y),a},coordinatesOnLine:function(a,b){var d,e,f,g,h,i,j,k,l,m,n;for(void 0===a&&(a=1),void 0===b&&(b=[]),d=c.Math.round(this.start.x),e=c.Math.round(this.start.y),f=c.Math.round(this.end.x),g=c.Math.round(this.end.y),h=c.Math.abs(f-d),i=c.Math.abs(g-e),j=d<f?1:-1,k=e<g?1:-1,l=h-i,b.push([d,e]),m=1;d!=f||e!=g;)n=l<<1,n>-i&&(l-=i,d+=j),n<h&&(l+=h,e+=k),m%a===0&&b.push([d,e]),m++;return b},clone:function(a){return void 0===a||null===a?a=new d(this.start.x,this.start.y,this.end.x,this.end.y):a.setTo(this.start.x,this.start.y,this.end.x,this.end.y),a}},Object.defineProperty(d.prototype,"length",{get:function(){return c.Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(d.prototype,"angle",{get:function(){return c.Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(d.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(d.prototype,"perpSlope",{get:function(){return-((this.end.x-this.start.x)/(this.end.y-this.start.y))}}),Object.defineProperty(d.prototype,"vector",{get:function(){return new f(this.end.x-this.start.x,this.end.y-this.start.y)}}),Object.defineProperty(d.prototype,"x",{get:function(){return c.Math.min(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"y",{get:function(){return c.Math.min(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"left",{get:function(){return c.Math.min(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"right",{get:function(){return c.Math.max(this.start.x,this.end.x)}}),Object.defineProperty(d.prototype,"top",{get:function(){return c.Math.min(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return c.Math.max(this.start.y,this.end.y)}}),Object.defineProperty(d.prototype,"width",{get:function(){return c.Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(d.prototype,"height",{get:function(){return c.Math.abs(this.start.y-this.end.y)}}),Object.defineProperty(d.prototype,"normalX",{get:function(){return c.Math.cos(this.angle-1.5707963267948966)}}),Object.defineProperty(d.prototype,"normalY",{get:function(){return c.Math.sin(this.angle-1.5707963267948966)}}),Object.defineProperty(d.prototype,"normalAngle",{get:function(){return g.wrap(this.angle-1.5707963267948966,-c.Math.PI,c.Math.PI)}}),d.pointAtDistance=function(a,b,c,d){return void 0===d&&(d=new f),d.setTo(b.x-a.x,b.y-a.y),d.normalize(),d.multiply(c,c),d.x=a.x+d.x,d.y=a.y+d.y,d},d.intersectsPoints=function(a,b,c,d,e,g){var h,i,j,k,l,m,n,o,p,q;return void 0===e&&(e=!0),void 0===g&&(g=new f),h=b.y-a.y,i=d.y-c.y,j=a.x-b.x,k=c.x-d.x,l=b.x*a.y-a.x*b.y,m=d.x*c.y-c.x*d.y,n=h*k-i*j,0===n?null:(g.x=(j*m-k*l)/n,g.y=(i*l-h*m)/n,e?(o=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y),p=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/o,q=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/o,p>=0&&p<=1&&q>=0&&q<=1?g:null):g)},d.intersects=function(a,b,c,e){return d.intersectsPoints(a.start,a.end,b.start,b.end,c,e)},d.reflect=function(a,b){return 2*b.normalAngle-3.141592653589793-a.angle},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{126:126,160:160,88:88}],126:[function(a,b,c){(function(c){function d(a,b){a=a||0,b=b||0,this.x=a,this.y=b,this.type=e.POINT}var e=a(88),f=a(160);d.prototype={copyFrom:function(a){return this.setTo(a.x,a.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(a,b){return this.x=a||0,this.y=b||(0!==b?this.x:0),this},set:function(a,b){return this.x=a||0,this.y=b||(0!==b?this.x:0),this},add:function(a,b){return this.x+=a,this.y+=b,this},subtract:function(a,b){return this.x-=a,this.y-=b,this},multiply:function(a,b){return this.x*=a,this.y*=b,this},divide:function(a,b){return this.x/=a,this.y/=b,this},clampX:function(a,b){return this.x=f.clamp(this.x,a,b),this},clampY:function(a,b){return this.y=f.clamp(this.y,a,b),this},clamp:function(a,b){return this.x=f.clamp(this.x,a,b),this.y=f.clamp(this.y,a,b),this},toFixed:function(a){return a=a||2,this.x=f.roundTo(this.x,a),this.y=f.roundTo(this.y,a),this},clone:function(a){return void 0===a||null===a?a=new d(this.x,this.y):a.setTo(this.x,this.y),a},copyTo:function(a){return a.x=this.x,a.y=this.y,a},distance:function(a,b){return d.distance(this,a,b)},equals:function(a){return a.x===this.x&&a.y===this.y},angle:function(a,b){return void 0===b&&(b=!1),b?f.radToDeg(c.Math.atan2(a.y-this.y,a.x-this.x)):c.Math.atan2(a.y-this.y,a.x-this.x)},rotate:function(a,b,c,e,f){return d.rotate(this,a,b,c,e,f)},getMagnitude:function(){return c.Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(a){return this.normalize().multiply(a,a)},normalize:function(){if(!this.isZero()){var a=this.getMagnitude();this.x/=a,this.y/=a}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},interpolate:function(a,b,c){return d.interpolate(this,a,b,c)},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(this.y*-1,this.x)},floor:function(){return this.setTo(c.Math.floor(this.x),c.Math.floor(this.y))},ceil:function(){return this.setTo(c.Math.ceil(this.x),c.Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},d.prototype.constructor=d,d.add=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x+b.x,c.y=a.y+b.y,c},d.subtract=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x-b.x,c.y=a.y-b.y,c},d.multiply=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x*b.x,c.y=a.y*b.y,c},d.divide=function(a,b,c){return void 0===c&&(c=new d),c.x=a.x/b.x,c.y=a.y/b.y,c},d.equals=function(a,b){return a.x===b.x&&a.y===b.y},d.angle=function(a,b){var d=c.Math.atan2(a.y-b.y,a.x-b.x);return d<0&&(d+=2*c.Math.PI),d},d.negative=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.x,-a.y)},d.multiplyAdd=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+b.x*c,a.y+b.y*c)},d.interpolate=function(a,b,c,e){return void 0===e&&(e=new d),e.setTo(a.x+(b.x-a.x)*c,a.y+(b.y-a.y)*c)},d.cosineInterpolate=function(a,b,e,f){return void 0===f&&(f=new d),e=(1-c.Math.cos(e*c.Math.PI))/2,f.setTo(a.x*(1-e)+b.x*e,a.y*(1-e)+b.y*e)},d.perp=function(a,b){return void 0===b&&(b=new d),b.setTo(-a.y,a.x)},d.rperp=function(a,b){return void 0===b&&(b=new d),b.setTo(a.y,-a.x)},d.distance=function(a,b,d){var e=f.distance(a.x,a.y,b.x,b.y);return d?c.Math.round(e):e},d.project=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b)/b.getMagnitudeSq();return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.projectUnit=function(a,b,c){void 0===c&&(c=new d);var e=a.dot(b);return 0!==e&&c.setTo(e*b.x,e*b.y),c},d.normalRightHand=function(a,b){return void 0===b&&(b=new d),b.setTo(a.y*-1,a.x)},d.normalize=function(a,b){void 0===b&&(b=new d);var c=a.getMagnitude();return 0!==c&&b.setTo(a.x/c,a.y/c),b},d.rotate=function(a,b,d,e,g,h){var i,j,k,l,m;return g&&(e=f.degToRad(e)),void 0===h?(a.subtract(b,d),i=c.Math.sin(e),j=c.Math.cos(e),k=j*a.x-i*a.y,l=i*a.x+j*a.y,a.x=k+b,a.y=l+d):(m=e+c.Math.atan2(a.y-d,a.x-b),a.x=b+h*c.Math.cos(m),a.y=d+h*c.Math.sin(m)),a},d.centroid=function(a,b){var c,e;if(void 0===b&&(b=new d),"[object Array]"!==Object.prototype.toString.call(a))throw Error("Point. Parameter 'points' must be an array");if(c=a.length,c<1)throw Error("Point. Parameter 'points' array must not be empty");if(1===c)return b.copyFrom(a[0]),b;for(e=0;e<c;e++)d.add(b,a[e],b);return b.divide(c,c),b},d.parse=function(a,b,c){b=b||"x",c=c||"y";var e=new d;return a[b]&&(e.x=parseInt(a[b],10)),a[c]&&(e.y=parseInt(a[c],10)),e},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{160:160,88:88}],127:[function(a,b,c){function d(a,b,c,d){a=a||0,b=b||0,c=c||0,d=d||0,this.x=a,this.y=b,this.width=c,this.height=d,this.type=e.RECTANGLE}var e=a(88),f=a(126);d.prototype={offset:function(a,b){return this.x+=a,this.y+=b,this},offsetPoint:function(a){return this.offset(a.x,a.y)},setTo:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},scale:function(a,b){return void 0===b&&(b=a),this.width*=a,this.height*=b,this},centerOn:function(a,b){return this.centerX=a,this.centerY=b,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},inflate:function(a,b){return d.inflate(this,a,b)},size:function(a){return d.size(this,a)},resize:function(a,b){return this.width=a,this.height=b,this},clone:function(a){return d.clone(this,a)},contains:function(a,b){return d.contains(this,a,b)},containsRect:function(a){return d.containsRect(a,this)},equals:function(a){return d.equals(this,a)},intersection:function(a,b){return d.intersection(this,a,b)},intersects:function(a){return d.intersects(this,a)},intersectsRaw:function(a,b,c,e,f){return d.intersectsRaw(this,a,b,c,e,f)},union:function(a,b){return d.union(this,a,b)},random:function(a){return void 0===a&&(a=new f),a.x=this.randomX,a.y=this.randomY,a},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(d.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){a<=this.y?this.height=0:this.height=a-this.y}}),Object.defineProperty(d.prototype,"bottomLeft",{get:function(){return new f(this.x,this.bottom)},set:function(a){this.x=a.x,this.bottom=a.y}}),Object.defineProperty(d.prototype,"bottomRight",{get:function(){return new f(this.right,this.bottom)},set:function(a){this.right=a.x,this.bottom=a.y}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.x},set:function(a){a>=this.right?this.width=0:this.width=this.right-a,this.x=a}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.x+this.width},set:function(a){a<=this.x?this.width=0:this.width=a-this.x}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(d.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(d.prototype,"center",{get:function(){return new f(this.centerX,this.centerY)}}),Object.defineProperty(d.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(a){this.x=a-this.halfWidth}}),Object.defineProperty(d.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(a){this.y=a-this.halfHeight}}),Object.defineProperty(d.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(d.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(d.prototype,"top",{get:function(){return this.y},set:function(a){a>=this.bottom?(this.height=0,this.y=a):this.height=this.bottom-a}}),Object.defineProperty(d.prototype,"topLeft",{get:function(){return new f(this.x,this.y)},set:function(a){this.x=a.x,this.y=a.y}}),Object.defineProperty(d.prototype,"topRight",{get:function(){return new f(this.x+this.width,this.y)},set:function(a){this.right=a.x,this.y=a.y}}),Object.defineProperty(d.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(a){a===!0&&this.setTo(0,0,0,0)}}),d.inflate=function(a,b,c){return a.x-=b,a.width+=2*b,a.y-=c,a.height+=2*c,a},d.inflatePoint=function(a,b){return d.inflate(a,b.x,b.y)},d.size=function(a,b){return void 0===b||null===b?b=new f(a.width,a.height):b.setTo(a.width,a.height),b},d.clone=function(a,b){return void 0===b||null===b?b=new d(a.x,a.y,a.width,a.height):b.setTo(a.x,a.y,a.width,a.height),b},d.contains=function(a,b,c){return!(a.width<=0||a.height<=0)&&(b>=a.x&&b<a.right&&c>=a.y&&c<a.bottom)},d.containsRaw=function(a,b,c,d,e,f){return e>=a&&e<a+c&&f>=b&&f<b+d},d.containsPoint=function(a,b){return d.contains(a,b.x,b.y)},d.containsRect=function(a,b){return!(a.volume>b.volume)&&(a.x>=b.x&&a.y>=b.y&&a.right<b.right&&a.bottom<b.bottom)},d.equals=function(a,b){return a.x==b.x&&a.y==b.y&&a.width==b.width&&a.height==b.height},d.sameDimensions=function(a,b){return a.width===b.width&&a.height===b.height},d.intersection=function(a,b,c){return void 0===c&&(c=new d),d.intersects(a,b)&&(c.x=Math.max(a.x,b.x),c.y=Math.max(a.y,b.y),c.width=Math.min(a.right,b.right)-c.x,c.height=Math.min(a.bottom,b.bottom)-c.y),c},d.intersects=function(a,b){return!(a.width<=0||a.height<=0||b.width<=0||b.height<=0)&&!(a.right<b.x||a.bottom<b.y||a.x>b.right||a.y>b.bottom)},d.intersectsRaw=function(a,b,c,d,e,f){return void 0===f&&(f=0),!(b>a.right+f||c<a.left-f||d>a.bottom+f||e<a.top-f)},d.union=function(a,b,c){return void 0===c&&(c=new d),c.setTo(Math.min(a.x,b.x),Math.min(a.y,b.y),Math.max(a.right,b.right)-Math.min(a.left,b.left),Math.max(a.bottom,b.bottom)-Math.min(a.top,b.top))},d.aabb=function(a,b){void 0===b&&(b=new d);var c=Number.MIN_VALUE,e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MAX_VALUE;return a.forEach(function(a){a.x>c&&(c=a.x),a.x<e&&(e=a.x),a.y>f&&(f=a.y),a.y<g&&(g=a.y)}),b.setTo(e,g,c-e,f-g),b},b.exports=d},{126:126,88:88}],128:[function(a,b,c){function d(a){this.game=a,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this._cacheMap=[],this._cacheMap[d.CANVAS]=this._cache.canvas,this._cacheMap[d.IMAGE]=this._cache.image,this._cacheMap[d.TEXTURE]=this._cache.texture,this._cacheMap[d.SOUND]=this._cache.sound,this._cacheMap[d.TEXT]=this._cache.text,this._cacheMap[d.PHYSICS]=this._cache.physics,this._cacheMap[d.TILEMAP]=this._cache.tilemap,this._cacheMap[d.BINARY]=this._cache.binary,this._cacheMap[d.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[d.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[d.JSON]=this._cache.json,this._cacheMap[d.XML]=this._cache.xml,this._cacheMap[d.VIDEO]=this._cache.video,this._cacheMap[d.SHADER]=this._cache.shader,this._cacheMap[d.RENDER_TEXTURE]=this._cache.renderTexture,this.addDefaultImage(),this.addDefaultTexture(),this.addMissingImage()}var e=a("pixi"),f=a(129),g=a(86),h=a(87),i=a(85),j=a(158);d.CANVAS=1,d.IMAGE=2,d.TEXTURE=3,d.SOUND=4,d.TEXT=5,d.PHYSICS=6,d.TILEMAP=7,d.BINARY=8,d.BITMAPDATA=9,d.BITMAPFONT=10,d.JSON=11,d.XML=12,d.VIDEO=13,d.SHADER=14,d.RENDER_TEXTURE=15,d.prototype={addCanvas:function(a,b,c){void 0===c&&(c=b.getContext("2d")),this._cache.canvas[a]={canvas:b,context:c}},addImage:function(a,b,c){this.checkImageKey(a)&&this.removeImage(a);var d=new e.BaseTexture(c),f={key:a,url:b,data:c,base:d,frame:new g(0,0,0,c.width,c.height,a),frameData:new h};f.frameData.addFrame(new g(0,0,0,c.width,c.height,b)),this._cache.image[a]=f,this._resolveURL(b,f),e.utils.BaseTextureCache[a]=d,d.resolution=e.utils.getResolutionOfUrl(b)},addDefaultImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",this.addImage("__default",null,a)},addMissingImage:function(){var a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",this.addImage("__missing",null,a)},addDefaultTexture:function(){var a=this.getImage("__default",!0).base,b=new e.Texture(a);this.addTexture("__default",b)},addSound:function(a,b,c,d,e){void 0===d&&(d=!0,e=!1),void 0===e&&(d=!1,e=!0);var f=!1;e&&(f=!0),this._cache.sound[a]={url:b,data:c,isDecoding:!1,decoded:f,webAudio:d,audioTag:e,locked:this.game.sound.touchLocked},this._resolveURL(b,this._cache.sound[a])},addText:function(a,b,c){this._cache.text[a]={url:b,data:c},this._resolveURL(b,this._cache.text[a])},addTilemap:function(a,b,c){this._cache.tilemap[a]={url:b,data:c},this._resolveURL(b,this._cache.tilemap[a])},addBinary:function(a,b){this._cache.binary[a]=b},addBitmapData:function(a,b,c){return b.key=a,void 0===c&&(c=new h,c.addFrame(b.textureFrame)),this._cache.bitmapData[a]={data:b,frameData:c},b},addJSON:function(a,b,c){this._cache.json[a]={url:b,data:c},this._resolveURL(b,this._cache.json[a])},addXML:function(a,b,c){this._cache.xml[a]={url:b,data:c},this._resolveURL(b,this._cache.xml[a])},addShader:function(a,b,c){this._cache.shader[a]={url:b,data:c},this._resolveURL(b,this._cache.shader[a])},addRenderTexture:function(a,b){this._cache.renderTexture[a]={texture:b,frame:new g(0,0,0,b.width,b.height,"","")}},addTexture:function(a,b){this._cache.texture[a]={texture:b}},addSpriteSheet:function(a,b,c,d,f,g,h,j){void 0===g&&(g=-1),void 0===h&&(h=0),void 0===j&&(j=0);var k={key:a,url:b,data:c,frameWidth:d,frameHeight:f,margin:h,spacing:j,base:new e.BaseTexture(c),frameData:i.spriteSheet(this.game,c,d,f,g,h,j)};this._cache.image[a]=k,this._resolveURL(b,k)},addTextureAtlas:function(a,b,c,d,g){var h={key:a,url:b,data:c,base:new e.BaseTexture(c)};g===f.TEXTURE_ATLAS_JSON_PYXEL?h.frameData=i.JSONDataPyxel(this.game,d,a):Array.isArray(d.frames)?h.frameData=i.JSONData(this.game,d,a):h.frameData=i.JSONDataHash(this.game,d,a),this._cache.image[a]=h,this._resolveURL(b,h)},reloadSound:function(a){var b=this,c=this.getSound(a);c&&(c.data.src=c.url,c.data.addEventListener("canplaythrough",function(){return b.reloadSoundComplete(a)},!1),c.data.load())},reloadSoundComplete:function(a){var b=this.getSound(a);b&&(b.locked=!1,this.onSoundUnlock.dispatch(a))},updateSound:function(a,b,c){var d=this.getSound(a);d&&(d[b]=c)},decodedSound:function(a,b){var c=this.getSound(a);c.data=b,c.decoded=!0,c.isDecoding=!1},isSoundDecoded:function(a){var b=this.getItem(a,d.SOUND,"isSoundDecoded");if(b)return b.decoded},isSoundReady:function(a){var b=this.getItem(a,d.SOUND,"isSoundDecoded");if(b)return b.decoded&&!this.game.sound.touchLocked},checkKey:function(a,b){return!!this._cacheMap[a][b]},checkURL:function(a){return!!this._urlMap[this._resolveURL(a)]},checkCanvasKey:function(a){return this.checkKey(d.CANVAS,a)},checkImageKey:function(a){return this.checkKey(d.IMAGE,a)},checkTextureKey:function(a){return this.checkKey(d.TEXTURE,a)},checkSoundKey:function(a){return this.checkKey(d.SOUND,a)},checkTextKey:function(a){return this.checkKey(d.TEXT,a)},checkTilemapKey:function(a){return this.checkKey(d.TILEMAP,a)},checkBinaryKey:function(a){return this.checkKey(d.BINARY,a)},checkBitmapDataKey:function(a){return this.checkKey(d.BITMAPDATA,a)},checkJSONKey:function(a){return this.checkKey(d.JSON,a)},checkXMLKey:function(a){return this.checkKey(d.XML,a)},checkShaderKey:function(a){return this.checkKey(d.SHADER,a)},checkRenderTextureKey:function(a){return this.checkKey(d.RENDER_TEXTURE,a)},getItem:function(a,b,c,d){return this.checkKey(b,a)?void 0===d?this._cacheMap[b][a]:this._cacheMap[b][a][d]:(c&&console.warn("Cache."+c+': Key "'+a+'" not found in Cache.'),null)},getCanvas:function(a){return this.getItem(a,d.CANVAS,"getCanvas","canvas")},getImage:function(a,b){void 0!==a&&null!==a||(a="__default"),void 0===b&&(b=!1);var c=this.getItem(a,d.IMAGE,"getImage");return null===c&&(c=this.getItem("__missing",d.IMAGE,"getImage")),b?c:c.data},getTextureFrame:function(a){return this.getItem(a,d.TEXTURE,"getTextureFrame","frame")},getSound:function(a){return this.getItem(a,d.SOUND,"getSound")},getSoundData:function(a){return this.getItem(a,d.SOUND,"getSoundData","data")},getText:function(a){return this.getItem(a,d.TEXT,"getText","data")},getTilemapData:function(a){return this.getItem(a,d.TILEMAP,"getTilemapData")},getBinary:function(a){return this.getItem(a,d.BINARY,"getBinary")},getBitmapData:function(a){return this.getItem(a,d.BITMAPDATA,"getBitmapData","data")},getJSON:function(a,b){var c=this.getItem(a,d.JSON,"getJSON","data");return c?b?j.extend(!0,c):c:null},getXML:function(a){return this.getItem(a,d.XML,"getXML","data")},getShader:function(a){return this.getItem(a,d.SHADER,"getShader","data")},getRenderTexture:function(a){return this.getItem(a,d.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getBaseTexture","base")},getFrame:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getFrame","frame")},getFrameCount:function(a,b){var c=this.getFrameData(a,b);return c?c.total:0},getFrameData:function(a,b){return void 0===b&&(b=d.IMAGE),this.getItem(a,b,"getFrameData","frameData")},hasFrameData:function(a,b){return void 0===b&&(b=d.IMAGE),null!==this.getItem(a,b,"","frameData")},updateFrameData:function(a,b,c){void 0===c&&(c=d.IMAGE),this._cacheMap[c][a]&&(this._cacheMap[c][a].frameData=b)},getFrameByIndex:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrame(b):null},getFrameByName:function(a,b,c){var d=this.getFrameData(a,c);return d?d.getFrameByName(b):null},getPixiTexture:function(a){return e.TextureCache[a]?e.TextureCache[a]:(console.warn('Cache.getPixiTexture: Invalid key: "'+a+'"'),null)},getPixiBaseTexture:function(a){return e.BaseTextureCache[a]?e.BaseTextureCache[a]:(console.warn('Cache.getPixiBaseTexture: Invalid key: "'+a+'"'),null)},getURL:function(a){var a=this._resolveURL(a);return a?this._urlMap[a]:(console.warn('Cache.getUrl: Invalid url: "'+a+'" or Cache.autoResolveURL was false'),null)},getKeys:function(a){var b,c;if(void 0===a&&(a=d.IMAGE),b=[],this._cacheMap[a])for(c in this._cacheMap[a])"__default"!==c&&"__missing"!==c&&b.push(c);return b},removeCanvas:function(a){delete this._cache.canvas[a]},removeImage:function(a){var b=this.getImage(a,!0);b.base.destroy(),delete this._cache.image[a]},removeSound:function(a){delete this._cache.sound[a]},removeText:function(a){delete this._cache.text[a]},removeTilemap:function(a){delete this._cache.tilemap[a]},removeBinary:function(a){delete this._cache.binary[a]},removeBitmapData:function(a){delete this._cache.bitmapData[a]},removeJSON:function(a){delete this._cache.json[a]},removeXML:function(a){delete this._cache.xml[a]},removeShader:function(a){delete this._cache.shader[a]},removeRenderTexture:function(a){delete this._cache.renderTexture[a]},removeSpriteSheet:function(a){delete this._cache.spriteSheet[a]},removeTextureAtlas:function(a){delete this._cache.atlas[a]},_resolveURL:function(a,b){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+a,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",b&&(this._urlMap[this._urlTemp]=b),this._urlTemp):null},destroy:function(){var a,b,c;for(a=0;a<this._cacheMap.length;a++){b=this._cacheMap[a];for(c in b)"__default"!==c&&"__missing"!==c&&(b[c].destroy&&b[c].destroy(),delete b[c])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null}},d.prototype.constructor=d,b.exports=d},{129:129,158:158,85:85,86:86,87:87,pixi:"pixi"}],129:[function(a,b,c){(function(c){function d(a){this.game=a,this.cache=a.cache,this.isLoading=!1,this.hasLoaded=!1,this.resetLocked=!1,this.crossOrigin=!1,this.baseURL="",this.path="",this.useXDomainRequest=!1,this.enableParallel=!0,this.maxParallelDownloads=6,this._withSyncPointDepth=0,this._warnedAboutXDomainRequest=!1,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0,g.call(this)}var e=(a(88),a(160)),f=(a(143),a(140)),g=a(3);d.TEXTURE_ATLAS_JSON_ARRAY=0,d.TEXTURE_ATLAS_JSON_HASH=1,d.TEXTURE_ATLAS_JSON_PYXEL=2,d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.checkKeyExists=function(a,b){return this.getAssetIndex(a,b)>-1},d.prototype.getAssetIndex=function(a,b){var c,d,e=-1;for(c=0;c<this._fileList.length&&(d=this._fileList[c],d.type!==a||d.key!==b||(e=c,d.loaded||d.loading));c++);return e},d.prototype.getAsset=function(a,b){var c=this.getAssetIndex(a,b);return c>-1&&{index:c,file:this._fileList[c]}},d.prototype.reset=function(a,b){void 0===b&&(b=!1),this.resetLocked||(this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,b&&this.removeAllListeners())},d.prototype.addToFileList=function(a,b,c,d,e,f){var g,h,i,j;if(void 0===e&&(e=!1),void 0===b||""===b)return console.warn("Loader: Invalid or no key given of type "+a),this;if(void 0===c||null===c){if(!f)return console.warn("Loader: No URL given for file type: "+a+" key: "+b),this;c=b+f}if(g={type:a,key:b,path:this.path,url:c,syncPoint:this._withSyncPointDepth>0,data:null,loading:!1,loaded:!1,error:!1},d)for(h in d)g[h]=d[h];return i=this.getAssetIndex(a,b),e&&i>-1?(j=this._fileList[i],j.loading||j.loaded?(this._fileList.push(g),this._totalFileCount++):this._fileList[i]=g):i===-1&&(this._fileList.push(g),this._totalFileCount++),this},d.prototype.replaceInFileList=function(a,b,c,d){return this.addToFileList(a,b,c,d,!0)},d.prototype.image=function(a,b,c){return this.addToFileList("image",a,b,void 0,c,".png")},d.prototype.text=function(a,b,c){return this.addToFileList("text",a,b,void 0,c,".txt")},d.prototype.json=function(a,b,c){return this.addToFileList("json",a,b,void 0,c,".json")},d.prototype.shader=function(a,b,c){return this.addToFileList("shader",a,b,void 0,c,".frag")},d.prototype.xml=function(a,b,c){return this.addToFileList("xml",a,b,void 0,c,".xml")},d.prototype.script=function(a,b,c,d){
return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("script",a,b,{syncPoint:!0,callback:c,callbackContext:d},!1,".js")},d.prototype.binary=function(a,b,c,d){return void 0===c&&(c=!1),c!==!1&&void 0===d&&(d=this),this.addToFileList("binary",a,b,{callback:c,callbackContext:d},!1,".bin")},d.prototype.spritesheet=function(a,b,c,d,e,f,g){return void 0===e&&(e=-1),void 0===f&&(f=0),void 0===g&&(g=0),this.addToFileList("spritesheet",a,b,{frameWidth:c,frameHeight:d,frameMax:e,margin:f,spacing:g},!1,".png")},d.prototype.audio=function(a,b,c){return this.game.sound.noAudio?this:(void 0===c&&(c=!0),"string"==typeof b&&(b=[b]),this.addToFileList("audio",a,b,{buffer:null,autoDecode:c}))},d.prototype.audiosprite=function(a,b,c,d,e){return this.game.sound.noAudio?this:(void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!0),this.audio(a,b,e),c?this.json(a+"-audioatlas",c):d?("string"==typeof d&&(d=JSON.parse(d)),this.cache.addJSON(a+"-audioatlas","",d)):console.warn("Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object"),this)},d.prototype.tilemap=function(a,b,c){return void 0===b&&(b=null),void 0===c&&(c=null),b||c||(b=a+".json"),c?(c=JSON.parse(c),this.cache.addTilemap(a,null,c)):this.addToFileList("tilemap",a,b),this},d.prototype.atlasJSONArray=function(a,b,c,e){return this.atlas(a,b,c,e,d.TEXTURE_ATLAS_JSON_ARRAY)},d.prototype.atlasJSONHash=function(a,b,c,e){return this.atlas(a,b,c,e,d.TEXTURE_ATLAS_JSON_HASH)},d.prototype.atlas=function(a,b,c,e,f){if(void 0!==b&&null!==b||(b=a+".png"),void 0===c&&(c=null),void 0===e&&(e=null),void 0===f&&(f=d.TEXTURE_ATLAS_JSON_ARRAY),c||e||(c=a+".json"),c)this.addToFileList("textureatlas",a,b,{atlasURL:c,format:f});else{switch(f){case d.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof e&&(e=JSON.parse(e))}this.addToFileList("textureatlas",a,b,{atlasURL:null,atlasData:e,format:f})}return this},d.prototype.withSyncPoint=function(a,b){this._withSyncPointDepth++;try{a.call(b||this,this)}finally{this._withSyncPointDepth--}return this},d.prototype.addSyncPoint=function(a,b){var c=this.getAsset(a,b);return c&&(c.file.syncPoint=!0),this},d.prototype.removeFile=function(a,b){var c=this.getAsset(a,b);c&&(c.loaded||c.loading||this._fileList.splice(c.index,1))},d.prototype.removeAll=function(){this._fileList.length=0,this._flightQueue.length=0},d.prototype.start=function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},d.prototype.processLoadQueue=function(){var a,b,c,d,f;if(!this.isLoading)return console.warn("Loader - active loading canceled / reset"),void this.finishedLoading(!0);for(a=0;a<this._flightQueue.length;a++)b=this._flightQueue[a],(b.loaded||b.error)&&(this._flightQueue.splice(a,1),a--,b.loading=!1,b.requestUrl=null,b.requestObject=null,b.error&&this.emit("fileerror",b.key,b),this._loadedFileCount++,this.emit("filecomplete",this.progress,b.key,!b.error,this._loadedFileCount,this._totalFileCount));for(c=!1,d=this.enableParallel?e.clamp(this.maxParallelDownloads,1,12):1,a=this._processingHead;a<this._fileList.length&&(b=this._fileList[a],b.loaded||b.error?a===this._processingHead&&(this._processingHead=a+1):!b.loading&&this._flightQueue.length<d&&(c||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this._flightQueue.push(b),b.loading=!0,this.emit("filestart",this.progress,b.key,b.url),this.loadFile(b))),!b.loaded&&b.syncPoint&&(c=!0),!(this._flightQueue.length>=d||c&&this._loadedPackCount===this._totalPackCount));a++);this.updateProgress(),this._processingHead>=this._fileList.length?this.finishedLoading():this._flightQueue.length||(console.warn("Loader - aborting: processing queue empty, loading may have stalled"),f=this,setTimeout(function(){f.finishedLoading(!0)},2e3))},d.prototype.finishedLoading=function(a){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,a||this._fileLoadStarted||(this._fileLoadStarted=!0,this.emit("loadstart")),this.emit("loadcomplete"),this.reset())},d.prototype.asyncComplete=function(a,b){void 0===b&&(b=""),a.loaded=!0,a.error=!!b,b&&(a.errorMessage=b,console.warn("Loader - "+a.type+"["+a.key+"]: "+b)),this.processLoadQueue()},d.prototype.transformUrl=function(a,b){return!!a&&(a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?a:this.baseURL+b.path+a)},d.prototype.loadFile=function(a){switch(a.type){case"image":case"spritesheet":case"textureatlas":this.loadImageTag(a);break;case"audio":a.url=this.getAudioURL(a.url),a.url?this.game.sound.usingWebAudio?this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(a):this.fileError(a,null,"No supported audio URL specified or device does not have audio playback support");break;case"json":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.xmlLoadComplete);break;case"tilemap":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"text":case"script":case"shader":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.fileComplete);break;case"binary":this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete)}},d.prototype.loadImageTag=function(a){var b=this;a.data=new Image,a.data.name=a.key,this.crossOrigin&&(a.data.crossOrigin=this.crossOrigin),a.data.onload=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileComplete(a))},a.data.onerror=function(){a.data.onload&&(a.data.onload=null,a.data.onerror=null,b.fileError(a))},a.data.src=this.transformUrl(a.url,a),a.data.complete&&a.data.width&&a.data.height&&(a.data.onload=null,a.data.onerror=null,this.fileComplete(a))},d.prototype.loadAudioTag=function(a){var b,c=this;this.game.sound.touchLocked?(a.data=new Audio,a.data.name=a.key,a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),this.fileComplete(a)):(a.data=new Audio,a.data.name=a.key,b=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null},a.data.onerror=function(){a.data.removeEventListener("canplaythrough",b,!1),a.data.onerror=null,c.fileError(a)},a.data.preload="auto",a.data.src=this.transformUrl(a.url,a),a.data.addEventListener("canplaythrough",b,!1),a.data.load())},d.prototype.xhrLoad=function(a,b,c,d,e){var f,g=new XMLHttpRequest;g.open("GET",b,!0),g.responseType=c,e=e||this.fileError,f=this,g.onload=function(){try{return d.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},g.onerror=function(){try{return e.call(f,a,g)}catch(b){f.hasLoaded?window.console&&console.error(b):f.asyncComplete(a,b.message||"Exception")}},a.requestObject=g,a.requestUrl=b,g.send()},d.prototype.getAudioURL=function(a){var b,d,e,g;if(this.game.sound.noAudio)return null;for(b=0;b<a.length;b++){if(d=a[b],d.uri)e=d.type,d=d.uri;else{if(0===d.indexOf("blob:")||0===d.indexOf("data:"))return d;d.indexOf("?")>=0&&(d=d.substr(0,d.indexOf("?"))),g=d.substr((c.Math.max(0,d.lastIndexOf("."))||1/0)+1),e=g.toLowerCase()}if(f.canPlayAudio(e))return d}return null},d.prototype.fileError=function(a,b,c){var d=a.requestUrl||this.transformUrl(a.url,a),e="error loading asset from URL "+d;!c&&b&&(c=b.status),c&&(e=e+" ("+c+")"),this.asyncComplete(a,e)},d.prototype.fileComplete=function(a,b){var c=!0;switch(a.type){case"image":this.cache.addImage(a.key,a.url,a.data);break;case"spritesheet":this.cache.addSpriteSheet(a.key,a.url,a.data,a.frameWidth,a.frameHeight,a.frameMax,a.margin,a.spacing);break;case"textureatlas":if(null==a.atlasURL)this.cache.addTextureAtlas(a.key,a.url,a.data,a.atlasData,a.format);else{if(c=!1,a.format!=d.TEXTURE_ATLAS_JSON_ARRAY&&a.format!=d.TEXTURE_ATLAS_JSON_HASH&&a.format!=d.TEXTURE_ATLAS_JSON_PYXEL)throw Error("Loader - Invalid Texture Atlas format: "+a.format);this.xhrLoad(a,this.transformUrl(a.atlasURL,a),"text",this.jsonLoadComplete)}break;case"audio":this.game.sound.usingWebAudio?(a.data=b.response,this.cache.addSound(a.key,a.url,a.data,!0,!1),a.autoDecode&&this.game.sound.decode(a.key)):this.cache.addSound(a.key,a.url,a.data,!1,!0);break;case"text":a.data=b.responseText,this.cache.addText(a.key,a.url,a.data);break;case"shader":a.data=b.responseText,this.cache.addShader(a.key,a.url,a.data);break;case"script":a.data=document.createElement("script"),a.data.language="javascript",a.data.type="text/javascript",a.data.defer=!1,a.data.text=b.responseText,document.head.appendChild(a.data),a.callback&&(a.data=a.callback.call(a.callbackContext,a.key,b.responseText));break;case"binary":a.callback?a.data=a.callback.call(a.callbackContext,a.key,b.response):a.data=b.response,this.cache.addBinary(a.key,a.data)}c&&this.asyncComplete(a)},d.prototype.jsonLoadComplete=function(a,b){var c=JSON.parse(b.responseText);"tilemap"===a.type?this.cache.addTilemap(a.key,a.url,c):"json"===a.type?this.cache.addJSON(a.key,a.url,c):"textureatlas"===a.type&&this.cache.addTextureAtlas(a.key,a.url,a.data,c,a.format),this.asyncComplete(a)},d.prototype.xmlLoadComplete=function(a,b){var c,d=b.responseText,e=this.parseXml(d);return e?("xml"===a.type&&this.cache.addXML(a.key,a.url,e),void this.asyncComplete(a)):(c=b.responseType||b.contentType,console.warn("Loader - "+a.key+": invalid XML ("+c+")"),void this.asyncComplete(a,"invalid XML"))},d.prototype.parseXml=function(a){var b,c;try{window.DOMParser?(c=new DOMParser,b=c.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(d){b=null}return b&&b.documentElement&&!b.getElementsByTagName("parsererror").length?b:null},d.prototype.updateProgress=function(){},d.prototype.totalLoadedFiles=function(){return this._loadedFileCount},d.prototype.totalQueuedFiles=function(){return this._totalFileCount-this._loadedFileCount},d.prototype.totalLoadedPacks=function(){return this._totalPackCount},d.prototype.totalQueuedPacks=function(){return this._totalPackCount-this._loadedPackCount},Object.defineProperty(d.prototype,"progressRaw",{get:function(){var a=this._loadedFileCount/this._totalFileCount;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progressFloat",{get:function(){var a=this._loadedFileCount/this._totalFileCount*100;return e.clamp(a||0,0,100)}}),Object.defineProperty(d.prototype,"progress",{get:function(){return c.Math.round(this.progressFloat)}}),d.prototype.constructor=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{140:140,143:143,160:160,3:3,88:88}],130:[function(a,b,c){(function(a){function c(a){this.game=a,this.socket=a.net.socket,this.timer=void 0,this.startTime=0,this.endTime=0,this.rtt=0,this._history=[],this.socket.on("drip",this.ping.bind(this))}c.HISTORY_SIZE=10,c.prototype.constructor=c,c.prototype.ping=function(a){this.socket.emit("drop"),this._compute(a)},c.prototype._compute=function(b){var d,e=0,f=this._history;f.push(b.rtt),f.length>c.HISTORY_SIZE&&f.shift();for(d in f)e+=f[d];this.rtt=a.Math.round(e/f.length)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],131:[function(a,b,c){function d(a){this.game=a}var e=a("socket"),f=a(130);d.prototype={boot:function(){this.connected=!1,this.socket=e({reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:1e4,transports:["websocket"],upgrade:!1}),this.latency=new f(this.game),this.socket.on("connect",this._connect.bind(this)),this.socket.on("reconnecting",this._reconnecting.bind(this)),this.socket.on("reconnect_failed",this._reconnectingFailed.bind(this)),this.socket.on("event",this._event.bind(this)),this.socket.on("error",this._error.bind(this)),this.socket.on("disconnect",this._disconnect.bind(this)),this.game.on("game/pause",this.pause,this),this.game.on("game/resume",this.resume,this)},pause:function(){this.disconnect()},resume:function(){this.connect()},connect:function(){this.socket.connect()},disconnect:function(){this.socket.disconnect()},reconnect:function(){this.disconnect(),this.connect()},_connect:function(){this.connected=!0,console.log("connected")},_reconnecting:function(a){console.log("trying to reconnect (attempt "+a+")")},_reconnectingFailed:function(){console.log("socket could not reconnect, try again later")},_reconnect:function(){console.log("socket successfully reconnected")},_event:function(a){console.log("event",a)},_error:function(a){console.log("error",a)},_disconnect:function(){this.connected=!1,console.log("socket closed")}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"rtt",{get:function(){return this.latency.rtt}}),b.exports=d},{130:130,socket:"socket"}],132:[function(a,b,c){(function(c){function d(a,b,c,d){i.call(this,a),this.maxParticles=d||50,this.name="emitter"+this.game.particles.ID++,this.type=e.EMITTER,this.area=new f(b,c,1,1),this.gravity=0,this.vector=new g(0,0),this.minParticleSpeed=new g(15,15),this.maxParticleSpeed=new g(25,25),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.startTint=16777215,this.endTint=16777215,this.tintData=null,this.tintCache={},this.minRotation=-6,this.maxRotation=6,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.particleClass=h,this.angularDrag=1,this.frequency=100,this.lifespan=2e3,this.bounce=new g,this.particleAnchor=new g(.5,.5),this.particleDrag=new g(0,0),this.blendMode=e.BlendMode.NORMAL,this.emitX=b,this.emitY=c,this.on=!1,this.autoScale=!1,this.autoAlpha=!1,this.autoTint=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new g(1,1),this._maxParticleScale=new g(1,1),this._quantity=0,this._timer=0,this._counter=0,this._flowQuantity=0,this._flowTotal=0,this._explode=!0,this._frames=null}var e=a(88),f=a(127),g=a(126),h=a(107),i=a(99),j=a(152),k=a(159),l=a(160);d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a;if(this.on&&this.game.clock.time>=this._timer)if(this._timer=this.game.clock.time+this.frequency*this.game.clock.slowMotion,0!==this._flowTotal)if(this._flowQuantity>0){for(a=0;a<this._flowQuantity;a++)if(this.emitParticle()&&(this._counter++,this._flowTotal!==-1&&this._counter>=this._flowTotal)){this.on=!1;break}}else this.emitParticle()&&(this._counter++,this._flowTotal!==-1&&this._counter>=this._flowTotal&&(this.on=!1));else this.emitParticle()&&(this._counter++,this._quantity>0&&this._counter>=this._quantity&&(this.on=!1));for(a=this.children.length;a--;)this.children[a].exists&&this.children[a].update()},d.prototype.makeParticles=function(a,b,c,d,e){var f,g,h,i;for(void 0===b&&(b=0),void 0===c&&(c=this.maxParticles),void 0===d&&(d=!1),void 0===e&&(e=!1),g=0,h=a,i=b,this._frames=b,c>this.maxParticles&&(this.maxParticles=c);g<c;)Array.isArray(a)&&(h=this.game.rnd.pick(a)),Array.isArray(b)&&(i=this.game.rnd.pick(b)),f=new this.particleClass(this.game,h,i),f.exists=!1,f.visible=!1,f.anchor.copy(this.particleAnchor),this.add(f),g++;return this},d.prototype.kill=function(){this.on=!1,this.exists=!1},d.prototype.revive=function(){this.exists=!0},d.prototype.explode=function(a){this._flowTotal=0,this.start(!0,this.lifespan,this.frequency,a)},d.prototype.flow=function(a,b,c,d,e){void 0!==c&&0!==c||(c=1),void 0===d&&(d=-1),void 0===e&&(e=!0),c>this.maxParticles&&(c=this.maxParticles),this._counter=0,this._flowQuantity=c,this._flowTotal=d,e?(this.start(!0,a,b,c),this._counter+=c,this.on=!0,this._timer=this.game.clock.time+b*this.game.clock.slowMotion):this.start(!1,a,b,c)},d.prototype.start=function(a,b,c,d){if(void 0===a&&(a=!0),void 0===b&&(b=this.lifespan),void 0!==c&&null!==c||(c=250),void 0===d&&(d=0),d>this.maxParticles&&(d=this.maxParticles),this.revive(),this.visible=!0,this.lifespan=b,this.frequency=c,a)for(var e=0;e<d;e++)this.emitParticle();else this.on=!0,this._quantity+=d,this._counter=0,this._timer=this.game.clock.time+c*this.game.clock.slowMotion},d.prototype.emitParticle=function(){var a=this.getFirstExists(!1);return null!==a&&(this.width>1||this.height>1?a.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):a.reset(this.emitX,this.emitY),a.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(a):this.particleSendToBack&&this.sendToBack(a),this.autoScale?a.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?a.scale.set(this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale)):this._minParticleScale.x===this._maxParticleScale.x&&this._minParticleScale.y===this._maxParticleScale.y||a.scale.set(this.game.rnd.realInRange(this._minParticleScale.x,this._maxParticleScale.x),this.game.rnd.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),Array.isArray("object"===this._frames)?a.frame=this.game.rnd.pick(this._frames):a.frame=this._frames,this.autoAlpha?a.setAlphaData(this.alphaData):a.alpha=this.game.rnd.realInRange(this.minParticleAlpha,this.maxParticleAlpha),this.autoTint&&a.setTintData(this.tintData),a.vector=this.vector,a.blendMode=this.blendMode,a.velocity.x=this.game.rnd.between(this.minParticleSpeed.x,this.maxParticleSpeed.x),a.velocity.y=this.game.rnd.between(this.minParticleSpeed.y,this.maxParticleSpeed.y),a.drag.x=this.particleDrag.x,a.drag.y=this.particleDrag.y,a.angularVelocity=l.degToRad(this.game.rnd.between(this.minRotation,this.maxRotation)),a.angularDrag=l.degToRad(this.angularDrag),a.onEmit(),!0)},d.prototype.destroy=function(){this.game.particles.remove(this),i.prototype.destroy.call(this,!0,!1)},d.prototype.setSize=function(a,b){this.area.width=a,this.area.height=b},d.prototype.setXSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.x=a,this.maxParticleSpeed.x=b},d.prototype.setYSpeed=function(a,b){a=a||0,b=b||0,this.minParticleSpeed.y=a,this.maxParticleSpeed.y=b},d.prototype.setRotation=function(a,b){a=a||0,b=b||0,this.minRotation=a,this.maxRotation=b},d.prototype.setAlpha=function(a,b,c,d,e){if(void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),void 0===e&&(e=!1),this.minParticleAlpha=a,this.maxParticleAlpha=b,this.autoAlpha=!1,c>0&&a!==b){var f={v:a},g=this.game.tweens.create(f).to({v:b},c,d);g.yoyo(e),this.alphaData=g.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}},d.prototype.setScale=function(a,b,c,d,e,f,g){if(void 0===a&&(a=1),void 0===b&&(b=1),void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=0),void 0===f&&(f=j.Linear.None),void 0===g&&(g=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(a,c),this._maxParticleScale.set(b,d),this.autoScale=!1,e>0&&(a!==b||c!==d)){var h={x:a,y:c},i=this.game.tweens.create(h).to({x:b,y:d},e,f);i.yoyo(g),this.scaleData=i.generateData(60),this.scaleData.reverse(),this.autoScale=!0}},d.prototype.setTint=function(a,b,c,d,e){var f,g,h,i;if(void 0===a&&(minX=16777215),void 0===b&&(maxX=16777215),void 0===c&&(c=0),void 0===d&&(d=j.Linear.None),void 0===e&&(e=!1),this.startTint=a,this.endTint=b,this.autoTint=!1,f=""+a+(""+b)+(""+c)+(""+d)+(""+e),this.tintCache[f])this.tintData=this.tintCache[f],this.autoTint=!0;else if(c>0&&a!==b){for(g={step:0},h=this.game.tweens.create(g).to({step:100},c,d),h.yoyo(e),this.tintCache[f]=this.tintData=h.generateData(60),i=0;i<this.tintData.length;i++)this.tintData[i].color=k.interpolateColor(a,b,100,this.tintData[i].step);this.tintData.reverse(),this.autoTint=!0}},d.prototype.at=function(a){a.center?(this.emitX=a.center.x,this.emitY=a.center.y):(this.emitX=a.world.x+a.anchor.x*a.width,this.emitY=a.world.y+a.anchor.y*a.height)},Object.defineProperty(d.prototype,"width",{get:function(){return this.area.width},set:function(a){this.area.width=a}}),Object.defineProperty(d.prototype,"height",{get:function(){return this.area.height},set:function(a){this.area.height=a}}),Object.defineProperty(d.prototype,"x",{get:function(){return this.emitX},set:function(a){this.emitX=a}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.emitY},set:function(a){this.emitY=a}}),Object.defineProperty(d.prototype,"left",{get:function(){return c.Math.floor(this.x-this.area.width/2)}}),Object.defineProperty(d.prototype,"right",{get:function(){return c.Math.floor(this.x+this.area.width/2)}}),Object.defineProperty(d.prototype,"top",{get:function(){return c.Math.floor(this.y-this.area.height/2)}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return c.Math.floor(this.y+this.area.height/2)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{107:107,126:126,127:127,152:152,159:159,160:160,88:88,99:99}],133:[function(a,b,c){function d(a){this.game=a,this.emitters={},this.ID=0}a(132);d.prototype={add:function(a){return this.emitters[a.name]=a,a},remove:function(a){delete this.emitters[a.name]},update:function(){for(var a in this.emitters)this.emitters[a].exists&&this.emitters[a].update()}},d.prototype.constructor=d,b.exports=d},{132:132}],134:[function(a,b,c){function d(a,b,c){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.GLBuffer.createVertexBuffer(a),this.indexBuffer=e.GLBuffer.createIndexBuffer(a),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=b,this.vao=new e.VertexArrayObject(a,c).addIndex(this.indexBuffer).addAttribute(this.buffer,b.attributes.aVertexPosition,a.FLOAT,!1,24,0).addAttribute(this.buffer,b.attributes.aColor,a.FLOAT,!1,24,8)}var e=a(20);d.prototype.constructor=d,d.prototype.reset=function(){this.points.length=0,this.indices.length=0},d.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},d.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},b.exports=d},{20:20}],135:[function(a,b,c){function d(a){e.ObjectRenderer.call(this,a),this.gl=a.gl,this.primitiveShader=null,this.graphicsDataPool=[],this.CONTEXT_UID=0}var e=a("pixi"),f=(a(2),a(134)),g=a(136);d.prototype=Object.create(e.ObjectRenderer.prototype),d.prototype.constructor=d,d.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new g(this.gl)},d.prototype.destroy=function(){e.ObjectRenderer.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},d.prototype.render=function(a){var b,c,d,f,g,h=this.renderer,i=h.gl,j=this.primitiveShader;for(!a.dirty&&a._webGL[i.id]||this.updateGraphics(a),c=a._webGL[i.id],h.bindShader(j),h.state.setBlendMode(a.blendMode),f=0,g=c.data.length;f<g;f++)b=c.data[f],d=b.shader,h.bindShader(d),d.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),d.uniforms.tint=e.utils.hex2rgb(a.tint),d.uniforms.alpha=a.worldAlpha,b.vao.bind().draw(i.LINE_LOOP,b.indices.length).unbind()},d.prototype.updateGraphics=function(a){var b,c,d,f,g=this.renderer.gl,h=a._webGL[g.id];if(h||(h=a._webGL[g.id]={lastIndex:0,data:[],gl:g}),a.dirty=!1,a.clearDirty){for(a.clearDirty=!1,b=0;b<h.data.length;b++)f=h.data[b],f.reset(),this.graphicsDataPool.push(f);h.data=[],h.lastIndex=0}for(b=h.lastIndex;b<a.graphicsData.length;b++)d=a.graphicsData[b],c=this.getWebGLData(h,0),d.type===e.SHAPES.RECT?this.buildRectangle(d,c):d.type===e.SHAPES.CIRC&&this.buildCircle(d,c),h.lastIndex++;for(b=0;b<h.data.length;b++)c=h.data[b],c.dirty&&c.upload()},d.prototype.getWebGLData=function(a,b){var c=a.data[a.data.length-1];return(!c||c.points.length>32e4)&&(c=this.graphicsDataPool.pop()||new f(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),c.reset(b),a.data.push(c)),c.dirty=!0,c},d.prototype.buildRectangle=function(a,b){var c=a.shape,d=c.x,f=c.y,g=c.width,h=c.height,i=e.utils.hex2rgb(a.lineColor),j=a.lineAlpha,k=i[0]*j,l=i[1]*j,m=i[2]*j,n=b.points,o=b.indices,p=n.length/6;n.push(d,f),n.push(k,l,m,j),n.push(d+g,f),n.push(k,l,m,j),n.push(d+g,f+h),n.push(k,l,m,j),n.push(d,f+h),n.push(k,l,m,j),o.push(p,p+1,p+2,p+3)},d.prototype.buildCircle=function(a,b){var c,d=a.shape,f=d.x,g=d.y,h=d.radius,i=d.radius,j=Math.floor(5*Math.sqrt(d.radius)),k=2*Math.PI/j,l=e.utils.hex2rgb(a.lineColor),m=a.lineAlpha,n=l[0]*m,o=l[1]*m,p=l[2]*m,q=b.points,r=b.indices,s=q.length/6;for(c=0;c<j+1;c++)q.push(f+Math.sin(k*c)*h,g+Math.cos(k*c)*i,n,o,p,m),r.push(s++)},e.WebGLRenderer.registerPlugin("wireframe",d),b.exports=d},{134:134,136:136,2:2,pixi:"pixi"}],136:[function(a,b,c){function d(a){e.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * alpha;\n}","precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}")}var e=a(20).GLShader;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{20:20}],137:[function(a,b,c){(function(c){function d(a,b,c,d,f){void 0===c&&(c=1),void 0===d&&(d=!1),void 0===f&&(f=a.sound.connectToMaster),this.game=a,this.name=b,this.key=b,this.loop=d,this.volume=c,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this.connect(c,f),this._sound=null,this._volume=c,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1,e.call(this)}var e=a(3),f=a(140);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.connect=function(a,b){this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=a*this.game.sound.volume,b&&this.gainNode.connect(this.masterGainNode)},d.prototype.soundHasUnlocked=function(a){a===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},d.prototype.addMarker=function(a,b,c,d,e){void 0!==d&&null!==d||(d=1),void 0===e&&(e=!1),this.markers[a]={name:a,start:b,stop:b+c,volume:d,duration:c,durationMS:1e3*c,loop:e}},d.prototype.removeMarker=function(a){delete this.markers[a]},d.prototype.onEndedHandler=function(){this._sound&&(this._sound.onended=null),this.isPlaying=!1,this.currentTime=this.durationMS,this.stop()},d.prototype.update=function(){return this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.emit("decoded",this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),void(this.isPlaying&&(this.currentTime=this.game.clock.time-this.startTime,this.currentTime>=this.durationMS&&(this.loop?(this.emit("loop",this),""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.clock.time):(this.emit("markerComplete",this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):""!==this.currentMarker&&this.stop())))):void this.destroy()},d.prototype.loopFull=function(a){this.play(null,0,a,!0)},d.prototype.play=function(a,b,d,e,f){if(void 0!==a&&a!==!1&&null!==a||(a=""),void 0===f&&(f=!0),this.isPlaying&&!this.allowMultiple&&!f&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||f)){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(g){}this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode)}if(""===a&&Object.keys(this.markers).length>0)return this;if(""!==a){if(this.currentMarker=a,!this.markers[a])return this;this.position=this.markers[a].start,this.volume=this.markers[a].volume,this.loop=this.markers[a].loop,this.duration=this.markers[a].duration,this.durationMS=this.markers[a].durationMS,void 0!==d&&(this.volume=d),void 0!==e&&(this.loop=e),this._tempMarker=a,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else b=b||0,void 0===d&&(d=this._volume),void 0===e&&(e=this.loop),this.position=c.Math.max(0,b),this.volume=d,this.loop=e,this.duration=0,this.durationMS=0,this._tempMarker=a,this._tempPosition=b,this._tempVolume=d,this._tempLoop=e;return this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===a&&(this._sound.loop=!0),this.loop||""!==a||(this._sound.onended=this.onEndedHandler.bind(this)),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===a?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.clock.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.emit("play",this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===!1&&this.game.sound.decode(this.key,this)),this},d.prototype.restart=function(a,b,c,d){a=a||"",b=b||0,c=c||1,void 0===d&&(d=!1),this.play(a,b,c,d,!0)},d.prototype.pause=function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.clock.time,this.emit("pause",this),this.stop())},d.prototype.resume=function(){var a,b;this.paused&&this._sound&&(a=Math.max(0,this.position+this.pausedPosition/1e3),this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this.loop&&(this._sound.loop=!0),this.loop||""!==this.currentMarker||(this._sound.onended=this.onEndedHandler.bind(this)),b=this.duration-this.pausedPosition/1e3,void 0===this._sound.start?(this._sound.noteGrainOn(0,a,b),this._sound.noteOn(0)):this.loop&&f.chrome?this._sound.start(0,a):this._sound.start(0,a,b),this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.clock.time-this.pausedTime,this.emit("resume",this))},d.prototype.stop=function(){if(this.isPlaying&&this._sound){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(a){}this.externalNode?this._sound.disconnect(this.externalNode):this._sound.disconnect(this.gainNode)}if(this.pendingPlayback=!1,this.isPlaying=!1,!this.paused){var b=this.currentMarker;""!==this.currentMarker&&this.emit("markerComplete",this.currentMarker,this),this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),this.emit("stop",this,b)}},d.prototype.fadeIn=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=this.currentMarker),this.paused||(this.play(c,0,0,b),this.fadeTo(a,1))},d.prototype.fadeOut=function(a){this.fadeTo(a,0)},d.prototype.fadeTo=function(a,b){if(this.isPlaying&&!this.paused&&b!==this.volume){if(void 0===a&&(a=1e3),void 0===b)return void console.warn("Sound.fadeTo: No Volume Specified.");this.fadeTween=this.game.tweens.create(this),this.fadeTween.to({volume:b},a,void 0,!0),this.fadeTween.on("complete",this.fadeComplete,this)}},d.prototype.fadeComplete=function(){
this.emit("fadeComplete",this,this.volume),0===this.volume&&this.stop()},d.prototype.destroy=function(a){void 0===a&&(a=!0),this.stop(),a?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.removeAllListeners())},Object.defineProperty(d.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(d.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(d.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(a){a=a||!1,a!==this._muted&&(a?(this._muted=!0,this._muteVolume=this._tempVolume,this.gainNode.gain.value=0):(this._muted=!1,this.gainNode.gain.value=this._muteVolume),this.emit("mute",this))}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this._volume},set:function(a){return this._muted?void(this._muteVolume=a):(this._tempVolume=a,this._volume=a,void(this.gainNode&&(this.gainNode.gain.value=a)))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{140:140,3:3}],138:[function(a,b,c){function d(a){this.game=a,this.context=null,this.usingWebAudio=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new g,this._watching=!1,this._watchCallback=null,this._watchContext=null}var e=a(137),f=a(140),g=a(156);d.prototype={boot:function(){if(f.iOS&&f.webAudio===!1&&(this.channels=1),window.AudioContext)try{this.context=new window.AudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(a){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}null===this.context?this.noAudio=!0:(this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination))},stopAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].stop()},pauseAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].pause()},resumeAll:function(){if(!this.noAudio)for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].resume()},decode:function(a,b){var c=this,b=(this.game,b=b||null),d=this.game.cache.getSoundData(a);if(d&&this.game.cache.isSoundDecoded(a)===!1){this.game.cache.updateSound(a,"isDecoding",!0);try{this.context.decodeAudioData(d,function(b){b&&c.game.cache.decodedSound(a,b)})}catch(e){}}},setDecodedCallback:function(a,b,c){"string"==typeof a&&(a=[a]),this._watchList.reset();for(var d=0;d<a.length;d++)a[d]instanceof e?this.game.cache.isSoundDecoded(a[d].key)||this._watchList.add(a[d].key):this.game.cache.isSoundDecoded(a[d])||this._watchList.add(a[d]);0===this._watchList.total?(this._watching=!1,b.call(c)):(this._watching=!0,this._watchCallback=b,this._watchContext=c)},update:function(){var a,b;if(!this.noAudio){for(!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.touchLocked=!1,this._unlockSource=null),a=0;a<this._sounds.length;a++)this._sounds[a].update();if(this._watching){for(b=this._watchList.first;b;)this.game.cache.isSoundDecoded(b)&&this._watchList.remove(b),b=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(a,b,c,d){void 0===b&&(b=1),void 0===c&&(c=!1),void 0===d&&(d=this.connectToMaster);var f=new e(this.game,a,b,c,d);return this._sounds.push(f),f},remove:function(a){for(var b=this._sounds.length;b--;)if(this._sounds[b]===a)return this._sounds[b].destroy(!1),this._sounds.splice(b,1),!0;return!1},removeByKey:function(a){for(var b=this._sounds.length,c=0;b--;)this._sounds[b].key===a&&(this._sounds[b].destroy(!1),this._sounds.splice(b,1),c++);return c},play:function(a,b,c){if(!this.noAudio){var d=this.add(a,b,c);return d.play(),d}},setMute:function(){this._muted||(this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0))},unsetMute:function(){this._muted&&!this._codeMuted&&(this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume))},destroy:function(){this.stopAll();for(var a=0;a<this._sounds.length;a++)this._sounds[a]&&this._sounds[a].destroy();this._sounds=[],this.context&&this.context.close&&this.context.close()}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"mute",{get:function(){return this._muted},set:function(a){if(a=a||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(d.prototype,"volume",{get:function(){return this._volume},set:function(a){a<0?a=0:a>1&&(a=1),this._volume!==a&&(this._volume=a,this.usingWebAudio&&(this.masterGain.gain.value=a))}}),b.exports=d},{137:137,140:140,156:156}],139:[function(a,b,c){(function(a){var c={create:function(b,c,d){b=b||256,c=c||256;var e=a.document.createElement("canvas");return"string"==typeof d&&""!==d&&(e.id=d),e.width=b,e.height=c,e.style.display="block",e},addToDOM:function(a,b){var c;return b&&("string"==typeof b?c=document.getElementById(b):"object"==typeof b&&1===b.nodeType&&(c=b)),c||(c=document.body),c.appendChild(a),a},setTouchAction:function(a,b){return b=b||"none",a.style.msTouchAction=b,a.style["ms-touch-action"]=b,a.style["touch-action"]=b,a},setUserSelect:function(a,b){return b=b||"none",a.style["-webkit-touch-callout"]=b,a.style["-webkit-user-select"]=b,a.style["-khtml-user-select"]=b,a.style["-moz-user-select"]=b,a.style["-ms-user-select"]=b,a.style["user-select"]=b,a.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",a},setContextMenu:function(a,b){b?a.oncontextmenu=null:a.oncontextmenu=function(a){a.preventDefault()}},setSmoothingEnabled:function(a,b){var d=c.getSmoothingPrefix(a);return d&&(a[d]=b),a},getSmoothingPrefix:function(a){var b,c,d=["i","webkitI","msI","mozI","oI"];for(c in d)if(b=d[c]+"mageSmoothingEnabled",b in a)return b;return null}};b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],140:[function(a,b,c){(function(c,d){var e=a("pixi"),f={android:!1,chromeOS:!1,iOS:!1,linux:!1,macOS:!1,windows:!1,windowsPhone:!1,desktop:!1,canvas:!1,file:!1,fileSystem:!1,webGL:!1,worker:!1,canvasBitBltShift:!1,audioData:!1,webAudio:!1,dolby:!1,chrome:!1,chromeVersion:!1,arora:!1,epiphany:!1,firefox:!1,firefoxVersion:!1,safari:!1,safariVersion:!1,mobileSafari:!1,ie:!1,ieVersion:!1,trident:!1,tridentVersion:!1,edge:!1,cocoonJS:!1,node:!1,nodeWebkit:!1,electron:!1,fullscreen:!1,requestFullscreen:"",cancelFullscreen:"",fullscreenKeyboard:!1,pointerLock:!1,quirksMode:!1,touch:!1,mspointer:!1,wheelEvent:"",whenReady:function(a,b,c){var e=this._readyCheck;this.deviceReadyAt||!e?a.call(b,this):e._monitor||c?(e._queue=e._queue||[],e._queue.push([a,b])):(e._monitor=e.bind(this),e._queue=e._queue||[],e._queue.push([a,b]),"complete"===d.document.readyState||"interactive"===d.document.readyState?d.setTimeout(e._monitor,0):(d.document.addEventListener("DOMContentLoaded",e._monitor,!1),d.addEventListener("load",e._monitor,!1)))},_readyCheck:function(){var a,b,c,e=this._readyCheck;if(d.document.body){if(!this.deviceReadyAt){for(this.deviceReadyAt=Date.now(),d.document.removeEventListener("DOMContentLoaded",e._monitor),d.removeEventListener("load",e._monitor),this._initialize(),this.initialized=!0;a=e._queue.shift();)b=a[0],c=a[1],b.call(c,this);this._readyCheck=null,this._initialize=null}}else d.setTimeout(e._monitor,20)},_initialize:function(){function b(){var a=d.navigator.userAgent;/Android/.test(a)?k.android=!0:/CrOS/.test(a)?k.chromeOS=!0:/iP[ao]d|iPhone/i.test(a)?k.iOS=!0:/Linux/.test(a)?k.linux=!0:/Mac OS/.test(a)?k.macOS=!0:/Windows/.test(a)&&(k.windows=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(k.android=!1,k.iOS=!1,k.macOS=!1,k.windows=!0,k.windowsPhone=!0),(k.windows||k.macOS||k.linux||k.chromeOS)&&(k.desktop=!0),(k.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(k.desktop=!1)}function f(){var a,b,c,e,f;k.audioData=!!d.window.Audio,k.webAudio=!(!d.window.AudioContext&&!d.window.webkitAudioContext),a=document.createElement("audio"),b=!1;try{(b=!!a.canPlayType)&&(a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(k.ogg=!0),(a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||a.canPlayType("audio/opus;").replace(/^no$/,""))&&(k.opus=!0),a.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(k.mp3=!0),a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(k.wav=!0),(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;").replace(/^no$/,""))&&(k.m4a=!0),a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(k.webm=!0),""!==a.canPlayType('audio/mp4;codecs="ec-3"')&&(k.edge?k.dolby=!0:k.safari&&k.safariVersion>=9&&(c=navigator.userAgent,/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(e=parseInt(RegExp.$1,10),f=parseInt(RegExp.$2,10),(10===e&&f>=11||e>10)&&(k.dolby=!0)))))}catch(g){}}function g(){k.canvas=!!d.CanvasRenderingContext2D,k.file=!!(d.File&&d.FileReader&&d.FileList&&d.Blob),k.fileSystem=!!d.requestFileSystem,k.webGL=e.utils.isWebGLSupported(),k.worker=!!d.Worker,k.pointerLock="pointerLockElement"in d.document||"mozPointerLockElement"in d.document||"webkitPointerLockElement"in d.document,k.quirksMode="CSS1Compat"!==d.document.compatMode,!k.iOS&&(k.ie||k.firefox||k.chrome)&&(k.canvasBitBltShift=!0),(k.safari||k.mobileSafari)&&(k.canvasBitBltShift=!1)}function h(){("ontouchstart"in document.documentElement||d.navigator.maxTouchPoints&&d.navigator.maxTouchPoints>=1)&&(k.touch=!0),(d.navigator.msPointerEnabled||d.navigator.pointerEnabled)&&(k.mspointer=!0),"onwheel"in d||k.ie&&"WheelEvent"in d?k.wheelEvent="wheel":"onmousewheel"in d&&(k.wheelEvent="mousewheel")}function i(){var a,b=document.createElement("div"),c=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];for(a=0;a<c.length;a++)if(b[c[a]]){k.fullscreen=!0,k.requestFullscreen=c[a];break}if(k.fullscreen)for(a=0;a<e.length;a++)if(document[e[a]]){k.cancelFullscreen=e[a];break}d.Element&&d.Element.ALLOW_KEYBOARD_INPUT&&(k.fullscreenKeyboard=!0)}function j(){var b=d.navigator.userAgent;if(/Arora/.test(b)?k.arora=!0:/Edge\/\d+/.test(b)?k.edge=!0:/Chrome\/(\d+)/.test(b)&&!k.windowsPhone?(k.chrome=!0,k.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(b)?k.epiphany=!0:/Firefox\D+(\d+)/.test(b)?(k.firefox=!0,k.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(b)&&k.iOS?k.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(b)?(k.ie=!0,k.ieVersion=parseInt(RegExp.$1,10)):/Safari\/(\d+)/.test(b)&&!k.windowsPhone?(k.safari=!0,/Version\/(\d+)\./.test(b)&&(k.safariVersion=parseInt(RegExp.$1,10))):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(b)&&(k.ie=!0,k.trident=!0,k.tridentVersion=parseInt(RegExp.$1,10),k.ieVersion=parseInt(RegExp.$3,10)),void 0!==c&&void 0!==a&&(k.node=!0),k.node&&"object"==typeof c.versions&&(k.nodeWebkit=!!c.versions["node-webkit"],k.electron=!!c.versions.electron),navigator.isCocoonJS&&(k.cocoonJS=!0),k.cocoonJS)try{k.cocoonJSApp=void 0!==CocoonJS}catch(e){k.cocoonJSApp=!1}void 0!==window.ejecta&&(k.ejecta=!0)}var k=this;b(),f(),j(),g(),h(),i()},canPlayAudio:function(a){return!("mp3"!==a||!this.mp3)||(!("ogg"!==a||!this.ogg&&!this.opus)||(!("m4a"!==a||!this.m4a)||(!("opus"!==a||!this.opus)||(!("wav"!==a||!this.wav)||(!("webm"!==a||!this.webm)||!("mp4"!==a||!this.dolby))))))}};b.exports=f}).call(this,a(5),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{5:5,pixi:"pixi"}],141:[function(a,b,c){(function(a){function c(b,c){var d,e;for(void 0===c&&(c=!1),this.game=b,this.isRunning=!1,this.forceTimeout=c,d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;e++)a.requestAnimationFrame=a[d[e]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[e]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null}c.prototype.constructor=c,c.prototype.start=function(){var b=this;this.isRunning=!0,!a.requestAnimationFrame||this.forceTimeout?(this._isSetTimeOut=!0,this._onLoop=function(){return b.updateSetTimeout()},this._timeOutID=a.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(a){return b.updateRequestAnimationFrame(a)},this._timeOutID=a.requestAnimationFrame(this._onLoop))},c.prototype.updateRequestAnimationFrame=function(b){this.game.update(Math.floor(b)),this._timeOutID=a.requestAnimationFrame(this._onLoop)},c.prototype.updateSetTimeout=function(){this.game.update(Date.now()),this._timeOutID=a.setTimeout(this._onLoop,this.game.clock.timeToCall)},c.prototype.stop=function(){this.isRunning=!1,this._isSetTimeOut?clearTimeout(this._timeOutID):a.cancelAnimationFrame(this._timeOutID)},c.prototype.isSetTimeOut=function(){return this._isSetTimeOut},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],142:[function(a,b,c){(function(a){function c(b,c,d,e,f,g){this.layer=b,this.index=c,this.x=d,this.y=e,this.rotation=0,this.flipped=!1,this.worldX=d*f,this.worldY=e*g,this.width=f,this.height=g,this.centerX=a.Math.abs(f/2),this.centerY=a.Math.abs(g/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this}c.prototype={containsPoint:function(a,b){return!(a<this.worldX||b<this.worldY||a>this.right||b>this.bottom)},intersects:function(a,b,c,d){return!(c<=this.worldX)&&(!(d<=this.worldY)&&(!(a>=this.worldX+this.width)&&!(b>=this.worldY+this.height)))},setCollisionCallback:function(a,b){this.collisionCallback=a,this.collisionCallbackContext=b},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(a,b,c,d){this.collideLeft=a,this.collideRight=b,this.collideUp=c,this.collideDown=d,this.faceLeft=a,this.faceRight=b,this.faceTop=c,this.faceBottom=d},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(a,b){return a&&b?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:a?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:!!b&&(this.faceTop||this.faceBottom||this.faceLeft||this.faceRight)},copy:function(a){this.index=a.index,this.alpha=a.alpha,this.properties=a.properties,this.collideUp=a.collideUp,this.collideDown=a.collideDown,this.collideLeft=a.collideLeft,this.collideRight=a.collideRight,this.collisionCallback=a.collisionCallback,this.collisionCallbackContext=a.collisionCallbackContext}},c.prototype.constructor=c,Object.defineProperty(c.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(c.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(c.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(c.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(c.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(c.prototype,"bottom",{get:function(){return this.worldY+this.height}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],143:[function(a,b,c){function d(a,b,c){this.game=a,this.key=b;var d=this.parse(b,c);this.width=d.width,this.height=d.height,this.tileWidth=d.tileWidth,this.tileHeight=d.tileHeight,this.orientation=d.orientation,this.format=d.format,this.version=d.version,this.properties=d.properties,this.widthInPixels=d.widthInPixels,this.heightInPixels=d.heightInPixels,this.layers=d.layers,this.tilesets=d.tilesets,this.imagecollections=d.imagecollections,this.tiles=d.tiles,this.objects=d.objects,this.collideIndexes=[],this.collision=d.collision,this.images=d.images,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0}var e=a(145),f=a(142),g=a(144),h=a(147),i=a(109),j=a(157);d.NORTH=0,d.EAST=1,d.SOUTH=2,d.WEST=3,d.prototype={parse:function(a,b){return e.parse(this.game,a,b)},create:function(a,b,c,d,e,f){return void 0===f&&(f=this.game.world),this.width=b,this.height=c,this.setTileSize(d,e),this.layers.length=0,this.createBlankLayer(a,b,c,d,e,f)},setTileSize:function(a,b){this.tileWidth=a,this.tileHeight=b,this.widthInPixels=this.width*a,this.heightInPixels=this.height*b},addTilesetImage:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q;if(void 0===a)return null;if(void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0),0===c&&(c=32),0===d&&(d=32),h=null,void 0!==b&&null!==b||(b=a),!this.game.cache.checkImageKey(b))return console.warn('Tilemap.addTilesetImage: Invalid image key given: "'+b+'"'),null;if(h=this.game.cache.getImage(b),i=this.getTilesetIndex(a),null===i)return console.warn('Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "'+b+'"'),null;if(this.tilesets[i])return this.tilesets[i].setImage(h),this.tilesets[i];for(j=new Tileset(a,g,c,d,e,f,{}),j.setImage(h),this.tilesets.push(j),k=this.tilesets.length-1,l=e,m=e,n=0,o=0,p=0,q=g;q<g+j.total&&(this.tiles[q]=[l,m,k],l+=c+f,n++,n!==j.total)&&(o++,o!==j.columns||(l=e,m+=d+f,o=0,p++,p!==j.rows));q++);return j},createFromObjects:function(a,b,c,d,e,f,g,h,j){var k,l,m,n,o;if(void 0===e&&(e=!0),void 0===f&&(f=!1),void 0===g&&(g=this.game.world),void 0===h&&(h=i),void 0===j&&(j=!0),!this.objects[a])return void console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: "+a);for(n=0;n<this.objects[a].length;n++)if(k=!1,l=this.objects[a][n],void 0!==l.gid&&"number"==typeof b&&l.gid===b?k=!0:void 0!==l.id&&"number"==typeof b&&l.id===b?k=!0:void 0!==l.name&&"string"==typeof b&&l.name===b&&(k=!0),k){m=new h(this.game,parseFloat(l.x,10),parseFloat(l.y,10),c,d),m.name=l.name,m.visible=l.visible,m.autoCull=f,m.exists=e,l.width&&(m.width=l.width),l.height&&(m.height=l.height),l.rotation&&(m.angle=l.rotation),j&&(m.y-=m.height),g.add(m);for(o in l.properties)g.set(m,o,l.properties[o],!1,!1,0,!0)}},createFromTiles:function(a,b,c,d,e,f){var g,h,j,k,l,m,n;if("number"==typeof a&&(a=[a]),void 0===b||null===b?b=[]:"number"==typeof b&&(b=[b]),d=this.getLayer(d),void 0===e&&(e=this.game.world),void 0===f&&(f={}),void 0===f.customClass&&(f.customClass=i),void 0===f.adjustY&&(f.adjustY=!0),g=this.layers[d].width,h=this.layers[d].height,this.copy(0,0,g,h,d),this._results.length<2)return 0;for(j=0,l=1,m=this._results.length;l<m;l++)if(a.indexOf(this._results[l].index)!==-1){k=new f.customClass(this.game,this._results[l].worldX,this._results[l].worldY,c);for(n in f)k[n]=f[n];e.add(k),j++}if(1===b.length)for(l=0;l<a.length;l++)this.replace(a[l],b[0],0,0,g,h,d);else if(b.length>1)for(l=0;l<a.length;l++)this.replace(a[l],b[l],0,0,g,h,d);return j},createSprite:function(a,b,c,d){void 0===b&&(b=this.widthInPixels),void 0===c&&(c=this.heightInPixels),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new h(this.game,this,e,b,c))},createLayer:function(a,b,c,d){void 0===b&&(b=this.game.width),void 0===c&&(c=this.game.height),void 0===d&&(d=this.game.world);var e=a;return"string"==typeof a&&(e=this.getLayerIndex(a)),null===e||e>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+e):d.add(new g(this.game,this,e,b,c))},createBlankLayer:function(a,b,c,d,e,h){var i,j,k,l,m,n,o;if(void 0===h&&(h=this.game.world),null!==this.getLayerIndex(a))return void console.warn("Tilemap.createBlankLayer: Layer with matching name already exists");for(i={name:a,x:0,y:0,width:b,height:c,widthInPixels:b*d,heightInPixels:c*e,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},k=[],l=0;l<c;l++){for(j=[],m=0;m<b;m++)j.push(new f(i,(-1),m,l,d,e));k.push(j)}return i.data=k,this.layers.push(i),this.currentLayer=this.layers.length-1,n=i.widthInPixels,o=i.heightInPixels,n>this.game.width&&(n=this.game.width),o>this.game.height&&(o=this.game.height),k=new g(this.game,this,this.layers.length-1,n,o),k.name=a,h.add(k)},getIndex:function(a,b){for(var c=0;c<a.length;c++)if(a[c].name===b)return c;return null},getLayerIndex:function(a){return this.getIndex(this.layers,a)},getTilesetIndex:function(a){return this.getIndex(this.tilesets,a)},getImageIndex:function(a){return this.getIndex(this.images,a)},getObjectIndex:function(a){return this.getIndex(this.objects,a)},setTileIndexCallback:function(a,b,c,d){if(d=this.getLayer(d),"number"==typeof a)this.layers[d].callbacks[a]={callback:b,callbackContext:c};else for(var e=0,f=a.length;e<f;e++)this.layers[d].callbacks[a[e]]={callback:b,callbackContext:c}},setTileLocationCallback:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(a,b,c,d,g),!(this._results.length<2))for(var h=1;h<this._results.length;h++)this._results[h].setCollisionCallback(e,f)},setCollision:function(a,b,c,d){if(void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c),"number"==typeof a)return this.setCollisionByIndex(a,b,c,!0);if(Array.isArray(a)){for(var e=0;e<a.length;e++)this.setCollisionByIndex(a[e],b,c,!1);d&&this.calculateFaces(c)}},setCollisionBetween:function(a,b,c,d,e){if(void 0===c&&(c=!0),void 0===e&&(e=!0),d=this.getLayer(d),!(a>b)){for(var f=a;f<=b;f++)this.setCollisionByIndex(f,c,d,!1);e&&this.calculateFaces(d)}},setCollisionByExclusion:function(a,b,c,d){void 0===b&&(b=!0),void 0===d&&(d=!0),c=this.getLayer(c);for(var e=0,f=this.tiles.length;e<f;e++)a.indexOf(e)===-1&&this.setCollisionByIndex(e,b,c,!1);d&&this.calculateFaces(c)},setCollisionByIndex:function(a,b,c,d){var e,f,g,h;for(void 0===b&&(b=!0),void 0===c&&(c=this.currentLayer),void 0===d&&(d=!0),b?this.collideIndexes.push(a):(e=this.collideIndexes.indexOf(a),e>-1&&this.collideIndexes.splice(e,1)),f=0;f<this.layers[c].height;f++)for(g=0;g<this.layers[c].width;g++)h=this.layers[c].data[f][g],h&&h.index===a&&(b?h.setCollision(!0,!0,!0,!0):h.resetCollision(),h.faceTop=b,h.faceBottom=b,h.faceLeft=b,h.faceRight=b);return d&&this.calculateFaces(c),c},getLayer:function(a){return void 0===a?a=this.currentLayer:"string"==typeof a?a=this.getLayerIndex(a):a instanceof g&&(a=a.index),a},setPreventRecalculate:function(a){if(a===!0&&this.preventingRecalculate!==!0&&(this.preventingRecalculate=!0,this.needToRecalculate={}),a===!1&&this.preventingRecalculate===!0){this.preventingRecalculate=!1;for(var b in this.needToRecalculate)this.calculateFaces(b);this.needToRecalculate=!1}},calculateFaces:function(a){var b,c,d,e,f,g,h,i,j;if(this.preventingRecalculate)return void(this.needToRecalculate[a]=!0);for(b=null,c=null,d=null,e=null,f=0,g=this.layers[a].height;f<g;f++)for(h=0,i=this.layers[a].width;h<i;h++)j=this.layers[a].data[f][h],j&&(b=this.getTileAbove(a,h,f),c=this.getTileBelow(a,h,f),d=this.getTileLeft(a,h,f),e=this.getTileRight(a,h,f),j.collides&&(j.faceTop=!0,j.faceBottom=!0,j.faceLeft=!0,j.faceRight=!0),b&&b.collides&&(j.faceTop=!1),c&&c.collides&&(j.faceBottom=!1),d&&d.collides&&(j.faceLeft=!1),e&&e.collides&&(j.faceRight=!1))},getTileAbove:function(a,b,c){return c>0?this.layers[a].data[c-1][b]:null},getTileBelow:function(a,b,c){return c<this.layers[a].height-1?this.layers[a].data[c+1][b]:null},getTileLeft:function(a,b,c){return b>0?this.layers[a].data[c][b-1]:null},getTileRight:function(a,b,c){return b<this.layers[a].width-1?this.layers[a].data[c][b+1]:null},setLayer:function(a){a=this.getLayer(a),this.layers[a]&&(this.currentLayer=a)},hasTile:function(a,b,c){return c=this.getLayer(c),void 0!==this.layers[c].data[b]&&void 0!==this.layers[c].data[b][a]&&this.layers[c].data[b][a].index>-1},removeTile:function(a,b,c){if(c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height&&this.hasTile(a,b,c)){var d=this.layers[c].data[b][a];return this.layers[c].data[b][a]=new f(this.layers[c],(-1),a,b,this.tileWidth,this.tileHeight),this.layers[c].dirty=!0,this.calculateFaces(c),d}},removeTileWorldXY:function(a,b,c,d,e){return e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.removeTile(a,b,e)},putTile:function(a,b,c,d){if(null===a)return this.removeTile(b,c,d);if(d=this.getLayer(d),b>=0&&b<this.layers[d].width&&c>=0&&c<this.layers[d].height){var e;return a instanceof f?(e=a.index,this.hasTile(b,c,d)?this.layers[d].data[c][b].copy(a):this.layers[d].data[c][b]=new f(d,e,b,c,a.width,a.height)):(e=a,this.hasTile(b,c,d)?this.layers[d].data[c][b].index=e:this.layers[d].data[c][b]=new f(this.layers[d],e,b,c,this.tileWidth,this.tileHeight)),this.collideIndexes.indexOf(e)>-1?this.layers[d].data[c][b].setCollision(!0,!0,!0,!0):this.layers[d].data[c][b].resetCollision(),this.layers[d].dirty=!0,this.calculateFaces(d),this.layers[d].data[c][b]}return null},putTileWorldXY:function(a,b,c,d,e,f){return f=this.getLayer(f),b=this.game.math.snapToFloor(b,d)/d,c=this.game.math.snapToFloor(c,e)/e,this.putTile(a,b,c,f)},searchTileIndex:function(a,b,c,d){var e,f,g;if(void 0===b&&(b=0),void 0===c&&(c=!1),d=this.getLayer(d),e=0,c){for(f=this.layers[d].height-1;f>=0;f--)for(g=this.layers[d].width-1;g>=0;g--)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}}else for(f=0;f<this.layers[d].height;f++)for(g=0;g<this.layers[d].width;g++)if(this.layers[d].data[f][g].index===a){if(e===b)return this.layers[d].data[f][g];e++}return null},getTile:function(a,b,c,d){return void 0===d&&(d=!1),c=this.getLayer(c),a>=0&&a<this.layers[c].width&&b>=0&&b<this.layers[c].height?this.layers[c].data[b][a].index===-1?d?this.layers[c].data[b][a]:null:this.layers[c].data[b][a]:null},getTileWorldXY:function(a,b,c,d,e,f){return void 0===c&&(c=this.tileWidth),void 0===d&&(d=this.tileHeight),e=this.getLayer(e),a=this.game.math.snapToFloor(a,c)/c,b=this.game.math.snapToFloor(b,d)/d,this.getTile(a,b,e,f)},copy:function(a,b,c,d,e){var f,g;if(e=this.getLayer(e),!this.layers[e])return void(this._results.length=0);for(void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=this.layers[e].width),void 0===d&&(d=this.layers[e].height),a<0&&(a=0),b<0&&(b=0),c>this.layers[e].width&&(c=this.layers[e].width),d>this.layers[e].height&&(d=this.layers[e].height),this._results.length=0,this._results.push({x:a,y:b,width:c,height:d,layer:e}),f=b;f<b+d;f++)for(g=a;g<a+c;g++)this._results.push(this.layers[e].data[f][g]);return this._results},paste:function(a,b,c,d){var e,f,g;if(void 0===a&&(a=0),void 0===b&&(b=0),d=this.getLayer(d),c&&!(c.length<2)){for(e=a-c[1].x,f=b-c[1].y,g=1;g<c.length;g++)this.layers[d].data[f+c[g].y][e+c[g].x].copy(c[g]);this.layers[d].dirty=!0,this.calculateFaces(d)}},swap:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._tempA=a,this._tempB=b,this._results.forEach(this.swapHandler,this),this.paste(c,d,this._results,g))},swapHandler:function(a){a.index===this._tempA?a.index=this._tempB:a.index===this._tempB&&(a.index=this._tempA)},forEach:function(a,b,c,d,e,f,g){g=this.getLayer(g),this.copy(c,d,e,f,g),this._results.length<2||(this._results.forEach(a,b),this.paste(c,d,this._results,g))},replace:function(a,b,c,d,e,f,g){if(g=this.getLayer(g),this.copy(c,d,e,f,g),!(this._results.length<2)){for(var h=1;h<this._results.length;h++)this._results[h].index===a&&(this._results[h].index=b);this.paste(c,d,this._results,g)}},random:function(a,b,c,d,e){var f,g,h,i;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&(h=this._results[g].index,f.indexOf(h)===-1&&f.push(h));for(i=1;i<this._results.length;i++)this._results[i].index=this.game.rnd.pick(f);this.paste(a,b,this._results,e)}},shuffle:function(a,b,c,d,e){var f,g,h;if(e=this.getLayer(e),this.copy(a,b,c,d,e),!(this._results.length<2)){for(f=[],g=1;g<this._results.length;g++)this._results[g].index&&f.push(this._results[g].index);for(j.shuffle(f),h=1;h<this._results.length;h++)this._results[h].index=f[h-1];this.paste(a,b,this._results,e)}},fill:function(a,b,c,d,e,f){if(f=this.getLayer(f),this.copy(b,c,d,e,f),!(this._results.length<2)){for(var g=1;g<this._results.length;g++)this._results[g].index=a;this.paste(b,c,this._results,f)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){var a,b,c="",d=[""];for(a=0;a<this.layers[this.currentLayer].height;a++){for(b=0;b<this.layers[this.currentLayer].width;b++)c+="%c  ",this.layers[this.currentLayer].data[a][b]>1?this.debugMap[this.layers[this.currentLayer].data[a][b]]?d.push("background: "+this.debugMap[this.layers[this.currentLayer].data[a][b]]):d.push("background: #ffffff"):d.push("background: rgb(0, 0, 0)");c+="\n"}d[0]=c,console.log.apply(console,d)},destroy:function(){this.removeAllLayers(),this.game=null}},d.prototype.constructor=d,Object.defineProperty(d.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(a){a!==this.currentLayer&&this.setLayer(a)}}),b.exports=d},{109:109,142:142,144:144,145:145,147:147,157:157}],144:[function(a,b,c){(function(c){function d(a,b,c,j,k){j|=0,k|=0,g.call(this,a,0,0),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPLAYER,this.canvas=h.create(j,k),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.renderSettings={enableScrollDelta:!0,overdrawRatio:.2,copyCanvas:null},this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:!0,debugAlpha:.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"},this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._wrap=!1,this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._scrollX=0,this._scrollY=0,this._results=[],i.canvasBitBltShift||(this.renderSettings.copyCanvas=d.ensureSharedCopyCanvas()),this.fixedToCamera=!0}var e=a("pixi"),f=a(88),g=a(109),h=a(139),i=a(140);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.sharedCopyCanvas=null,d.ensureSharedCopyCanvas=function(){return this.sharedCopyCanvas||(this.sharedCopyCanvas=h.create(2,2)),this.sharedCopyCanvas},d.prototype.postUpdate=function(){var a=this.game.camera;g.prototype.postUpdate.call(this),this.scrollX=a.x,this.scrollY=a.y,this.render()},d.prototype.destroy=function(){h.remove(this),Destroy.prototype.destroy.call(this)},d.prototype.resize=function(a,b){this.canvas.width=a,this.canvas.height=b,this.texture.frame.width=a,this.texture.frame.height=b,this.texture.width=a,this.texture.height=b,this.texture.orig.width=a,this.texture.orig.height=b,this.texture.baseTexture.width=a,this.texture.baseTexture.height=b,this.texture.update(),this.texture.requiresUpdate=!0,this.texture._updateUvs(),
this.dirty=!0},d.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)},d.prototype._fixX=function(a){return a<0&&(a=0),1===this.scrollFactorX?a:this._scrollX+(a-this._scrollX/this.scrollFactorX)},d.prototype._unfixX=function(a){return 1===this.scrollFactorX?a:this._scrollX/this.scrollFactorX+(a-this._scrollX)},d.prototype._fixY=function(a){return a<0&&(a=0),1===this.scrollFactorY?a:this._scrollY+(a-this._scrollY/this.scrollFactorY)},d.prototype._unfixY=function(a){return 1===this.scrollFactorY?a:this._scrollY/this.scrollFactorY+(a-this._scrollY)},d.prototype.getTileX=function(a){return c.Math.floor(this._fixX(a)/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(this._fixY(a)/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),a=this._fixX(a),b=this._fixY(b),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;m<j+l;m++)for(n=i;n<i+k;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(a<2e3)for(;d.length<a;)d.push(void 0);return b=this.map.tiles[a]&&this.map.tiles[a][2],null!=b&&(c=this.map.tilesets[b],c&&c.containsTileIndex(a))?d[a]=c:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.setScale=function(a,b){var c,d,e,f;for(a=a||1,b=b||a,c=0;c<this.layer.data.length;c++)for(d=this.layer.data[c],e=0;e<d.length;e++)f=d[e],f.width=this.map.tileWidth*a,f.height=this.map.tileHeight*b,f.worldX=f.x*f.width,f.worldY=f.y*f.height;this.scale.setTo(a,b)},d.prototype.shiftCanvas=function(a,b,d){var e,f,g=a.canvas,h=g.width-c.Math.abs(b),i=g.height-c.Math.abs(d),j=0,k=0,l=b,m=d;b<0&&(j=-b,l=0),d<0&&(k=-d,m=0),e=this.renderSettings.copyCanvas,e?((e.width<h||e.height<i)&&(e.width=h,e.height=i),f=e.getContext("2d"),f.clearRect(0,0,h,i),f.drawImage(g,j,k,h,i,0,0,h,i),a.clearRect(l,m,h,i),a.drawImage(e,0,0,h,i,l,m,h,i)):(a.save(),a.globalCompositeOperation="copy",a.drawImage(g,j,k,h,i,l,m,h,i),a.restore())},d.prototype.renderRegion=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.context,w=this.layer.width,x=this.layer.height,y=this._mc.tileWidth,z=this._mc.tileHeight,A=this._mc.tilesets,B=NaN;for(this._wrap||(d<=f&&(d=c.Math.max(0,d),f=c.Math.min(w-1,f)),e<=g&&(e=c.Math.max(0,e),g=c.Math.min(x-1,g))),h=d*y-a,i=e*z-b,j=(d+(1<<20)*w)%w,k=(e+(1<<20)*x)%x,v.fillStyle=this.tileColor,o=k,q=g-e,m=i;q>=0;o++,q--,m+=z)for(o>=x&&(o-=x),r=this.layer.data[o],n=j,p=f-d,l=h;p>=0;n++,p--,l+=y)n>=w&&(n-=w),s=r[n],!s||s.index<0||(t=s.index,u=A[t],void 0===u&&(u=this.resolveTileset(t)),s.alpha===B||this.debug||(v.globalAlpha=s.alpha,B=s.alpha),u?s.rotation||s.flipped?(v.save(),v.translate(l+s.centerX,m+s.centerY),v.rotate(s.rotation),s.flipped&&v.scale(-1,1),u.draw(v,-s.centerX,-s.centerY,t),v.restore()):u.draw(v,l,m,t):this.debugSettings.missingImageFill&&(v.fillStyle=this.debugSettings.missingImageFill,v.fillRect(l,m,y,z)),s.debug&&this.debugSettings.debuggedTileOverfill&&(v.fillStyle=this.debugSettings.debuggedTileOverfill,v.fillRect(l,m,y,z)))},d.prototype.renderDeltaScroll=function(a,b){var d,e,f,g,h=this._mc.scrollX,i=this._mc.scrollY,j=this.canvas.width,k=this.canvas.height,l=this._mc.tileWidth,m=this._mc.tileHeight,n=0,o=-l,p=0,q=-m;a<0?(n=j+a,o=j-1):a>0&&(o=a),b<0?(p=k+b,q=k-1):b>0&&(q=b),this.shiftCanvas(this.context,a,b),n=c.Math.floor((n+h)/l),o=c.Math.floor((o+h)/l),p=c.Math.floor((p+i)/m),q=c.Math.floor((q+i)/m),n<=o&&(this.context.clearRect(n*l-h,0,(o-n+1)*l,k),d=c.Math.floor((0+i)/m),e=c.Math.floor((k-1+i)/m),this.renderRegion(h,i,n,d,o,e)),p<=q&&(this.context.clearRect(0,p*m-i,j,(q-p+1)*m),f=c.Math.floor((0+h)/l),g=c.Math.floor((j-1+h)/l),this.renderRegion(h,i,f,p,g,q))},d.prototype.renderFull=function(){var a=this._mc.scrollX,b=this._mc.scrollY,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=c.Math.floor(a/f),i=c.Math.floor((d-1+a)/f),j=c.Math.floor(b/g),k=c.Math.floor((e-1+b)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,j,i,k)},d.prototype.render=function(){var a,b,d,e,f,g,h,i=!1;if(this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,i=!0),a=this.canvas.width,b=this.canvas.height,d=0|this._scrollX,e=0|this._scrollY,f=this._mc,g=f.scrollX-d,h=f.scrollY-e,i||0!==g||0!==h||f.renderWidth!==a||f.renderHeight!==b))return this.context.save(),f.scrollX=d,f.scrollY=e,f.renderWidth===a&&f.renderHeight===b||(f.renderWidth=a,f.renderHeight=b),this.debug&&(this.context.globalAlpha=this.debugSettings.debugAlpha,this.debugSettings.forceFullRedraw&&(i=!0)),!i&&this.renderSettings.enableScrollDelta&&c.Math.abs(g)+c.Math.abs(h)<c.Math.min(a,b)?this.renderDeltaScroll(g,h):this.renderFull(),this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.texture.update(),this.dirty=!1,this.context.restore(),!0},d.prototype.renderDebug=function(){var a,b,d,e,f,g,h,i,j=this._mc.scrollX,k=this._mc.scrollY,l=this.context,m=this.canvas.width,n=this.canvas.height,o=this.layer.width,p=this.layer.height,q=this._mc.tileWidth,r=this._mc.tileHeight,s=c.Math.floor(j/q),t=c.Math.floor((m-1+j)/q),u=c.Math.floor(k/r),v=c.Math.floor((n-1+k)/r),w=s*q-j,x=u*r-k,y=(s+(1<<20)*o)%o,z=(u+(1<<20)*p)%p;for(l.strokeStyle=this.debugSettings.facingEdgeStroke,e=z,g=v-u,b=x;g>=0;e++,g--,b+=r)for(e>=p&&(e-=p),h=this.layer.data[e],d=y,f=t-s,a=w;f>=0;d++,f--,a+=q)d>=o&&(d-=o),i=h[d],!i||i.index<0||!i.collides||(this.debugSettings.collidingTileOverfill&&(l.fillStyle=this.debugSettings.collidingTileOverfill,l.fillRect(a,b,this._mc.cw,this._mc.ch)),this.debugSettings.facingEdgeStroke&&(l.beginPath(),i.faceTop&&(l.moveTo(a,b),l.lineTo(a+this._mc.cw,b)),i.faceBottom&&(l.moveTo(a,b+this._mc.ch),l.lineTo(a+this._mc.cw,b+this._mc.ch)),i.faceLeft&&(l.moveTo(a,b),l.lineTo(a,b+this._mc.ch)),i.faceRight&&(l.moveTo(a+this._mc.cw,b),l.lineTo(a+this._mc.cw,b+this._mc.ch)),l.stroke()))},Object.defineProperty(d.prototype,"wrap",{get:function(){return this._wrap},set:function(a){this._wrap=a,this.dirty=!0}}),Object.defineProperty(d.prototype,"scrollX",{get:function(){return this._scrollX},set:function(a){this._scrollX=a}}),Object.defineProperty(d.prototype,"scrollY",{get:function(){return this._scrollY},set:function(a){this._scrollY=a}}),Object.defineProperty(d.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(a){this._mc.cw=0|a,this.dirty=!0}}),Object.defineProperty(d.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(a){this._mc.ch=0|a,this.dirty=!0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{109:109,139:139,140:140,88:88,pixi:"pixi"}],145:[function(a,b,c){var d=a(142),e=a(148),f=a(158),g={parse:function(a,b,c){if(void 0===b)return this.getEmptyData();void 0===c&&(c={});var d=a.cache.getTilemapData(b);if(d)return this.parseTiledJSON(f.mixin(c,d.data));throw Error("TilemapParser.parse - No map data found for key "+b)},getEmptyData:function(a,b,c,d){var e,f,g={};return g.width=0,g.height=0,g.tileWidth=0,g.tileHeight=0,void 0!==a&&null!==a&&(g.tileWidth=a),void 0!==b&&null!==b&&(g.tileHeight=b),void 0!==c&&null!==c&&(g.width=c),void 0!==d&&null!==d&&(g.height=d),g.orientation="orthogonal",g.version="1",g.properties={},g.widthInPixels=0,g.heightInPixels=0,e=[],f={name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:[]},e.push(f),g.layers=e,g.images=[],g.objects={},g.collision={},g.tilesets=[],g.tiles=[],g},parseTiledJSON:function(a){var b,c,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;if("orthogonal"!==a.orientation)return console.warn("TilemapParser.parseTiledJSON - Only orthogonal map types are supported in this version of Phaser"),null;for(b={},b.width=a.width,b.height=a.height,b.tileWidth=a.tilewidth,b.tileHeight=a.tileheight,b.orientation=a.orientation,b.version=a.version,b.properties=a.properties,b.widthInPixels=b.width*b.tileWidth,b.heightInPixels=b.height*b.tileHeight,c=[],g=0;g<a.layers.length;g++)if("tilelayer"===a.layers[g].type){if(h=a.layers[g],!h.compression&&h.encoding&&"base64"===h.encoding){for(i=window.atob(h.data),j=i.length,k=Array(j),l=0;l<j;l+=4)k[l/4]=(i.charCodeAt(l)|i.charCodeAt(l+1)<<8|i.charCodeAt(l+2)<<16|i.charCodeAt(l+3)<<24)>>>0;h.data=k}for(m={name:a.layers[g].name,x:a.layers[g].x,y:a.layers[g].y,width:a.layers[g].width,height:a.layers[g].height,widthInPixels:a.layers[g].width*a.tilewidth,heightInPixels:a.layers[g].height*a.tileheight,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{},indexes:[],callbacks:[],bodies:[]},a.layers[g].properties&&(m.properties=a.layers[g].properties),n=0,o=[],p=[],u=0,j=a.layers[g].data.length;u<j;u++){if(q=0,r=!1,t=a.layers[g].data[u],t>536870912)switch(s=0,t>2147483648&&(t-=2147483648,s+=4),t>1073741824&&(t-=1073741824,s+=2),t>536870912&&(t-=536870912,s+=1),s){case 5:q=Math.PI/2;break;case 6:q=Math.PI;break;case 3:q=3*Math.PI/2;break;case 4:q=0,r=!0;break;case 7:q=Math.PI/2,r=!0;break;case 2:q=Math.PI,r=!0;break;case 1:q=3*Math.PI/2,r=!0}t>0?(o.push(new d(m,t,n,p.length,a.tilewidth,a.tileheight)),o[o.length-1].rotation=q,o[o.length-1].flipped=r):o.push(new d(m,(-1),n,p.length,a.tilewidth,a.tileheight)),n++,n===a.layers[g].width&&(p.push(o),n=0,o=[])}m.data=p,c.push(m)}for(b.layers=c,v=[],g=0;g<a.layers.length;g++)"imagelayer"===a.layers[g].type&&(w={name:a.layers[g].name,image:a.layers[g].image,x:a.layers[g].x,y:a.layers[g].y,alpha:a.layers[g].opacity,visible:a.layers[g].visible,properties:{}},a.layers[g].properties&&(w.properties=a.layers[g].properties),v.push(w));for(b.images=v,x=[],y=[],g=0;g<a.tilesets.length;g++)z=a.tilesets[g],z.image&&(A=new e(z.name,z.firstgid,z.tilewidth,z.tileheight,z.margin,z.spacing,z.properties),z.tileproperties&&(A.tileProperties=z.tileproperties),A.updateTileData(z.imagewidth,z.imageheight),x.push(A));for(b.tilesets=x,b.imagecollections=y,B={},C={},D=function(a,b){var c,d,e={};for(c in b)d=b[c],void 0!==a[d]&&(e[d]=a[d]);return e},g=0;g<a.layers.length;g++)if("objectgroup"===a.layers[g].type)for(B[a.layers[g].name]=[],C[a.layers[g].name]=[],E=0,j=a.layers[g].objects.length;E<j;E++)if(a.layers[g].objects[E].gid)F={gid:a.layers[g].objects[E].gid,name:a.layers[g].objects[E].name,type:a.layers[g].objects[E].hasOwnProperty("type")?a.layers[g].objects[E].type:"",x:a.layers[g].objects[E].x,y:a.layers[g].objects[E].y,visible:a.layers[g].objects[E].visible,properties:a.layers[g].objects[E].properties},a.layers[g].objects[E].rotation&&(F.rotation=a.layers[g].objects[E].rotation),B[a.layers[g].name].push(F);else if(a.layers[g].objects[E].polyline){for(F={name:a.layers[g].objects[E].name,type:a.layers[g].objects[E].type,x:a.layers[g].objects[E].x,y:a.layers[g].objects[E].y,width:a.layers[g].objects[E].width,height:a.layers[g].objects[E].height,visible:a.layers[g].objects[E].visible,properties:a.layers[g].objects[E].properties},a.layers[g].objects[E].rotation&&(F.rotation=a.layers[g].objects[E].rotation),F.polyline=[],G=0;G<a.layers[g].objects[E].polyline.length;G++)F.polyline.push([a.layers[g].objects[E].polyline[G].x,a.layers[g].objects[E].polyline[G].y]);C[a.layers[g].name].push(F),B[a.layers[g].name].push(F)}else if(a.layers[g].objects[E].polygon){for(F=D(a.layers[g].objects[E],["name","type","x","y","visible","rotation","properties"]),F.polygon=[],G=0;G<a.layers[g].objects[E].polygon.length;G++)F.polygon.push([a.layers[g].objects[E].polygon[G].x,a.layers[g].objects[E].polygon[G].y]);B[a.layers[g].name].push(F)}else a.layers[g].objects[E].ellipse?(F=D(a.layers[g].objects[E],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]),B[a.layers[g].name].push(F)):(F=D(a.layers[g].objects[E],["name","type","x","y","width","height","visible","rotation","properties"]),F.rectangle=!0,B[a.layers[g].name].push(F));for(b.objects=B,b.collision=C,b.tiles=[],g=0;g<b.tilesets.length;g++)for(z=b.tilesets[g],n=z.tileMargin,H=z.tileMargin,I=0,J=0,K=0,u=z.firstgid;u<z.firstgid+z.total&&(b.tiles[u]=[n,H,g],n+=z.tileWidth+z.tileSpacing,I++,I!==z.total)&&(J++,J!==z.columns||(n=z.tileMargin,H+=z.tileHeight+z.tileSpacing,J=0,K++,K!==z.rows));u++);for(g=0;g<b.layers.length;g++)for(m=b.layers[g],l=0;l<m.data.length;l++)for(o=m.data[l],N=0;N<o.length;N++)L=o[N],L.index<0||(M=b.tiles[L.index][2],z=b.tilesets[M],z.tileProperties&&z.tileProperties[L.index-z.firstgid]&&(L.properties=f.mixin(z.tileProperties[L.index-z.firstgid],L.properties)));return b}};b.exports=g},{142:142,148:148,158:158}],146:[function(a,b,c){(function(a){function c(a,b,d){this._tilemap=a,this._layerIndex=this._tilemap.getLayerIndex(b),this._tilesetIndex=this._tilemap.getTilesetIndex(d),this._open,this._closed,this._visited,this._useDiagonal=!0,this._findClosest=!0,this._walkablePropName="walkable",this._distanceFunction=c.DISTANCE_EUCLIDIAN,this._lastPath=null,this._debug=!0}c.COST_ORTHOGONAL=1,c.COST_DIAGONAL=c.COST_ORTHOGONAL*a.Math.sqrt(2),c.DISTANCE_MANHATTAN="distManhattan",c.DISTANCE_EUCLIDIAN="distEuclidian",c.prototype.constructor=c,c.prototype.updateMap=function(){var a,b,d,e,f,g,h=this._tilemap.tilesets[this._tilesetIndex];for(f=0;f<this._tilemap.height;f++)for(g=0;g<this._tilemap.width;g++)a=this._tilemap.layers[this._layerIndex].data[f][g],b=a.index-h.firstgid,a.index<0||(e=h.tileProperties[b],d=!(!e||"true"!==e.walkable),a.properties.astarNode=new c.TilemapPathingNode(g,f,d,e))},c.prototype.findPath=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=new c.TilemapPathingPath,r=this._tilemap.layers[this._layerIndex].data[a.y][a.x].properties.astarNode,s=this._tilemap.layers[this._layerIndex].data[b.y][b.x].properties.astarNode;for(q.start=r,q.goal=s,this._open=[],this._closed=[],this._visited=[],this._open.push(r),r.g=0,r.h=this[this._distanceFunction](r,s),r.f=r.h,r.parent=null;this._open.length>0;){for(d=1/0,f=0;f<this._open.length;f++)this._open[f].f<d&&(e=this._open[f],d=e.f);if(e==s)return q.nodes=this.reconstructPath(s),this._lastPath=q,this._debug===!0&&(q.visited=this._visited),q;for(this._open.splice(this._open.indexOf(e),1),this._closed.push(e),g=this.neighbors(e),h=0;h<g.length;h++)i=g[h],-1==this._closed.indexOf(i)&&(j=e.g+i.travelCost,k=!1,-1==this._open.indexOf(i)?(this._open.push(i),k=!0,this._debug===!0&&this.visit(i)):j<i.g&&(k=!0),k&&(i.parent=e,i.g=j,i.h=this[this._distanceFunction](i,s),i.f=i.g+i.h))}if(this._findClosest===!0){for(l=1/0,f=0,p=this._closed.length;f<p;f++)n=this._closed[f],o=this[this._distanceFunction](s,n),o<l&&(l=o,m=n);q.nodes=this.reconstructPath(m),this._debug===!0&&(q.visited=this._visited)}return this._lastPath=q,q},c.prototype.reconstructPath=function(a){for(var b=[],c=a;c.parent;)b.push({x:c.x,y:c.y}),c=c.parent;return b},c.prototype.visit=function(a){for(var b in this._visited)if(this._visited[b]==a)return;this._visited.push(a)},c.prototype.neighbors=function(a){var b=a.x,d=a.y,e=null,f=[],g=a.properties||{},h=this._tilemap.layers[this._layerIndex].data;return b>0&&"false"===g.collisionLeft&&(e=h[d][b-1].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),b<this._tilemap.width-1&&"false"===g.collisionRight&&(e=h[d][b+1].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),d>0&&"false"===g.collisionTop&&(e=h[d-1][b].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),d<this._tilemap.height-1&&"false"===g.collisionBottom&&(e=h[d+1][b].properties.astarNode,e&&e.walkable&&(e.travelCost=c.COST_ORTHOGONAL,f.push(e))),this._useDiagonal===!1?f:(b>0&&d>0&&"false"===g.collisionTop&&"false"===g.collisionLeft&&(e=h[d-1][b-1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionRight&&"false"===e.properties.collisionBottom&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b<this._tilemap.width-1&&d>0&&"false"===g.collisionTop&&"false"===g.collisionRight&&(e=h[d-1][b+1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionLeft&&"false"===e.properties.collisionBottom&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b>0&&d<this._tilemap.height-1&&"false"===g.collisionBottom&&"false"===g.collisionLeft&&(e=h[d+1][b-1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionRight&&"false"===e.properties.collisionTop&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),b<this._tilemap.width-1&&d<this._tilemap.height-1&&"false"===g.collisionRight&&"false"===g.collisionBottom&&(e=h[d+1][b+1].properties.astarNode,e&&e.walkable&&"false"===e.properties.collisionTop&&"false"===e.properties.collisionLeft&&(e.travelCost=c.COST_DIAGONAL,f.push(e))),f)},c.prototype.distManhattan=function(b,c){return a.Math.abs(b.x-c.x)+a.Math.abs(b.y-c.y)},c.prototype.distEuclidian=function(b,c){return a.Math.sqrt(a.Math.pow(b.x-c.x,2)+a.Math.pow(b.y-c.y,2))},c.TilemapPathingNode=function(a,b,c,d){this.x=a,this.y=b,this.g=0,this.h=0,this.f=0,this.parent,this.walkable=c,this.properties=d,this.travelCost},c.TilemapPathingPath=function(a,b,c){this.nodes=a||[],this.start=b||null,this.goal=c||null,this.visited=[]},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],147:[function(a,b,c){(function(c){function d(a,b,c,d,i){d|=0,i|=0,g.call(this,a,0,0),this.map=b,this.index=c,this.layer=b.layers[c],this.type=f.TILEMAPSPRITE,this.canvas=h.create(d,i),this.context=this.canvas.getContext("2d"),this.texture=new e.Texture(new e.BaseTexture(this.canvas)),this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)"},this.dirty=!0,this.rayStepRate=4,this._mc={renderWidth:0,renderHeight:0,tileWidth:b.tileWidth,tileHeight:b.tileHeight,cw:b.tileWidth,ch:b.tileHeight,tilesets:[]},this._results=[]}var e=a("pixi"),f=a(88),g=a(109),h=a(139);a(140);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.update=function(){g.prototype.update.call(this),this.render()},d.prototype.destroy=function(){h.remove(this),g.prototype.destroy.call(this)},d.prototype.resize=function(a,b){},d.prototype.getTileX=function(a){return c.Math.floor(a/this._mc.tileWidth)},d.prototype.getTileY=function(a){return c.Math.floor(a/this._mc.tileHeight)},d.prototype.getTileXY=function(a,b,c){return c.x=this.getTileX(a),c.y=this.getTileY(b),c},d.prototype.getRayCastTiles=function(a,b,c,d){var e,f,g,h,i,j,k;if(b||(b=this.rayStepRate),void 0===c&&(c=!1),void 0===d&&(d=!1),e=this.getTiles(a.x,a.y,a.width,a.height,c,d),0===e.length)return[];for(f=a.coordinatesOnLine(b),g=[],h=0;h<e.length;h++)for(i=0;i<f.length;i++)if(j=e[h],k=f[i],j.containsPoint(k[0],k[1])){g.push(j);break}return g},d.prototype.getTiles=function(a,b,d,e,f,g){var h,i,j,k,l,m,n,o;for(void 0===f&&(f=!1),void 0===g&&(g=!1),h=!(f||g),i=c.Math.floor(a/(this._mc.cw*this.scale.x)),j=c.Math.floor(b/(this._mc.ch*this.scale.y)),k=c.Math.ceil((a+d)/(this._mc.cw*this.scale.x))-i,l=c.Math.ceil((b+e)/(this._mc.ch*this.scale.y))-j;this._results.length;)this._results.pop();for(m=j;m<j+l;m++)for(n=i;n<i+k;n++)o=this.layer.data[m],o&&o[n]&&(h||o[n].isInteresting(f,g))&&this._results.push(o[n]);return this._results.slice()},d.prototype.resolveTileset=function(a){var b,c,d=this._mc.tilesets;if(a<2e3)for(;d.length<a;)d.push(void 0);return c=this.map.tiles[a]&&this.map.tiles[a][2],null!=c&&(b=this.map.tilesets[c],b&&b.containsTileIndex(a))?d[a]=b:d[a]=null},d.prototype.resetTilesetCache=function(){for(var a=this._mc.tilesets;a.length;)a.pop()},d.prototype.renderRegion=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q=this.context,r=this.layer.width,s=this.layer.height,t=this._mc.tileWidth,u=this._mc.tileHeight,v=this._mc.tilesets,w=NaN,x=c*t-a,y=d*u-b,z=(c+(1<<20)*r)%r,A=(d+(1<<20)*s)%s;for(q.fillStyle=this.tileColor,j=A,l=f-d,h=y;l>=0;j++,l--,h+=u)for(j>=s&&(j-=s),m=this.layer.data[j],i=z,k=e-c,g=x;k>=0;i++,k--,g+=t)i>=r&&(i-=r),n=m[i],!n||n.index<0||(o=n.index,p=v[o],void 0===p&&(p=this.resolveTileset(o)),n.alpha===w||this.debug||(q.globalAlpha=n.alpha,w=n.alpha),p?n.rotation||n.flipped?(q.save(),q.translate(g+n.centerX,h+n.centerY),q.rotate(n.rotation),n.flipped&&q.scale(-1,1),p.draw(q,-n.centerX,-n.centerY,o),q.restore()):p.draw(q,g,h,o):this.debugSettings.missingImageFill&&(q.fillStyle=this.debugSettings.missingImageFill,q.fillRect(g,h,t,u)),n.debug&&this.debugSettings.debuggedTileOverfill&&(q.fillStyle=this.debugSettings.debuggedTileOverfill,q.fillRect(g,h,t,u)))},d.prototype.renderFull=function(){var a=0,b=0,d=this.canvas.width,e=this.canvas.height,f=this._mc.tileWidth,g=this._mc.tileHeight,h=0,i=0,j=c.Math.floor((d-1)/f),k=c.Math.floor((e-1)/g);this.context.clearRect(0,0,d,e),this.renderRegion(a,b,h,i,j,k)},d.prototype.render=function(){var a=!1;this.visible&&((this.dirty||this.layer.dirty)&&(this.layer.dirty=!1,a=!0),a&&(this.context.save(),this.renderFull(),this.texture.update(),this.dirty=!1,this.context.restore()))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{109:109,139:139,140:140,88:88,pixi:"pixi"}],148:[function(a,b,c){(function(a){function c(a,b,c,d,e,f,g){(void 0===c||c<=0)&&(c=32),(void 0===d||d<=0)&&(d=32),void 0===e&&(e=0),void 0===f&&(f=0),this.name=a,this.firstgid=0|b,this.tileWidth=0|c,this.tileHeight=0|d,this.tileMargin=0|e,this.tileSpacing=0|f,this.properties=g||{},this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]}c.prototype={draw:function(a,b,c,d){var e=d-this.firstgid<<1;e>=0&&e+1<this.drawCoords.length&&a.drawImage(this.image,this.drawCoords[e],this.drawCoords[e+1],this.tileWidth,this.tileHeight,b,c,this.tileWidth,this.tileHeight)},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},setImage:function(a){this.image=a,this.updateTileData(a.width,a.height)},setSpacing:function(a,b){this.tileMargin=0|a,this.tileSpacing=0|b,this.image&&this.updateTileData(this.image.width,this.image.height)},updateTileData:function(b,c){var d,e,f,g,h=(c-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(b-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);for(h%1===0&&i%1===0||console.warn("Tileset - image tile area is not an even multiple of tile size"),h=a.Math.floor(h),i=a.Math.floor(i),(this.rows&&this.rows!==h||this.columns&&this.columns!==i)&&console.warn("Tileset - actual and expected number of tile rows and columns differ"),this.rows=h,this.columns=i,this.total=h*i,this.drawCoords.length=0,d=this.tileMargin,e=this.tileMargin,f=0;f<this.rows;f++){for(g=0;g<this.columns;g++)this.drawCoords.push(d),this.drawCoords.push(e),d+=this.tileWidth+this.tileSpacing;d=this.tileMargin,e+=this.tileHeight+this.tileSpacing}}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],149:[function(a,b,c){(function(c){function d(a){this.game=a,this.time=0,this.prevTime=0,this.now=0,this.previousDateNow=0,this.elapsed=0,this.elapsedMS=0,this.slowMotion=1,this.desiredFpsMult=1/d.DESIRED_FPS,this.advancedTiming=!0,this.suggestedFps=null,this.frames=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this.events=new e(this.game,(!1)),this._desiredFps=d.DESIRED_FPS,this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]}var e=a(150);d.DESIRED_FPS=60,d.prototype.constructor=d,d.prototype.boot=function(){this._started=c.Date.now(),this.time=c.Date.now(),this.events.start()},d.prototype.benchmark=function(){this.events.add(1e4,function(){this.advancedTiming=!1,this.suggestedFps<57.5&&this.game.emit("fpsProblem")},this)},d.prototype.throttle=function(a,b,c,d){var e,f,b=b||250,d=d||!1;return clock=this,function(c){var g=g||this,h=clock.time;e&&h<e+b?(clearTimeout(f),f=setTimeout(function(){e=h,0==d&&a.call(g,c)},b)):(e=h,a.call(g,c))}},d.prototype.add=function(a){return this._timers.push(a),a},d.prototype.create=function(a){void 0===a&&(a=!0);var b=new e(this.game,a);return this._timers.push(b),b},d.prototype.removeAll=function(){for(var a=0;a<this._timers.length;a++)this._timers[a].destroy();this._timers=[],this.events.removeAll()},d.prototype.update=function(a){this.previousDateNow=this.time,this.time=c.Date.now(),this.elapsedMS=this.time-this.previousDateNow,this.prevTime=this.now,this.now=a,this.elapsed=this.now-this.prevTime,this.game.raf&&this.game.raf._isSetTimeOut&&(this.timeToCall=c.Math.floor(c.Math.max(0,1e3/this._desiredFps-(this.timeExpected-a))),this.timeExpected=a+this.timeToCall),this.advancedTiming?this.updateAdvancedTiming():(this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=c.Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this._timeLastSecond=this.now,this.frames=0)),this.game.paused||(this.events.update(this.time),this._timers.length&&this.updateTimers())},d.prototype.refresh=function(){var a=this.time;this.time=c.Date.now(),this.elapsedMS=this.time-a},d.prototype.updateTimers=function(){for(var a=0,b=this._timers.length;a<b;)this._timers[a].update(this.time)?a++:(this._timers.splice(a,1),b--)},d.prototype.updateAdvancedTiming=function(){this._frameCount++,this._elapsedAccumulator+=this.elapsed,this._frameCount>=2*this._desiredFps&&(this.suggestedFps=2.5*c.Math.floor(400/(this._elapsedAccumulator/this._frameCount)),this._frameCount=0,this._elapsedAccumulator=0),this.msMin=c.Math.min(this.msMin,this.elapsed),this.msMax=c.Math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=c.Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=c.Math.min(this.fpsMin,this.fps),this.fpsMax=c.Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)},d.prototype.gamePaused=function(){this._pauseStarted=c.Date.now(),this.events.pause();for(var a=this._timers.length;a--;)this._timers[a]._pause()},d.prototype.gameResumed=function(){this.time=c.Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var a=this._timers.length;a--;)this._timers[a]._resume()},d.prototype.totalElapsedSeconds=function(){return.001*(this.time-this._started)},d.prototype.elapsedSince=function(a){return this.time-a},d.prototype.elapsedSecondsSince=function(a){return.001*(this.time-a)},d.prototype.reset=function(){this._started=this.time,this.removeAll()},Object.defineProperty(d.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(a){this._desiredFps=a,this.desiredFpsMult=1/a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{150:150}],150:[function(a,b,c){(function(c){function d(a,b){void 0===b&&(b=!0),this.game=a,this.running=!1,this.autoDestroy=b,this.expired=!1,this.elapsed=0,this.events=[],this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=c.Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0,f.call(this)}var e=a(151),f=a(3);d.MINUTE=6e4,d.SECOND=1e3,d.HALF=500,d.QUARTER=250,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.create=function(a,b,d,f,g,h){a=c.Math.round(a);var i,j=a;return j+=0===this._now?this.game.clock.time:this._now,i=new e(this,a,j,d,b,f,g,h),this.events.push(i),this.order(),this.expired=!1,i},d.prototype.add=function(a,b,c){return this.create(a,!1,0,b,c,Array.prototype.slice.call(arguments,3))},d.prototype.repeat=function(a,b,c,d){return this.create(a,!1,b,c,d,Array.prototype.slice.call(arguments,4))},d.prototype.loop=function(a,b,c){return this.create(a,!0,0,b,c,Array.prototype.slice.call(arguments,3))},d.prototype.start=function(a){if(!this.running){this._started=this.game.clock.time+(a||0),this.running=!0;for(var b=0;b<this.events.length;b++)this.events[b].tick=this.events[b].delay+this._started}},d.prototype.stop=function(a){this.running=!1,void 0===a&&(a=!0),a&&(this.events.length=0)},d.prototype.remove=function(a){for(var b=0;b<this.events.length;b++)if(this.events[b]===a)return this.events[b].pendingDelete=!0,!0;return!1},d.prototype.order=function(){this.events.length>0&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},d.prototype.sortHandler=function(a,b){return a.tick<b.tick?-1:a.tick>b.tick?1:0},d.prototype.clearPendingEvents=function(){for(this._i=this.events.length;this._i--;)this.events[this._i].pendingDelete&&this.events.splice(this._i,1);this._len=this.events.length,this._i=0},d.prototype.update=function(a){if(this.paused)return!0;this.elapsed=a-this._now,this._now=a,this.elapsed>this.timeCap&&(this.adjustEvents(a-this.elapsed),console.warn("Timer: elapsed > timeCap code branch executed, adjusted event timers")),this._marked=0,this.clearPendingEvents();var b;if(this.running&&this._now>=this.nextTick&&this._len>0){for(;this._i<this._len&&this.running&&(b=this.events[this._i],this._now>=b.tick&&!b.pendingDelete);)this._newTick=this._now+b.delay-(this._now-b.tick),this._newTick<0&&(this._newTick=this._now+b.delay),b.loop===!0?(b.tick=this._newTick,b.callback.apply(b.callbackContext,b.args)):b.repeatCount>0?(b.repeatCount--,b.tick=this._newTick,b.callback.apply(b.callbackContext,b.args)):(this._marked++,b.pendingDelete=!0,b.callback.apply(b.callbackContext,b.args)),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.emit("complete",this))}return!this.expired||!this.autoDestroy},d.prototype.pause=function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.clock.time,this.paused=!0))},d.prototype._pause=function(){!this.paused&&this.running&&(this._pauseStarted=this.game.clock.time,this.paused=!0)},d.prototype.adjustEvents=function(a){var b,c,d;for(b=0;b<this.events.length;b++)this.events[b].pendingDelete||(c=this.events[b].tick-a,c<0&&(c=0),this.events[b].tick=this._now+c);d=this.nextTick-a,d<0?this.nextTick=this._now:this.nextTick=this._now+d},d.prototype.resume=function(){if(this.paused){var a=this.game.clock.time;this._pauseTotal+=a-this._now,this._now=a,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},d.prototype._resume=function(){this._codePaused||this.resume()},d.prototype.removeAll=function(){this.removeAllListeners(),this.events.length=0,this._len=0,this._i=0},d.prototype.destroy=function(){this.removeAllListeners(),this.running=!1,this.events=[],this._len=0,this._i=0},Object.defineProperty(d.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(d.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(d.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(d.prototype,"ms",{get:function(){return this.running?this._now-this._started-this._pauseTotal:0}}),Object.defineProperty(d.prototype,"seconds",{get:function(){return this.running?.001*this.ms:0}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{151:151,3:3}],151:[function(a,b,c){
function d(a,b,c,d,e,f,g,h){this.timer=a,this.delay=b,this.tick=c,this.repeatCount=d-1,this.loop=e,this.callback=f,this.callbackContext=g,this.args=h,this.pendingDelete=!1}d.prototype.constructor=d,b.exports=d},{}],152:[function(a,b,c){(function(a){var c={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)}},Sinusoidal:{In:function(b){return 0===b?0:1===b?1:1-a.Math.cos(b*a.Math.PI/2)},Out:function(b){return 0===b?0:1===b?1:a.Math.sin(b*a.Math.PI/2)},InOut:function(b){return 0===b?0:1===b?1:.5*(1-a.Math.cos(a.Math.PI*b))}}};c.Default=c.Linear.None,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],153:[function(a,b,c){function d(a,b,c){this.game=b,this.target=a,this.manager=c,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=c.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1,h.call(this)}var e=a(154),f=a(152),g=a(160),h=a(3);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.create=function(){this.timeline.push(new e(this))},d.prototype.to=function(a,b,c,d,g,h,i){return(void 0===b||b<=0)&&(b=1e3),void 0!==c&&null!==c||(c=f.Default),void 0===d&&(d=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.to cannot be called after Tween.start"),this):(this.timeline.push(new e(this).to(a,b,c,g,h,i)),d&&this.start(),this)},d.prototype.from=function(a,b,c,d,g,h,i){return void 0===b&&(b=1e3),void 0!==c&&null!==c||(c=f.Default),void 0===d&&(d=!1),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=!1),"string"==typeof c&&this.manager.easeMap[c]&&(c=this.manager.easeMap[c]),this.isRunning?(console.warn("Tween.from cannot be called after Tween.start"),this):(this.timeline.push(new e(this).from(a,b,c,g,h,i)),d&&this.start(),this)},d.prototype.start=function(a){var b,c;if(void 0===a&&(a=0),null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(b=0;b<this.timeline.length;b++)for(c in this.timeline[b].vEnd)this.properties[c]=this.target[c]||0,Array.isArray(this.properties[c])||(this.properties[c]*=1);for(b=0;b<this.timeline.length;b++)this.timeline[b].loadValues();return this.manager.add(this),this.isRunning=!0,(a<0||a>this.timeline.length-1)&&(a=0),this.current=a,this.timeline[this.current].start(),this},d.prototype.stop=function(a){return void 0===a&&(a=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,a&&(this.emit("complete",this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},d.prototype.updateTweenData=function(a,b,c){if(0===this.timeline.length)return this;if(void 0===c&&(c=0),c===-1)for(var d=0;d<this.timeline.length;d++)this.timeline[d][a]=b;else this.timeline[c][a]=b;return this},d.prototype.delay=function(a,b){return this.updateTweenData("delay",a,b)},d.prototype.repeat=function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("repeatCounter",a,c),this.updateTweenData("repeatDelay",b,c)},d.prototype.repeatDelay=function(a,b){return this.updateTweenData("repeatDelay",a,b)},d.prototype.yoyo=function(a,b,c){return void 0===b&&(b=0),this.updateTweenData("yoyo",a,c),this.updateTweenData("yoyoDelay",b,c)},d.prototype.yoyoDelay=function(a,b){return this.updateTweenData("yoyoDelay",a,b)},d.prototype.easing=function(a,b){return"string"==typeof a&&this.manager.easeMap[a]&&(a=this.manager.easeMap[a]),this.updateTweenData("easingFunction",a,b)},d.prototype.interpolation=function(a,b,c){return void 0===b&&(b=g),this.updateTweenData("interpolationFunction",a,c),this.updateTweenData("interpolationContext",b,c)},d.prototype.repeatAll=function(a){return void 0===a&&(a=0),this.repeatCounter=a,this},d.prototype.chain=function(){for(var a=arguments.length;a--;)a>0?arguments[a-1].chainedTween=arguments[a]:this.chainedTween=arguments[a];return this},d.prototype.loop=function(a){return void 0===a&&(a=!0),a?this.repeatAll(-1):this.repeatCounter=0,this},d.prototype.onUpdateCallback=function(a,b){return this._onUpdateCallback=a,this._onUpdateCallbackContext=b,this},d.prototype.pause=function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},d.prototype._pause=function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},d.prototype.resume=function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var a=0;a<this.timeline.length;a++)this.timeline[a].isRunning||(this.timeline[a].startTime+=this.game.time.time-this._pausedTime)}},d.prototype._resume=function(){this._codePaused||this.resume()},d.prototype.update=function(a){var b,c;return!this.pendingDelete&&(!!this.isPaused||(b=this.timeline[this.current].update(a),b===e.PENDING||(b===e.RUNNING?(this._hasStarted||(this.emit("start",this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning):b===e.LOOPED?(this.repeatCounter===-1?this.emit("loop",this):this.emit("repeat",this),!0):b===e.COMPLETE?(c=!1,this.reverse?(this.current--,this.current<0&&(this.current=this.timeline.length-1,c=!0)):(this.current++,this.current===this.timeline.length&&(this.current=0,c=!0)),c?this.repeatCounter===-1?(this.timeline[this.current].start(),this.emit("loop",this),!0):this.repeatCounter>0?(this.repeatCounter--,this.timeline[this.current].start(),this.emit("repeat",this),!0):(this.isRunning=!1,this.emit("complete",this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start(),!1):(this.emit("childComplete",this),this.timeline[this.current].start(),!0)):void 0)))},d.prototype.generateData=function(a,b){var c,d;if(null===this.game||null===this.target)return null;for(void 0===a&&(a=60),void 0===b&&(b=[]),c=0;c<this.timeline.length;c++)for(d in this.timeline[c].vEnd)this.properties[d]=this.target[d]||0,Array.isArray(this.properties[d])||(this.properties[d]*=1);for(c=0;c<this.timeline.length;c++)this.timeline[c].loadValues();for(c=0;c<this.timeline.length;c++)b=b.concat(this.timeline[c].generateData(a));return b},Object.defineProperty(d.prototype,"totalDuration",{get:function(){var a,b=0;for(a=0;a<this.timeline.length;a++)b+=this.timeline[a].duration;return b}}),d.prototype.constructor=d,b.exports=d},{152:152,154:154,160:160,3:3}],154:[function(a,b,c){function d(a){this.parent=a,this.game=a.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=e.Default,this.interpolationFunction=f.linearInterpolation,this.interpolationContext=f,this.isRunning=!1,this.isFrom=!1}var e=a(152),f=a(160);d.PENDING=0,d.RUNNING=1,d.LOOPED=2,d.COMPLETE=3,d.prototype={to:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!1,this},from:function(a,b,c,d,e,f){return this.vEnd=a,this.duration=b,this.easingFunction=c,this.delay=d,this.repeatCounter=e,this.yoyo=f,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.clock.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,this.delay>0?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a],this.parent.target[a]=this.vStart[a];return this.value=0,this.yoyoCounter=0,this},loadValues:function(){for(var a in this.parent.properties){if(this.vStart[a]=this.parent.properties[a],Array.isArray(this.vEnd[a])){if(0===this.vEnd[a].length)continue;0===this.percent&&(this.vEnd[a]=[this.vStart[a]].concat(this.vEnd[a]))}void 0!==this.vEnd[a]?("string"==typeof this.vEnd[a]&&(this.vEnd[a]=this.vStart[a]+parseFloat(this.vEnd[a],10)),this.parent.properties[a]=this.vEnd[a]):this.vEnd[a]=this.vStart[a],this.vStartCache[a]=this.vStart[a],this.vEndCache[a]=this.vEnd[a]}return this},update:function(a){var b,c,e,g;if(this.isRunning){if(a<this.startTime)return d.RUNNING}else{if(!(a>=this.startTime))return d.PENDING;this.isRunning=!0}b=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.clock.elapsedMS,this.parent.reverse?(this.dt-=b*this.parent.timeScale,this.dt=f.max(this.dt,0)):(this.dt+=b*this.parent.timeScale,this.dt=f.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);for(c in this.vEnd)e=this.vStart[c],g=this.vEnd[c],Array.isArray(g)?this.parent.target[c]=this.interpolationFunction.call(this.interpolationContext,g,this.value):this.parent.target[c]=e+(g-e)*this.value;return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():d.RUNNING},generateData:function(a){var b,c,d,e,g,h,i,j;this.parent.reverse?this.dt=this.duration:this.dt=0,b=[],c=!1,d=1/a*1e3;do{this.parent.reverse?(this.dt-=d,this.dt=f.max(this.dt,0)):(this.dt+=d,this.dt=f.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),e={};for(g in this.vEnd)h=this.vStart[g],i=this.vEnd[g],Array.isArray(i)?e[g]=this.interpolationFunction(i,this.value):e[g]=h+(i-h)*this.value;b.push(e),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(c=!0)}while(!c);return this.yoyo&&(j=b.slice(),j.reverse(),b=b.concat(j)),b},repeat:function(){var a;if(this.yoyo){if(this.inReverse&&0===this.repeatCounter){for(a in this.vStartCache)this.vStart[a]=this.vStartCache[a],this.vEnd[a]=this.vEndCache[a];return this.inReverse=!1,d.COMPLETE}this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return d.COMPLETE;if(this.inReverse)for(a in this.vStartCache)this.vStart[a]=this.vEndCache[a],this.vEnd[a]=this.vStartCache[a];else{for(a in this.vStartCache)this.vStart[a]=this.vStartCache[a],this.vEnd[a]=this.vEndCache[a];this.repeatCounter>0&&this.repeatCounter--}return this.startTime=this.game.clock.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,d.LOOPED}},d.prototype.constructor=d,b.exports=d},{152:152,160:160}],155:[function(a,b,c){function d(a){this.game=a,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Linear:f.Linear.None,Quad:f.Quadratic.Out,"Quad.easeIn":f.Quadratic.In,"Quad.easeOut":f.Quadratic.Out,"Quad.easeInOut":f.Quadratic.InOut}}var e=a(88),f=a(152),g=a(153);d.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var a=0;a<this._tweens.length;a++)this._tweens[a].pendingDelete=!0;this._add=[]},removeFrom:function(a,b){var c,d;if(void 0===b&&(b=!0),Array.isArray(a))for(c=0,d=a.length;c<d;c++)this.removeFrom(a[c]);else if(a.type===e.GROUP&&b)for(c=0,d=a.children.length;c<d;c++)this.removeFrom(a.children[c]);else{for(c=0,d=this._tweens.length;c<d;c++)a===this._tweens[c].target&&this.remove(this._tweens[c]);for(c=0,d=this._add.length;c<d;c++)a===this._add[c].target&&this.remove(this._add[c])}},add:function(a){a._manager=this,a.pendingDelete=!1,this._add.indexOf(a)===-1&&this._tweens.indexOf(a)===-1&&this._add.push(a)},create:function(a){return new g(a,this.game,this)},remove:function(a){var b=this._tweens.indexOf(a);b!==-1?this._tweens[b].pendingDelete=!0:(b=this._add.indexOf(a),b!==-1&&(this._add[b].pendingDelete=!0))},update:function(){var a,b=this._add.length,c=this._tweens.length;if(0===c&&0===b)return!1;for(a=0;a<c;)this._tweens[a].update(this.game.clock.time)?a++:(this._tweens.splice(a,1),c--);return b>0&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(a){return this._tweens.some(function(b){return b.target===a})},_pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._pause()},_resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a]._resume()},pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].pause()},resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--)this._tweens[a].resume(!0)}},d.prototype.constructor=d,b.exports=d},{152:152,153:153,88:88}],156:[function(a,b,c){function d(a){this.position=0,this.list=a||[]}d.prototype={add:function(a){return this.exists(a)||this.list.push(a),a},getIndex:function(a){return this.list.indexOf(a)},getByKey:function(a,b){for(var c=this.list.length;c--;)if(this.list[c][a]===b)return this.list[c];return null},exists:function(a){return this.list.indexOf(a)>-1},reset:function(){this.list.length=0},remove:function(a){var b=this.list.indexOf(a);if(b>-1)return this.list.splice(b,1),a},setAll:function(a,b){for(var c=this.list.length;c--;)this.list[c]&&(this.list[c][a]=b)},callAll:function(a){for(var b=Array.prototype.slice.call(arguments,1),c=this.list.length;c--;)this.list[c]&&this.list[c][a]&&this.list[c][a].apply(this.list[c],b)},removeAll:function(a){var b,c;for(void 0===a&&(a=!1),b=this.list.length;b--;)this.list[b]&&(c=this.remove(this.list[b]),a&&c.destroy());this.position=0,this.list=[]}},Object.defineProperty(d.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(d.prototype,"first",{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}}),Object.defineProperty(d.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),d.prototype.constructor=d,b.exports=d},{}],157:[function(a,b,c){(function(c){var d=a(160),e={getRandomItem:function(a,b,e){if(null==a)return null;void 0===b&&(b=0),void 0===e&&(e=a.length);var f=b+c.Math.floor(d.random()*e);return void 0===a[f]?null:a[f]},removeRandomItem:function(a,b,e){var f,g;return null==a?null:(void 0===b&&(b=0),void 0===e&&(e=a.length),f=b+c.Math.floor(d.random()*e),f<a.length?(g=a.splice(f,1),void 0===g[0]?null:g[0]):null)},shuffle:function(a){var b,e,f;for(b=a.length-1;b>0;b--)e=c.Math.floor(d.random()*(b+1)),f=a[b],a[b]=a[e],a[e]=f;return a},transposeMatrix:function(a){var b,c,d=a.length,e=a[0].length,f=Array(e);for(b=0;b<e;b++)for(f[b]=Array(d),c=d-1;c>-1;c--)f[b][c]=a[c][b];return f},rotateMatrix:function(a,b){if("string"!=typeof b&&(b=(b%360+360)%360),90===b||b===-270||"rotateLeft"===b)a=e.transposeMatrix(a),a=a.reverse();else if(b===-90||270===b||"rotateRight"===b)a=a.reverse(),a=e.transposeMatrix(a);else if(180===d.abs(b)||"rotate180"===b){for(var c=0;c<a.length;c++)a[c].reverse();a=a.reverse()}return a},findClosest:function(a,b){var c,d,e;if(!b.length)return NaN;if(1===b.length||a<b[0])return b[0];for(c=1;b[c]<a;)c++;return d=b[c-1],e=c<b.length?b[c]:Number.POSITIVE_INFINITY,e-a<=a-d?e:d},rotate:function(a){var b=a.shift();return a.push(b),b},numberArray:function(a,b){var c,d=[];for(c=a;c<=b;c++)d.push(c);return d},numberArrayStep:function(a,b,e){var f,g,h;for(void 0!==a&&null!==a||(a=0),void 0!==b&&null!==b||(b=a,a=0),void 0===e&&(e=1),f=[],g=c.Math.max(d.roundAwayFromZero((b-a)/(e||1)),0),h=0;h<g;h++)f.push(a),a+=e;return f}};b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{160:160}],158:[function(a,b,c){var d={isPlainObject:function(a){if("object"!=typeof a||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},extend:function(){var a,b,c,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),j===i&&(h=this,--i);i<j;i++)if(null!=(a=arguments[i]))for(b in a)c=h[b],e=a[b],h!==e&&(k&&e&&(d.isPlainObject(e)||(f=Array.isArray(e)))?(f?(f=!1,g=c&&Array.isArray(c)?c:[]):g=c&&d.isPlainObject(c)?c:{},h[b]=d.extend(k,g,e)):void 0!==e&&(h[b]=e));return h},mixinPrototype:function(a,b,c){var d,e,f,g;for(void 0===c&&(c=!1),d=Object.keys(b),e=0;e<d.length;e++)f=d[e],g=b[f],!c&&f in a||(!g||"function"!=typeof g.get&&"function"!=typeof g.set?a[f]=g:"function"==typeof g.clone?a[f]=g.clone():Object.defineProperty(a,f,g))},mixin:function(a,b){var c,e,f;if(!a||"object"!=typeof a)return b;if(Array.isArray(a))return a;for(c in a)e=a[c],e&&(e.childNodes||e.cloneNode)||(f=typeof a[c],a[c]&&"object"===f?typeof b[c]===f?b[c]=d.mixin(a[c],b[c]):b[c]=d.mixin(a[c],new e.constructor):b[c]=a[c]);return b}};b.exports=d},{}],159:[function(a,b,c){var d={getColor:function(a,b,c){return a<<16|b<<8|c},getRGB:function(a){return a>16777215?{alpha:a>>>24,red:a>>16&255,green:a>>8&255,blue:255&a,a:a>>>24,r:a>>16&255,g:a>>8&255,b:255&a}:{alpha:255,red:a>>16&255,green:a>>8&255,blue:255&a,a:255,r:a>>16&255,g:a>>8&255,b:255&a}},interpolateColor:function(a,b,c,e){var f=d.getRGB(a),g=d.getRGB(b),h=(g.red-f.red)*e/c+f.red,i=(g.green-f.green)*e/c+f.green,j=(g.blue-f.blue)*e/c+f.blue;return d.getColor(h,i,j)},interpolateColorWithRGB:function(a,b,c,e,f,g){var h=d.getRGB(a),i=(b-h.red)*g/f+h.red,j=(c-h.green)*g/f+h.green,k=(e-h.blue)*g/f+h.blue;return d.getColor(i,j,k)},interpolateRGB:function(a,b,c,e,f,g,h,i){var j=(e-a)*i/h+a,k=(f-b)*i/h+b,l=(g-c)*i/h+c;return d.getColor(j,k,l)}};b.exports=d},{}],160:[function(a,b,c){(function(a){var c=a.Math.PI/180,d=180/a.Math.PI;b.exports={PI2:2*a.Math.PI,degToRad:function(a){return a*c},radToDeg:function(a){return a*d},fuzzyEqual:function(b,c,d){return void 0===d&&(d=1e-4),a.Math.abs(b-c)<d},fuzzyLessThan:function(a,b,c){return void 0===c&&(c=1e-4),a<b+c},fuzzyGreaterThan:function(a,b,c){return void 0===c&&(c=1e-4),a>b-c},fuzzyCeil:function(b,c){return void 0===c&&(c=1e-4),a.Math.ceil(b-c)},fuzzyFloor:function(b,c){return void 0===c&&(c=1e-4),a.Math.floor(b+c)},average:function(){var a,b=0,c=arguments.length;for(a=0;a<c;a++)b+=+arguments[a];return b/c},shear:function(a){return a%1},snapTo:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.round(b/c),d+b)},snapToFloor:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.floor(b/c),d+b)},snapToCeil:function(b,c,d){return void 0===d&&(d=0),0===c?b:(b-=d,b=c*a.Math.ceil(b/c),d+b)},formatMoney:function(a,b,c){var a=a/100,b=b||2,c=c||",";return a.toFixed(b).replace(/(\d)(?=(\d{3})+\.)/g,"$1"+c)},roundTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.round(b*e)/e},floorTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.floor(b*e)/e},ceilTo:function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=10);var e=a.Math.pow(d,c);return a.Math.ceil(b*e)/e},angleBetween:function(b,c,d,e){return a.Math.atan2(e-c,d-b)},angleBetweenY:function(b,c,d,e){return a.Math.atan2(d-b,e-c)},angleBetweenPoints:function(b,c){return a.Math.atan2(c.y-b.y,c.x-b.x)},angleBetweenPointsY:function(b,c){return a.Math.atan2(c.x-b.x,c.y-b.y)},worldAngleToPointer:function(b,c){var d=c.worldX-b.world.x,e=c.worldY-b.world.y;return a.Math.atan2(e,d)},reverseAngle:function(b){return this.normalizeAngle(b+a.Math.PI,!0)},normalizeAngle:function(b){return b%=2*a.Math.PI,b>=0?b:b+2*a.Math.PI},maxAdd:function(b,c,d){return a.Math.min(b+c,d)},minSub:function(b,c,d){return a.Math.max(b-c,d)},wrap:function(a,b,c){var d,e=c-b;return e<=0?0:(d=(a-b)%e,d<0&&(d+=e),d+b)},wrapValue:function(b,c,d){var e;return b=a.Math.abs(b),c=a.Math.abs(c),d=a.Math.abs(d),e=(b+c)%d},isOdd:function(a){return!!(1&a)},isEven:function(a){return!(1&a)},min:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;b<d;b++)a[b]<a[c]&&(c=b);return a[c]},max:function(){var a,b,c,d;for(a=1===arguments.length&&"object"==typeof arguments[0]?arguments[0]:arguments,b=1,c=0,d=a.length;b<d;b++)a[b]>a[c]&&(c=b);return a[c]},minProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;c<e;c++)b[c][a]<b[d][a]&&(d=c);return b[d][a]},maxProperty:function(a){var b,c,d,e;for(b=2===arguments.length&&"object"==typeof arguments[1]?arguments[1]:arguments.slice(1),c=1,d=0,e=b.length;c<e;c++)b[c][a]>b[d][a]&&(d=c);return b[d][a]},wrapAngle:function(b,c){return c?this.wrap(b,-a.Math.PI,a.Math.PI):this.wrap(b,-180,180)},linearInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return c<0?this.linear(b[0],b[1],e):c>1?this.linear(b[d],b[d-1],d-e):this.linear(b[f],b[f+1>d?d:f+1],e-f)},bezierInterpolation:function(b,c){var d,e=0,f=b.length-1;for(d=0;d<=f;d++)e+=a.Math.pow(1-c,f-d)*a.Math.pow(c,d)*b[d]*this.bernstein(f,d);return e},catmullRomInterpolation:function(b,c){var d=b.length-1,e=d*c,f=a.Math.floor(e);return b[0]===b[d]?(c<0&&(f=a.Math.floor(e=d*(1+c))),this.catmullRom(b[(f-1+d)%d],b[f],b[(f+1)%d],b[(f+2)%d],e-f)):c<0?b[0]-(this.catmullRom(b[0],b[0],b[1],b[1],-e)-b[0]):c>1?b[d]-(this.catmullRom(b[d],b[d],b[d-1],b[d-1],e-d)-b[d]):this.catmullRom(b[f?f-1:0],b[f],b[d<f+1?d:f+1],b[d<f+2?d:f+2],e-f)},linear:function(a,b,c){return(b-a)*c+a},bernstein:function(a,b){return this.factorial(a)/this.factorial(b)/this.factorial(a-b)},factorial:function(a){if(0===a)return 1;for(var b=a;--a;)b*=a;return b},catmullRom:function(a,b,c,d,e){var f=.5*(c-a),g=.5*(d-b),h=e*e,i=e*h;return(2*b-2*c+f+g)*i+(-3*b+3*c-2*f-g)*h+f*e+b},difference:function(b,c){return a.Math.abs(b-c)},roundAwayFromZero:function(b){return b>0?a.Math.ceil(b):a.Math.floor(b)},sinCosGenerator:function(b,c,d,e){var f,g,h,i,j,k;for(void 0===c&&(c=1),void 0===d&&(d=1),void 0===e&&(e=1),f=c,g=d,h=e*a.Math.PI/b,i=[],j=[],k=0;k<b;k++)g-=f*h,f+=g*h,i[k]=g,j[k]=f;return{sin:j,cos:i,length:b}},distance:function(b,c,d,e){var f=b-d,g=c-e;return a.Math.sqrt(f*f+g*g)},distanceSq:function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},distancePow:function(b,c,d,e,f){return void 0===f&&(f=2),a.Math.sqrt(a.Math.pow(d-b,f)+a.Math.pow(e-c,f))},clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},within:function(b,c,d){return a.Math.abs(b-c)<=d},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*(3-2*b)},smootherstep:function(b,c,d){return b=a.Math.max(0,a.Math.min(1,(b-c)/(d-c))),b*b*b*(b*(6*b-15)+10)},sign:function(a){return a<0?-1:a>0?1:0},percent:function(a,b,c){return void 0===c&&(c=0),a>b||c>b?1:a<c||c>a?0:(a-c)/b}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],161:[function(a,b,c){(function(a){function c(a){void 0===a&&(a=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.sow(a)}c.prototype={rnd:function(){var a=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|a,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},sow:function(a){var b,c;if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,a)for(c=0;c<a.length&&null!=a[c];c++)b=a[c],this.s0-=this.hash(b),this.s0+=~~(this.s0<0),this.s1-=this.hash(b),this.s1+=~~(this.s1<0),this.s2-=this.hash(b),this.s2+=~~(this.s2<0)},hash:function(a){var b,c,d;for(d=4022871197,a=""+a,c=0;c<a.length;c++)d+=a.charCodeAt(c),b=.02519603282416938*d,d=b>>>0,b-=d,b*=d,d=b>>>0,b-=d,d+=4294967296*b;return 2.3283064365386963e-10*(d>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(b,c){return a.Math.floor(this.realInRange(0,c-b+1)+b)},between:function(a,b){return this.integerInRange(a,b)},realInRange:function(a,b){return this.frac()*(b-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",b="";for(b=a="";a++<36;b+=~a%5|3*a&4?(15^a?8^this.frac()*(20^a?16:4):4).toString(16):"-");return b},pick:function(a){return a[this.integerInRange(0,a.length-1)]},weightedPick:function(b){return b[~~(a.Math.pow(this.frac(),2)*(b.length-1)+.5)]},timestamp:function(a,b){return this.realInRange(a||9466848e5,b||1577862e6)},angle:function(){return this.integerInRange(-180,180)}},c.prototype.constructor=c,b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],162:[function(a,b,c){function d(a){f.Shader.call(this,a,new e.Texture(this.getRepeatTexture("planet")))}var e=a("pixi"),f=a("engine"),g=a(20).GLShader;d.prototype=Object.create(f.Shader.prototype),d.prototype.constructor=d,d.prototype.getShader=function(a){return new g(a,"precision lowp float;\n#define GLSLIFY 1\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}","precision lowp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\n\n// rendering params\nconst float sphsize = 0.8; // planet size\nconst float dist = 0.08; // distance for glow and distortion\nconst float glow = 3.2; // glow amount, mainly on hit side\n\nconst float start = 120.0;\nconst float steps = 292.0; // number of steps for the volumetric rendering\nconst float stepsize = 0.01;\n\nfloat atmosphere(vec3 p) {\n  float d = max(0.0, dist - max(0.0, length(p) - sphsize) / sphsize) / dist; // for distortion and glow area\n  float x = max(1.0, p.x * 2.0); // to increase glow on left side\n  return length(p) * (d * glow * x)+ d * glow * x; // return the result with glow applied\n}\n\nvoid main() {\n  vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n  vec3 dir = vec3(uv, 1.0);\n  vec3 from = vec3(0., 0., -2.);\n  vec3 col = vec3(0.0, 0.0, 0.0);\n  \n  float v = 0.0;\n  for(float r=start; r<steps; r++) {\n    vec3 p = from + r * dir * stepsize;\n    if(length(p)-sphsize > 0.0) {\n      v += atmosphere(p);\n    } else {\n      v += min(0.82, atmosphere(p));\n    }\n  }\n\n  // average values and\n  // apply bright factor\n  v /= steps;\n  v *= pow(v, 1.8);\n\n  // green - vec3(v/4.2, v/1.8, v/3.2);\n  // red - vec3(v/1.2, v/3.6, v/3.6);\n  // blue - vec3(v/4., v/3., v/0.8);\n  col += vec3(v/3.0, v/1.8, v/1.0);\n\n  gl_FragColor = vec4(col, 0.); \n}\n")},b.exports=d},{20:20,engine:"engine",pixi:"pixi"}],163:[function(a,b,c){function d(a,b){f.Shader.call(this,a,new e.Texture(this.getRepeatTexture("clouds"))),this._width=1024,this._height=1024,this.offset=b||0}var e=a("pixi"),f=a("engine"),g=a(20).GLShader;d.prototype=Object.create(f.Shader.prototype),d.prototype.constructor=d,d.prototype.apply=function(a,b){b.uniforms.time=this.game.clock.totalElapsedSeconds()+this.offset,b.uniforms.translationMatrix=this.worldTransform.toArray(!0)},d.prototype.getShader=function(a){return new g(a,"precision lowp float;\n#define GLSLIFY 1\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}","\nprecision lowp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\n\nuniform float time;\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat noise(vec3 v) { \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy;\n  vec3 x3 = x0 - D.yyy;\n\n  i = mod289(i); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  float n_ = 0.142857142857;\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\nvec4 map(vec3 p, float rcenter, float radius) {\n  float den = smoothstep(1.0, 0.0, rcenter/radius)/radius;\n\n  // invert space \n  p = -1.0 * p / dot(p, p);\n\n  float t = time * 0.5;\n\n  // smoke  \n  vec3 q = p - vec3(0.0, 0.1, 0.0) * t;\n  float f;\n    f  = 0.50000 * noise(q); q = q * 2.02 - vec3(0.0, 1.0, 0.0) * t;\n    f += 0.25000 * noise(q); q = q * 2.03 - vec3(0.0, 1.0, 0.0) * t;\n    f += 0.12500 * noise(q); q = q * 2.01 - vec3(0.0, 1.0, 0.0) * t;\n    f += 0.06250 * noise(q); q = q * 2.02 - vec3(0.0, 1.0, 0.0) * t;\n    f += 0.03125 * noise(q);\n\n  den = clamp(den * f, 0.0, 1.0);\n  \n  vec3 col = mix(vec3(0.8, 0.6, 0.3), vec3(1.4, 3.8, 0.1), den) + 0.05 * sin(p);\n  \n  return vec4(col, den);\n}\n\nvec3 raymarch(vec3 ro, vec3 rd, float sphere, float radius, vec3 center) {\n  float t = 0.05;\n  vec4 sum = vec4(0.0);\n\n  for(int i=0; i<100; i++) {\n    if(sum.a > 0.99) break;\n\n    vec3 pos = ro + rd * (t + sphere);\n    float rcenter = length(pos - center);\n\n    if(rcenter > radius) continue;\n\n    vec4 col = map(pos, rcenter, radius);\n         col.xyz *= mix(1.6 * vec3(0.6, 0.2, 0.0), vec3(-2.0, -4.0, -4.0), clamp((pos.y - 0.2) / 2.0, 0.0, 1.0));\n         col.a *= 0.6;\n         col.rgb *= col.a;\n\n    sum = sum + col * (1.0 - sum.a);\n\n    t += 0.05;\n  }\n\n  return clamp(sum.xyz, 0.0, 1.0);\n}\n\n// sphere intersection\nfloat sphere(vec3 ro, vec3 rd, vec4 sph) {\n  vec3 oc = ro - sph.xyz;\n\n  float b = dot(oc, rd);\n  float c = dot(oc, oc) - sph.w * sph.w;\n  float h = b * b - c;\n  \n  if(h < 0.0) return -1.0;\n\n  float t = (-b - sqrt(h));\n\n  return t;\n}\n\nmat3 setCamera(vec3 ro, vec3 ta, float cr) {\n  vec3 cw = normalize(ta-ro);\n  vec3 cp = vec3(sin(cr), cos(cr), 0.0);\n  vec3 cu = normalize(cross(cw, cp));\n  vec3 cv = normalize(cross(cu, cw));\n  return mat3(cu, cv, cw);\n}\n\nvoid main(void) {\n  vec2 q = vTextureCoord;\n  vec2 p = q - vec2(0.5, 0.5);\n\n  // camera\n  vec3 ro = 4.8 * normalize(vec3(1.0, 4.0, 1.0));\n  vec3 ta = vec3(0.0, 0.0, 0.0);\n  mat3 ca = setCamera(ro, ta, 0.0);\n  \n  // ray\n  vec3 rd = ca * normalize(vec3(p.xy, 1.0));\n\n  // raymarch\n  vec3 col;\n  float r = 2.0;\n  vec3 c = vec3(0.0, 0.0, 0.0);\n  float s = sphere(ro, rd, vec4(c, r));\n  if(s > 0.0) {\n    col = raymarch(ro, rd, s, r, c);\n  } else {\n    col = vec3(0.0, 0.0, 0.0);\n  }\n\n  // contrast and vignetting\n  col = col * 0.5 + 0.5 * col * col * (3.0 - 2.0 * col);\n  // col *= 0.25 + 0.75 * pow( 16.0 * q.x * q.y * (1.0 - q.x) * (1.0 - q.y), 0.1 );\n  \n  gl_FragColor = vec4(col, (col.r+col.g+col.b)/2.);\n}\n");
},b.exports=d},{20:20,engine:"engine",pixi:"pixi"}],164:[function(a,b,c){(function(c){function d(a){e.Container.call(this),this.game=a,this.sprites=[],this.pivot.set(512,512)}var e=a("pixi"),f=a("engine"),g=a(163);d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,d.prototype.create=function(a){var b,d,h=a/2;for(tweens=this.game.tweens,this.density=a,d=0;d<a;d++)b=new g(game,5*d),b.cache(),b.pivot.set(512,512),b.position.set(256*c.Math.random(),256*c.Math.random()),b.rotation=2*c.Math.PI/a*d,b.scale.set(d%3+1/h,d%3+1/h),this.addChild(b),this.sprites.push(b);this.lightning=new e.Sprite,this.lightning.blendMode=f.BlendMode.ADD,this.lightning.pivot.set(512,512),this.lightning.alpha=0,this.lightningTween=tweens.create(this.lightning),this.lightningTween.to({alpha:.3},50,f.Easing.Quadratic.InOut,!1,0,0,!0),this.addChildAt(this.lightning,2)},d.prototype.update=function(){var a,b,d=c.Math.random(),e=this.sprites,f=e.length;for(b=0;b<f;b++)a=e[b],a.rotation+=5e-4*(this.density-b)*(b%2!=1?-1:1);!this.lightningTween.isRunning&&d>.99&&(a=e[c.Math.floor(c.Math.random()*f)],this.lightning.texture=a.texture,this.lightning.rotation=a.rotation,this.lightning.position.copy(a.position),this.lightning.scale.copy(a.scale),this.lightningTween.start())},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{163:163,engine:"engine",pixi:"pixi"}],165:[function(a,b,c){function d(a){this.planetTexture=new e.Texture(this.getRepeatTexture("planet")),this.cloudsTexture=new e.Texture(this.getRepeatTexture("clouds")),f.Shader.call(this,a,this.planetTexture),this.atmosphere=new h(a),this.atmosphere.cache(),this.addChild(this.atmosphere),this.pivot.set(this._width/2,this._height/2),this.position.set(2048/6,2048/6)}var e=a("pixi"),f=a("engine"),g=a(20).GLShader,h=a(162);d.prototype=Object.create(f.Shader.prototype),d.prototype.constructor=d,d.prototype.apply=function(a,b){b.uniforms.time=this.game.clock.totalElapsedSeconds(),b.uniforms.translationMatrix=this.worldTransform.toArray(!0),b.uniforms.uClouds=1,a.bindTexture(this._texture,0),a.bindTexture(this.cloudsTexture,1)},d.prototype.getShader=function(a){return new g(a,"precision lowp float;\n#define GLSLIFY 1\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}","precision lowp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D uClouds;\n\nuniform float time;\n\nvoid main(void) {\n  vec2 uv = vTextureCoord - vec2(0.5, 0.5);\n  vec3 ro = vec3(0.0, 0.0, 2.5);\n  vec3 rd = normalize(vec3(uv, -1.0));\n  vec3 color = vec3(0.0, 0.0, 0.0);\n  vec3 planet = vec3(0.0, 0.0, 0.0);\n  vec3 clouds = vec3(0.0, 0.0, 0.0);\n\n  float alpha = 0.0;\n  float b = dot(ro, rd);\n  float c = dot(ro, ro) - 1.0;\n  float h = b * b - c;\n\n  if(h > 0.0) {\n    float t = -b - sqrt(h);\n    vec3 pos = ro + t * rd;\n    vec3 nor = pos;\n    vec2 uv;\n         uv.x = atan(nor.x, nor.z) / .7853 - 0.01 * time;\n         uv.y = acos(nor.y) / .7853;\n\n    planet = texture2D(uSampler, uv).rgb;\n\n    uv.x -= 0.016 * time;\n    uv.y -= 0.024 * time;\n\n    clouds = texture2D(uClouds, uv).rgb;\n    clouds.r /= 2.5;\n    clouds.g /= 1.5;\n    \n    // textures\n    color = mix(planet * planet, planet, 0.44);\n    color *= 1.26 * pow(max(0.44, dot(pos, normalize(vec3(2.6, 0.0, 4.)))), 7.6);\n    color += clouds * 0.14;\n\n    alpha += 1.0;\n  }\n\n  gl_FragColor = vec4(color, alpha);\n}\n")},b.exports=d},{162:162,20:20,engine:"engine",pixi:"pixi"}],166:[function(a,b,c){function d(a,b,c){f.Shader.call(this,a,new e.Texture(this.getRepeatTexture("snow"))),this.tileScale=new e.Point(1,1),this.tilePosition=new e.Point(0,0),this._width=b,this._height=c,this.transform.updated=!1}var e=a("pixi"),f=a("engine"),g=a(20).GLShader;d.prototype=Object.create(f.Shader.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.game,b=a.camera.view,c=a.world.scale.x;this.tilePosition.x=1.4*-b.x,this.tilePosition.y=1.4*-b.y,this.tileScale.set(c,c)},d.prototype.resize=function(a,b){this._width=a,this._height=b},d.prototype.apply=function(a,b){var c=b.uniforms.uTransform;c[0]=this.tilePosition.x/this._width+.5-(1-this.tileScale.x)*(this.tilePosition.x/this._width),c[1]=this.tilePosition.y/this._height+.5-(1-this.tileScale.y)*(this.tilePosition.y/this._height),c[2]=1024/this._width*this.tileScale.x,c[3]=1024/this._height*this.tileScale.y,b.uniforms.uTransform=c,b.uniforms.time=this.game.clock.totalElapsedSeconds(),a.bindTexture(this._texture,0)},d.prototype.getShader=function(a){return new g(a,"precision lowp float;\n#define GLSLIFY 1\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nuniform vec4 uTransform;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n  vec2 coord = aTextureCoord;\n       coord -= uTransform.xy;\n       coord /= uTransform.zw;\n\n  vTextureCoord = coord;\n}","precision lowp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float time;\n\nconst float pi = 3.14159265359;\nconst float frequency = 0.25;\n\nvoid main(void) {\n  vec2 coord = vTextureCoord / 0.75;\n  float t = 2. * pi * frequency * time;\n  float t1 = 0.3 * sin(t) + 0.6;\n  float t2 = 0.3 * cos(t) + 0.6;\n  vec3 layer1 = texture2D(uSampler, coord).rgb * t1;\n       layer1 += texture2D(uSampler, coord).rgb * t2;\n  gl_FragColor = vec4(layer1, 0.0);\n}")},Object.defineProperties(d.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a}},height:{get:function(){return this._height},set:function(a){this._height=a}}}),b.exports=d},{20:20,engine:"engine",pixi:"pixi"}],167:[function(a,b,c){function d(a,b,c){this.spaceTexture=new e.Texture(this.getRepeatTexture("space")),this.nebulaTexture=new e.Texture(this.getRepeatTexture("nebula")),e.Sprite.call(this,this.spaceTexture),this.game=a,this.tileScale=new e.Point(1,1),this.tilePosition=new e.Point(0,0),this.transform.updated=!1,this._width=b,this._height=c,this._glDatas=[]}var e=a("pixi"),f=a(20).GLShader;d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){var a=this.game,b=a.camera.view,c=a.world.scale.x/10+.9;this.tilePosition.x=-b.x/20,this.tilePosition.y=-b.y/20,this.tileScale.set(c,c)},d.prototype.resize=function(a,b){this.width=a,this.height=b},d.prototype.getRepeatTexture=function(a){var b=game.cache.getImage(a,!0).base;return b.wrapMode=e.WRAP_MODES.REPEAT,b},d.prototype._onTextureUpdate=function(){},d.prototype._renderWebGL=function(a){var b,c,d,g,h,i,j,k,l,m=this._texture;m&&m._uvs&&(a.flush(),b=a.gl,c=this._glDatas[a.CONTEXT_UID],c||(c={shader:new f(b,"precision lowp float;\n#define GLSLIFY 1\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nuniform vec4 uTransform;\nvarying vec2 vTextureCoord1;\nvarying vec2 vTextureCoord2;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    \n  vec2 coord1 = aTextureCoord;\n       coord1 -= uTransform.xy;\n       coord1 /= uTransform.zw;\n\n  vec2 coord2 = aTextureCoord;\n       coord2 -= uTransform.xy * 1.25 - 0.125;\n       coord2 /= uTransform.zw * 1.25;\n\n  vTextureCoord1 = coord1;\n  vTextureCoord2 = coord2;\n}","precision lowp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord1;\nvarying vec2 vTextureCoord2;\n\nuniform sampler2D uSampler;\nuniform sampler2D uMapSampler;\n\nvoid main(void) {\n  vec3 layer1 = texture2D(uSampler, vTextureCoord1).rgb;\n       layer1 += texture2D(uMapSampler, vTextureCoord2).rgb;\n  gl_FragColor = vec4(layer1, 1.0);\n}"),quad:new e.Quad(b)},this._glDatas[a.CONTEXT_UID]=c,c.quad.initVao(c.shader)),d=c.quad.vertices,d[0]=d[6]=this._width*-this.anchor.x,d[1]=d[3]=this._height*-this.anchor.y,d[2]=d[4]=this._width*(1-this.anchor.x),d[5]=d[7]=this._height*(1-this.anchor.y),c.quad.upload(),a.bindShader(c.shader),g=m._uvs,h=m._frame.width,i=m._frame.height,j=m.baseTexture.width,k=m.baseTexture.height,l=c.shader.uniforms.uTransform,l[0]=this.tilePosition.x/this._width+.5-(1-this.tileScale.x)*(this.tilePosition.x/this._width),l[1]=this.tilePosition.y/this._height+.5-(1-this.tileScale.y)*(this.tilePosition.y/this._height),l[2]=j/this._width*this.tileScale.x,l[3]=k/this._height*this.tileScale.y,c.shader.uniforms.uTransform=l,c.shader.uniforms.alpha=this.worldAlpha,c.shader.uniforms.uMapSampler=1,a.bindTexture(this.nebulaTexture,1),a.bindTexture(this._texture,0),c.quad.draw())},d.prototype.getBounds=function(){var a,b,c,d,e=this._width,f=this._height,g=e*(1-this.anchor.x),h=e*-this.anchor.x,i=f*(1-this.anchor.y),j=f*-this.anchor.y,k=this.worldTransform,l=k.a,m=k.b,n=k.c,o=k.d,p=k.tx,q=k.ty,r=l*h+n*j+p,s=o*j+m*h+q,t=l*g+n*j+p,u=o*j+m*g+q,v=l*g+n*i+p,w=o*i+m*g+q,x=l*h+n*i+p,y=o*i+m*h+q,z=r;return z=t<z?t:z,z=v<z?v:z,z=x<z?x:z,b=s,b=u<b?u:b,b=w<b?w:b,b=y<b?y:b,a=r,a=t>a?t:a,a=v>a?v:a,a=x>a?x:a,c=s,c=u>c?u:c,c=w>c?w:c,c=y>c?y:c,d=this._bounds,d.x=z,d.width=a-z,d.y=b,d.height=c-b,this._currentBounds=d,d},d.prototype.destroy=function(){e.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tilePosition=null,this._tileScaleOffset=null},Object.defineProperties(d.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a}},height:{get:function(){return this._height},set:function(a){this._height=a}}}),b.exports=d},{20:20,pixi:"pixi"}],168:[function(a,b,c){function d(a,b){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void) {\n  float c11 = texture2D(uSampler, vTextureCoord - texelSize).a; // top left\n  float c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)).a; // top center\n  float c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)).a; // top right\n\n  float c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)).a; // mid left\n  float c22 = texture2D(uSampler, vTextureCoord).a; // mid center\n  float c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)).a; // mid right\n\n  float c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)).a; // bottom left\n  float c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)).a; // bottom center\n  float c33 = texture2D(uSampler, vTextureCoord + texelSize).a; // bottom right\n\n  // gl_FragColor =\n  float c =\n    c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n    c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n    c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n  gl_FragColor = vec4(c, c, c, 0.0);\n}"),this.matrix=[-1,-1,-1,-1,8,-1,-1,-1,-1],this.width=2*a,this.height=2*b,this.padding=0}var e=a("pixi");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,Object.defineProperties(d.prototype,{matrix:{get:function(){return this.uniforms.matrix},set:function(a){this.uniforms.matrix=new Float32Array(a)}},width:{get:function(){return 1/this.uniforms.texelSize.x},set:function(a){this.uniforms.texelSize.x=1/a}},height:{get:function(){return 1/this.uniforms.texelSize.y},set:function(a){this.uniforms.texelSize.y=1/a}}}),b.exports=d},{pixi:"pixi"}],169:[function(a,b,c){function d(a,b){e.Filter.call(this,"precision lowp float;\n#define GLSLIFY 1\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void) {\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vFilterCoord = (filterMatrix * vec3(aTextureCoord, 1.0)).xy;\n  vTextureCoord = aTextureCoord;\n}","\nprecision lowp float;\n#define GLSLIFY 1\n\nuniform sampler2D uSampler;\nuniform float time;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v) { \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy;\n  vec3 x3 = x0 - D.yyy;\n\n  i = mod289(i); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n  float n_ = 0.142857142857;\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_);\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n       m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3)));\n}\n\nvoid main(void) {\n  vec4 tex = texture2D(uSampler, vTextureCoord);\n  vec2 p = vFilterCoord * 40.0;\n\n  float n = 0.0;\n  n += 1.0 * abs(snoise(vec3(p, time * 0.5)));\n  \n  float rn = 1.0 - n;\n  rn *= pow(rn, 10.0);\n  rn *= 0.5;\n  rn *= tex.a;\n  rn += (0.1 * sin(time * 5.0) + 0.2) * tex.a;\n\n  gl_FragColor = vec4(rn, rn, rn, rn*rn*rn*rn);\n}\n"),this.game=a,this.sprite=b,this.matrix=new e.Matrix,this.padding=0}var e=a("pixi");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,d.prototype.apply=function(a,b,c,d){this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.matrix,this.sprite),this.uniforms.time=this.game.clock.totalElapsedSeconds(),a.applyFilter(this,b,c,d)},b.exports=d},{pixi:"pixi"}],170:[function(a,b,c){(function(b){a(196);var c=(a("pixi"),a("engine")),d=a(198),e=a(171),f=a(235),g=a(173),h=function(){var a=new c.Game({parent:"content",antialias:f.getQueryParameter("antialias",!1),width:1024,height:576}),h=new d;a.auth=new e(a),a.shipNetManager=new g(a),a.input.defaultCursor='url("/imgs/game/cursor.png") -1 -1, pointer',a.state.add("loader",h,!0,!0),b.game=a};c.Device.whenReady(function(){var a,d=b.document.getElementById("content"),e=b.document.getElementById("dialog"),f=c.Device;f.desktop&&f.webGL&&(f.firefox||f.chrome||f.safari)?(d.className="running",h()):(d.className="error",a=f.desktop?f.webGL?"your browser is not yet supported":"you need a compatible browser and graphics card to run this demo.":"mobile devices are not yet supported",e.innerHTML=a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{171:171,173:173,196:196,198:198,235:235,engine:"engine",pixi:"pixi"}],171:[function(a,b,c){function d(a){this.game=a,this.user={},this.ready=!1,this.socket=a.net.socket,this.socket.on("connect",this._connect.bind(this)),this.socket.on("disconnect",this._disconnected.bind(this)),this.socket.on("user/sync",this._sync.bind(this)),this.socket.on("user/data",this._data.bind(this)),this.game.on("gui/login",this._login,this),this.game.on("gui/logout",this._logout,this),e.call(this)}var e=(a("engine"),a(3));d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.isUser=function(){return!this.isGuest()},d.prototype.isGuest=function(){return"guest"===this.user.role},d.prototype._sync=function(a){this.ready=!0,this.user=a,this.emit("sync",this.user)},d.prototype._data=function(a){for(var b in a)this.user[b]=a[b];this.emit("data",this.user)},d.prototype._login=function(a){},d.prototype._logout=function(){},d.prototype._connect=function(){this.emit("connected")},d.prototype._disconnected=function(){this.emit("disconnected")},b.exports=d},{3:3,engine:"engine"}],172:[function(a,b,c){function d(a,b){e.Class.mixin(b,this),this.game=a,this.config={binding:d.STAT_SYSTEM_BINDING,sort:d.SYSTEM_SORT_ORDER,units:d.STAT_UNITS,ship:a.cache.getJSON("ship-configuration",!1)[b.chassis],enhancement:this.game.cache.getJSON("item-configuration").enhancement,systems:[{name:"hull",stats:["health","energy","durability","capacity","critical"],enhancements:[]},{name:"reactor",stats:["recharge"],enhancements:[]},{name:"repair",stats:["heal"],enhancements:[]},{name:"pilot",stats:["evasion"],enhancements:[]},{name:"engine",stats:["speed"],enhancements:[]},{name:"shield",stats:["armor"],enhancements:[]},{name:"targeting",stats:["accuracy"],enhancements:[]},{name:"scanner",stats:["range"],enhancements:[]}]},EventEmitter.call(this)}var e=a("engine");EventEmitter=a(3),d.SYSTEM_SORT_ORDER=["hull","reactor","pilot","engine","shield","targeting","scanner","repair","cloak"],d.STAT_UNITS={durability:"hp",health:"hp",heal:"hp",capacity:"m",speed:"m",energy:"gj",recharge:"gj",armor:"hp",range:"m",evasion:"%",accuracy:"%",critical:"%"},d.STAT_SYSTEM_BINDING={durability:"hull",capacity:"hull",energy:"hull",health:"hull",critical:"hull",heal:"repair",speed:"engine",evasion:"pilot",recharge:"reactor",armor:"shield",range:"scanner",accuracy:"targeting"},d.prototype=Object.create(EventEmitter.prototype),d.prototype.constructor=d,d.prototype.update=function(a){e.Class.mixin(a,this),this.emit("data",a)},b.exports=d},{3:3,engine:"engine"}],173:[function(a,b,c){function d(a){this.game=a,this.socket=a.net.socket,this.ships={},this.socket.on("ship/sync",this._sync.bind(this)),this.socket.on("ship/data",this._data.bind(this)),this.socket.on("ship/removed",this._removed.bind(this)),this.socket.on("ship/disabled",this._disabled.bind(this))}var e=(a("engine"),a(172));d.prototype.constructor=d,d.prototype.getShipData=function(a){return this.ships[a]},d.prototype._data=function(a){var b,c,d=a.ships;if(this.game.cache.checkJSONKey("ship-configuration")&&this.game.cache.checkJSONKey("item-configuration"))for(c in d)b=d[c],"sync"===a.type&&void 0===this.ships[b.uuid]?this.ships[b.uuid]=new e(this.game,b):this.ships[b.uuid]&&this.ships[b.uuid].update(b)},d.prototype._sync=function(a){var b,c,d=a.ships,e=[];for(c in d)b=d[c],void 0===this.ships[b.uuid]&&e.push(b.uuid);e.length>0&&this.socket.emit("ship/data",{uuids:e})},d.prototype._removed=function(a){this.game.emit("ship/removed",a)},d.prototype._disabled=function(a){this.game.emit("ship/disabled",a)},b.exports=d},{172:172,engine:"engine"}],174:[function(a,b,c){function d(a){this.parent=a,this.game=a.game,this.data=a.data,this.clock=a.game.clock,this.started=0,this.elapsed=0,this.delay=25,this.duration=250,this.isRunning=!1,this.hasExploded=!1,this._start=new f.Point,this._end=new f.Point,this.destination=new f.Point,this.origin=new f.Point,this.texture=new e.Texture(this.game.cache.getImage("laser-red",!0).base),this.strip=new f.Strip(this.game,this.texture,[this._start,this._end]),this.strip.blendMode=f.BlendMode.ADD}var e=a("pixi"),f=a("engine");d.prototype.start=function(a,b){this.started=this.clock.time,this.elapsed=0,this.isRunning=!0,this.hasExploded=!1,this.origin.copyFrom(a),this.destination.copyFrom(b),this._start.copyFrom(this.origin),this._end.copyFrom(this.origin),this.parent.fxGroup.addChild(this.strip)},d.prototype.stop=function(){this.isRunning=!1,this.parent.fxGroup.removeChild(this.strip)},d.prototype.explode=function(a){this.hasExploded=!0,this.parent.glowEmitter.color(16737894),this.parent.glowEmitter.at({center:a}),this.parent.glowEmitter.explode(1)},d.prototype.update=function(a,b){var c,d;this.isRunning===!0&&(this.elapsed=this.clock.time-this.started,this.elapsed>=this.duration+this.delay&&this.stop(),c=this.elapsed/this.duration,d=(this.elapsed-this.delay)/this.duration,this.elapsed<this.delay&&(this.origin.copyFrom(a),this.destination.copyFrom(b)),this.elapsed<=this.duration?this.origin.interpolate(this.destination,c,this._start):(this._start.copyFrom(this.destination),0==this.hasExploded&&this.explode(this.destination)),this.elapsed>=this.delay?this.origin.interpolate(this.destination,d,this._end):this._end.copyFrom(this.origin))},b.exports=d},{engine:"engine",pixi:"pixi"}],175:[function(a,b,c){function d(a,b){}a("engine");d.prototype.constructor=d,d.prototype.fire=function(){},b.exports=d},{engine:"engine"}],176:[function(a,b,c){function d(a,b,c){this.parent=a,this.game=a.game,this.ship=a.parent,this.target=a.target,this.config=c,this.data=b,this.position=new e.Point,this.cap=new e.Sprite(this.game,"texture-atlas","turret-cap-"+this.ship.config.race+".png"),this.sprite=new e.Sprite(this.game,"texture-atlas",b.sprite+".png"),this.sprite.position.set(c.position.x,c.position.y),this.sprite.pivot.set(c.pivot.x,c.pivot.y),this.ship.addChild(this.sprite),this.sprite.addChild(this.cap),this.manager=this.create(c.type)}var e=a("engine"),f=a(174),g=a(175);d.prototype.constructor=d,d.prototype.create=function(a){switch(a){case"missile":return new g(this);case"laser":default:return new f(this)}},d.prototype.fire=function(a){this.manager.start(this.position,this.target)},d.prototype.update=function(){var a=this.game,b=this.sprite,c=this.ship,d=this.manager,f=this.position,g=this.target;c.updateTransform(),a.world.worldTransform.applyInverse(c.worldTransform.apply(b),f),e.Line.pointAtDistance({x:f.x,y:f.y},g,32,f),this.manager.isRunning&&(b.rotation=e.Point.angle(f,g)-c.rotation),d.update(f,g)},d.prototype.destroy=function(){this.timer&&this.game.clock.events.remove(this.timer),this.sprite&&this.sprite.destroy(),this.manager&&this.manager.destroy(),this.parent=this.game=this.ship=this.config=this.position=this.sprite=this.manager=this.timer=void 0},b.exports=d},{174:174,175:175,engine:"engine"}],177:[function(a,b,c){(function(c){function d(a){this.parent=a,this.game=a.game,this.config=a.config,this.velocity=0,this._last=0,this._delay=0,this._speed=0,this._destination=new e.Point,this._position=new e.Point,this._vector=new e.Point,this._direction=new e.Point,this._temp=new e.Point,this._move=this.game.clock.throttle(this.move,100,this),this._test=this.game.clock.throttle(function(){},2e3,this)}var e=a("engine");d.prototype.constructor=d,d.prototype.update=function(){var a,b,d,e=this._position,f=this._destination,g=this._vector,h=this._direction,i=this._speed,j=this.parent;e.set(j.position.x,j.position.y),a=this.velocity=e.distance(f),b=i/.1*(1/60),d=b/a<1?1.001*b:.999*b,g.set(f.x-e.x,f.y-e.y),g.normalize(),h.interpolate({x:g.x*d,y:g.y*d},.15,h),j.position.set(e.x+h.x,e.y+h.y),i>0&&(a1=e.y-j.position.y,a2=e.x-j.position.x,0!==a1&&0!==a2?j.rotation=c.Math.atan2(a1,a2):j.rotation=0)},d.prototype.plot=function(a){var b=this.game.clock.time,c=this.parent;this._delay=b-this._last,this._last=b,this._destination.copyFrom(a.pos),this._speed=a.spd,this._position.distance(this._destination)>256&&c.position.set(this._destination.x,this._destination.y)},d.prototype.destroy=function(){this.parent=this.game=this.config=this._target=this._destination=this._origin=this._position=this._vector=this._direction=this._temp=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],178:[function(a,b,c){function d(a){this.manager=a,this.game=a.game,this.input=game.input,this.input.on("onDown",this._onInput,this),this.input.on("onUp",this._onInput,this)}var e=a("engine");d.prototype.constructor=d,d.prototype._onInput=function(a){var b={type:a.isDown?"start":"stop",target:{x:a.x,y:a.y}};a.button===e.Mouse.LEFT_BUTTON?this.game.emit("ship/primary",b):a.button===e.Mouse.RIGHT_BUTTON&&this.game.emit("ship/secondary",b)},d.prototype.destroy=function(){this.input.removeListener("onDown",this._onInput),this.input.removeListener("onUp",this._onInput),this.manager=this.game=this.input=void 0},b.exports=d},{engine:"engine"}],179:[function(a,b,c){(function(c){function d(a){this.ship=a,this.game=a.game,this.glow=new e.Sprite(this.game,"texture-atlas","explosion-d.png"),this.glow.pivot.set(64,64),this.glow.scale.set(24,24),this.glow.blendMode=e.BlendMode.ADD,this.glow.tint=16777215,this.glow.alpha=0,this.glowTween=this.game.tweens.create(this.glow),this.glowTween.to({alpha:.8},250,e.Easing.Quadratic.InOut),this.glowTween.to({alpha:.6},2e3,e.Easing.Quadratic.InOut),this.glowTween.to({alpha:0},3e3,e.Easing.Quadratic.InOut),this.explosionEmitter=a.manager.explosionEmitter,this.flashEmitter=a.manager.flashEmitter,this.glowEmitter=a.manager.glowEmitter,this.shockwaveEmitter=a.manager.shockwaveEmitter}var e=a("engine");d.prototype.constructor=d,d.prototype.inflict=function(a){var b,d=this.game,f=this.ship,g=c.Math.random()*c.Math.PI,h=.5*c.Math.random()+.25,i=new e.Sprite(this.game,"texture-atlas","damage-a.png"),j=new e.Sprite(this.game,"texture-atlas","damage-b.png");i.pivot.set(32,32),i.position.set(a.x,a.y),i.scale.set(h,h),i.rotation=g,i.tint=0,j.pivot.set(32,32),j.position.set(a.x,a.y),j.scale.set(.5,.5),j.tint=16737894,j.blendMode=e.BlendMode.ADD,damageTween=this.game.tweens.create(i),damageTween.to({alpha:0},4e3,e.Easing.Quadratic.InOut,!0,1e3),damageTween.once("complete",function(){i.destroy(),j.destroy()},this),b=d.clock.events.repeat(50,40,function(){j.alpha=c.Math.random()}),f.addChild(i),f.addChild(j)},d.prototype.shockwave=function(){this.shockwaveEmitter.at({center:this.ship.position}),this.shockwaveEmitter.explode(2),this.game.emit("fx/shockwave",{width:1024,height:1024,duration:4e3,x:this.ship.x-512,y:this.ship.y-512})},d.prototype.destroyed=function(){var a,b,d=this.game,e=this.ship;e.destroyed=!0,this.shockwave(),this.glow.position.set(e.x,e.y),this.game.world.add(this.glow),this.glowTween.start(),this.glowTween.once("complete",function(){this.game.world.remove(this.glow)},this),e.tint=4473924;for(b in e.children)e.children[b].tint=4473924;this.timer1=d.clock.events.repeat(200,20,function(){e.worldTransform&&(a=d.world.worldTransform.applyInverse(e.worldTransform.apply(e.circle.random())),this.explosionEmitter.at({center:a}),this.explosionEmitter.explode(2),this.glowEmitter.color(null),this.glowEmitter.at({center:a}),this.glowEmitter.explode(1))},this),this.timer2=d.clock.events.repeat(150,20,function(){c.Math.random()>.5&&e.worldTransform&&(a=d.world.worldTransform.applyInverse(e.worldTransform.apply(e.circle.random())),this.explosionEmitter.at({center:a}),this.explosionEmitter.explode(2),this.glowEmitter.color(null),this.glowEmitter.at({center:a}),this.glowEmitter.explode(1))},this),this.timer3=d.clock.events.add(1e4,function(){e.destroyed=!1,e.tint=16777215;for(var a in e.children)e.children[a].tint=16777215},this)},d.prototype.destroy=function(){this.timer1&&this.game.clock.events.remove(this.timer1),this.timer2&&this.game.clock.events.remove(this.timer2),this.timer3&&this.game.clock.events.remove(this.timer3),this.ship=this.game=this.explosionEmitter=this.flashEmitter=this.glowEmitter=this.shockwaveEmitter=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],180:[function(a,b,c){(function(c){function d(a,b){this.parent=a,this.game=a.game,this.config=b,this.glows=[],this.highlights=[],this._booster=!1}var e=a("engine");d.flicker=[.01*c.Math.random(),.025*c.Math.random(),.015*c.Math.random(),.025*c.Math.random(),.03*c.Math.random(),.015*c.Math.random()],d.prototype.constructor=d,d.prototype.create=function(){var a,b,d,f,g=this.glows,h=this.highlights,i=this.parent,j=this.config.glows,k=j.length;for(f=0;f<k;f++)d=j[f],b=new e.Sprite(i.game,"texture-atlas","engine-highlight.png"),b.pivot.set(32,32),b.position.set(d.position.x,d.position.y),b.scale.set(1,1),b.tint=d.tint,b.blendMode=e.BlendMode.ADD,b.alpha=0,a=new e.Sprite(i.game,"texture-atlas","engine-glow.png"),a.pivot.set(128,64),a.rotation=c.Math.PI+e.Math.degToRad(d.rotation),a.position.set(d.position.x,d.position.y),a.scale.set(.1*d.scale.startX,.1*d.scale.startY),a.tint=d.tint,a.blendMode=e.BlendMode.ADD,i.addChildAt(a,0),i.addChild(b),g.push(a),h.push(b)},d.prototype.start=function(){this._booster=!0},d.prototype.stop=function(){this._booster=!1},d.prototype.update=function(a){var b,e,f,g,h,i=this.glows,j=this.highlights,k=this.game,l=this.parent,m=this.config.glows,n=l.manager,o=m.length,p=d.flicker[k.clock.frames%6],q=c.Math.max(c.Math.min(a,1.5),0);for(g=0;g<o;g++)b=m[g].scale,i[g].scale.set(q*b.endX+p,q*b.endY+3*p);for(h=0;h<o;h++)f=j[h],f.alpha=c.Math.min(1,q)/(o/2),this._booster&&a>0&&(e=k.world.worldTransform.applyInverse(this.parent.worldTransform.apply(f.worldTransform.apply(f.pivot))),n.flashEmitter.color(m[h].tint),n.flashEmitter.at({center:e}),n.flashEmitter.explode(1))},d.prototype.destroy=function(){var a,b,c=this.glows,d=this.highlights;for(a in c)c[a].destroy();for(b in d)d[b].destroy();this.parent=this.game=this.glows=this.highlights=void 0},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],181:[function(a,b,c){function d(a){this.parent=a,this.game=a.game,this.renderer=this.game.renderer,this.shieldSprite=new e.Sprite(this.game,"texture-atlas",this.parent.name+".png"),this.outlineSprite=new e.Sprite(this.game,"texture-atlas",this.parent.name+".png"),this.width=this.shieldSprite.width,this.height=this.shieldSprite.height}var e=(a("pixi"),a("engine")),f=a(169),g=a(168);d.prototype.constructor=d,d.prototype.create=function(){this.shieldSprite.blendMode=e.BlendMode.ADD,this.shieldSprite.filters=[new f(this.game,this.shieldSprite)],this.outlineSprite.filters=[new g(this.width,this.height)]},d.prototype.start=function(){this.parent.addChild(this.shieldSprite),this.parent.addChild(this.outlineSprite),this.outlineSprite.alpha=.5,this.fadeTween=this.game.tweens.create(this.outlineSprite),this.fadeTween.to({alpha:.25},100,e.Easing.Quadratic.InOut),this.fadeTween.repeat(),this.fadeTween.yoyo(!0,0),this.fadeTween.start()},d.prototype.stop=function(){this.fadeTween&&this.fadeTween.stop(),this.parent.removeChild(this.shieldSprite),this.parent.removeChild(this.outlineSprite)},d.prototype.update=function(){},d.prototype.destroy=function(){this.stop(),this.parent=this.game=this.shieldSprite=this.shieldShader=this.renderTexture=this.fadeTween=void 0},b.exports=d},{168:168,169:169,engine:"engine",pixi:"pixi"}],182:[function(a,b,c){function d(a,b){this.parent=a,this.game=a.game,this.config=b,this.hardpoints=[],this.target=new e.Point,this.fire=this.game.clock.throttle(this.fired,300,this,!0)}var e=a("engine"),f=a(176);d.prototype.constructor=d,d.prototype.create=function(){var a,b,c,d=this.parent,e=d.details.hardpoints;
for(c in e)b=e[c].slot,a=new f(this,e[c],this.config.hardpoints[b]),a.fxGroup=d.manager.fxGroup,a.flashEmitter=d.manager.flashEmitter,a.explosionEmitter=d.manager.explosionEmitter,a.glowEmitter=d.manager.glowEmitter,a.fireEmitter=d.manager.fireEmitter,this.hardpoints.push(a)},d.prototype.attack=function(a){var b=this.hardpoints;if(b.length>0){for(this.target.set(a.x,a.y),i=0;i<b.length;i++)b[i].fire(i);this.explode()}},d.prototype.fired=function(a){var b,c=this.game,d=this.parent,f=this.hardpoints,g=d.manager.socket,h=d.details;if(f.length>0&&(c.world.worldTransform.applyInverse(a,this.target),h.range>e.Point.distance(d.position,this.target))){for(g.emit("ship/attack",{uuid:d.uuid,targ:{x:this.target.x,y:this.target.y}}),b=0;b<f.length;b++)f[b].fire(b);this.explode()}},d.prototype.explode=function(){this.game.clock.events.add(250,function(){this.parent.manager.shipsGroup.iterate("renderable",!0,e.Group.NONE,function(a){a.contains(this.target.x,this.target.y)&&(this.parent.manager.explosionEmitter.at({center:this.target}),this.parent.manager.explosionEmitter.explode(2))},this)},this)},d.prototype.update=function(){var a,b=this.hardpoints;if(b.length>0)for(a in b)b[a].update()},d.prototype.destroy=function(){var a,b,c=this.hardpoints;for(b in c)a=c[b],a.fxGroup=a.flashEmitter=a.explosionEmitter=a.glowEmitter=void 0,a.destroy();this.parent=this.game=this.config=this.hardpoints=void 0},b.exports=d},{176:176,engine:"engine"}],183:[function(a,b,c){(function(c){function d(a,b){e.Group.call(this,a.game,!1),this.name=b,this.targeted=[],this.manager=a,this.game=a.game,this.config=a.game.cache.getJSON("ship-configuration",!1)[b],this.chassis=new e.Sprite(a.game,"texture-atlas",b+".png"),this.rotation=0,this.pivot.set(this.chassis.texture.frame.width/2,this.chassis.texture.frame.height/2),this.hud=new k(this),this.damage=new j(this),this.movement=new f(this),this.circle=new e.Circle(this.pivot.x,this.pivot.y,this.chassis.texture.frame.width/2),this.engineCore=new g(this,this.config.engine),this.targetingComputer=new h(this,this.config.targeting),this.shieldGenerator=new i(this,this.config.shields),this.selected=!1,this.graphics=new e.Graphics(a.game),this.graphics.blendMode=e.BlendMode.ADD,this.graphics.objectRenderer="wireframe",this.addAt(this.graphics,0)}var e=a("engine"),f=a(177),g=a(180),h=a(182),i=a(181),j=a(179),k=a(208);d.prototype=Object.create(e.Group.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.add(this.chassis),this.engineCore.create(),this.targetingComputer.create(),this.shieldGenerator.create(),this.hud.create(),this.details.on("data",this.data,this),this.graphics.lineStyle(1,this.isPlayer?5636010:6724044,.2),this.graphics.drawCircle(this.circle.x,this.circle.y,this.circle.radius),this.hud.healthBar.setProgressBar(c.Math.min(1,this.details.health/this.config.stats.health)),this.hud.updateStats(this.details),this.isPlayer&&(this.select(),this.manager.player=this,this.game.emit("ship/follow",this))},d.prototype.data=function(a){var b,d=this.hud,e=this.config;void 0!==a.health&&(b=a.health/e.stats.health,d.healthBar.setProgressBar(c.Math.min(1,b))),(a.kills||a.assists||a.disables)&&d.updateStats(this.details)},d.prototype.update=function(){var a=this.movement;a.update(),this.destroyed||(this.targetingComputer.update(),this.renderable&&(this.engineCore.update(a.velocity/this.details.speed),this.shieldGenerator.update())),this.hud.update()},d.prototype.select=function(){this.selected=!0,this.hud.select(),this.graphics.renderable=!0},d.prototype.deselect=function(){this.selected=!1,this.hud.deselect(),this.graphics.renderable=!1},d.prototype.contains=function(a,b){var c=this.x+this.width-this.pivot.x,d=this.y+this.height-this.pivot.y;return a>=this.x-this.pivot.x&&a<c&&b>=this.y-this.pivot.y&&b<d},d.prototype.overlap=function(a){var b=this.x+this.width-this.pivot.x,c=this.y+this.height-this.pivot.y;return!(b<a.x||c<a.y||this.x-this.pivot.x>a.right||this.y-this.pivot.y>a.bottom)},d.prototype.disabled=function(){this.shieldGenerator.stop(),this.target=null},d.prototype.destroy=function(){this.targeted=[],this.hud.destroy(),this.damage.destroy(),this.movement.destroy(),this.details.removeListener("data",this.data),e.Group.prototype.destroy.call(this,!1),this.manager=this.game=this.config=this.movement=this.circle=this.hud=this.damage=this.details=void 0},Object.defineProperty(d.prototype,"isPlayer",{get:function(){return this.user&&this.game.auth.user.uuid===this.user}}),Object.defineProperty(d.prototype,"speed",{get:function(){return this.details.speed}}),Object.defineProperty(d.prototype,"shields",{get:function(){return this.shieldGenerator&&this.shieldGenerator.fadeTween&&this.shieldGenerator.fadeTween.isRunning}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{177:177,179:179,180:180,181:181,182:182,208:208,engine:"engine"}],184:[function(a,b,c){function d(a){f.call(this),this.game=a,this.clock=a.clock,this.net=a.net,this.socket=a.net.socket,this.shipNetManager=a.shipNetManager,this.indicator=new m(a),this.shipsGroup=new e.Group(a),this.trajectoryGroup=new e.Group(a),this.fxGroup=new e.Group(a),this.fxGroup.blendMode=e.BlendMode.ADD,this.explosionEmitter=new h(this.game),this.flashEmitter=new i(this.game),this.glowEmitter=new j(this.game),this.shockwaveEmitter=new k(this.game),this.fireEmitter=new l(this.game),this.game.particles.add(this.explosionEmitter),this.game.particles.add(this.flashEmitter),this.game.particles.add(this.glowEmitter),this.game.particles.add(this.shockwaveEmitter),this.game.particles.add(this.fireEmitter),this.player=null,this.ships={},this.game.world.add(this.trajectoryGroup),this.game.world.add(this.shipsGroup),this.game.world.add(this.indicator),this.game.world.add(this.fxGroup),this.game.world.add(this.fireEmitter),this.game.world.add(this.explosionEmitter),this.game.world.add(this.shockwaveEmitter),this.game.world.add(this.glowEmitter),this.game.world.add(this.flashEmitter),this.game.auth.on("disconnected",this._pause,this),this.socket.on("ship/sync",this._syncBind=this._sync.bind(this)),this.socket.on("ship/attack",this.attackBind=this._attack.bind(this)),this.game.on("ship/primary",this._primary,this),this.game.on("ship/secondary",this._secondary,this),this.game.on("ship/follow",this._follow,this),this.game.on("ship/unfollow",this._unfollow,this),this.game.on("ship/removed",this._removed,this),this.game.on("ship/disabled",this._disabled,this),this.game.on("game/pause",this._pause,this),this.game.on("game/resume",this._resume,this)}var e=a("engine"),f=a(3),g=a(183),h=a(187),i=a(189),j=a(190),k=a(191),l=a(188),m=a(194);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.create=function(a,b){var c=(this.game,this.shipsGroup),d=new g(this,b.chassis);return d.uuid=a.uuid,d.user=b.user,d.username=b.username,d.details=b,d.position.set(a.pos.x,a.pos.y),c.add(d),d.boot(),d},d.prototype.remove=function(a){var b=this.game,c=b.camera,d=this.ships[a.uuid];void 0!==d&&(c.target===d&&c.unfollow(),delete this.ships[a.uuid]&&d.destroy())},d.prototype.removeAll=function(){var a,b=this.ships;for(a in b)this.remove(b[a])},d.prototype.destroy=function(){var a=this.game,b=this.game.auth,c=this.socket;b.removeListener("disconnected",this._pause),c.removeListener("ship/sync",this._syncBind),c.removeListener("ship/attack",this._attackBind),a.removeListener("ship/primary",this._primary),a.removeListener("ship/secondary",this._secondary),a.removeListener("ship/follow",this._follow),a.removeListener("ship/removed",this._removed),a.removeListener("ship/disabled",this._disabled),a.removeListener("game/pause",this._pause),a.removeListener("game/resume",this._resume),a.particles.remove(this.explosionEmitter),a.particles.remove(this.flashEmitter),a.particles.remove(this.glowEmitter),a.particles.remove(this.shockwaveEmitter),a.world.remove(this.trajectoryGroup),a.world.remove(this.shockwaveEmitter),a.world.remove(this.shipsGroup),a.world.remove(this.fxGroup),a.world.remove(this.explosionEmitter),a.world.remove(this.flashEmitter),a.world.remove(this.glowEmitter),this.game=this.socket=this._syncBind=this._attackBind=void 0,this.removeAll()},d.prototype._sync=function(a){var b,c,d,e,f,g=(this.game,a.ships),h=g.length;for(f=0;f<h;f++)b=g[f],d=this.shipNetManager.getShipData(b.uuid),d&&(e=!this.ships[b.uuid],c=e?this.ships[b.uuid]=this.create(b,d):this.ships[b.uuid],c.movement.plot(b))},d.prototype._attack=function(a){var b=this.ships[a.uuid];b!=this.player&&b.targetingComputer.attack(a.targ)},d.prototype._primary=function(a){var b=this.clock,c=this.player,d=this.game.input;c&&("start"===a.type?(this.autofire&&b.events.remove(this.autofire),this.autofire=b.events.loop(50,function(){c.targetingComputer.fire({x:d.mousePointer.x,y:d.mousePointer.y})})):this.autofire&&b.events.remove(this.autofire))},d.prototype._secondary=function(a){var b=(this.game,this.player),c=this.socket,d=this.indicator,e=this.game.input.mousePointer,f=this.shipsGroup.worldTransform.apply(b.position),g=this.game.world.worldTransform.applyInverse(e),h={x:e.x-f.x,y:e.y-f.y};b&&"start"===a.type&&(d.show(g),c.emit("ship/plot",{uuid:b.uuid,destination:h}))},d.prototype._follow=function(a){a.position&&this.game.camera.follow(a)},d.prototype._unfollow=function(){this.game.camera.unfollow()},d.prototype._disabled=function(a){var b=this.clock,c=this.ships[a.target];void 0!==c&&(c.damage.destroyed(),c.disabled(),b.events.add(1e3,function(){this._untargeted(c)},this))},d.prototype._removed=function(a){var b,c=this.game,d=this.ships[a.uuid];void 0!==d&&(d.disabled(),b=c.tweens.create(d),b.to({alpha:0},2500,e.Easing.Default,!0,5e3),b.once("complete",function(){this.remove(a)},this))},d.prototype._resume=function(){},d.prototype._pause=function(){},b.exports=d},{183:183,187:187,188:188,189:189,190:190,191:191,194:194,3:3,engine:"engine"}],185:[function(a,b,c){(function(c){function d(a,b){e.Sprite.call(this,a.game,b.chassis),this.name=b.chassis,this.manager=a,this.game=a.game,this.data=b,this.period=b.index*c.Math.PI,this.orbit=new e.Circle(512,512,b.orbit),this.pivot.set(this.width/2,this.width/2),this.rotation=c.Math.random()*c.Math.PI,this.autoCull=!0,this.checkWorldBounds=!0}var e=a("engine");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.boot=function(){this.cap=new e.Sprite(this.game,this.data.chassis+"-cap"),this.cap.pivot.set(this.cap.width/2,this.cap.height/2),this.cap.position.set(this.width/2,this.width/2),this.cap.rotation=c.Math.random()*c.Math.PI,this.addChild(this.cap)},d.prototype.update=function(){e.Sprite.prototype.update.call(this),this.orbit.circumferencePoint(this.period,!1,!1,this.position),this.period+=2e-5*this.game.clock.elapsed,this.rotation-=1e-5*this.game.clock.elapsed,this.cap.rotation+=8e-5*this.game.clock.elapsed},d.prototype.destroy=function(){this.manager=this.game=this.target=this.targeted=void 0,e.Sprite.prototype.destroy.call(this)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],186:[function(a,b,c){function d(a){f.call(this),this.game=a,this.net=a.net,this.socket=a.net.socket,this.stationsGroup=new e.Group(a),this.game.world.foreground.add(this.stationsGroup),this.stations={},this.game.on("game/pause",this._pause,this),this.game.on("game/resume",this._resume,this)}var e=a("engine"),f=a(3),g=a(185);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.boot=function(){for(var a=0;a<1;a++)this.create({uuid:""+a,center:{x:2048,y:2048},index:a,orbit:512,chassis:"station"})},d.prototype.create=function(a){var b=(this.game,new g(this,a));return b.boot(),this.stationsGroup.add(b),b},d.prototype.remove=function(a){},d.prototype.destroy=function(){var a=this.game;this.socket;a.removeListener("game/pause",this._reset),a.removeListener("game/resume",this._resume),this.game=this.net=this.socket=void 0},d.prototype._resume=function(){},d.prototype._pause=function(){},b.exports=d},{185:185,3:3,engine:"engine"}],187:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.minRotation=-15,this.maxRotation=15,this.setScale(1,3,1,3,3e3),this.setAlpha(1,0,3e3),this.setTint(16746632,1579032,500),this.makeParticles("texture-atlas",["explosion-a.png","explosion-b.png","explosion-a.png","explosion-b.png"])}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],188:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0,200),this.minRotation=-10,this.maxRotation=10,this.blendMode=e.BlendMode.ADD,this.setScale(.1,.6,.1,.6,500),this.setAlpha(1,0,1e3),this.setTint(16737894,3355443,500),this.makeParticles("texture-atlas",["explosion-d.png"])}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],189:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0,100),this.minRotation=-45,this.maxRotation=45,this.blendMode=e.BlendMode.ADD,this.setScale(.1,1,.1,1,250),this.setAlpha(1,0,250),this.setTint(3368601,6710886,250),this.makeParticles("texture-atlas","explosion-flash.png")}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,d.prototype.color=function(a){this.setTint(a||3368601,6710886,100)},b.exports=d},{engine:"engine"}],190:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.blendMode=e.BlendMode.ADD,this.setScale(.1,3,.1,3,250),this.setAlpha(1,0,300),this.setTint(16777215,16737894,250),this.makeParticles("texture-atlas","explosion-d.png")}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,d.prototype.color=function(a){this.setTint(16777215,a||16737894,100)},b.exports=d},{engine:"engine"}],191:[function(a,b,c){function d(a){e.Emitter.call(this,a,0,0),this.blendMode=e.BlendMode.ADD,this.setScale(0,2,0,2,4e3),this.minRotation=-45,this.maxRotation=45,this.setAlpha(1,0,4e3),this.setTint(10070783,16777215,4e3),this.makeParticles("texture-atlas","explosion-c.png")}var e=a("engine");d.prototype=Object.create(e.Emitter.prototype),d.prototype.constructor=d,b.exports=d},{engine:"engine"}],192:[function(a,b,c){(function(c){function d(a){e.Sprite.call(this,a,"texture-atlas","asteroid-x0"+(c.Math.floor(5*c.Math.random())+1)+".png"),this.angle=2*c.Math.random()*c.Math.PI,this.movspeed=.001*c.Math.random()-5e-4,this.rotspeed=.01*c.Math.random()-.005,this.orbit=this.createOrbit(),this.tempPoint=new e.Point,this.scale.copy(this.createScale()),this.pivot.set(this.texture.frame.width/2,this.texture.frame.height/2),this.rotation=this.angle,this.autoCull=!0,this.checkWorldBounds=!0}var e=a("engine");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){if(e.Sprite.prototype.update.call(this),this.renderable){var a=this.orbit.circumferencePoint(this.angle,!1,this.tempPoint);this.position.copy(a),this.rotation+=this.rotspeed,this.angle+=this.movspeed}},d.prototype.createOrbit=function(){var a=2048*c.Math.random()+128,b=2048*c.Math.random()+(a>1024?128:1024),d=new e.Ellipse(512,512,a,b);return d},d.prototype.createScale=function(){var a=.6*c.Math.random()+.4,b={x:a,y:a};return b},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],193:[function(a,b,c){(function(c){function d(a){e.Sprite.call(this,a,"texture-atlas","canister.png"),this.ship=null,this.opened=!1,this.pivot.set(this.texture.frame.width/2,this.texture.frame.height/2),this.rotation=c.Math.random()*c.Math.PI,this.game.on("gui/player/ship",this._player,this)}var e=a("engine");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,d.prototype.update=function(){e.Sprite.prototype.update.call(this),this.renderable&&(this.rotation+=.01,!this.opened&&this.ship&&this.ship.overlap(this.getBounds())&&this.open())},d.prototype.open=function(){var a=this.ship,b=this.game,c=this.game.tweens.create(this.position),d=this.game.tweens.create(this.scale);this.opened=!0,d.to({x:.1,y:.1},200),d.once("complete",function(){b.net.socket.emit("ship/canister",{uuid:a.uuid}),this.destroy()},this),d.start(),c.to({x:a.x,y:a.y},200),c.start()},d.prototype._player=function(a){this.ship=a},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],194:[function(a,b,c){(function(c){function d(a){e.Group.call(this,a),this.renderable=!1,this.sprite1=new e.Sprite(a,"texture-atlas","icon-target.png"),this.sprite1.tint=5614335,this.sprite1.pivot.set(20,20),this.sprite1.blendMode=e.BlendMode.ADD,this.sprite2=new e.Sprite(a,"texture-atlas","icon-target.png"),this.sprite2.tint=5614335,this.sprite2.pivot.set(20,20),this.sprite2.scale.set(.5,.5),this.sprite2.blendMode=e.BlendMode.ADD,this.tween1=this.game.tweens.create(this.sprite1),this.tween1.to({alpha:0,rotation:2*c.Math.PI/3},500,e.Easing.Quadratic.Out),this.tween2=this.game.tweens.create(this.sprite2),this.tween2.to({alpha:0,rotation:-2*c.Math.PI/6},500,e.Easing.Quadratic.Out),this.tween2.on("complete",function(a){this.renderable=!1},this),this.add(this.sprite1),this.add(this.sprite2)}var e=a("engine");d.prototype=Object.create(e.Group.prototype),d.prototype.constructor=d,d.prototype.show=function(a){var b=this.game.world.scale.x;this.tween1.isRunning&&this.tween1.stop(),this.tween2.isRunning&&this.tween2.stop(),this.position.copy(a),this.scale.set(1/b,1/b),this.renderable=!0,this.sprite1.alpha=1,this.sprite1.rotation=0,this.sprite2.alpha=1,this.sprite2.rotation=0,this.tween1.start(),this.tween2.start()},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine"}],195:[function(a,b,c){Object.assign||(Object.assign=a(13))},{13:13}],196:[function(a,b,c){a(195)},{195:195}],197:[function(a,b,c){function d(){}var e=a("engine"),f=a(202),g=a(201),h=a(200),i=a(218),j=a(219),k=a(223),l=a(226),m=a(224),n=a(204),o=a(207),p=a(212),q=a(217);d.DISCONNECT_MESSAGE="connection to the server has been lost\nattempting to reconnect",d.FPSPROBLEM_MESSAGE="the game will automatically adjust\nyour graphics settings",d.prototype=Object.create(e.State.prototype),d.prototype.constructor=e.State,d.prototype.init=function(){this.game.gui=this,this.auth=this.game.auth},d.prototype.preload=function(){this.game.load.image("medium","imgs/game/fonts/medium.png"),this.game.load.image("full","imgs/game/fonts/full.png"),this.game.load.tilemap("ship-tilemap","data/ship-mini.json"),this.game.load.json("ship-configuration","data/ship-configuration.json"),this.game.load.json("item-configuration","data/item-configuration.json"),this.game.load.atlasJSONHash("texture-atlas","imgs/game/texture-atlas.png","data/texture-atlas.json")},d.prototype.create=function(){var a=this.game;this.focus=new h(a),this.modalComponent=new p(a),this.modalComponent.visible=!1,this.alertComponent=new n(a),this.flashMessageComponent=new o(a),this.centerPanel=new f(a,new i(0,0)),this.basePanel=new f(a,new i(0,0)),this.basePanel.setPadding(6,0,0,0),this.headerPane=new l(a),this.topPanel=new f(a,new j(g.CENTER,g.TOP,g.HORIZONTAL,6)),this.topPanel.addPanel(g.NONE,this.headerPane),this.bottomPane=new m(a),this.basePanel.addPanel(g.TOP,this.topPanel),this.basePanel.addPanel(g.BOTTOM,this.bottomPane),this.root=new f(a,new k),this.root.setSize(a.width,a.height),this.root.visible=!1,this.root.addPanel(g.STRETCH,this.basePanel),this.root.addPanel(g.STRETCH,this.centerPanel),this.root.addPanel(g.STRETCH,this.modalComponent),this.game.stage.addChild(this.root),this.auth.on("sync",this.login,this),this.auth.on("data",this.data,this),this.auth.on("disconnected",this._disconnected,this),this.game.on("gui/modal",this.modal,this),this.game.on("fpsProblem",this._fpsProblem,this),this.game.on("game/pause",this._pause,this)},d.prototype.login=function(a){this.auth.isUser()?(this.headerPane.login(a),this.headerPane.invalidate(!0),this.registrationForm&&(this.registrationForm=this.registrationForm.destroy())):(this.headerPane.logout(),this.registrationForm=new q(game)),this.modalComponent.visible&&this.modal(!1),this.toggle(!0),this.loading()},d.prototype.data=function(a){this.auth.isUser()&&(this.headerPane.login(a),this.headerPane.invalidate(!0))},d.prototype.refresh=function(){this.root.invalidate(!0)},d.prototype.toggle=function(a){this.root.visible=void 0!==a?a:!this.root.visible,this.root.visible&&this.root.invalidate()},d.prototype.loading=function(){this.game.emit("gui/message","loading",500)},d.prototype.modal=function(a,b,c,d){"boolean"!=typeof a&&(a=!0),void 0===b&&(b=new f(game,new k)),void 0===c&&(c=!0),void 0===d&&(d=!0),c&&a?this.game.input.keyboard.stop():this.game.input.keyboard.start(),this.modalComponent.empty(),this.modalComponent.addPanel(g.USE_PS_SIZE,b),this.modalComponent.visible=a,this.modalComponent.bg.settings.fillAlpha=d?.8:0,this.modalComponent.invalidate(!0),this.refresh()},d.prototype.resize=function(a,b){void 0!==this.root&&(this.root.resize(a,b),this.root.setSize(a,b),this.root.invalidate())},d.prototype._pause=function(){this.game.emit("gui/message","paused",1e3,500)},d.prototype._disconnected=function(){this.game.emit("gui/alert",d.DISCONNECT_MESSAGE,!1,"connection lost")},d.prototype._fpsProblem=function(){this.game.emit("gui/alert",d.FPSPROBLEM_MESSAGE,"ok","performance problem")},b.exports=d},{200:200,201:201,202:202,204:204,207:207,212:212,217:217,218:218,219:219,223:223,224:224,226:226,engine:"engine"}],198:[function(a,b,c){function d(){}var e=a("engine"),f=a(197),g=a(199),h=a(201),i=(a(223),a(213)),j=a(209),k=a(214),l=a(211);d.prototype=Object.create(e.State.prototype),d.prototype.constructor=e.State,d.prototype.preload=function(){this.game.load.image("loading","imgs/game/splash.png"),this.game.load.image("small","imgs/game/fonts/small.png")},d.prototype.init=function(){},d.prototype.create=function(){var a=this.game,b=this.gui=new f,c=new g;a.state.add("gui",b,!0,!0),a.state.add("sector",c),a.state.start("sector"),this.currentState=0,this.pendingState=a.state.pendingLength,this.progress=new k(a,{width:162,height:8,label:!1}),this.image=new j(a,"loading",{padding:[0,0,20,0],border:[0],bg:{color:0}}),this.status=new l(a,"loading",{bg:{fillAlpha:0,borderSize:0},text:{fontName:"small"}}),this.container=new i(a,{layout:{ax:h.CENTER,ay:h.CENTER,direction:h.VERTICAL},bg:!1}),this.root=new i(a,{layout:{ax:h.CENTER,ay:h.CENTER},bg:{color:0}}),this.container.addPanel(h.CENTER,this.image),this.container.addPanel(h.CENTER,this.progress),this.container.addPanel(h.CENTER,this.status),this.root.setSize(a.width,a.height),this.root.addPanel(h.CENTER,this.container),this.root.invalidate(!0),a.load.on("loadstart",this.loadingStart,this),a.load.on("loadcomplete",this.loadingComplete,this),a.load.on("filecomplete",this.loadingProgressBar,this)},d.prototype.loadingStart=function(){this.game.stage.addChild(this.root),this.image.visible=!0,this.progress.visible=!0,this.status.visible=!0},d.prototype.loadingProgressBar=function(){var a=arguments[3],b=arguments[4],c=arguments[1],d=this.pendingState;this.progress.setProgressBar(a/b/d+this.currentState/d),this.status.text=c,this.status.invalidate()},d.prototype.loadingComplete=function(){this.currentState++,this.game.stage.addChild(this.root),this.game.state.hasPendingState||(this.tween1=this.game.tweens.create(this.root),this.tween1.to({alpha:0},500),this.tween1.delay(500),this.tween1.start(),this.tween1.once("complete",function(){this.game.stage.removeChild(this.root)},this),this.tween2=this.game.tweens.create(this.container),this.tween2.to({alpha:0},500),this.tween2.start(),this.tween1.once("complete",function(){this.image.visible=!1,this.progress.visible=!1,this.status.visible=!1},this))},d.prototype.resize=function(a,b){void 0!==this.root&&(this.root.resize(a,b),this.root.setSize(a,b),this.root.invalidate())},b.exports=d},{197:197,199:199,201:201,209:209,211:211,213:213,214:214,223:223,engine:"engine"}],199:[function(a,b,c){(function(c){function d(){}var e=a("engine"),f=a(167),g=a(165),h=a(164),i=a(166),j=a(178),k=a(184),l=a(186),m=a(192),n=a(193);d.prototype=Object.create(e.State.prototype),d.prototype.constructor=e.State,d.prototype.init=function(a){c.state=this,this.scrollVelocityX=0,this.scrollVelocityY=0,this.scrollLock=!0,this.game.stage.disableVisibilityChange=!0},d.prototype.preload=function(){var a=this.game.load;a.image("space","imgs/game/space/sector-a.jpg"),a.image("nebula","imgs/game/space/nebula-a.jpg"),a.image("snow","imgs/game/space/snow.jpg"),a.image("planet","imgs/game/planets/arkon.jpg"),a.image("clouds","imgs/game/planets/clouds.jpg"),a.image("station","imgs/game/stations/ubaidian-x01.png"),a.image("station-cap","imgs/game/stations/ubaidian-cap-x01.png"),a.image("laser-blue","imgs/game/fx/laser-blue.png"),a.image("laser-red","imgs/game/fx/laser-red.png"),a.image("laser-red-piercing","imgs/game/fx/laser-red-piercing.png")},d.prototype.create=function(){var a=this,b=1e3,c=this.game.input.mouse;c.capture=!0,c.mouseWheelCallback=function(c){var d=c.deltaY/b,f=e.Math.clamp(this.world.scale.x-d,.38,1);a.game.paused||(a.zoom&&a.zoom.isRunning&&a.zoom.stop(),this.world.scale.set(f,f))},this.game.world.setBounds(0,0,4096,4096),this.game.world.scale.set(.38,.38),this.game.camera.bounds=null,this.game.camera.focusOnXY(2048,2048),this.createManagers(),this.createAsteroids(),this.createSpace(),this.createSnow(),game.auth.ready&&this.game.gui.login(game.auth.user),this.game.emit("gui/focus/retain",this),this.game.on("gui/selected",function(){this.game.emit("gui/focus/retain",this)},this)},d.prototype.createSpace=function(){this.space=new f(this.game,this.game.width,this.game.height),this.planet=new g(this.game),this.nebula=new h(this.game),this.nebula.position.set(-512,1024),this.nebula.create(3),this.game.world.foreground.add(this.nebula),this.game.world.background.add(this.planet),this.game.stage.addChildAt(this.space,0)},d.prototype.createManagers=function(){this.stationManager=new l(this.game),this.stationManager.boot(),this.shipManager=new k(this.game),this.selection=new j(this)},d.prototype.createSnow=function(){this.snow=new i(this.game,this.game.width,this.game.height),this.game.stage.addChild(this.snow),this.game.stage.swapChildren(this.snow,this.game.gui.root)},d.prototype.createAsteroids=function(){var a,b,c=80;for(b=0;b<c;b++)a=new m(this.game),a.position.set(512,512),this.game.world.foreground.add(a)},d.prototype.createCanisters=function(){var a,b,d=15;for(b=0;b<d;b++)a=new n(this.game),a.position.set(4096*c.Math.random(),4096*c.Math.random()),this.game.world.add(a)},d.prototype.focus=function(){this.scrollLock=!1},d.prototype.blur=function(){this.scrollLock=!0},d.prototype.update=function(){var a=this.game;a.camera,a.input.keyboard,a.clock.elapsedMS/10;this.scrollLock},d.prototype.preRender=function(){},d.prototype.resize=function(a,b){this.space&&this.space.resize(a,b),this.snow&&this.snow.resize(a,b)},d.prototype.shutdown=function(){this.selection.destroy()},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{164:164,165:165,166:166,167:167,178:178,184:184,186:186,192:192,193:193,engine:"engine"}],200:[function(a,b,c){function d(a){this.game=a,this._objects=[],this.game.on("gui/focus/retain",this._retain,this),this.game.on("gui/focus/release",this._release,this)}a("engine");d.prototype.constructor=d,d.prototype._retain=function(a){var b=this._objects,c=b.length-1,d=b.indexOf(a),e=a,f=c>=0?this._objects[c]:null;e&&(d==-1&&b.push(e),f&&!f._blurWasCalled&&(f.blur&&f.blur(),f._blurWasCalled=!0),e.focus&&e.focus(),e._blurWasCalled=!1)},d.prototype._release=function(a){var b=this._objects,c=b.length-1,d=b.indexOf(a),e=b[c]===a?b[b.length-2]:null,f=a;f&&d>=0&&(b.splice(d,1),f._blurWasCalled||(f.blur&&f.blur(),f._blurWasCalled=!0),e&&(e.focus&&e.focus(),e._blurWasCalled=!1))},b.exports=d},{engine:"engine"}],201:[function(a,b,c){function d(){}d.NONE=0,d.LEFT=1,d.RIGHT=2,d.TOP=4,d.BOTTOM=8,d.CENTER=16,d.HORIZONTAL=32,d.VERTICAL=64,d.TEMPORARY=128,d.STRETCH=256,d.UsePsSize=d.USE_PS_SIZE=512,d.TopLeft=d.LEFT|d.TOP,d.TopRight=d.RIGHT|d.TOP,d.BottomLeft=d.LEFT|d.BOTTOM,d.BottomRight=d.RIGHT|d.prototype.BOTTOM,b.exports=d},{}],202:[function(a,b,c){function d(a,b,c){e.Group.call(this,a),this.layout=b||new f,this.constraint=c,this.cachedHeight=0,this.psWidth=this.psHeight=this.cachedWidth=-1,this.size={width:0,height:0},this.border={top:0,left:0,bottom:0,right:0},this.padding={top:0,left:0,bottom:0,right:0},this.views=[],this.panels=[],this.isValid=!1,this.isLayoutValid=!1}var e=a("engine"),f=a(223);d.prototype=Object.create(e.Group.prototype),d.prototype.constructor=d,d.prototype.addPanel=function(a,b){null!=b.constraint?constr=b.constraint:b.constraint=a,this.panels.push(b),this.add(b)},d.prototype.addPanelAt=function(a,b,c){null!=b.constraint?constr=b.constraint:b.constraint=a,this.panels.splice(c,0,b),this.addAt(b,c)},d.prototype.removePanel=function(a,b){this.panels.splice(this.panels.indexOf(a),1),this.remove(a,b||!1)},d.prototype.removeAll=function(){var a,b,c=this.panels.slice(0),d=c.length;for(b=0;b<d;b++)a=c[b],this.removePanel(a)},d.prototype.addView=function(a){this.views.push(a),this.add(a)},d.prototype.invalidate=function(a){if(this.isValid=!1,this.isLayoutValid=!1,this.cachedWidth=-1,a){for(var b=0;b<this.panels.length;b++)this.panels[b].invalidate(a);this.validate(),this.repaint()}else this.parent&&this.parent.invalidate?this.parent.invalidate():this.parent&&!this.parent.invalidate&&(this.validate(),this.repaint())},d.prototype.validate=function(){if(this.validateMetric(),this.size.width>0&&this.size.height>0&&this.isLayoutValid===!1&&this.visible===!0){this.layout.doLayout(this);for(var a=0;a<this.panels.length;a++)this.panels[a].isLayoutValid||this.panels[a].validate();this.isLayoutValid=!0}},d.prototype.validateMetric=function(){this.isValid===!1&&this.recalc&&this.recalc()},d.prototype.repaint=function(){if(this.paint(),this.visible===!0)for(var a=0;a<this.panels.length;a++)this.panels[a].isValid||this.panels[a].repaint();this.isValid=!0},d.prototype.paint=function(){for(var a=0;a<this.views.length;a++)this.views[a].paint(this.top,this.left,this.bottom,this.right)},d.prototype.resize=function(a,b){},d.prototype.setBorder=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),this.border.top==a&&this.border.left==b&&this.border.bottom==c&&this.border.right==d||(this.border.top=a,this.border.left=b,this.border.bottom=c,this.border.right=d),this},d.prototype.setPadding=function(a,b,c,d){return 1==arguments.length&&(b=c=d=a),2==arguments.length&&(c=a,d=b),this.padding.top==a&&this.padding.left==b&&this.padding.bottom==c&&this.padding.right==d||(this.padding.top=a,this.padding.left=b,this.padding.bottom=c,this.padding.right=d),this},d.prototype.setSize=function(a,b){return a==this.size.width&&b==this.size.height||(this.size.width=a,this.size.height=b,this.isValid=!1,this.isLayoutValid=!1,this.resize(a,b)),this},d.prototype.setLocation=function(a,b){a==this.x&&this.y==b||(this.position.x=a,this.position.y=b,null!=this.relocated&&this.relocated(a,b))},d.prototype.setPreferredSize=function(a,b){a==this.psWidth&&b==this.psHeight||(this.psWidth=a,this.psHeight=b)},d.prototype.getPreferredSize=function(){if(this.validateMetric(),this.cachedWidth<0){var a=this.psWidth<0||this.psHeight<0?this.layout.calcPreferredSize(this):{width:0,height:0};return a.width=this.psWidth>=0?this.psWidth:a.width+this.left+this.right,a.height=this.psHeight>=0?this.psHeight:a.height+this.top+this.bottom,this.cachedWidth=a.width,this.cachedHeight=a.height,a}return{width:this.cachedWidth,height:this.cachedHeight}},d.prototype.destroy=function(){e.Group.prototype.destroy.call(this),this.layout=this.border=this.padding=void 0,this.views=[],this.panels=[]},Object.defineProperty(d.prototype,"top",{
get:function(){return this.padding.top+this.border.top}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.padding.left+this.border.left}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.padding.bottom+this.border.bottom}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.padding.right+this.border.right}}),b.exports=d},{223:223,engine:"engine"}],203:[function(a,b,c){function d(){this.gap=0}d.prototype.constructor=d,d.prototype.paint=function(){},Object.defineProperty(d.prototype,"top",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"left",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"bottom",{get:function(){return this.gap}}),Object.defineProperty(d.prototype,"right",{get:function(){return this.gap}}),b.exports=d},{}],204:[function(a,b,c){function d(a,b){g.call(this,a,{padding:[1,1,6,1],border:[0],bg:{fillAlpha:1,color:3355443,borderSize:2,borderColor:6710886,radius:4},title:{padding:[6,10],border:[0],text:{tint:16724838,fontName:"medium"},bg:{color:2236962,fillAlpha:1,borderSize:0,radius:4}},message:{padding:[10,10,8,10],border:[0],text:{fontName:"medium",characterSpacing:1,lineSpacing:4},bg:{color:3355443,fillAlpha:1,borderSize:0}},button:{bg:{fillAlpha:1,color:3355443,borderSize:0,blendMode:e.BlendMode.ADD,radius:4},label:{padding:[4,8],bg:{highlight:3355443,fillAlpha:0,color:2236962,borderSize:2,radius:4}}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new j(a,this.settings.bg),this.title=new h(a,"alert",this.settings.title),this.message=new h(a,"",this.settings.message),this.button=new i(a,"close",this.settings.button),this.button.on("inputUp",this._close,this),this.addView(this.bg),this.addPanel(f.STRETCH,this.title),this.addPanel(f.NONE,this.message),this.addPanel(f.CENTER,this.button),this.game.on("gui/alert",this._alert,this)}var e=a("engine"),f=a(201),g=(a(202),a(213)),h=a(211),i=a(205),j=a(232);e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype._alert=function(a,b,c){this.title.text=c||"alert",this.message.text=a||"",b===!1?this.button.visible=!1:(this.button.visible=!0,this.button.label.text=b||"close"),this.game.emit("gui/modal",!0,this)},d.prototype._close=function(){this.game.emit("gui/modal",!1)},b.exports=d},{201:201,202:202,205:205,211:211,213:213,232:232,engine:"engine"}],205:[function(a,b,c){function d(a,b,c){f.call(this,a,new i),this._alert=!1,this._disabled=!1,this.settings=l.mixin(c,{padding:[2],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:4,alertColor:16776960},label:{bg:{highlight:5802200,fillAlpha:.6,color:3696824,borderSize:2,radius:4}}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.label=new g(a,b,this.settings.label),this.label.alpha=.9,this.bg=new j(a,this.settings.bg),this.bg.alpha=.75,this.colorBlend=new k(a,this.bg,(!1),5),this.colorBlend.setColor(16777215,this.settings.bg.alertColor,250,e.Easing.Default,!0),this.colorBlend.on("stop",function(){this.bg.tint=16777215},this),this.bg.on("inputOver",this._inputOver,this),this.bg.on("inputOut",this._inputOut,this),this.bg.on("inputDown",this._inputDown,this),this.bg.on("inputUp",this._inputUp,this),this.addView(this.bg),this.addPanel(h.STRETCH,this.label),this.start()}var e=a("engine"),f=a(202),g=a(211),h=a(201),i=a(223),j=a(232),k=a(216),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.start=function(){this.bg.inputEnabled=!0,this.bg.input.priorityID=2},d.prototype.stop=function(){this.bg.inputEnabled=!1},d.prototype.alert=function(){this._alert=!0,this.bg.alpha=1,this.colorBlend.start()},d.prototype._inputUp=function(){this.disabled||(this._alert&&(this._alert=!1,this.colorBlend.stop()),this.bg.tint=16777215,this.label.bg.tint=16777215,this.emit("inputUp",this))},d.prototype._inputDown=function(){this.disabled||(this.bg.tint=11193582,this.label.bg.tint=11193582,this.emit("inputDown",this))},d.prototype._inputOver=function(){this.disabled||(this.bg.alpha=1,this.label.alpha=1)},d.prototype._inputOut=function(){this.disabled||(this._alert||(this.bg.alpha=.75),this.label.alpha=.9)},Object.defineProperty(d.prototype,"tint",{set:function(a){this.bg.tint=a},get:function(){return this.bg.tint}}),Object.defineProperty(d.prototype,"disabled",{set:function(a){a===!1?(this.label.alpha=.9,this.bg.alpha=.9):(this.label.alpha=.25,this.bg.alpha=.5),this._disabled=a},get:function(){return this._disabled}}),b.exports=d},{201:201,202:202,211:211,216:216,223:223,232:232,engine:"engine"}],206:[function(a,b,c){function d(a,b,c){f.call(this,a,new i),this._alert=!1,this._selected=!1,this._disabled=!1,this._tempPosition=new e.Point,this.settings=l.mixin(c,{padding:[2],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:4,disabled:3355443},icon:{bg:{highlight:5802200,fillAlpha:.75,color:3696824,borderSize:2,radius:4}}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.image=new g(a,b,this.settings.icon),this.settings.disabled&&(this.disabled=!0),this.colorBlend=new k(a,this.image),this.colorBlend.setColor(3368601,3394611,250,e.Easing.Quadratic.InOut,!0),this.colorBlend.on("stop",function(){this.image.tint=16777215},this),this.settings.bg?(this.bg=new j(a,this.settings.bg),this.bg.alpha=.75,this.addView(this.bg)):this.bg={},this.input=new e.InputHandler(this.bg),this.bg.on("inputOver",this._inputOver,this),this.bg.on("inputOut",this._inputOut,this),this.bg.on("inputDown",this._inputDown,this),this.bg.on("inputUp",this._inputUp,this),this.addPanel(h.USE_PS_SIZE,this.image)}var e=a("engine"),f=a(202),g=a(209),h=a(201),i=a(223),j=a(232),k=a(216),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.start=function(a){this.input.start(a||2)},d.prototype.stop=function(){this.input.stop()},d.prototype.alert=function(){this._alert=!0,this.image.alpha=1,this.colorBlend.start()},d.prototype.enableDrag=function(){this.input.enableDrag(),this.on("dragStart",this._dragStart,this)},d.prototype._dragStart=function(){this._tempPosition.copyFrom(this.position),this.once("dragStop",this._dragStop,this)},d.prototype._dragStop=function(){var a=game.tweens.create(this.position);a.to({x:this._tempPosition.x,y:this._tempPosition.y},150,e.Easing.Quadratic.Out),a.start()},d.prototype._inputUp=function(){this.disabled||(this._alert&&(this._alert=!1,this.colorBlend.stop()),this.bg.tint=16777215,this.image.bg.tint=16777215,this.emit("inputUp",this))},d.prototype._inputDown=function(){this.disabled||(this.bg.tint=11193582,this.image.bg.tint=11193582,this.emit("inputDown",this))},d.prototype._inputOver=function(){this.disabled||(this.image.alpha=1,this.bg.alpha=1)},d.prototype._inputOut=function(){this.disabled||(this._alert||(this.image.alpha=.9),this.bg.alpha=.75)},Object.defineProperty(d.prototype,"tint",{set:function(a){this.image.tint=a},get:function(){return this.image.tint}}),Object.defineProperty(d.prototype,"selected",{set:function(a){a===!0?(this._disabled=!0,this.bg.tint=65280,this.image.tint=8978312,this.image.bg.tint=65280,this.image.alpha=1):(this._disabled=!1,this.bg.tint=16777215,this.image.tint=16777215,this.image.bg.tint=16777215,this.image.alpha=.9),this._selected=a},get:function(){return this._selected}}),Object.defineProperty(d.prototype,"disabled",{set:function(a){a===!1?(this.image.alpha=.9,this.bg.tint=16777215):(this.image.alpha=.25,this.bg.tint=this.settings.bg.disabled),this._disabled=a},get:function(){return this._disabled}}),b.exports=d},{201:201,202:202,209:209,216:216,223:223,232:232,engine:"engine"}],207:[function(a,b,c){function d(a,b){g.call(this,a,{padding:[2,0],border:[0],layout:{gap:0},bg:{fillAlpha:.4,color:0,borderSize:0,radius:0},message:{padding:[5,7,5,5],border:[0],text:{fontName:"medium",characterSpacing:1,lineSpacing:4},bg:{color:0,fillAlpha:.6,borderSize:0}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new i(a,this.settings.bg),this.message=new h(a,"",this.settings.message),this.addView(this.bg),this.addPanel(f.USE_PS_SIZE,this.message),this.game.on("gui/message",this._message,this)}var e=a("engine"),f=a(201),g=(a(202),a(213)),h=a(211),i=a(232);e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype._message=function(a,b,c){b=b||3500,c=c||3e3,this.message.text=a||"",this.alpha=1,this.messageTween&&this.messageTween.isRunning&&this.messageTween.stop(),this.messageTween=this.game.tweens.create(this),this.messageTween.to({alpha:0},b,e.Easing.Quadratic.Out),this.messageTween.on("complete",this._close,this),this.messageTween.delay(c),this.messageTween.start(),this.game.emit("gui/modal",!0,this,!1,!1)},d.prototype.cancel=function(){this.messageTween.stop()},d.prototype._close=function(){this.game.emit("gui/modal",!1)},b.exports=d},{201:201,202:202,211:211,213:213,232:232,engine:"engine"}],208:[function(a,b,c){function d(a,b){f.call(this,a.game,!0),this.settings=k.mixin(b,{width:256,height:32,padding:[0],border:[0],layout:{ax:i.CENTER,ay:i.TOP,direction:i.VERTICAL,gap:0},label:{padding:[4,2],border:[0],text:{fontName:"full"},bg:{fillAlpha:0,borderSize:0}},stats:{padding:[4,2],border:[0],text:{fontName:"small"},bg:{fillAlpha:0,borderSize:0}},message:{text:{fontName:"medium"},bg:{fillAlpha:0,borderSize:0}},health:{width:80,height:4,label:!1,bg:{fillAlpha:1,color:0,borderSize:0},progress:{fillAlpha:1,color:65331,borderSize:0}}}),this.ship=a,this.layout=new j(this.settings.layout.ax,this.settings.layout.ay,this.settings.layout.direction,this.settings.layout.gap),this.setSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border)}var e=a("engine"),f=a(202),g=a(211),h=a(214),i=a(201),j=a(219),k=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.create=function(){var a=this.game,b=this.ship;this.pinned=new e.Group(this.game),this.pinned.transform=new e.Pinned,this.pinned.position.set(this.ship.pivot.x,this.ship.pivot.y),this.pinned.add(this),this.pivot.set(128,-32),this.ship.add(this.pinned),this.username=new g(a,b.username,this.settings.label),this.username.tint=b.isPlayer?3407667:3381759,this.healthBar=new h(this.game,this.settings.health),this.healthBar.setProgressBar(b.details.health/b.config.stats.health),this.stats=new g(a,"",this.settings.stats),this.addPanel(i.CENTER,this.username),this.addPanel(i.CENTER,this.healthBar),this.addPanel(i.CENTER,this.stats),this.validate(),this.repaint()},d.prototype.select=function(){this.healthBar.renderable=!0,this.stats.renderable=!0},d.prototype.deselect=function(){this.healthBar.renderable=!1,this.stats.renderable=!1},d.prototype.update=function(){var a=this.game.world.scale.x,b=this.settings.width/2,c=-a*(this.ship.chassis.texture.width/2);this.pivot.set(b,c)},d.prototype.updateStats=function(a){this.stats.text=a.kills+"/"+a.disables+"/"+a.assists,this.invalidate(!0)},d.prototype.flash=function(a,b,c,d,f){void 0===b&&(b=16777215),void 0===d&&(d=15),void 0===f&&(f=!1);var h=this.ship,i=this.game.world,j=new g(this.game,a,this.settings.message),k=e.Easing.Quadratic.InOut,l=this.game.tweens.create(j.position),m=this.game.tweens.create(j);j.tint=b,j.alpha=0,j.pivot.set(j.width/2,j.height/2),j.position.set(this.size.width/2,-h.height/2*i.scale.x),f&&j.scale.set(1.5,1.5),this.add(j),l.to({y:j.y-d},2*c||500,k,!0),m.to({alpha:1},c||250,k,!0,0,0,!0),m.once("complete",function(){this.remove(j)},this)},d.prototype.destroy=function(){f.prototype.destroy.call(this),this.username=this.game=this.ship=this.layout=this.settings=void 0},b.exports=d},{201:201,202:202,211:211,214:214,219:219,engine:"engine"}],209:[function(a,b,c){function d(a,b,c){f.call(this,a,this),this.settings=i.mixin(c,{padding:[2],border:[1],bg:{fillAlpha:.75,color:3696824,borderSize:0}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.image=new g(a,b,this.settings.frame),(this.settings.width||this.settings.height)&&(this.image.width=this.settings.width,this.image.height=this.settings.height),this.settings.bg?(this.bg=new h(a,this.settings.bg),this.addView(this.bg)):this.bg={},this.addView(this.image)}var e=a("engine"),f=a(202),g=a(233),h=a(232),i=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.image.width,height:this.image.height}},d.prototype.doLayout=function(){this.image.position.set(this.left,this.top)},Object.defineProperty(d.prototype,"blendMode",{set:function(a){this.image.blendMode=a},get:function(){return this.image.blendMode}}),Object.defineProperty(d.prototype,"tint",{set:function(a){this.image.tint=a},get:function(){return this.image.tint}}),b.exports=d},{202:202,232:232,233:233,engine:"engine"}],210:[function(a,b,c){(function(c){function d(a,b,c){f.call(this,a,b,g.mixin(c,{width:144,height:16,padding:[5,3,3,3],border:[0],color:16777215,password:!1,bg:{fillAlpha:.1,color:0,borderColor:3368601,blendMode:e.BlendMode.ADD},text:{fontName:"full"}})),this._value="",this._placeholder="",this._disabled=!1,this._selected=!1,this.next=null,this.cursor=new e.Graphics(this.game),this.cursor.beginFill(6724044,1),this.cursor.drawRect(0,0,7,this.height),this.cursor.endFill(),this.cursor.position.set(this.left,this.top),this.cursor.visible=!1,this.addChild(this.cursor),this.placeholder=b.toUpperCase(),this.textView.blendMode=e.BlendMode.ADD,this.bg.on("inputUp",this._inputUp,this),this.bg.on("inputOver",this._inputOver,this),this.bg.on("inputOut",this._inputOut,this)}var e=a("engine"),f=a(211),g=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.start=function(){this.bg.inputEnabled=!0,this.bg.input.priorityID=2,this.game.on("gui/focus/retain",this._retain,this)},d.prototype.stop=function(){this.bg.inputEnabled=!1,this.game.removeListener("gui/focus/retain",this._retain)},d.prototype.focus=function(){this.selected=!0,this.timer=this.game.clock.events.loop(250,this._cursor,this),this.game.input.on("keypress",this._keyPress,this),this.game.input.on("keydown",this._keyDown,this),this.cursor.visible=!0,this.game.input.keyboard.addKeyCapture([e.Keyboard.TAB,e.Keyboard.BACKSPACE,e.Keyboard.DELETE,e.Keyboard.ENTER])},d.prototype.blur=function(){this.selected=!1,this.game.clock.events.remove(this.timer),this.game.input.removeListener("keypress",this._keyPress,this),this.game.input.removeListener("keydown",this._keyDown,this),this.cursor.visible=!1,this.game.input.keyboard.removeKeyCapture([e.Keyboard.TAB,e.Keyboard.BACKSPACE,e.Keyboard.DELETE,e.Keyboard.ENTER])},d.prototype._retain=function(a){a!==this&&this.game.emit("gui/focus/release",this)},d.prototype._keyDown=function(a){var b=a.keyCode;switch(b){case e.Keyboard.TAB:this.next&&this.game.emit("gui/focus/retain",this.next);break;case e.Keyboard.ENTER:this.emit("inputEnter",this),this.game.emit("gui/focus/release",this);break;case e.Keyboard.DELETE:case e.Keyboard.BACKSPACE:this.value=this._value.slice(0,this._value.length-1)}},d.prototype._keyPress=function(a,b){var c=this.textView,d=a.keyCode?a.keyCode:a.which;switch(d){default:(c.font.frameKeys[d]>=0||""!==this._value&&d===e.Keyboard.SPACEBAR)&&(this.value+=b)}},d.prototype._inputUp=function(){this.emit("inputUp",this),this.game.emit("gui/focus/retain",this)},d.prototype._inputOver=function(){this.bg.tint=3368601},d.prototype._inputOut=function(){this.bg.tint=16777215},d.prototype._update=function(){this.selected||""!==this._value?(""===this._value?this.textView.visible=!1:(this.textView.visible=!0,this.text=this._parsed()),this.tint=16777215):(this.text=this.placeholder,this.textView.visible=!0,this.tint=8947848),this.cursor.position.x=""!==this._value?this.textView.width+this.left:this.left},d.prototype._cursor=function(){this.cursor.visible=!this.cursor.visible},d.prototype._encrypt=function(){var a,b="",c=this._value.length;for(a=0;a<c;a++)b+="*";return b},d.prototype._parsed=function(){var a=this.settings.password?this._encrypt():this._value,b=a.length,d=this.textView.settings.character,e=this.size.width-this.left-this.right-5,f=d.width+d.spacing.x+d.offset.x,g=c.Math.floor(e/f);return b<g?a:a.slice(b-g)},Object.defineProperty(d.prototype,"placeholder",{set:function(a){this._placeholder=a,this._update()},get:function(){return this._placeholder}}),Object.defineProperty(d.prototype,"value",{set:function(a){this._value=a,this._update()},get:function(){return this._value}}),Object.defineProperty(d.prototype,"selected",{set:function(a){this._selected=a,this._update()},get:function(){return this._selected}}),Object.defineProperty(d.prototype,"disabled",{set:function(a){this._disabled=a},get:function(){return this._disabled}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{211:211,engine:"engine"}],211:[function(a,b,c){(function(c){function d(a,b,c){f.call(this,a,this),b=b||"",this.settings=i.mixin(c,{padding:[6,12],border:[0],color:16777215,bg:{},text:{},align:"left"}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.align=this.settings.align,this.settings.bg&&(this.bg=new h(a,this.settings.bg),this.addView(this.bg)),this.textView=new g(a,b,this.settings.text),this.textView.tint=this.settings.color,this.addView(this.textView)}var e=a("engine"),f=a(202),g=a(234),h=a(232),i=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.textView.width,height:this.textView.height}},d.prototype.doLayout=function(){var a=this.left;"right"===this.align?a=this.size.width-this.textView.width-this.right:"center"===this.align&&(a=c.Math.floor(this.size.width/2-this.textView.width/2)),this.textView.position.set(a,this.top)},Object.defineProperty(d.prototype,"blendMode",{get:function(){return this.textView.blendMode},set:function(a){this.textView.blendMode=a}}),Object.defineProperty(d.prototype,"tint",{get:function(){return this.textView.tint},set:function(a){this.textView.tint=a}}),Object.defineProperty(d.prototype,"text",{get:function(){return this.textView.font.text},set:function(a){this.textView.font.text=""+a}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{202:202,232:232,234:234,engine:"engine"}],212:[function(a,b,c){function d(a,b){f.call(this,a,new g(0,0)),this.settings=i.mixin(b,{padding:[0],border:[0],bg:{fillAlpha:.75,color:0,borderSize:0,radius:0}}),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new h(a,this.settings.bg),this.addView(this.bg)}var e=a("engine"),f=a(202),g=a(223),h=a(232),i=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.empty=function(){var a,b,c=this.panels;if(c.length>0)for(b in c)a=c[b],a.cancel&&a.cancel(),this.removePanel(this.panels[b])},b.exports=d},{202:202,223:223,232:232,engine:"engine"}],213:[function(a,b,c){function d(a,b){switch(f.call(this,a,!0),this.settings=n.mixin(b,{padding:[0],border:[0],layout:{ax:g.LEFT,ay:g.TOP,direction:g.VERTICAL,gap:0,columns:3,stretch:!0},bg:{fillAlpha:1,color:3696824,borderSize:0}}),this.settings.layout.type){case"stack":this.layout=new h;break;case"border":this.layout=new i(this.settings.layout.gap[0],this.settings.layout.gap[1]);break;case"percent":this.layout=new k(this.settings.layout.direction,this.settings.layout.gap,this.settings.layout.stretch);break;case"list":this.layout=new l(this.settings.layout.columns,this.settings.layout.gap[0],this.settings.layout.gap[1]);break;default:this.layout=new j(this.settings.layout.ax,this.settings.layout.ay,this.settings.layout.direction,this.settings.layout.gap)}(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.settings.bg&&(this.bg=new m(a,this.settings.bg),this.addView(this.bg))}var e=a("engine"),f=a(202),g=a(201),h=a(223),i=a(218),j=a(219),k=a(221),l=a(220),m=a(232),n=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d},{201:201,202:202,218:218,219:219,220:220,221:221,223:223,232:232,engine:"engine"}],214:[function(a,b,c){(function(c){function d(a,b){if(f.call(this,a,this),this.value=0,this.settings=j.mixin(b,{width:256,height:16,padding:[1],border:[0],label:{padding:[0],border:[0],bg:!1,text:{fontName:"small"},align:"center"},bg:{fillAlpha:1,color:4157375,borderSize:0},progress:{fillAlpha:1,color:0,borderSize:0}}),!this.settings.width&&!this.settings.height)throw Error("ProgressBar component must set a preferred size");this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.background=new i(a,this.settings.bg),this.progress=new i(a,j.mixin(this.settings.progress,{size:{width:0,height:this.settings.height-this.top-this.bottom}})),this.addView(this.background),this.addView(this.progress),this.settings.label&&(this.label=new h(a,"",this.settings.label),this.addPanel(g.NONE,this.label))}var e=a("engine"),f=a(202),g=a(201),h=a(211),i=(a(219),a(232)),j=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.calcPreferredSize=function(a){return{width:this.settings.width,height:this.settings.height}},d.prototype.doLayout=function(){this.settings.label&&(this.label.setSize(this.size.width-this.right-this.left,this.size.height-this.top-this.bottom),this.label.setLocation(this.left,this.top),this.label.doLayout()),this.progress.position.set(this.left,this.top)},d.prototype.setMinMax=function(a,b){this.min=a,this.max=b},d.prototype.setProgressBar=function(a){var b=this.progress,d=this.label,f=this.min,g=this.max;b.settings.size.width=(this.settings.width-this.left-this.right)*a,b.paint(this.top,this.left,this.bottom,this.right),this.value=a,d&&void 0!==f&&void 0!==g&&(d.text=c.Math.round(this.max*this.value)+"/"+this.max,d.blendMode=a>.5?e.BlendMode.MULTIPLY:e.BlendMode.ADD,d.doLayout())},Object.defineProperty(f.prototype,"percentage",{get:function(){return c.Math.floor(100*this.value)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{201:201,202:202,211:211,219:219,232:232,engine:"engine"}],215:[function(a,b,c){(function(c){function d(a,b,c){this.value=0,this.progressBg=new j(a,l.mixin(c.progress,{color:603243,borderSize:0})),this.progress=new j(a,l.mixin(c.progress,{color:16053492,borderSize:0,blendMode:e.BlendMode.ADD})),f.call(this,a,b,l.mixin(c,{padding:[1,1,1,5],bg:{fillAlpha:1,color:3696824,radius:0},icon:{bg:{highlight:!1,borderSize:0}},hotkey:{key:"",padding:[2],border:[0],text:{fontName:"small"},bg:{color:3696824,fillAlpha:1,borderSize:0,radius:0}},count:{padding:[0],border:[0],bg:{fillAlpha:0,borderSize:0,radius:0}}})),this.addView(this.progressBg),this.addView(this.progress),this.count=new g(a," ",this.settings.count),this.hotkey=new g(a,this.settings.hotkey.key,this.settings.hotkey),this.raster=new k(a,new i(h.USE_PS_SIZE)),this.raster.setPreferredSize(this.settings.width,this.settings.height),this.raster.addPanel(h.NONE,this.hotkey),this.raster.addPanel(h.CENTER,this.count),this.addPanel(h.NONE,this.raster),this.hotkey.setLocation(-2,-2)}var e=a("engine"),f=a(206),g=a(211),h=a(201),i=a(222),j=(a(213),a(232)),k=a(202),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.setProgressBar=function(a){this.value=c.Math.min(1,a),this.recalc(),this.progress.paint()},d.prototype.recalc=function(){var a=this.size,b=this.progressBg.settings,c=this.progress.settings;c.size={width:3,height:a.height*this.value},c.offset={x:a.width-3,y:a.height-a.height*this.value},b.size={width:4,height:a.height},b.offset={x:a.width-4,y:0}},Object.defineProperty(d.prototype,"disabled",{set:function(a){a===!1?this.image.tint=16777215:(this.image.tint=16711680,this.bg.alpha=.75),this._disabled=a},get:function(){return this._disabled}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{201:201,202:202,206:206,211:211,213:213,222:222,232:232,engine:"engine"}],216:[function(a,b,c){function d(a,b,c,d){this.game=a,this.target=b,this.loop=void 0===c||c,this.repeat=d||-1,this.colorData=[],this._repeatCount=0,f.call(this)}var e=a("engine"),f=a(3);d.CACHE={},d.FRAMERATE=60,d.STEPS=100,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.start=function(){this.setTintData(),this.isRunning=!0,this.target.update=this.update.bind(this),this.emit("start",this)},d.prototype.stop=function(){this.emit("stop",this),delete this.target.update},d.prototype.update=function(){this.isRunning&&(this._t--,this._t?this.target.tint=this.colorData[this._t].color:this.loop?this.setTintData():this._repeatCount<this.repeat?(this._repeatCount++,this.setTintData()):this.stop())},d.prototype.setTintData=function(){this._t=this.colorData.length-1,this.target.tint=this.colorData[this._t].color},d.prototype.setColor=function(a,b,c,f,g){var h,i,j,k;if(void 0===a&&(minX=16777215),void 0===b&&(maxX=16777215),void 0===c&&(c=1e3),void 0===f&&(f=e.Easing.Linear.None),void 0===g&&(g=!1),this.startColor=a,this.endColor=b,h=""+a+(""+b)+(""+c)+(""+f)+(""+g),d.CACHE[h])this.colorData=d.CACHE[h];else if(c>0&&a!==b){for(i={step:0},j=this.game.tweens.create(i).to({step:d.STEPS},c,f),j.yoyo(g),d.CACHE[h]=this.colorData=j.generateData(d.FRAMERATE),k=0;k<this.colorData.length;k++)this.colorData[k].color=e.Color.interpolateColor(a,b,d.STEPS,this.colorData[k].step);this.colorData.reverse()}},b.exports=d},{3:3,engine:"engine"}],217:[function(a,b,c){(function(c){function d(a){this.game=a,this.game.on("gui/registration",this._show,this),this.sectorState=this.game.state.states.sector,this.modalElement=c.document.getElementById("registration-login"),this.cancelElement=c.document.getElementById("registration-cancel"),this.submitElement=c.document.getElementById("registration-submit"),this.startElement=c.document.getElementById("registration-start"),this.doneElement=c.document.getElementById("registration-done"),this.formUsernameElement=c.document.getElementById("registration-username"),this.formEmailElement=c.document.getElementById("registration-email"),this.pass1Element=c.document.getElementById("registration-pass1"),this.pass2Element=c.document.getElementById("registration-pass2"),this.errorElement=c.document.getElementById("registration-error"),this.modalElement.addEventListener("click",this._hideBind=this._hide.bind(this)),this.cancelElement.addEventListener("click",this._hideBind),this.submitElement.addEventListener("click",this._submitBind=this._submit.bind(this))}var e=(a("engine"),a("xhr"));d.prototype.constructor=d,d.prototype.destroy=function(){this.game.removeListener("gui/registration",this._show),this.modalElement.removeEventListener("click",this._hideBind),this.cancelElement.removeEventListener("click",this._hideBind),this.submitElement.removeEventListener("click",this._submitBind),this.modalElement.parentNode.removeChild(this.modalElement),this.game=this.sectorState=this.modalElement=this.cancelElement=this.submitElement=this.startElement=this.doneElement=this.formUsernameElement=this.formEmailElement=this.pass1Element=this.pass2Element=this.errorElement=void 0},d.prototype._show=function(){this.modalElement.style.display="block",this.sectorState.scrollLock=!0},d.prototype._hide=function(a){"registration-login"!==a.target.id&&"registration-cancel"!==a.target.id||(this.modalElement.style.display="none",this.sectorState.scrollLock=!1)},d.prototype._error=function(a,b){switch(a){case"email":this.formEmailElement.parentNode.style.border="solid 1px #f00";break;case"userslug":case"username":this.formUsernameElement.parentNode.style.border="solid 1px #f00";break;case"password":this.pass1Element.parentNode.style.border="solid 1px #f00",this.pass2Element.parentNode.style.border="solid 1px #f00"}this.errorElement.innerHTML+="<p>"+a+": "+b+"</p>"},d.prototype._submit=function(){var a=this;a.startElement.style.display="none",this.formUsernameElement.parentNode.style.border="",this.formEmailElement.parentNode.style.border="",this.pass1Element.parentNode.style.border="",this.pass2Element.parentNode.style.border="",this.errorElement.innerHTML="",this.pass1Element.value===this.pass2Element.value?e({method:"post",body:JSON.stringify({username:this.formUsernameElement.value,email:this.formEmailElement.value,password:this.pass1Element.value}),uri:"/register",headers:{"Content-Type":"application/json"}},function(b,c,d){var e,f,g,h=JSON.parse(d);if(h.error){e=h.data,a.startElement.style.display="",a.errorElement.innerHTML="";for(f in e)for(g in e[f])a._error(f,e[f])}else a.startElement.style.display="none",a.doneElement.style.display="block"}):(a.startElement.style.display="",this.pass1Element.parentNode.style.border="solid 1px #f00",this.pass2Element.parentNode.style.border="solid 1px #f00",this.errorElement.innerHTML="Passwords must match!")},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{engine:"engine",xhr:"xhr"}],218:[function(a,b,c){function d(a,b){this.hgap=a||0,this.vgap=b||0}var e=a(201);d.prototype.calcPreferredSize=function(a){var b,c,d,f,g,h,i,j,k,l={width:0,height:0};for(k=0;k<a.panels.length;k++)if(i=a.panels[k],i.visible===!0)switch(j=i.constraint){case e.CENTER:b=i;break;case e.TOP:f=i;break;case e.BOTTOM:g=i;break;case e.LEFT:c=i;break;case e.RIGHT:d=i;break;default:throw Error("Invalid constraints: "+j)}return void 0!=d&&(h=d.getPreferredSize(),l.width+=h.width+this.hgap,l.height=h.height>l.height?h.height:l.height),void 0!=c&&(h=c.getPreferredSize(),l.width+=h.width+this.hgap,l.height=h.height>l.height?h.height:l.height),void 0!=b&&(h=b.getPreferredSize(),l.width+=h.width,l.height=h.height>l.height?h.height:l.height),void 0!=f&&(h=f.getPreferredSize(),l.width=h.width>l.width?h.width:l.width,l.height+=h.height+this.vgap),void 0!=g&&(h=g.getPreferredSize(),l.width=h.width>l.width?h.width:l.width,l.height+=h.height+this.vgap),l},d.prototype.doLayout=function(a){var b,c,d,f,g,h,i,j,k=a.top,l=a.size.height-a.bottom,m=a.left,n=a.size.width-a.right;for(i=0;i<a.panels.length;i++)if(f=a.panels[i],f.visible===!0)switch(g=f.constraint){case e.CENTER:b=f;break;case e.TOP:j=f.getPreferredSize(),f.setLocation(m,k),f.setSize(n-m,j.height),k+=j.height+this.vgap;break;case e.BOTTOM:j=f.getPreferredSize(),f.setLocation(m,l-j.height),f.setSize(n-m,j.height),l-=j.height+this.vgap;break;case e.LEFT:c=f;break;case e.RIGHT:d=f;break;default:throw Error("Invalid constraints: "+g)}void 0!=d&&(h=d.getPreferredSize(),d.setLocation(n-h.width,k),d.setSize(h.width,l-k),n-=h.width+this.hgap),void 0!=c&&(h=c.getPreferredSize(),c.setLocation(m,k),c.setSize(h.width,l-k),m+=h.width+this.hgap),void 0!=b&&(b.setLocation(m,k),b.setSize(n-m,l-k))},b.exports=d},{201:201}],219:[function(a,b,c){function d(a,b,c,d){this.ax=a||e.LEFT,this.ay=b||e.TOP,this.direction=c||e.HORIZONTAL,this.gap=d||0,this.stretchLast=!1}var e=a(201);d.prototype.calcPreferredSize=function(a){var b,c,d,f,g={width:0,height:0},h=0;for(f=0;f<a.panels.length;f++)c=a.panels[f],c.visible===!0&&(d=c.getPreferredSize(),this.direction===e.HORIZONTAL?(g.width+=d.width,
g.height=d.height>g.height?d.height:g.height):(g.width=d.width>g.width?d.width:g.width,g.height+=d.height),h++);return b=this.gap*(h>0?h-1:0),this.direction===e.HORIZONTAL?g.width+=b:g.height+=b,g},d.prototype.doLayout=function(a){var b,c,d,f,g=0,h=this.calcPreferredSize(a),i=a.top,j=a.left,k=null,l=a.size.width-j-a.right,m=a.size.height-i-a.bottom,n=(this.ax==e.RIGHT?l-h.width:this.ax==e.CENTER?~~((l-h.width)/2):0)+j,o=(this.ay==e.BOTTOM?m-h.height:this.ay==e.CENTER?~~((m-h.height)/2):0)+i;for(f=0;f<a.panels.length;f++)b=a.panels[f],b.visible===!0&&(c=b.getPreferredSize(),d=b.constraint,this.direction===e.HORIZONTAL?(d===e.STRETCH?c.height=a.size.height-i-a.bottom:d===e.CENTER?g=~~((h.height-c.height)/2):d===e.BOTTOM&&(g=h.height-c.height),b.setLocation(n,o+g),n+=c.width+this.gap):(d===e.STRETCH?c.width=a.size.width-j-a.right:d===e.CENTER?g=~~((h.width-c.width)/2):d===e.RIGHT&&(g=h.width-c.width),b.setLocation(n+g,o),o+=c.height+this.gap),b.setSize(c.width,c.height),k=b);null!==k&&this.stretchLast===!0&&(this.direction===e.HORIZONTAL?k.setSize(a.size.width-k.x-a.right,k.size.height):k.setSize(k.width,a.size.height-k.y-a.bottom))},b.exports=d},{201:201}],220:[function(a,b,c){function d(a,b,c){this.columns=a||3,this.hgap=b||0,this.vgap=c||0}a(201);d.prototype.calcPreferredSize=function(a){var b,c,d,e=a.panels,f=e.length,g={width:0,height:0},h=0,i=0,j=this.hgap,k=this.vgap,l=this.columns;for(d=0;d<f;d++)b=e[d],b.visible===!0&&(c=b.getPreferredSize(),l>0?(c.height+k>i&&(i=c.height+k),h+=c.width+(l>1?j:0),l--):(g.width<h&&(g.width=h),g.height+=i,l=this.columns,h=0));return g.width<h&&(g.width=h),g.height+=i-k,g},d.prototype.doLayout=function(a){var b,c,d,e=(this.gap,a.panels),f=e.length,g=a.top,h=a.left,i=a.size.width-h-a.right,j=(a.size.height-g-a.bottom,h),k=g,l=this.hgap,m=this.vgap;for(d=0;d<f;d++)b=e[d],b.visible===!0&&(c=b.getPreferredSize(),j+c.width>i+m&&(j=h,k+=c.height+m),b.setLocation(j,k),b.setSize(c.width,c.height),j+=c.width+l)},b.exports=d},{201:201}],221:[function(a,b,c){function d(a,b,c){this.direction=a||e.HORIZONTAL,this.gap=b||0,this.stretch=c||!0}var e=a(201);d.prototype.calcPreferredSize=function(a){var b,c,d=0,f=a.panels.length,g=this.gap*(0===f?0:f-1);for(c=0;c<f;c++)b=a.panels[c].getPreferredSize(),this.direction==e.HORIZONTAL?(b.height>d&&(d=b.height),g+=b.width):(b.width>d&&(d=b.width),g+=b.height);return this.direction==e.HORIZONTAL?{width:g,height:d}:{width:d,height:g}},d.prototype.doLayout=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o=a.right,p=a.top,q=a.bottom,r=a.left,s=a.panels.length,t=-this.gap*(0===s?0:s-1);for(this.direction==e.HORIZONTAL?(t+=a.size.width-r-o,f=r):(t+=a.size.height-p-q,f=p),n=0;n<s;n++)b=a.panels[n],c=b.constraint,d=c==e.USE_PS_SIZE,this.direction==e.HORIZONTAL?(g=s-1==n?a.size.width-o-f:d?b.getPreferredSize().width:~~(t*c/100),h=p,i=a.size.height-p-q,this.stretch===!1&&(j=i,i=b.getPreferredSize().height,h=p+~~((j-i)/2)),b.setLocation(f,h),b.setSize(g,i)):(g=s-1==n?a.size.height-q-f:d?b.getPreferredSize().height:~~(t*c/100),k=r,l=a.size.width-r-o,this.stretch===!1&&(m=l,l=b.getPreferredSize().width,k=r+~~((m-l)/2)),b.setLocation(k,f),b.setSize(l,g)),f+=g+this.gap},b.exports=d},{201:201}],222:[function(a,b,c){function d(a){this.flag=a?a:e.USE_PS_SIZE}var e=a(201);d.prototype.calcPreferredSize=function(a){var b,c,d,f,g,h={width:0,height:0},i=(this.flag&e.USE_PS_SIZE)>0;for(g=0;g<a.panels.length;g++)b=a.panels[g],b.visible===!0&&(c=i?b.getPreferredSize():{width:b.width,height:b.height},d=b.x+c.width,f=b.y+c.height,d>h.width&&(h.width=d),f>h.height&&(h.height=f));return h},d.prototype.doLayout=function(a){var b,c,d,f,g,h,i,j=a.size.width-a.right,k=a.size.height-a.bottom,l=(this.flag&e.USE_PS_SIZE)>0;for(i=0;i<a.panels.length;i++)b=a.panels[i],d=0,f=0,b.visible===!0&&(l?(c=b.getPreferredSize(),d=c.width,f=c.height):(d=b.width,f=b.height),b.constraint&&((b.constraint&e.HORIZONTAL)>0&&(d=j-b.x),(b.constraint&e.VERTICAL)>0&&(f=k-b.y)),b.setSize(d,f),b.constraint&&(g=b.x,h=b.y,b.constraint==e.CENTER?(g=(a.size.width-d)/2,h=(a.size.height-f)/2):((b.constraint&e.TOP)>0?h=0:(b.constraint&e.BOTTOM)>0&&(h=a.size.height-f),(b.constraint&e.LEFT)>0?g=0:(b.constraint&e.RIGHT)>0&&(g=a.size.width-d)),b.setLocation(g,h)))},b.exports=d},{201:201}],223:[function(a,b,c){function d(){}var e=a(201);d.prototype.calcPreferredSize=function(a){var b,c,d,e=0,f=0;for(d=0;d<a.panels.length;d++)b=a.panels[d],b.visible===!0&&(c=b.getPreferredSize(),c.width>e&&(e=c.width),c.height>f&&(f=c.height));return{width:e,height:f}},d.prototype.doLayout=function(a){var b,c,d,f=a.top,g=a.size.height-a.bottom-f,h=a.left,i=a.size.width-a.right-h;for(d=0;d<a.panels.length;d++)b=a.panels[d],b.visible===!0&&(constraint=b.constraint,constraint==e.USE_PS_SIZE?(c=b.getPreferredSize(),b.setSize(c.width,c.height),b.setLocation(h+~~((i-c.width)/2),f+~~((g-c.height)/2))):(b.setSize(i,g),b.setLocation(h,f)))},b.exports=d},{201:201}],224:[function(a,b,c){function d(a){f.call(this,a,{padding:[0,0,5,0],border:[0],layout:{ax:e.CENTER,ay:e.BOTTOM,direction:e.HORIZONTAL,gap:3,stretch:!0},bg:!1,pane:{bg:!1}}),this.vitalsPane=new g(a),this.addPanel(e.NONE,this.vitalsPane)}var e=(a("engine"),a(201)),f=a(213),g=(a(219),a(225),a(231));a(227);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d},{201:201,213:213,219:219,225:225,227:227,231:231,engine:"engine"}],225:[function(a,b,c){(function(c){function d(a,b,c){f.call(this,a,new i(0,0)),this.socket=a.net.socket,this.data={},this.buttons={},this.config=this.game.cache.getJSON("item-configuration").enhancement,this.settings=l.mixin(c,{padding:[1],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:0},content:{padding:[3],bg:{fillAlpha:.8,color:0,radius:0,borderSize:0,blendMode:e.BlendMode.MULTIPLY},layout:{direction:g.HORIZONTAL,gap:3}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new j(a,this.settings.bg),this.content=new h(a,this.settings.content),this.content.setPreferredSize(207,50),this.addView(this.bg),this.addPanel(g.CENTER,this.content),this.game.on("gui/player/select",this._playerSelect,this),this.game.on("enhancement/started",this._enhancmentStarted,this),this.game.on("enhancement/cancelled",this._enhancmentCancelled,this)}var e=a("engine"),f=a(202),g=a(201),h=a(213),i=(a(211),a(218)),j=a(232),k=a(215),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.addContent=function(a,b){this.content.addPanel(a,b)},d.prototype.create=function(a,b){return new k(game,"texture-atlas",{icon:{padding:[0],border:[0],width:42,height:42,frame:"enhancement-"+a+".png",bg:{fillAlpha:0,borderSize:0,radius:0}},hotkey:{key:""+b}})},d.prototype._select=function(a){a.tint=16746496,this.socket.emit("enhancement/start",{ship:this.data.uuid,enhancement:a.id})},d.prototype._enhancmentStarted=function(a){if(a.ship===this.data.uuid){var b,c,d=this.game,e=this.buttons[a.enhancement],f=this.config[a.enhancement],g={count:0,total:4*f.cooldown,button:e};b=d.clock.create(),b.repeat(250,g.total,this._updateCooldown,g),b.on("complete",function(){g.button.disabled=!1,g.button.count.visible=!1,g.button.setProgressBar(1)}),b.start(),f.active&&(c={count:10*f.active,total:10*f.active,button:e},b=d.clock.create(),b.repeat(100,c.total,this._updateActive,c),b.start()),e.disabled=!0,e.count.text=f.cooldown,e.count.visible=!0,e.invalidate(!0)}},d.prototype._enhancmentCancelled=function(a){var b,c=this.game,d=this.buttons[a.enhancement];d.disabled=!1,d.count.visible=!1,d.tint=16746496,b=c.clock.events.repeat(200,5,function(){switch(d.tint){case 16777215:return d.tint=16746496;default:return d.tint=16777215}})},d.prototype._updateCooldown=function(){this.count++,this.button.count.text=c.Math.floor((this.total-this.count)/4+1),this.button.invalidate(!0)},d.prototype._updateActive=function(){this.count--,this.button.setProgressBar(this.count/this.total)},d.prototype._playerSelect=function(a){var b,d,e,f=a.enhancements;if(this.data.uuid)this.data=a;else{this.data=a;for(e in f)b=f[e],d=this.create(b,c.parseInt(e)+1),d.id=b,d.on("inputUp",this._select,this),d.setProgressBar(1),d.start(),this.buttons[b]=d,this.addContent(g.NONE,d);this.invalidate(!0)}},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{201:201,202:202,211:211,213:213,215:215,218:218,232:232,engine:"engine"}],226:[function(a,b,c){function d(a,b){i.call(this,a,{padding:[0],layout:{ax:e.CENTER,ay:e.TOP,direction:e.VERTICAL,gap:5,stretch:!1},bg:{color:3368601,fillAlpha:.2,fillAlpha:0,borderSize:0,radius:0},pane:{width:128,height:7,padding:[0],layout:{type:"border",gap:[5,0]},bg:{fillAlpha:0}},label:{padding:[0],text:{fontName:"medium",tint:6728447},bg:{fillAlpha:0,borderAlpha:0}}}),this.menuPane=new h(a),this.userPane=new g(a),this.loginPane=new f(a),this.loginPane.start(),this.infoPane2=new i(a,this.settings.pane),this.fpsText=new j(a,"60 fps",this.settings.label),this.pingText=new j(a,"0 ping",this.settings.label),this.versionText=new j(a,"solar crusaders v0.3.2-alpha.6",this.settings.label),this.infoPane2.addPanel(e.RIGHT,this.fpsText),this.infoPane2.addPanel(e.LEFT,this.pingText),this.addPanel(e.CENTER,this.userPane),this.addPanel(e.CENTER,this.loginPane),this.addPanel(e.STRETCH,this.menuPane),this.addPanel(e.CENTER,this.versionText),this.addPanel(e.CENTER,this.infoPane2),a.clock.events.loop(500,this._updateInfo,this)}var e=(a("engine"),a(201)),f=a(228),g=a(230),h=a(229),i=a(213),j=a(211);a(209),a(205);d.prototype=Object.create(i.prototype),d.prototype.constructor=d,d.prototype.login=function(a){this.loginPane.login(),this.menuPane.login(),this.userPane.login(a)},d.prototype.logout=function(){this.loginPane.logout(),this.userPane.logout(),this.menuPane.logout()},d.prototype._updateInfo=function(){this.fpsText.text=this.game.clock.fps+" fps",this.pingText.text=this.game.net.rtt+" rtt",this.infoPane2.invalidate(!0)},b.exports=d},{201:201,205:205,209:209,211:211,213:213,228:228,229:229,230:230,engine:"engine"}],227:[function(a,b,c){function d(a,b){g.call(this,a,i.mixin(b,{padding:[1],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:0},content:{padding:[1],bg:{fillAlpha:.8,color:0,radius:0,borderSize:0,blendMode:e.BlendMode.MULTIPLY},layout:{gap:2}},inventory:{padding:[0],layout:{type:"list",gap:[1,1],columns:4},bg:{fillAlpha:0}},inventoryButton:{padding:[1],label:{padding:[4,10],text:{fontName:"small"},align:"center",bg:{highlight:!1,borderSize:0,radius:0,blendMode:e.BlendMode.MULTIPLY}},bg:{radius:0,alertColor:0}}})),this.content=new g(a,this.settings.content),this.itemPane=new g(a,this.settings.inventory),this.inventoryButton=new h(a,"inventory",this.settings.inventoryButton),this.inventoryButton.on("inputUp",this._fitting,this),this.addPanel(f.NONE,this.content),this.content.addPanel(f.NONE,this.itemPane),this.content.addPanel(f.STRETCH,this.inventoryButton),this.create()}var e=a("engine"),f=a(201),g=a(213),h=a(205),i=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.create=function(){var a,b=8;for(a=0;a<b;a++)this.itemPane.addPanel(f.NONE,this.createEmptyPane())},d.prototype.createEmptyPane=function(){return new g(this.game,{width:24,height:24,bg:{fillAlpha:.75,color:0,borderSize:0}})},d.prototype._fitting=function(){this.game.emit("ship/fitting")},b.exports=d},{201:201,205:205,213:213,engine:"engine"}],228:[function(a,b,c){function d(a,b){h.call(this,a,{padding:[1],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:f.BlendMode.ADD,radius:0},content:{padding:[3,4,4,3],layout:{direction:g.HORIZONTAL,gap:4},bg:{fillAlpha:.8,color:0,radius:0,borderSize:0,blendMode:f.BlendMode.MULTIPLY}},login:{padding:[1],border:[0],bg:{radius:0,color:3368601,fillAlpha:1},label:{padding:[4,5,3,5],bg:{fillAlpha:.2,color:0,radius:0,borderSize:0,blendMode:f.BlendMode.MULTIPLY},text:{fontName:"full"}}}}),this.content=new h(a,this.settings.content),this.usernameInput=new i(a,"username"),this.passwordInput=new i(a,"password",{password:!0}),this.usernameInput.next=this.passwordInput,this.passwordInput.next=this.usernameInput,this.passwordInput.on("inputEnter",this._login,this),this.loginButton=new j(a,"login",this.settings.login),this.loginButton.on("inputUp",this._login,this),this.content.addPanel(g.NONE,this.usernameInput),this.content.addPanel(g.NONE,this.passwordInput),this.content.addPanel(g.NONE,this.loginButton),this.addPanel(g.STRETCH,this.content)}var e=a("xhr"),f=a("engine"),g=a(201),h=a(213),i=a(210),j=a(205);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.start=function(){this.loginButton.start(),this.usernameInput.start(),this.passwordInput.start()},d.prototype.stop=function(){this.loginButton.stop(),this.usernameInput.stop(),this.passwordInput.stop()},d.prototype.login=function(){this.visible=!1,this.invalidate(!0)},d.prototype.logout=function(){this.visible=!0,this.invalidate(!0)},d.prototype._login=function(){var a=this;""!==this.usernameInput.value&&""!==this.passwordInput.value?e({method:"post",body:JSON.stringify({username:this.usernameInput.value,password:this.passwordInput.value}),uri:"/login",headers:{"Content-Type":"application/json"}},function(b,c,d){var e=JSON.parse(d),f=e.user,g=e.error;if(g)switch(g){case"[[error:invalid-credentials]]":a.game.emit("gui/alert","you have entered invalid login credentials\nonly 5 login attempts allowed");break;case"[[error:user-banned]]":a.game.emit("gui/alert","your account has been banned\nplease contact support");break;case"[[error:ip-locked]]":a.game.emit("gui/alert","you are temporarily blocked for too many logins\nplease try again later");break;case"[[error:server-locked]]":a.game.emit("gui/alert","the server is temporarily locked to new logins");break;case"[[error:unknown-error]]":default:a.game.emit("gui/alert","an unknown error has occurred\nplease try again later")}else f&&a.game.emit("gui/login",f)}):a.game.emit("gui/alert","you have not entered valid login credentials")},b.exports=d},{201:201,205:205,210:210,213:213,engine:"engine",xhr:"xhr"}],229:[function(a,b,c){(function(c){function d(a,b){g.call(this,a,{padding:[0],layout:{ax:f.CENTER,ay:f.CENTER,direction:f.HORIZONTAL,gap:5},bg:{fillAlpha:0,color:0,radius:0},button:{padding:[1],border:[0],bg:{radius:0,fillAlpha:1,color:3696824,blendMode:e.BlendMode.ADD},label:{padding:[5,24],bg:{highlight:!1,fillAlpha:.8,color:0,blendMode:e.BlendMode.MULTIPLY,borderSize:0,radius:0},text:{fontName:"medium"}}}}),this.homeButton=new h(a,"home",this.settings.button),this.forumsButton=new h(a,"forums",this.settings.button),this.inviteButton=new h(a,"invite friends",this.settings.button),this.registerButton=new h(a,"register",i.mixin({label:{padding:[8,16]}},this.settings.button)),this.homeButton.on("inputUp",this._home),this.inviteButton.on("inputUp",this._invite),this.forumsButton.on("inputUp",this._forums),this.registerButton.on("inputUp",this._register,this),this.addPanel(f.CENTER,this.homeButton),this.addPanel(f.CENTER,this.registerButton),this.addPanel(f.CENTER,this.inviteButton),this.addPanel(f.CENTER,this.forumsButton)}var e=a("engine"),f=a(201),g=a(213),h=a(205),i=e.Class;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,d.prototype.login=function(){this.registerButton.stop(),this.registerButton.visible=!1,this.inviteButton.start(),this.inviteButton.visible=!0,this.inviteButton.alert(),this.invalidate(!0)},d.prototype.logout=function(){this.registerButton.start(),this.registerButton.visible=!0,this.inviteButton.stop(),this.inviteButton.visible=!1,this.invalidate(!0)},d.prototype._invite=function(){this.game.emit("gui/message","this feature is not yet supported",1e3,1e3)},d.prototype._home=function(){c.document.location.href="http://solarcrusaders.com/"},d.prototype._register=function(){this.game.emit("gui/registration")},d.prototype._forums=function(){c.document.location.href="http://forums.solarcrusaders.com/"},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{201:201,205:205,213:213,engine:"engine"}],230:[function(a,b,c){function d(a,b){h.call(this,a,{padding:[1],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:f.BlendMode.ADD,radius:0},user:{padding:[3,4,4,3],layout:{direction:g.HORIZONTAL,gap:4},bg:{fillAlpha:.8,color:0,radius:0,borderSize:0,blendMode:f.BlendMode.MULTIPLY}},edition:{padding:[5,5,4,5],border:[0],bg:{color:3368601,fillAlpha:1,radius:0,borderSize:0,blendMode:f.BlendMode.ADD},text:{fontName:"full"}},label:{padding:[5,10,4,10],bg:{fillAlpha:0,radius:0,borderSize:0},text:{fontName:"full"}},icon:{border:[0],bg:!1},logout:{padding:[1],border:[0],bg:{radius:0,color:3368601,fillAlpha:1,blendMode:f.BlendMode.ADD},label:{padding:[4,5,3,5],bg:{fillAlpha:.2,color:0,radius:0,borderSize:0,blendMode:f.BlendMode.MULTIPLY},text:{fontName:"full"}}}}),this.user=new h(a,this.settings.user),this.logoutButton=new k(a,"logout",this.settings.logout),this.logoutButton.on("inputUp",this._logout,this),this.editionLabel=new i(a,"",this.settings.edition),this.usernameLabel=new i(a,"",this.settings.label),this.usernameLabel.tint=65280,this.creditsImage=new j(a,"texture-atlas",l.mixin({padding:[1,10,0,0],frame:"icon-credits.png"},this.settings.icon)),this.reputationImage=new j(a,"texture-atlas",l.mixin({padding:[2,10,0,0],frame:"icon-reputation.png"},this.settings.icon)),this.killsImage=new j(a,"texture-atlas",l.mixin({padding:[1,10,0,0],frame:"icon-kills.png"},this.settings.icon)),this.creditsLabel=new i(a,"0.00",this.settings.label),this.reputationLabel=new i(a,"0",this.settings.label),this.killsLabel=new i(a,"0/0/0",this.settings.label),this.user.addPanel(g.NONE,this.usernameLabel),this.user.addPanel(g.NONE,this.creditsImage),this.user.addPanel(g.NONE,this.creditsLabel),this.user.addPanel(g.NONE,this.reputationImage),this.user.addPanel(g.NONE,this.reputationLabel),this.user.addPanel(g.NONE,this.killsImage),this.user.addPanel(g.NONE,this.killsLabel),this.user.addPanel(g.NONE,this.logoutButton),this.addPanel(g.STRETCH,this.user),this.game.on("gui/player/select",this._playerSelect,this)}var e=a("xhr"),f=a("engine"),g=a(201),h=a(213),i=a(211),j=a(209),k=(a(210),a(205)),l=f.Class;d.prototype=Object.create(h.prototype),d.prototype.constructor=d,d.prototype.start=function(){},d.prototype.stop=function(){},d.prototype.login=function(a){this._updateUser(a),this._updateEdition(a),this.invalidate(!0)},d.prototype.logout=function(){this._updateUser(),this.invalidate(!0)},d.prototype._updateUser=function(){var a=a||this.game.auth.user;this.usernameLabel.text=a.username,this.creditsLabel.text=f.Math.formatMoney(a.credits),this.reputationLabel.text=a.reputation},d.prototype._updateEdition=function(a){var b,c=a.edition;switch(c){case"captain":b="alpha";break;case"commander":b="alpha";break;case"lieutenant":b="beta";break;case"none":b="alpha";break;default:b=c}this.editionLabel.text=b.toUpperCase()},d.prototype._playerSelect=function(a){this.data&&this.data.removeListener("data",this._updateStats,this),this.data=a,this.data.on("data",this._updateStats,this),this._updateStats(a)},d.prototype._updateStats=function(a){(a.kills||a.disables||a.assists)&&(this.killsLabel.text=this.data.kills+"/"+this.data.disables+"/"+this.data.assists,this.invalidate(!0))},d.prototype._logout=function(){var a=this,b={method:"get",uri:"/logout",headers:{"Content-Type":"application/json"}};e(b,function(b,c,d){var e=JSON.parse(d),f=(e.user,b||e.error);f&&a.game.emit("gui/alert","an unknown error has occurred"),a.game.emit("gui/logout")})},b.exports=d},{201:201,205:205,209:209,210:210,211:211,213:213,engine:"engine",xhr:"xhr"}],231:[function(a,b,c){(function(c){function d(a,b){f.call(this,a,new j(0,0)),this.settings=l.mixin(b,{padding:[0,1,1,1],border:[0],bg:{fillAlpha:1,color:3696824,borderSize:0,blendMode:e.BlendMode.ADD,radius:0},content:{padding:[1],bg:{color:0},layout:{direction:g.VERTICAL,gap:1}},healthBar:{width:205,height:7,padding:[0],label:{color:3368601,padding:[1],text:{fontName:"small"}},bg:{fillAlpha:.25,color:65280},progress:{color:65280}},energyBar:{width:205,height:7,padding:[0],label:{color:3368601,padding:[1],text:{fontName:"small"}},bg:{color:16755200,fillAlpha:.25},progress:{color:16755200}}}),(this.settings.width||this.settings.height)&&this.setPreferredSize(this.settings.width,this.settings.height),this.setPadding.apply(this,this.settings.padding),this.setBorder.apply(this,this.settings.border),this.bg=new k(a,this.settings.bg),this.content=new h(a,this.settings.content),this.healthBar=new i(a,this.settings.healthBar),this.healthBar.setProgressBar(1),this.energyBar=new i(a,this.settings.energyBar),this.energyBar.setProgressBar(1),this.addContent(g.NONE,this.healthBar),this.addContent(g.NONE,this.energyBar),this.addView(this.bg),this.addPanel(g.CENTER,this.content),this.game.on("gui/player/select",this._playerSelect,this)}var e=a("engine"),f=a(202),g=a(201),h=a(213),i=(a(211),a(214)),j=a(218),k=a(232),l=e.Class;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.addContent=function(a,b){this.content.addPanel(a,b)},d.prototype._playerSelect=function(a){var b=a.config.ship.stats;this.data&&this.data.removeListener("data",this._updateVitals,this),this.data=a,this.data.on("data",this._updateVitals,this),this.healthBar.setMinMax(0,b.health),this.energyBar.setMinMax(0,b.energy),this._updateVitals(a)},d.prototype._updateVitals=function(a){var b=c.Math,d=this.data.config.ship.stats,e=this.healthBar,f=this.energyBar;a.health&&e.setProgressBar(b.min(1,a.health/d.health)),a.energy&&f.setProgressBar(b.min(1,a.energy/d.energy))},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{201:201,202:202,211:211,213:213,214:214,218:218,232:232,engine:"engine"}],232:[function(a,b,c){function d(a,b){g.call(this,a),f.call(this),this.settings=h.mixin(b,{color:3355443,fillAlpha:1,blendMode:e.BlendMode.NORMAL,radius:0,borderSize:1,borderColor:0,borderAlpha:1}),this.fillAlpha=this.settings.fillAlpha,this.blendMode=this.settings.blendMode,this._painted=!1}var e=a("engine"),f=a(203),g=e.Graphics,h=e.Class;d.prototype=Object.create(g.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,d.prototype.paint=function(a,b,c,d){var e=this.settings.size?this.settings.size:this.parent.size,f=this.settings.offset?this.settings.offset:{x:0,y:0},g=this.settings,h=g.radius>0?"drawRoundedRect":"drawRect";(this._painted||g.highlight||g.fillAlpha>0||g.borderSize>0&&g.borderAlpha>0)&&(this.clear(),this._painted=!1),g.highlight&&(this.lineStyle(0),this.beginFill(g.highlight,g.highlightAlpha?g.highlightAlpha:1),this[h](f.x,f.y,e.width,e.height/2,g.radius),this.endFill(),this._painted=!0),g.borderSize>0&&g.borderAlpha>0&&this.lineStyle(g.borderSize,g.borderColor,g.borderAlpha),g.fillAlpha>0&&this.beginFill(g.color,g.fillAlpha),(g.fillAlpha>0||g.borderSize>0&&g.borderAlpha>0)&&(this[h](f.x,f.y,e.width,e.height,g.radius),this._painted=!0),g.fillAlpha>0&&this.endFill()},b.exports=d},{203:203,engine:"engine"}],233:[function(a,b,c){function d(a,b,c){g.call(this,a,b,c),f.call(this)}var e=a("engine"),f=a(203),g=e.Sprite;d.prototype=Object.create(g.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,b.exports=d},{203:203,engine:"engine"}],234:[function(a,b,c){function d(a,b,c){g.call(this,a),f.call(this),this.defaultFont=c&&c.fontName?c.fontName:"medium",this.fonts={full:{fontName:"full",multiline:!0,charset:e.Font.CHAR_SET_FULL,character:{width:6,height:8,size:0,spacing:{x:0,y:0},offset:{x:0,y:0}}},medium:{fontName:"medium",multiline:!0,autouppercase:!0,character:{width:8,height:7,size:0,spacing:{x:0,y:0},offset:{x:0,y:0}}},small:{fontName:"small",multiline:!0,autouppercase:!0,character:{width:5,height:5,size:0,spacing:{x:0,y:0},offset:{x:0,y:0}}}},this.settings=h.mixin(c,this.fonts[this.defaultFont]),this.font=new e.Font(a,this.settings.fontName,this.settings),this.font.text=b,this.texture=this.font.texture}var e=a("engine"),f=a(203),g=e.Sprite,h=e.Class;d.prototype=Object.create(e.Sprite.prototype),d.prototype.mixinPrototype(f.prototype),d.prototype.constructor=d,b.exports=d},{203:203,engine:"engine"}],235:[function(a,b,c){(function(a){function c(){}c.getQueryParameter=function(a,b){var d=c.getQueryParameters();return d[a]?"false"!==d[a]&&("true"===d[a]||d[a]):b},c.getQueryParameters=function(){var b=a.location.search.substring(1).replace(/\+/g," "),c=function(a){var b,c,d,e=a.replace(/;/g,"&").split("&");for(a={},b=0;b<e.length;b++)d=e[b].split("=",2),c=unescape(d[0]),d.length>1?a[c]=unescape(d[1]):a[c]=!0;return a};return c(b)},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],236:[function(a,b,c){function d(a){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var b=a.slice(0);return b.unshift("precision "+f.PRECISION.DEFAULT+" float;"),b}}else if("precision"!==a.substring(0,9))return"precision "+f.PRECISION.DEFAULT+" float;\n"+a;return a}var e=a(20).GLShader,f=a(237),g=function(a,b,c){e.call(this,a,d(b),d(c))};g.prototype=Object.create(e.prototype),g.prototype.constructor=g,b.exports=g},{20:20,237:237}],237:[function(a,b,c){var d={VERSION:"4.0.0",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},WRAP_MODES:{DEFAULT:0,CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},GC_MODES:{DEFAULT:1,AUTO:0,MANUAL:1},MIPMAP_TEXTURES:!0,RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},PRECISION:{DEFAULT:"mediump",LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},TRANSFORM_MODE:{DEFAULT:0,STATIC:0,DYNAMIC:1},TEXT_GRADIENT:{LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},SPRITE_BATCH_SIZE:4096,SPRITE_MAX_TEXTURES:a(311)(32),TEXT_STYLE_CHANGED:"changed"};b.exports=d},{311:311}],238:[function(a,b,c){function d(){this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)}var e=a(261),f=e.Rectangle;d.prototype.constructor=d,b.exports=d,d.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},d.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},d.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?f.EMPTY:(a=a||new f(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},d.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},d.prototype.addQuad=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY,f=a[0],g=a[1];b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[2],g=a[3],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[4],g=a[5],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[6],g=a[7],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},d.prototype.addFrame=function(a,b,c,d,e){var f=a.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.minX,n=this.minY,o=this.maxX,p=this.maxY,q=g*b+i*c+k,r=h*b+j*c+l;m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*c+k,r=h*d+j*c+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*b+i*e+k,r=h*b+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*e+k,r=h*d+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,this.minX=m,this.minY=n,this.maxX=o,this.maxY=p},d.prototype.addVertices=function(a,b,c,d){var e,f,g,h,i,j=a.worldTransform,k=j.a,l=j.b,m=j.c,n=j.d,o=j.tx,p=j.ty,q=this.minX,r=this.minY,s=this.maxX,t=this.maxY;for(e=c;e<d;e+=2)f=b[e],g=b[e+1],h=k*f+m*g+o,i=n*g+l*f+p,q=h<q?h:q,r=i<r?i:r,s=h>s?h:s,t=i>t?i:t;this.minX=q,this.minY=r,this.maxX=s,this.maxY=t},d.prototype.addBounds=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY;this.minX=a.minX<b?a.minX:b,this.minY=a.minY<c?a.minY:c,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>e?a.maxY:e}},{261:261}],239:[function(a,b,c){function d(){f.call(this),this.children=[]}var e=a(310),f=a(240);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a}}}),d.prototype.onChildrenChange=function(){},d.prototype.addChild=function(a){var b,c=arguments.length;if(c>1)for(b=0;b<c;b++)this.addChild(arguments[b]);else a.parent&&a.parent.removeChild(a),a.parent=this,this.transform._parentID=-1,this.children.push(a),this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},d.prototype.addChildAt=function(a,b){if(b>=0&&b<=this.children.length)return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.onChildrenChange(b),a.emit("added",this),a;throw Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length)},d.prototype.swapChildren=function(a,b){var c,d;if(a!==b){if(c=this.getChildIndex(a),d=this.getChildIndex(b),c<0||d<0)throw Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[c]=b,this.children[d]=a,this.onChildrenChange(c<d?c:d)}},d.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(b===-1)throw Error("The supplied DisplayObject must be a child of the caller");return b},d.prototype.setChildIndex=function(a,b){if(b<0||b>=this.children.length)throw Error("The supplied index is out of bounds");var c=this.getChildIndex(a);e.removeItems(this.children,c,1),this.children.splice(b,0,a),this.onChildrenChange(b)},d.prototype.getChildAt=function(a){if(a<0||a>=this.children.length)throw Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[a]},d.prototype.removeChild=function(a){var b,c,d=arguments.length;if(d>1)for(b=0;b<d;b++)this.removeChild(arguments[b]);else{if(c=this.children.indexOf(a),c===-1)return;a.parent=null,e.removeItems(this.children,c,1),this.onChildrenChange(c),a.emit("removed",this)}return a},d.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,e.removeItems(this.children,a,1),this.onChildrenChange(a),b.emit("removed",this),b},d.prototype.removeChildren=function(a,b){var c,d,e=a||0,f="number"==typeof b?b:this.children.length,g=f-e;if(g>0&&g<=f){for(c=this.children.splice(e,g),d=0;d<c.length;++d)c[d].parent=null;for(this.onChildrenChange(a),d=0;d<c.length;++d)c[d].emit("removed",this);return c}if(0===g&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},d.prototype.updateTransform=function(){if(this._currentBounds=null,this.visible){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,b=this.children.length;a<b;++a)this.children[a].updateTransform()}},d.prototype.containerUpdateTransform=d.prototype.updateTransform,d.prototype.calculateBounds=function(){var a,b;if(this._bounds_.clear(),this.visible)for(this._calculateBounds(),
a=0;a<this.children.length;a++)b=this.children[a],b.calculateBounds(),this._bounds_.addBounds(b._bounds_)},d.prototype._calculateBounds=function(){},d.prototype.renderWebGL=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var b,c;if(this._mask||this._filters){for(a.currentRenderer.flush(),this._filters&&this._filters.length&&a.filterManager.pushFilter(this,this._filters),this._mask&&a.maskManager.pushMask(this,this._mask),a.currentRenderer.start(),this._renderWebGL(a),b=0,c=this.children.length;b<c;b++)this.children[b].renderWebGL(a);a.currentRenderer.flush(),this._mask&&a.maskManager.popMask(this,this._mask),this._filters&&a.filterManager.popFilter(),a.currentRenderer.start()}else for(this._renderWebGL(a),b=0,c=this.children.length;b<c;++b)this.children[b].renderWebGL(a)}},d.prototype._renderWebGL=function(a){},d.prototype._renderCanvas=function(a){},d.prototype.renderCanvas=function(a){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask),this._renderCanvas(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},d.prototype.destroy=function(a){var b,c,d;if(f.prototype.destroy.call(this),b="boolean"==typeof a?a:a&&a.children)for(c=0,d=this.children.length;c<d;++c)this.children[c].destroy(a);this.removeChildren(),this.children=null}},{240:240,310:310}],240:[function(a,b,c){function d(){f.call(this);var a=g.TRANSFORM_MODE.DEFAULT===g.TRANSFORM_MODE.STATIC?h:i;this.transform=new a,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.filterArea=null,this._bounds=new e.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._bounds_=new j}var e=a(261),f=a(3),g=a(237),h=a(243),i=a(241),j=a(238),k=new d;d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{x:{get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},y:{get:function(){return this.position.y},set:function(a){this.transform.position.y=a}},worldTransform:{get:function(){return this.transform.worldTransform}},localTransform:{get:function(){return this.transform.localTransform}},position:{get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},scale:{get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},pivot:{get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copy(a)}},skew:{get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},rotation:{get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a}},worldVisible:{get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},mask:{get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0),this._mask=a,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}}),d.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform,d.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(k.transform)},d.prototype.getBounds=function(a){return a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=k,this.updateTransform(),this.parent=null)),this._currentBounds||(this.calculateBounds(),this._currentBounds=this._bounds_.getRectangle(this._bounds)),this._currentBounds},d.prototype.getLocalBounds=function(){var a,b=this.transform,c=this.parent;return this.parent=null,this.transform=k.transform,a=this.getBounds(),this.parent=c,this.transform=b,a},d.prototype.toGlobal=function(a,b,c){return c||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=k,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(a,b)},d.prototype.toLocal=function(a,b,c,d){return b&&(a=b.toGlobal(a,c,d)),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=k,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,c)},d.prototype.renderWebGL=function(a){},d.prototype.renderCanvas=function(a){},d.prototype.setParent=function(a){if(!a||!a.addChild)throw Error("setParent: Argument must be a Container");return a.addChild(this),a},d.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){return this.position.x=a||0,this.position.y=b||0,this.scale.x=c?c:1,this.scale.y=d?d:1,this.rotation=e||0,this.skew.x=f||0,this.skew.y=g||0,this.pivot.x=h||0,this.pivot.y=i||0,this},d.prototype.destroy=function(){this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null}},{237:237,238:238,241:241,243:243,261:261,3:3}],241:[function(a,b,c){function d(){f.call(this),this.position=new e.Point(0),this.scale=new e.Point(1,1),this.skew=new e.ObservablePoint(this.updateSkew,this,0,0),this.pivot=new e.Point(0),this._rotation=0,this._sr=Math.sin(0),this._cr=Math.cos(0),this._cy=Math.cos(0),this._sy=Math.sin(0),this._nsx=Math.sin(0),this._cx=Math.cos(0)}var e=a(261),f=a(242);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y),this._sy=Math.sin(this.skew.y),this._nsx=Math.sin(this.skew.x),this._cx=Math.cos(this.skew.x)},d.prototype.updateLocalTransform=function(){var a=this.localTransform,b=this._cr*this.scale.x,c=this._sr*this.scale.x,d=-this._sr*this.scale.y,e=this._cr*this.scale.y;a.a=this._cy*b+this._sy*d,a.b=this._cy*c+this._sy*e,a.c=this._nsx*b+this._cx*d,a.d=this._nsx*c+this._cx*e},d.prototype.updateTransform=function(a){var b=a.worldTransform,c=this.worldTransform,d=this.localTransform,e=this._cr*this.scale.x,f=this._sr*this.scale.x,g=-this._sr*this.scale.y,h=this._cr*this.scale.y;d.a=this._cy*e+this._sy*g,d.b=this._cy*f+this._sy*h,d.c=this._nsx*e+this._cx*g,d.d=this._nsx*f+this._cx*h,d.tx=this.position.x-(this.pivot.x*d.a+this.pivot.y*d.c),d.ty=this.position.y-(this.pivot.x*d.b+this.pivot.y*d.d),c.a=d.a*b.a+d.b*b.c,c.b=d.a*b.b+d.b*b.d,c.c=d.c*b.a+d.d*b.c,c.d=d.c*b.b+d.d*b.d,c.tx=d.tx*b.a+d.ty*b.c+b.tx,c.ty=d.tx*b.b+d.ty*b.d+b.ty,this._worldID++},d.prototype.setFromMatrix=function(a){a.decompose(this)},Object.defineProperties(d.prototype,{rotation:{get:function(){return this._rotation},set:function(a){this._rotation=a,this._sr=Math.sin(a),this._cr=Math.cos(a)}}}),b.exports=d},{242:242,261:261}],242:[function(a,b,c){function d(){this.worldTransform=new e.Matrix,this.localTransform=new e.Matrix,this._worldID=0}var e=a(261);d.prototype.constructor=d,d.prototype.updateLocalTransform=function(){},d.prototype.updateTransform=function(a){var b=a.worldTransform,c=this.worldTransform,d=this.localTransform;c.a=d.a*b.a+d.b*b.c,c.b=d.a*b.b+d.b*b.d,c.c=d.c*b.a+d.d*b.c,c.d=d.c*b.b+d.d*b.d,c.tx=d.tx*b.a+d.ty*b.c+b.tx,c.ty=d.tx*b.b+d.ty*b.d+b.ty,this._worldID++},d.prototype.updateWorldTransform=d.prototype.updateTransform,d.IDENTITY=new d,b.exports=d},{261:261}],243:[function(a,b,c){function d(){f.call(this),this.position=new e.ObservablePoint(this.onChange,this,0),this.scale=new e.ObservablePoint(this.onChange,this,1,1),this.pivot=new e.ObservablePoint(this.onChange,this,0,0),this.skew=new e.ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._sr=Math.sin(0),this._cr=Math.cos(0),this._cy=Math.cos(0),this._sy=Math.sin(0),this._nsx=Math.sin(0),this._cx=Math.cos(0),this._currentLocalID=0}var e=a(261),f=a(242);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,d.prototype.onChange=function(){this._localID++},d.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y),this._sy=Math.sin(this.skew.y),this._nsx=Math.sin(this.skew.x),this._cx=Math.cos(this.skew.x),this._localID++},d.prototype.updateLocalTransform=function(){var a,b,c,d,e=this.localTransform;this._localID!==this._currentLocalID&&(a=this._cr*this.scale.x,b=this._sr*this.scale.x,c=-this._sr*this.scale.y,d=this._cr*this.scale.y,e.a=this._cy*a+this._sy*c,e.b=this._cy*b+this._sy*d,e.c=this._nsx*a+this._cx*c,e.d=this._nsx*b+this._cx*d,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},d.prototype.updateTransform=function(a){var b,c,d,e,f=a.worldTransform,g=this.worldTransform,h=this.localTransform;this._localID!==this._currentLocalID&&(b=this._cr*this.scale.x,c=this._sr*this.scale.x,d=-this._sr*this.scale.y,e=this._cr*this.scale.y,h.a=this._cy*b+this._sy*d,h.b=this._cy*c+this._sy*e,h.c=this._nsx*b+this._cx*d,h.d=this._nsx*c+this._cx*e,h.tx=this.position._x-(this.pivot._x*h.a+this.pivot._y*h.c),h.ty=this.position._y-(this.pivot._x*h.b+this.pivot._y*h.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID&&(g.a=h.a*f.a+h.b*f.c,g.b=h.a*f.b+h.b*f.d,g.c=h.c*f.a+h.d*f.c,g.d=h.c*f.b+h.d*f.d,g.tx=h.tx*f.a+h.ty*f.c+f.tx,g.ty=h.tx*f.b+h.ty*f.d+f.ty,this._parentID=a._worldID,this._worldID++)},d.prototype.setFromMatrix=function(a){a.decompose(this)},Object.defineProperties(d.prototype,{rotation:{get:function(){return this._rotation},set:function(a){this._rotation=a,this._sr=Math.sin(a),this._cr=Math.cos(a),this._localID++}}}),b.exports=d},{242:242,261:261}],244:[function(a,b,c){function d(){f.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new m,this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1,this._spriteRect=null,this._fastRect=!1}var e,f=a(239),g=a(302),h=a(303),i=a(245),j=a(292),k=a(261),l=a(237),m=a(238),n=a(247),o=a(268),p=new k.Matrix,q=new k.Point;d._SPRITE_TEXTURE=null,d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){var a,b=new d;for(b.renderable=this.renderable,b.fillAlpha=this.fillAlpha,b.lineWidth=this.lineWidth,b.lineColor=this.lineColor,b.tint=this.tint,b.blendMode=this.blendMode,b.isMask=this.isMask,b.boundsPadding=this.boundsPadding,b.dirty=!0,b.glDirty=!0,b.cachedSpriteDirty=this.cachedSpriteDirty,a=0;a<this.graphicsData.length;++a)b.graphicsData.push(this.graphicsData[a].clone());return b.currentPath=b.graphicsData[b.graphicsData.length-1],b.updateLocalBounds(),b},d.prototype.lineStyle=function(a,b,c){if(this.lineWidth=a||0,this.lineColor=b||0,this.lineAlpha=void 0===c?1:c,this.currentPath)if(this.currentPath.shape.points.length){var d=new k.Polygon(this.currentPath.shape.points.slice(-2));d.closed=!1,this.drawShape(d)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},d.prototype.moveTo=function(a,b){var c=new k.Polygon([a,b]);return c.closed=!1,this.drawShape(c),this},d.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty=!0,this},d.prototype.quadraticCurveTo=function(a,b,c,d){var e,f,g,h,i,j,k,l;for(this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0),g=20,h=this.currentPath.shape.points,0===h.length&&this.moveTo(0,0),i=h[h.length-2],j=h[h.length-1],k=0,l=1;l<=g;++l)k=l/g,e=i+(a-i)*k,f=j+(b-j)*k,h.push(e+(a+(c-a)*k-e)*k,f+(b+(d-b)*k-f)*k);return this.dirty=this.boundsDirty=!0,this},d.prototype.bezierCurveTo=function(a,b,c,d,e,f){var g,h,i;return this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0),g=this.currentPath.shape.points,h=g[g.length-2],i=g[g.length-1],g.length-=2,n(h,i,a,b,c,d,e,f,g),this.dirty=this.boundsDirty=!0,this},d.prototype.arcTo=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b),f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k),m<1e-8||0===e?f[f.length-2]===a&&f[f.length-1]===b||f.push(a,b):(n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u),this.arc(u+a,v+b,e,A,B,j*k>l*i)),this.dirty=this.boundsDirty=!0,this},d.prototype.arc=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(f=f||!1,d===e)return this;if(!f&&e<=d?e+=2*Math.PI:f&&d<=e&&(d+=2*Math.PI),g=f?(d-e)*-1:e-d,h=40*Math.ceil(Math.abs(g)/(2*Math.PI)),0===g)return this;for(i=a+Math.cos(d)*c,j=b+Math.sin(d)*c,this.currentPath?this.currentPath.shape.points.push(i,j):this.moveTo(i,j),k=this.currentPath.shape.points,l=g/(2*h),m=2*l,n=Math.cos(l),o=Math.sin(l),p=h-1,q=p%1/p,r=0;r<=p;r++)s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t),k.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b);return this.dirty=this.boundsDirty=!0,this},d.prototype.beginFill=function(a,b){return this.filling=!0,this.fillColor=a||0,this.fillAlpha=void 0===b?1:b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},d.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},d.prototype.drawRect=function(a,b,c,d){return this.drawShape(new k.Rectangle(a,b,c,d)),this},d.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new k.RoundedRectangle(a,b,c,d,e)),this},d.prototype.drawCircle=function(a,b,c){return this.drawShape(new k.Circle(a,b,c)),this},d.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new k.Ellipse(a,b,c,d)),this},d.prototype.drawPolygon=function(a){var b,c,d=a,e=!0;if(d instanceof k.Polygon&&(e=d.closed,d=d.points),!Array.isArray(d))for(d=Array(arguments.length),b=0;b<d.length;++b)d[b]=arguments[b];return c=new k.Polygon(d),c.closed=e,this.drawShape(c),this},d.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},d.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===l.SHAPES.RECT&&!this.graphicsData[0].lineWidth},d.prototype._renderWebGL=function(a){this.glDirty&&(this.dirty=!0,this.glDirty=!1),this.dirty&&(this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))},d.prototype._renderSpriteRect=function(a){var b,c=this.graphicsData[0].shape;this._spriteRect||(d._SPRITE_TEXTURE||(d._SPRITE_TEXTURE=g.create(10,10),b=a._activeRenderTarget,a.bindRenderTexture(d._SPRITE_TEXTURE),a.clear([1,1,1,1]),a.bindRenderTarget(b)),this._spriteRect=new j(d._SPRITE_TEXTURE),this._spriteRect.tint=this.graphicsData[0].fillColor,this._spriteRect.alpha=this.graphicsData[0].fillAlpha),this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,d._SPRITE_TEXTURE._frame.width=c.width,d._SPRITE_TEXTURE._frame.height=c.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-c.x/c.width,-c.y/c.height),this._spriteRect.onAnchorUpdate(),this._spriteRect._renderWebGL(a)},d.prototype._renderCanvas=function(a){this.isMask!==!0&&a.plugins.graphics.render(this)},d.prototype._calculateBounds=function(){if(this.renderable){this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var a=this._localBounds;this._bounds_.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)}},d.prototype.containsPoint=function(a){var b,c,d;for(this.worldTransform.applyInverse(a,q),b=this.graphicsData,c=0;c<b.length;c++)if(d=b[c],d.fill&&d.shape&&d.shape.contains(q.x,q.y))return!0;return!1},d.prototype.updateLocalBounds=function(){var a,b,c,d,e,f,g,h,i,j,k,m,n=1/0,o=-(1/0),p=1/0,q=-(1/0);if(this.graphicsData.length)for(g=0;g<this.graphicsData.length;g++)if(h=this.graphicsData[g],i=h.type,j=h.lineWidth,a=h.shape,i===l.SHAPES.RECT||i===l.SHAPES.RREC)c=a.x-j/2,d=a.y-j/2,e=a.width+j,f=a.height+j,n=c<n?c:n,o=c+e>o?c+e:o,p=d<p?d:p,q=d+f>q?d+f:q;else if(i===l.SHAPES.CIRC)c=a.x,d=a.y,e=a.radius+j/2,f=a.radius+j/2,n=c-e<n?c-e:n,o=c+e>o?c+e:o,p=d-f<p?d-f:p,q=d+f>q?d+f:q;else if(i===l.SHAPES.ELIP)c=a.x,d=a.y,e=a.width+j/2,f=a.height+j/2,n=c-e<n?c-e:n,o=c+e>o?c+e:o,p=d-f<p?d-f:p,q=d+f>q?d+f:q;else for(b=a.points,k=0;k<b.length;k+=2)c=b[k],d=b[k+1],n=c-j<n?c-j:n,o=c+j>o?c+j:o,p=d-j<p?d-j:p,q=d+j>q?d+j:q;else n=0,o=0,p=0,q=0;m=this.boundsPadding,this._localBounds.minX=n-m,this._localBounds.maxX=o+2*m,this._localBounds.minY=p-m,this._localBounds.maxY=q+2*m},d.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(b),b.type===l.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b),this.dirty=this.boundsDirty=!0,b},d.prototype.generateCanvasTexture=function(a,b){var c,d,f;return b=b||1,c=this.getLocalBounds(),d=new g.create(c.width*b,c.height*b),e||(e=new o),p.tx=-c.x,p.ty=-c.y,e.render(this,d,!1,p),f=h.fromCanvas(d.baseTexture._canvasRenderTarget.canvas,a),f.baseTexture.resolution=b,f},d.prototype.closePath=function(){var a=this.currentPath;return a&&a.shape&&a.shape.close(),this},d.prototype.addHole=function(){var a=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(a.shape),this.currentPath=null,this},d.prototype.destroy=function(){var a,b,c;for(f.prototype.destroy.apply(this,arguments),a=0;a<this.graphicsData.length;++a)this.graphicsData[a].destroy();for(b in this._webgl)for(c=0;c<this._webgl[b].data.length;++c)this._webgl[b].data[c].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{237:237,238:238,239:239,245:245,247:247,261:261,268:268,292:292,302:302,303:303}],245:[function(a,b,c){function d(a,b,c,d,e,f,g){this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this._lineTint=b,this.fillColor=d,this.fillAlpha=e,this._fillTint=d,this.fill=f,this.holes=[],this.shape=g,this.type=g.type}d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},d.prototype.addHole=function(a){this.holes.push(a)},d.prototype.destroy=function(){this.shape=null,this.holes=null}},{}],246:[function(a,b,c){function d(a){this.renderer=a}var e=a(268),f=a(237);d.prototype.constructor=d,b.exports=d,e.registerPlugin("graphics",d),d.prototype.render=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=this.renderer,B=A.context,C=a.worldAlpha,D=a.transform.worldTransform,E=A.resolution;for(this._prevTint!==this.tint&&(this.dirty=!0),B.setTransform(D.a*E,D.b*E,D.c*E,D.d*E,D.tx*E,D.ty*E),a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1),A.setBlendMode(a.blendMode),b=0;b<a.graphicsData.length;b++)if(c=a.graphicsData[b],d=c.shape,e=c._fillTint,g=c._lineTint,B.lineWidth=c.lineWidth,c.type===f.SHAPES.POLY){for(B.beginPath(),this.renderPolygon(d.points,d.closed,B),h=0;h<c.holes.length;h++)i=c.holes[h],this.renderPolygon(i.points,!0,B);c.fill&&(B.globalAlpha=c.fillAlpha*C,B.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),B.fill()),c.lineWidth&&(B.globalAlpha=c.lineAlpha*C,B.strokeStyle="#"+("00000"+(0|g).toString(16)).substr(-6),B.stroke())}else c.type===f.SHAPES.RECT?((c.fillColor||0===c.fillColor)&&(B.globalAlpha=c.fillAlpha*C,B.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),B.fillRect(d.x,d.y,d.width,d.height)),c.lineWidth&&(B.globalAlpha=c.lineAlpha*C,B.strokeStyle="#"+("00000"+(0|g).toString(16)).substr(-6),B.strokeRect(d.x,d.y,d.width,d.height))):c.type===f.SHAPES.CIRC?(B.beginPath(),B.arc(d.x,d.y,d.radius,0,2*Math.PI),B.closePath(),c.fill&&(B.globalAlpha=c.fillAlpha*C,B.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),B.fill()),c.lineWidth&&(B.globalAlpha=c.lineAlpha*C,B.strokeStyle="#"+("00000"+(0|g).toString(16)).substr(-6),B.stroke())):c.type===f.SHAPES.ELIP?(j=2*d.width,k=2*d.height,l=d.x-j/2,m=d.y-k/2,B.beginPath(),n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2,B.moveTo(l,t),B.bezierCurveTo(l,t-p,s-o,m,s,m),B.bezierCurveTo(s+o,m,q,t-p,q,t),B.bezierCurveTo(q,t+p,s+o,r,s,r),B.bezierCurveTo(s-o,r,l,t+p,l,t),B.closePath(),c.fill&&(B.globalAlpha=c.fillAlpha*C,B.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),B.fill()),c.lineWidth&&(B.globalAlpha=c.lineAlpha*C,B.strokeStyle="#"+("00000"+(0|g).toString(16)).substr(-6),B.stroke())):c.type===f.SHAPES.RREC&&(u=d.x,v=d.y,w=d.width,x=d.height,y=d.radius,z=Math.min(w,x)/2|0,y=y>z?z:y,B.beginPath(),B.moveTo(u,v+y),B.lineTo(u,v+x-y),B.quadraticCurveTo(u,v+x,u+y,v+x),B.lineTo(u+w-y,v+x),B.quadraticCurveTo(u+w,v+x,u+w,v+x-y),B.lineTo(u+w,v+y),B.quadraticCurveTo(u+w,v,u+w-y,v),B.lineTo(u+y,v),B.quadraticCurveTo(u,v,u,v+y),B.closePath(),(c.fillColor||0===c.fillColor)&&(B.globalAlpha=c.fillAlpha*C,B.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),B.fill()),c.lineWidth&&(B.globalAlpha=c.lineAlpha*C,B.strokeStyle="#"+("00000"+(0|g).toString(16)).substr(-6),B.stroke()))},d.prototype.updateGraphicsTint=function(a){var b,c,d,e,f,g,h;for(a._prevTint=a.tint,b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;e++)f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor,f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255},d.prototype.renderPolygon=function(a,b,c){c.moveTo(a[0],a[1]);for(var d=1;d<a.length/2;d++)c.lineTo(a[2*d],a[2*d+1]);b&&c.closePath()},d.prototype.destroy=function(){this.renderer=null}},{237:237,268:268}],247:[function(a,b,c){var d=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q;for(i=i||[],j=20,i.push(a,b),p=0,q=1;q<=j;++q)p=q/j,k=1-p,l=k*k,m=l*k,n=p*p,o=n*p,i.push(m*a+3*l*p*c+3*k*n*e+o*g,m*b+3*l*p*d+3*k*n*f+o*h);return i};b.exports=d},{}],248:[function(a,b,c){function d(a){g.call(this,a),this.graphicsDataPool=[],this.primitiveShader=null,this.gl=a.gl,this.CONTEXT_UID=0}var e=a(310),f=a(237),g=a(285),h=a(275),i=a(249),j=a(250),k=a(253),l=a(254),m=a(255),n=a(251);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,h.registerPlugin("graphics",d),d.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new j(this.gl)},d.prototype.destroy=function(){g.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},d.prototype.render=function(a){var b,c,d,f,g,h,i=this.renderer,j=i.gl;for(!a.dirty&&a._webGL[this.CONTEXT_UID]||this.updateGraphics(a),c=a._webGL[this.CONTEXT_UID],d=this.primitiveShader,i.bindShader(d),i.state.setBlendMode(a.blendMode),f=0,g=c.data.length;f<g;f++)b=c.data[f],h=b.shader,i.bindShader(h),h.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),h.uniforms.tint=e.hex2rgb(a.tint),h.uniforms.alpha=a.worldAlpha,b.vao.bind().draw(j.TRIANGLE_STRIP,b.indices.length).unbind()},d.prototype.updateGraphics=function(a){var b,c,d,e,g=this.renderer.gl,h=a._webGL[this.CONTEXT_UID];if(h||(h=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:g}),a.dirty=!1,a.clearDirty){for(a.clearDirty=!1,b=0;b<h.data.length;b++)c=h.data[b],this.graphicsDataPool.push(c);h.data=[],h.lastIndex=0}for(b=h.lastIndex;b<a.graphicsData.length;b++)e=a.graphicsData[b],d=this.getWebGLData(h,0),e.type===f.SHAPES.POLY&&k(e,d),e.type===f.SHAPES.RECT?l(e,d):e.type===f.SHAPES.CIRC||e.type===f.SHAPES.ELIP?n(e,d):e.type===f.SHAPES.RREC&&m(e,d),h.lastIndex++;for(b=0;b<h.data.length;b++)d=h.data[b],d.dirty&&d.upload()},d.prototype.getWebGLData=function(a,b){var c=a.data[a.data.length-1];return(!c||c.points.length>32e4)&&(c=this.graphicsDataPool.pop()||new i(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),c.reset(b),a.data.push(c)),c.dirty=!0,c}},{237:237,249:249,250:250,251:251,253:253,254:254,255:255,275:275,285:285,310:310}],249:[function(a,b,c){function d(a,b,c){this.gl=a,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.GLBuffer.createVertexBuffer(a),this.indexBuffer=e.GLBuffer.createIndexBuffer(a),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=b,this.vao=new e.VertexArrayObject(a,c).addIndex(this.indexBuffer).addAttribute(this.buffer,b.attributes.aVertexPosition,a.FLOAT,!1,24,0).addAttribute(this.buffer,b.attributes.aColor,a.FLOAT,!1,24,8)}var e=a(20);d.prototype.constructor=d,b.exports=d,d.prototype.reset=function(){this.points.length=0,this.indices.length=0},d.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},d.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{20:20}],250:[function(a,b,c){function d(a){e.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}","varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}")}var e=a(236);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{236:236}],251:[function(a,b,c){var d=a(252),e=a(237),f=a(310),g=function(a,b){var c,g,h,i,j,k,l,m,n,o,p,q,r,s,t=a.shape,u=t.x,v=t.y;if(a.type===e.SHAPES.CIRC?(c=t.radius,g=t.radius):(c=t.width,g=t.height),h=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(t.width+t.height)),i=2*Math.PI/h,j=0,a.fill){for(k=f.hex2rgb(a.fillColor),l=a.fillAlpha,m=k[0]*l,n=k[1]*l,o=k[2]*l,p=b.points,q=b.indices,r=p.length/6,q.push(r),j=0;j<h+1;j++)p.push(u,v,m,n,o,l),p.push(u+Math.sin(i*j)*c,v+Math.cos(i*j)*g,m,n,o,l),q.push(r++,r++);q.push(r-1)}if(a.lineWidth){for(s=a.points,a.points=[],j=0;j<h+1;j++)a.points.push(u+Math.sin(i*j)*c,v+Math.cos(i*j)*g);d(a,b),a.points=s}};b.exports=g},{237:237,252:252,310:310}],252:[function(a,b,c){var d=a(261),e=a(310),f=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=0,R=a.points;if(0!==R.length){for(c=new d.Point(R[0],R[1]),f=new d.Point(R[R.length-2],R[R.length-1]),c.x===f.x&&c.y===f.y&&(R=R.slice(),R.pop(),R.pop(),f=new d.Point(R[R.length-2],R[R.length-1]),g=f.x+.5*(c.x-f.x),h=f.y+.5*(c.y-f.y),R.unshift(g,h),R.push(g,h)),i=b.points,j=b.indices,k=R.length/2,l=R.length,m=i.length/6,n=a.lineWidth/2,o=e.hex2rgb(a.lineColor),p=a.lineAlpha,q=o[0]*p,r=o[1]*p,s=o[2]*p,v=R[0],w=R[1],x=R[2],y=R[3],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,i.push(v-B,w-C,q,r,s,p),i.push(v+B,w+C,q,r,s,p),Q=1;Q<k-1;Q++)v=R[2*(Q-1)],w=R[2*(Q-1)+1],x=R[2*Q],y=R[2*Q+1],z=R[2*(Q+1)],A=R[2*(Q+1)+1],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,D=-(y-A),E=x-z,P=Math.sqrt(D*D+E*E),D/=P,E/=P,D*=n,E*=n,H=-C+w-(-C+y),I=-B+x-(-B+v),J=(-B+v)*(-C+y)-(-B+x)*(-C+w),K=-E+A-(-E+y),L=-D+x-(-D+z),M=(-D+z)*(-E+y)-(-D+x)*(-E+A),N=H*L-K*I,Math.abs(N)<.1?(N+=10.1,i.push(x-B,y-C,q,r,s,p),i.push(x+B,y+C,q,r,s,p)):(t=(I*M-L*J)/N,u=(K*J-H*M)/N,O=(t-x)*(t-x)+(u-y)*(u-y),O>19600?(F=B-D,G=C-E,P=Math.sqrt(F*F+G*G),F/=P,G/=P,F*=n,G*=n,i.push(x-F,y-G),i.push(q,r,s,p),i.push(x+F,y+G),i.push(q,r,s,p),i.push(x-F,y-G),i.push(q,r,s,p),l++):(i.push(t,u),i.push(q,r,s,p),i.push(x-(t-x),y-(u-y)),i.push(q,r,s,p)));for(v=R[2*(k-2)],w=R[2*(k-2)+1],x=R[2*(k-1)],y=R[2*(k-1)+1],B=-(w-y),C=v-x,P=Math.sqrt(B*B+C*C),B/=P,C/=P,B*=n,C*=n,i.push(x-B,y-C),i.push(q,r,s,p),i.push(x+B,y+C),i.push(q,r,s,p),j.push(m),Q=0;Q<l;Q++)j.push(m++);j.push(m-1)}};b.exports=f},{261:261,310:310}],253:[function(a,b,c){var d=a(252),e=a(310),f=a(2),g=function(a,b){var c,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(a.points=a.shape.points.slice(),c=a.points,a.fill&&c.length>6){for(g=[],h=a.holes,i=0;i<h.length;i++)j=h[i],g.push(c.length/2),c=c.concat(j.points);if(k=b.points,l=b.indices,m=c.length/2,n=e.hex2rgb(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=f(c,g,2),!s)return;for(t=k.length/6,i=0;i<s.length;i+=3)l.push(s[i]+t),l.push(s[i]+t),l.push(s[i+1]+t),l.push(s[i+2]+t),l.push(s[i+2]+t);for(i=0;i<m;i++)k.push(c[2*i],c[2*i+1],p,q,r,o)}a.lineWidth>0&&d(a,b)};b.exports=g},{2:2,252:252,310:310}],254:[function(a,b,c){var d=a(252),e=a(310),f=function(a,b){var c,f,g,h,i,j,k,l,m,n=a.shape,o=n.x,p=n.y,q=n.width,r=n.height;a.fill&&(c=e.hex2rgb(a.fillColor),f=a.fillAlpha,g=c[0]*f,h=c[1]*f,i=c[2]*f,j=b.points,k=b.indices,l=j.length/6,j.push(o,p),j.push(g,h,i,f),j.push(o+q,p),j.push(g,h,i,f),j.push(o,p+r),j.push(g,h,i,f),j.push(o+q,p+r),j.push(g,h,i,f),k.push(l,l,l+1,l+2,l+3,l+3)),a.lineWidth&&(m=a.points,a.points=[o,p,o+q,p,o+q,p+r,o,p+r,o,p],d(a,b),a.points=m)};b.exports=f},{252:252,310:310}],255:[function(a,b,c){var d=a(2),e=a(252),f=a(310),g=function(a,b){var c,g,i,j,k,l,m,n,o,p,q,r=a.shape,s=r.x,t=r.y,u=r.width,v=r.height,w=r.radius,x=[];if(x.push(s,t+w),h(s,t+v-w,s,t+v,s+w,t+v,x),h(s+u-w,t+v,s+u,t+v,s+u,t+v-w,x),h(s+u,t+w,s+u,t,s+u-w,t,x),h(s+w,t,s,t,s,t+w+1e-10,x),a.fill){for(c=f.hex2rgb(a.fillColor),g=a.fillAlpha,i=c[0]*g,j=c[1]*g,k=c[2]*g,l=b.points,m=b.indices,n=l.length/6,o=d(x,null,2),p=0,p=0;p<o.length;p+=3)m.push(o[p]+n),m.push(o[p]+n),m.push(o[p+1]+n),m.push(o[p+2]+n),m.push(o[p+2]+n);for(p=0;p<x.length;p++)l.push(x[p],x[++p],i,j,k,g)}a.lineWidth&&(q=a.points,a.points=x,e(a,b),a.points=q)},h=function(a,b,c,d,e,f,g){function h(a,b,c){var d=b-a;return a+d*c}var i,j,k,l,m,n,o,p=20,q=g||[],r=0;for(o=0;o<=p;o++)r=o/p,i=h(a,c,r),j=h(b,d,r),k=h(c,e,r),l=h(d,f,r),m=h(i,k,r),n=h(j,l,r),q.push(m,n);return q};b.exports=g},{2:2,252:252,310:310}],256:[function(a,b,c){var d=b.exports=Object.assign(a(237),a(261),{utils:a(310),ticker:a(307),DisplayObject:a(240),Container:a(239),Transform:a(241),TransformStatic:a(243),TransformBase:a(242),Sprite:a(292),CanvasSpriteRender:a(293),CanvasTinter:a(294),SpriteRenderer:a(296),Text:a(298),TextStyle:a(299),Graphics:a(244),GraphicsData:a(245),GraphicsRenderer:a(248),CanvasGraphicsRenderer:a(246),Texture:a(303),BaseTexture:a(301),RenderTexture:a(302),BaseRenderTexture:a(300),VideoBaseTexture:a(305),TextureUvs:a(304),CanvasRenderer:a(268),CanvasRenderTarget:a(270),Shader:a(236),WebGLRenderer:a(275),WebGLManager:a(284),ObjectRenderer:a(285),RenderTarget:a(287),Quad:a(286),SpriteMaskFilter:a(280),Filter:a(277),glCore:a(20),autoDetectRenderer:function(a,b,c,e){return a=a||800,b=b||600,!e&&d.utils.isWebGLSupported()?new d.WebGLRenderer(a,b,c):new d.CanvasRenderer(a,b,c)}})},{20:20,236:236,237:237,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,248:248,261:261,268:268,270:270,275:275,277:277,280:280,284:284,285:285,286:286,287:287,292:292,293:293,294:294,296:296,298:298,299:299,300:300,301:301,302:302,303:303,304:304,305:305,307:307,310:310}],257:[function(a,b,c){function d(a){return a<0?-1:a>0?1:0}function e(){var a,b,c,e,f,n,o,p,q;for(a=0;a<16;a++)for(b=[],m.push(b),c=0;c<16;c++)for(e=d(g[a]*g[c]+i[a]*h[c]),f=d(h[a]*g[c]+j[a]*h[c]),n=d(g[a]*i[c]+i[a]*j[c]),o=d(h[a]*i[c]+j[a]*j[c]),p=0;p<16;p++)if(g[p]===e&&h[p]===f&&i[p]===n&&j[p]===o){
b.push(p);break}for(a=0;a<16;a++)q=new l,q.set(g[a],h[a],i[a],j[a],0,0),k.push(q)}var f,g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],h=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],i=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],j=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],k=[],l=a(258),m=[];e(),f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return g[a]},uY:function(a){return h[a]},vX:function(a){return i[a]},vY:function(a){return j[a]},inv:function(a){return 8&a?15&a:7&-a},add:function(a,b){return m[a][b]},sub:function(a,b){return m[a][f.inv(b)]},rotate180:function(a){return 4^a},isSwapWidthHeight:function(a){return 2===(3&a)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?b>=0?f.S:f.N:2*Math.abs(b)<=Math.abs(a)?a>0?f.E:f.W:b>0?a>0?f.SE:f.SW:a>0?f.NE:f.NW},matrixAppendRotationInv:function(a,b,c,d){var e=k[f.inv(b)];c=c||0,d=d||0,e.tx=c,e.ty=d,a.append(e)}},b.exports=f},{258:258}],258:[function(a,b,c){function d(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}var e=a(260);d.prototype.constructor=d,b.exports=d,d.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},d.prototype.set=function(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this},d.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},d.prototype.apply=function(a,b){var c,d;return b=b||new e,c=a.x,d=a.y,b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b},d.prototype.applyInverse=function(a,b){var c,d,f;return b=b||new e,c=1/(this.a*this.d+this.c*-this.b),d=a.x,f=a.y,b.x=this.d*c*d+-this.c*c*f+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*f+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c,b},d.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},d.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},d.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},d.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},d.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s;return n=Math.sin(g),o=Math.cos(g),p=Math.cos(i),q=Math.sin(i),r=-Math.sin(h),s=Math.cos(h),j=o*e,k=n*e,l=-n*f,m=o*f,this.a=p*j+q*l,this.b=p*k+q*m,this.c=r*j+s*l,this.d=r*k+s*m,this.tx=a+(c*j+d*l),this.ty=b+(c*k+d*m),this},d.prototype.prepend=function(a){var b,c,d=this.tx;return 1===a.a&&0===a.b&&0===a.c&&1===a.d||(b=this.a,c=this.c,this.a=b*a.a+this.b*a.c,this.b=b*a.b+this.b*a.d,this.c=c*a.a+this.d*a.c,this.d=c*a.b+this.d*a.d),this.tx=d*a.a+this.ty*a.c+a.tx,this.ty=d*a.b+this.ty*a.d+a.ty,this},d.prototype.decompose=function(a){var b=this.a,c=this.b,d=this.c,e=this.d,f=Math.atan2(-d,e),g=Math.atan2(c,b),h=Math.abs(1-f/g);return h<1e-5?(a.rotation=g,b<0&&e>=0&&(a.rotation+=a.rotation<=0?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.skew.x=f,a.skew.y=g),a.scale.x=Math.sqrt(b*b+c*c),a.scale.y=Math.sqrt(d*d+e*e),a.position.x=this.tx,a.position.y=this.ty,a},d.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},d.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},d.prototype.clone=function(){var a=new d;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},d.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},d.IDENTITY=new d,d.TEMP_MATRIX=new d},{260:260}],259:[function(a,b,c){function d(a,b,c,d){this._x=c||0,this._y=d||0,this.cb=a,this.scope=b}d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{x:{get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))}},y:{get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}}),d.prototype.set=function(a,b){var c=a||0,d=b||(0!==b?c:0);this._x===c&&this._y===d||(this._x=c,this._y=d,this.cb.call(this.scope))},d.prototype.copy=function(a){this._x===a.x&&this._y===a.y||(this._x=a.x,this._y=a.y,this.cb.call(this.scope))}},{}],260:[function(a,b,c){function d(a,b){this.x=a||0,this.y=b||0}d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y)},d.prototype.copy=function(a){this.set(a.x,a.y)},d.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},d.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)}},{}],261:[function(a,b,c){b.exports={Point:a(260),ObservablePoint:a(259),Matrix:a(258),GroupD8:a(257),Circle:a(262),Ellipse:a(263),Polygon:a(264),Rectangle:a(265),RoundedRectangle:a(266)}},{257:257,258:258,259:259,260:260,262:262,263:263,264:264,265:265,266:266}],262:[function(a,b,c){function d(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0,this.type=f.SHAPES.CIRC}var e=a(265),f=a(237);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.radius)},d.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,c+d<=e},d.prototype.getBounds=function(){return new e(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{237:237,265:265}],263:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=f.SHAPES.ELIP}var e=a(265),f=a(237);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,c+d<=1},d.prototype.getBounds=function(){return new e(this.x-this.width,this.y-this.height,this.width,this.height)}},{237:237,265:265}],264:[function(a,b,c){function d(a){var b,c,d,g,h=a;if(!Array.isArray(h))for(h=Array(arguments.length),b=0;b<h.length;++b)h[b]=arguments[b];if(h[0]instanceof e){for(c=[],d=0,g=h.length;d<g;d++)c.push(h[d].x,h[d].y);h=c}this.closed=!0,this.points=h,this.type=f.SHAPES.POLY}var e=a(260),f=a(237);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.points.slice())},d.prototype.close=function(){var a=this.points;a[0]===a[a.length-2]&&a[1]===a[a.length-1]||a.push(a[0],a[1])},d.prototype.contains=function(a,b){var c,d,e,f,g,h,i,j=!1,k=this.points.length/2;for(c=0,d=k-1;c<k;d=c++)e=this.points[2*c],f=this.points[2*c+1],g=this.points[2*d],h=this.points[2*d+1],i=f>b!=h>b&&a<(g-e)*(b-f)/(h-f)+e,i&&(j=!j);return j}},{237:237,260:260}],265:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=e.SHAPES.RECT}var e=a(237);d.prototype.constructor=d,b.exports=d,d.EMPTY=new d(0,0,0,0),d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},d.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&(a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height)},d.prototype.pad=function(a,b){a=a||0,b=b||(0!==b?a:0),this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b},d.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=a.x),this.y<a.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=a.y),this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,this.height<0&&(this.height=0))},d.prototype.enlarge=function(a){var b,c,e,f;a!==d.EMPTY&&(b=Math.min(this.x,a.x),c=Math.max(this.x+this.width,a.x+a.width),e=Math.min(this.y,a.y),f=Math.max(this.y+this.height,a.y+a.height),this.x=b,this.width=c-b,this.y=e,this.height=f-e)}},{237:237}],266:[function(a,b,c){function d(a,b,c,d,f){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.radius=f||20,this.type=e.SHAPES.RREC}var e=a(237);d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.radius)},d.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height)}},{237:237}],267:[function(a,b,c){function d(a,b,c,d){if(j.call(this),e.sayHello(a),d)for(var f in g.DEFAULT_RENDER_OPTIONS)void 0===d[f]&&(d[f]=g.DEFAULT_RENDER_OPTIONS[f]);else d=g.DEFAULT_RENDER_OPTIONS;this.type=g.RENDERER_TYPE.UNKNOWN,this.width=b||800,this.height=c||600,this.view=d.view||document.createElement("canvas"),this.resolution=d.resolution,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=d.preserveDrawingBuffer,this.clearBeforeRender=d.clearBeforeRender,this.roundPixels=d.roundPixels,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=d.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new h,this._lastObjectRendered=this._tempDisplayObjectParent}var e=a(310),f=a(261),g=a(237),h=a(239),i=a(302),j=a(3),k=new f.Matrix;d.prototype=Object.create(j.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=e.hex2string(a),e.hex2rgb(a,this._backgroundColorRgba)}}}),d.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},d.prototype.generateTexture=function(a,b,c){var d=a.getLocalBounds(),e=i.create(0|d.width,0|d.height,b,c);return k.tx=-d.x,k.ty=-d.y,this.render(a,e,!1,k,!0),e},d.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=g.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null}},{237:237,239:239,261:261,3:3,302:302,310:310}],268:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"Canvas",a,b,c),this.type=j.RENDERER_TYPE.CANVAS,this.rootContext=this.view.getContext("2d",{alpha:this.transparent}),this.rootResolution=this.resolution,this.refresh=!0,this.maskManager=new f(this),this.smoothProperty="imageSmoothingEnabled",this.rootContext.imageSmoothingEnabled||(this.rootContext.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.rootContext.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.rootContext.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.rootContext.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this.blendModes=h(),this._activeBlendMode=null,this.context=null,this.renderingToScreen=!1,this.resize(a,b)}var e=a(267),f=a(269),g=a(270),h=a(272),i=a(310),j=a(237);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,i.pluginTarget.mixin(d),d.prototype.render=function(a,b,c,d,e){var f,h,i,k;this.view&&(this.renderingToScreen=!b,this.emit("prerender"),b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new g(b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):(this.context=this.rootContext,this.resolution=this.rootResolution),f=this.context,b||(this._lastObjectRendered=a),e||(h=a.parent,i=this._tempDisplayObjectParent.transform.worldTransform,d?d.copy(i):i.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=h),f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,f.globalCompositeOperation=this.blendModes[j.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(f.fillStyle="black",f.clear()),(void 0!==c?c:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?f.clearRect(0,0,this.width,this.height):(f.fillStyle=this._backgroundColorString,f.fillRect(0,0,this.width,this.height))),k=this.context,this.context=f,a.renderCanvas(this),this.context=k,this.emit("postrender"))},d.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this.context.globalCompositeOperation=this.blendModes[a])},d.prototype.destroy=function(a){this.destroyPlugins(),e.prototype.destroy.call(this,a),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.smoothProperty&&(this.rootContext[this.smoothProperty]=j.SCALE_MODES.DEFAULT===j.SCALE_MODES.LINEAR)}},{237:237,267:267,269:269,270:270,272:272,310:310}],269:[function(a,b,c){function d(a){this.renderer=a}var e=a(237);d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a){var b,c,d,e=this.renderer;e.context.save(),b=a.alpha,c=a.transform.worldTransform,d=e.resolution,e.context.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d),a._texture||(this.renderGraphicsShape(a),e.context.clip()),a.worldAlpha=b},d.prototype.renderGraphicsShape=function(a){var b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this.renderer.context,z=a.graphicsData.length;if(0!==z)for(y.beginPath(),b=0;b<z;b++)if(c=a.graphicsData[b],d=c.shape,c.type===e.SHAPES.POLY){for(f=d.points,y.moveTo(f[0],f[1]),g=1;g<f.length/2;g++)y.lineTo(f[2*g],f[2*g+1]);f[0]===f[f.length-2]&&f[1]===f[f.length-1]&&y.closePath()}else c.type===e.SHAPES.RECT?(y.rect(d.x,d.y,d.width,d.height),y.closePath()):c.type===e.SHAPES.CIRC?(y.arc(d.x,d.y,d.radius,0,2*Math.PI),y.closePath()):c.type===e.SHAPES.ELIP?(h=2*d.width,i=2*d.height,j=d.x-h/2,k=d.y-i/2,l=.5522848,m=h/2*l,n=i/2*l,o=j+h,p=k+i,q=j+h/2,r=k+i/2,y.moveTo(j,r),y.bezierCurveTo(j,r-n,q-m,k,q,k),y.bezierCurveTo(q+m,k,o,r-n,o,r),y.bezierCurveTo(o,r+n,q+m,p,q,p),y.bezierCurveTo(q-m,p,j,r+n,j,r),y.closePath()):c.type===e.SHAPES.RREC&&(s=d.x,t=d.y,u=d.width,v=d.height,w=d.radius,x=Math.min(u,v)/2|0,w=w>x?x:w,y.moveTo(s,t+w),y.lineTo(s,t+v-w),y.quadraticCurveTo(s,t+v,s+w,t+v),y.lineTo(s+u-w,t+v),y.quadraticCurveTo(s+u,t+v,s+u,t+v-w),y.lineTo(s+u,t+w),y.quadraticCurveTo(s+u,t,s+u-w,t),y.lineTo(s+w,t),y.quadraticCurveTo(s,t,s,t+w),y.closePath())},d.prototype.popMask=function(a){a.context.restore()},d.prototype.destroy=function(){}},{237:237}],270:[function(a,b,c){function d(a,b,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=c||e.RESOLUTION,this.resize(a,b)}var e=a(237);d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},height:{get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}}),d.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},d.prototype.resize=function(a,b){this.canvas.width=a*this.resolution,this.canvas.height=b*this.resolution},d.prototype.destroy=function(){this.context=null,this.canvas=null}},{237:237}],271:[function(a,b,c){var d=function(){var a,b,c,d,e,f,g;return"undefined"!=typeof document&&(a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",b="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image,c.src=a+"AP804Oa6"+b,d=new Image,d.src=a+"/wCKxvRF"+b,e=document.createElement("canvas"),e.width=6,e.height=1,f=e.getContext("2d"),f.globalCompositeOperation="multiply",f.drawImage(c,0,0),f.drawImage(d,2,0),g=f.getImageData(2,0,1,1).data,255===g[0]&&0===g[1]&&0===g[2])};b.exports=d},{}],272:[function(a,b,c){function d(a){return a=a||[],f()?(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="multiply",a[e.BLEND_MODES.SCREEN]="screen",a[e.BLEND_MODES.OVERLAY]="overlay",a[e.BLEND_MODES.DARKEN]="darken",a[e.BLEND_MODES.LIGHTEN]="lighten",a[e.BLEND_MODES.COLOR_DODGE]="color-dodge",a[e.BLEND_MODES.COLOR_BURN]="color-burn",a[e.BLEND_MODES.HARD_LIGHT]="hard-light",a[e.BLEND_MODES.SOFT_LIGHT]="soft-light",a[e.BLEND_MODES.DIFFERENCE]="difference",a[e.BLEND_MODES.EXCLUSION]="exclusion",a[e.BLEND_MODES.HUE]="hue",a[e.BLEND_MODES.SATURATION]="saturate",a[e.BLEND_MODES.COLOR]="color",a[e.BLEND_MODES.LUMINOSITY]="luminosity"):(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="source-over",a[e.BLEND_MODES.SCREEN]="source-over",a[e.BLEND_MODES.OVERLAY]="source-over",a[e.BLEND_MODES.DARKEN]="source-over",a[e.BLEND_MODES.LIGHTEN]="source-over",a[e.BLEND_MODES.COLOR_DODGE]="source-over",a[e.BLEND_MODES.COLOR_BURN]="source-over",a[e.BLEND_MODES.HARD_LIGHT]="source-over",a[e.BLEND_MODES.SOFT_LIGHT]="source-over",a[e.BLEND_MODES.DIFFERENCE]="source-over",a[e.BLEND_MODES.EXCLUSION]="source-over",a[e.BLEND_MODES.HUE]="source-over",a[e.BLEND_MODES.SATURATION]="source-over",a[e.BLEND_MODES.COLOR]="source-over",a[e.BLEND_MODES.LUMINOSITY]="source-over"),a}var e=a(237),f=a(271);b.exports=d},{237:237,271:271}],273:[function(a,b,c){function d(a){this.renderer=a,this.count=0,this.checkCount=0,this.maxIdle=3600,this.checkCountMax=600,this.mode=e.GC_MODES.DEFAULT}var e=a(237);d.prototype.constructor=d,b.exports=d,d.prototype.update=function(){this.count++,this.mode!==e.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},d.prototype.run=function(){var a,b,c,d=this.renderer.textureManager,e=d._managedTextures,f=!1;for(a=0;a<e.length;a++)c=e[a],!c._glRenderTargets&&this.count-c.touched>this.maxIdle&&(d.destroyTexture(c,!0),e[a]=null,f=!0);if(f){for(b=0,a=0;a<e.length;a++)null!==e[a]&&(e[b++]=e[a]);e.length=b}},d.prototype.unload=function(a){var b,c=this.renderer.textureManager;for(a._texture&&c.destroyTexture(a._texture,!0),b=a.children.length-1;b>=0;b--)this.unload(a.children[b])}},{237:237}],274:[function(a,b,c){var d=a(20).GLTexture,e=a(237),f=a(287),g=a(310),h=function(a){this.renderer=a,this.gl=a.gl,this._managedTextures=[]};h.prototype.bindTexture=function(){},h.prototype.getTexture=function(){},h.prototype.updateTexture=function(a){var b,c,g;if(a=a.baseTexture||a,b=!!a._glRenderTargets,a.hasLoaded)return c=a._glTextures[this.renderer.CONTEXT_UID],c?b?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):c.upload(a.source):(b?(g=new f(this.gl,a.width,a.height,a.scaleMode,a.resolution),g.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=g,c=g.texture):(c=new d(this.gl),c.premultiplyAlpha=!0,c.upload(a.source)),a._glTextures[this.renderer.CONTEXT_UID]=c,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&c.enableMipmap(),a.wrapMode===e.WRAP_MODES.CLAMP?c.enableWrapClamp():a.wrapMode===e.WRAP_MODES.REPEAT?c.enableWrapRepeat():c.enableWrapMirrorRepeat()):c.enableWrapClamp(),a.scaleMode===e.SCALE_MODES.NEAREST?c.enableNearestScaling():c.enableLinearScaling()),c},h.prototype.destroyTexture=function(a,b){if(a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.renderer.CONTEXT_UID]&&(a._glTextures[this.renderer.CONTEXT_UID].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.renderer.CONTEXT_UID],!b)){var c=this._managedTextures.indexOf(a);c!==-1&&g.removeItems(this._managedTextures,c,1)}},h.prototype.removeAll=function(){var a,b;for(a=0;a<this._managedTextures.length;++a)b=this._managedTextures[a],b._glTextures[this.renderer.CONTEXT_UID]&&delete b._glTextures[this.renderer.CONTEXT_UID]},h.prototype.destroy=function(){var a,b;for(a=0;a<this._managedTextures.length;++a)b=this._managedTextures[a],this.destroyTexture(b,!0),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this);this._managedTextures=null},b.exports=h},{20:20,237:237,287:287,310:310}],275:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"WebGL",a,b,c),this.type=s.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._contextOptions={alpha:this.transparent,antialias:c.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:c.preserveDrawingBuffer},this._backgroundColorRgba[3]=this.transparent?0:1,this.maskManager=new f(this),this.stencilManager=new g(this),this.emptyRenderer=new j(this),this.currentRenderer=this.emptyRenderer,this.initPlugins(),c.context&&p(c.context),this.gl=c.context||n(this.view,this._contextOptions),this.CONTEXT_UID=t++,this.state=new m(this.gl),this.renderingToScreen=!0,this._initContext(),this.filterManager=new h(this),this.drawModes=o(this.gl),this._activeShader=null,this._activeRenderTarget=null,this._activeTextureLocation=999,this._activeTexture=null,this.setBlendMode(0)}var e=a(267),f=a(282),g=a(283),h=a(281),i=a(287),j=a(285),k=a(274),l=a(273),m=a(276),n=a(20).createContext,o=a(290),p=a(291),q=a(310),r=a(20),s=a(237),t=0;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,q.pluginTarget.mixin(d),d.prototype._initContext=function(){var a=this.gl;this.textureManager=new k(this),this.textureGC=new l(this),this.state.resetToDefault(),this.rootRenderTarget=new i(a,this.width,this.height,null,this.resolution,(!0)),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),this.emit("context",a),this.resize(this.width,this.height)},d.prototype.render=function(a,b,c,d,e){if(this.renderingToScreen=!b,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(b||(this._lastObjectRendered=a),!e){var f=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=f}this.bindRenderTexture(b,d),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},d.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},d.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.rootRenderTarget.resize(a,b),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},d.prototype.setBlendMode=function(a){this.state.setBlendMode(a)},d.prototype.clear=function(a){this._activeRenderTarget.clear(a)},d.prototype.setTransform=function(a){this._activeRenderTarget.transform=a},d.prototype.bindRenderTexture=function(a,b){var c,d,e;return a?(d=a.baseTexture,e=this.gl,d._glRenderTargets[this.CONTEXT_UID]?(this._activeTextureLocation=d._id,e.activeTexture(e.TEXTURE0+d._id),e.bindTexture(e.TEXTURE_2D,null)):(this.textureManager.updateTexture(d),e.bindTexture(e.TEXTURE_2D,null)),c=d._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)):c=this.rootRenderTarget,c.transform=b,this.bindRenderTarget(c),this},d.prototype.bindRenderTarget=function(a){return a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack)),this},d.prototype.bindShader=function(a){return this._activeShader!==a&&(this._activeShader=a,a.bind(),a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},d.prototype.bindTexture=function(a,b){a=a.baseTexture||a;var c=this.gl;return b=b||0,this._activeTextureLocation!==b&&(this._activeTextureLocation=b,c.activeTexture(c.TEXTURE0+b)),this._activeTexture=a,a._glTextures[this.CONTEXT_UID]?(a.touched=this.textureGC.count,a._glTextures[this.CONTEXT_UID].bind()):this.textureManager.updateTexture(a),this},d.prototype.createVao=function(){return new r.VertexArrayObject(this.gl,this.state.attribState)},d.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._activeTextureLocation=999,this._activeTexture=null,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},d.prototype.handleContextLost=function(a){a.preventDefault()},d.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},d.prototype.destroy=function(a){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,a),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null}},{20:20,237:237,267:267,273:273,274:274,276:276,281:281,282:282,283:283,285:285,287:287,290:290,291:291,310:310}],276:[function(a,b,c){function d(a){this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=a,this.maxAttribs=a.getParameter(a.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=j(a),this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")}var e,f,g,h,i,j=a(289);d.prototype.push=function(){var a,b=this.state[++this.stackIndex];for(b||(b=this.state[this.stackIndex]=new Uint8Array(16)),a=0;a<this.activeState.length;a++)this.activeState[a]=b[a]},e=0,f=1,g=2,h=3,i=4,d.prototype.pop=function(){var a=this.state[--this.stackIndex];this.setState(a)},d.prototype.setState=function(a){this.setBlend(a[e]),this.setDepthTest(a[f]),this.setFrontFace(a[g]),this.setCullFace(a[h]),this.setBlendMode(a[i])},d.prototype.setBlend=function(a){if(!(this.activeState[e]===a|0)){this.activeState[e]=0|a;var b=this.gl;a?b.enable(b.BLEND):b.disable(b.BLEND)}},d.prototype.setBlendMode=function(a){a!==this.activeState[i]&&(this.activeState[i]=a,this.gl.blendFunc(this.blendModes[a][0],this.blendModes[a][1]))},d.prototype.setDepthTest=function(a){if(!(this.activeState[f]===a|0)){this.activeState[f]=0|a;var b=this.gl;a?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST)}},d.prototype.setCullFace=function(a){if(!(this.activeState[h]===a|0)){this.activeState[h]=0|a;var b=this.gl;a?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE)}},d.prototype.setFrontFace=function(a){if(!(this.activeState[g]===a|0)){this.activeState[g]=0|a;var b=this.gl;a?b.frontFace(b.CW):b.frontFace(b.CCW)}},d.prototype.resetAttributes=function(){var a,b;for(a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(a=0;a<this.attribState.attribState.length;a++)this.attribState.attribState[a]=0;for(b=this.gl,a=1;a<this.maxAttribs;a++)b.disableVertexAttribArray(a)},d.prototype.resetToDefault=function(){var a,b;for(this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes(),a=0;a<this.activeState.length;a++)this.activeState[a]=2;b=this.gl,b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},b.exports=d},{289:289}],277:[function(a,b,c){function d(a,b,c){this.vertexSrc=a||d.defaultVertexSrc,this.fragmentSrc=b||d.defaultFragmentSrc,this.blendMode=g.BLEND_MODES.NORMAL,this.uniformData=c||e(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var i in this.uniformData)this.uniforms[i]=this.uniformData[i].value;this.glShaders=[],h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=f.uid()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1}var e=a(278),f=a(310),g=a(237),h={};b.exports=d,d.prototype.apply=function(a,b,c,d){a.applyFilter(this,b,c,d)},d.defaultVertexSrc="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}",d.defaultFragmentSrc="varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"},{237:237,278:278,310:310}],278:[function(a,b,c){function d(a,b,c){var d=e(a,c),f=e(b,c);return Object.assign(d,f)}function e(a){var b,c,d,e,g,h,i,j=RegExp("^(projectionMatrix|uSampler|filterArea)$"),k={},l=a.replace(/\s+/g," ").split(/\s*;\s*/);for(c=0;c<l.length;c++)d=l[c].trim(),d.indexOf("uniform")>-1&&(e=d.split(" "),g=e[1],h=e[2],i=1,h.indexOf("[")>-1&&(b=h.split(/\[|\]/),h=b[0],i*=+b[1]),h.match(j)||(k[h]={value:f(g,i),name:h,type:g}));return k}var f=a(20).shader.defaultValue;b.exports=d},{20:20}],279:[function(a,b,c){var d=a(261),e=function(a,b,c){var d=a.identity();return d.translate(b.x/c.width,b.y/c.height),d.scale(c.width,c.height),d},f=function(a,b,c){var d,e,f=a.identity();return f.translate(b.x/c.width,b.y/c.height),d=c.width/b.width,e=c.height/b.height,f.scale(d,e),f},g=function(a,b,c,e){var f,g,h=e.worldTransform.copy(d.Matrix.TEMP_MATRIX),i=e._texture.baseTexture,j=a.identity(),k=c.height/c.width;return j.translate(b.x/c.width,b.y/c.height),j.scale(1,k),f=c.width/i.width,g=c.height/i.height,h.tx/=i.width*f,h.ty/=i.width*f,h.invert(),j.prepend(h),j.scale(1,1/k),j.scale(f,g),j.translate(e.anchor.x,e.anchor.y),j};b.exports={calculateScreenSpaceMatrix:e,calculateNormalizedScreenSpaceMatrix:f,calculateSpriteMatrix:g}},{261:261}],280:[function(a,b,c){function d(a){var b=new f.Matrix;e.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","#define GLSLIFY 1\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n"),
a.renderable=!1,this.maskSprite=a,this.maskMatrix=b}var e=a(277),f=a(261);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=this.maskSprite;this.uniforms.mask=d._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,d),this.uniforms.alpha=d.worldAlpha,a.applyFilter(this,b,c)}},{261:261,277:277}],281:[function(a,b,c){function d(a){e.call(this,a),this.gl=this.renderer.gl,this.quad=new g(this.gl,a.state.attribState),this.shaderCache={},this.pool={}}var e=a(284),f=a(287),g=a(286),h=a(261),i=a(236),j=a(279),k=a(1),l=function(){this.renderTarget=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[],this.target=null,this.resolution=1};d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.pushFilter=function(a,b){var c,d,e,f,g,h,i,j,k=this.renderer,m=this.filterData;m||(m=this.renderer._activeRenderTarget.filterStack,c=new l,c.sourceFrame=c.destinationFrame=this.renderer._activeRenderTarget.size,c.renderTarget=k._activeRenderTarget,this.renderer._activeRenderTarget.filterData=m={index:0,stack:[c]},this.filterData=m),d=m.stack[++m.index],d||(d=m.stack[m.index]=new l),e=b[0].resolution,f=b[0].padding,g=a.filterArea||a.getBounds(!0),h=d.sourceFrame,i=d.destinationFrame,h.x=((g.x-f)*e|0)/e,h.y=((g.y-f)*e|0)/e,h.width=((g.width+2*f)*e|0)/e,h.height=((g.height+2*f)*e|0)/e,m.stack[0].renderTarget.transform||h.fit(m.stack[0].destinationFrame),i.width=h.width,i.height=h.height,j=this.getPotRenderTarget(k.gl,h.width,h.height,e),d.target=a,d.filters=b,d.resolution=e,d.renderTarget=j,j.setFrame(i,h),k.bindRenderTarget(j),k.clear()},d.prototype.popFilter=function(){var a,b,c,d,e,f=this.filterData,g=f.stack[f.index-1],h=f.stack[f.index];if(this.quad.map(h.renderTarget.size,h.sourceFrame).upload(),a=h.filters,1===a.length)a[0].apply(this,h.renderTarget,g.renderTarget,!1),this.freePotRenderTarget(h.renderTarget);else{for(b=h.renderTarget,c=this.getPotRenderTarget(this.renderer.gl,h.sourceFrame.width,h.sourceFrame.height,1),c.setFrame(h.destinationFrame,h.sourceFrame),d=0;d<a.length-1;d++)a[d].apply(this,b,c,!0),e=b,b=c,c=e;a[d].apply(this,b,g.renderTarget,!1),this.freePotRenderTarget(b),this.freePotRenderTarget(c)}f.index--,0===f.index&&(this.filterData=null)},d.prototype.applyFilter=function(a,b,c,d){var e,f=this.renderer,g=a.glShaders[f.CONTEXT_UID];g||(a.glShaderKey?(g=this.shaderCache[a.glShaderKey],g||(g=a.glShaders[f.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=new i(this.gl,a.vertexSrc,a.fragmentSrc))):g=a.glShaders[f.CONTEXT_UID]=new i(this.gl,a.vertexSrc,a.fragmentSrc),this.quad.initVao(g)),f.bindRenderTarget(c),d&&(e=f.gl,e.disable(e.SCISSOR_TEST),f.clear(),e.enable(e.SCISSOR_TEST)),c===f.maskManager.scissorRenderTarget&&f.maskManager.pushScissorMask(null,f.maskManager.scissorData),f.bindShader(g),this.syncUniforms(g,a),b.texture.bind(0),f._activeTextureLocation=0,f.state.setBlendMode(a.blendMode),this.quad.draw()},d.prototype.syncUniforms=function(a,b){var c,d,e,f,g,h=b.uniformData,i=b.uniforms,j=1;a.uniforms.data.filterArea&&(c=this.filterData.stack[this.filterData.index],d=a.uniforms.filterArea,d[0]=c.renderTarget.size.width,d[1]=c.renderTarget.size.height,d[2]=c.sourceFrame.x,d[3]=c.sourceFrame.y,a.uniforms.filterArea=d),a.uniforms.data.filterClamp&&(c=this.filterData.stack[this.filterData.index],e=a.uniforms.filterClamp,e[0]=.5/c.renderTarget.size.width,e[1]=.5/c.renderTarget.size.height,e[2]=(c.sourceFrame.width-.5)/c.renderTarget.size.width,e[3]=(c.sourceFrame.height-.5)/c.renderTarget.size.height,a.uniforms.filterClamp=e);for(g in h)"sampler2D"===h[g].type?(a.uniforms[g]=j,this.renderer.bindTexture(i[g].baseTexture,j),j++):"mat3"===h[g].type?void 0!==i[g].a?a.uniforms[g]=i[g].toArray(!0):a.uniforms[g]=i[g]:"vec2"===h[g].type?void 0!==i[g].x?(f=a.uniforms[g]||new Float32Array(2),f[0]=i[g].x,f[1]=i[g].y,a.uniforms[g]=f):a.uniforms[g]=i[g]:"float"===h[g].type?a.uniforms.data[g].value!==h[g]&&(a.uniforms[g]=i[g]):a.uniforms[g]=i[g]},d.prototype.getRenderTarget=function(){var a=this.filterData.stack[this.filterData.index],b=this.getPotRenderTarget(this.renderer.gl,a.sourceFrame.width,a.sourceFrame.height,a.resolution);return b.setFrame(a.destinationFrame,a.sourceFrame),b},d.prototype.returnRenderTarget=function(a){return this.freePotRenderTarget(a)},d.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return j.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)},d.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return j.calculateNormalizedScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size,b.destinationFrame)},d.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return j.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b)},d.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},d.prototype.getPotRenderTarget=function(a,b,c,d){var e,g;return b=k.nextPow2(b*d),c=k.nextPow2(c*d),e=(65535&b)<<16|65535&c,this.pool[e]||(this.pool[e]=[]),g=this.pool[e].pop()||new f(a,b,c,null,1),g.resolution=d,g.defaultFrame.width=g.size.width=b/d,g.defaultFrame.height=g.size.height=c/d,g},d.prototype.emptyPool=function(){var a,b,c;for(a in this.pool)if(b=this.pool[a])for(c=0;c<b.length;c++)b[c].destroy(!0);this.pool={}},d.prototype.freePotRenderTarget=function(a){var b=a.size.width*a.resolution,c=a.size.height*a.resolution,d=(65535&b)<<16|65535&c;this.pool[d].push(a)}},{1:1,236:236,261:261,279:279,284:284,286:286,287:287}],282:[function(a,b,c){function d(a){e.call(this,a),this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!0,this.alphaMaskPool=[],this.alphaMaskIndex=0}var e=a(284),f=a(280);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a,b){var c,d;b.texture?this.pushSpriteMask(a,b):this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()?(c=b.worldTransform,d=Math.atan2(c.b,c.a),d=Math.round(d*(180/Math.PI)),d%90?this.pushStencilMask(b):this.pushScissorMask(a,b)):this.pushStencilMask(b)},d.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)},d.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new f(b)]),c[0].maskSprite=b,a.filterArea=b.getBounds(!0),this.renderer.filterManager.pushFilter(a,c),this.alphaMaskIndex++},d.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},d.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(a)},d.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},d.prototype.pushScissorMask=function(a,b){var c,d,e;b.renderable=!0,c=this.renderer._activeRenderTarget,d=b.getBounds(),d.fit(c.size),b.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),e=this.renderer.resolution,this.renderer.gl.scissor(d.x*e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e),this.scissorRenderTarget=c,this.scissorData=b,this.scissor=!0},d.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)}},{280:280,284:284}],283:[function(a,b,c){function d(a){e.call(this,a),this.stencilMaskStack=null}var e=a(284);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},d.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var b=this.renderer.gl,c=this.stencilMaskStack;0===c.length&&(b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(b.ALWAYS,1,1)),c.push(a),b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.INCR),this.renderer.plugins.graphics.render(a),b.colorMask(!0,!0,!0,!0),b.stencilFunc(b.NOTEQUAL,0,c.length),b.stencilOp(b.KEEP,b.KEEP,b.KEEP)},d.prototype.popStencil=function(){var a,b,c;this.renderer.setObjectRenderer(this.renderer.plugins.graphics),a=this.renderer.gl,b=this.stencilMaskStack,c=b.pop(),0===b.length?a.disable(a.STENCIL_TEST):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(c),a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.NOTEQUAL,0,b.length),a.stencilOp(a.KEEP,a.KEEP,a.KEEP))},d.prototype.destroy=function(){e.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null}},{284:284}],284:[function(a,b,c){function d(a){this.renderer=a,this.renderer.on("context",this.onContextChange,this)}d.prototype.constructor=d,b.exports=d,d.prototype.onContextChange=function(){},d.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],285:[function(a,b,c){function d(a){e.call(this,a)}var e=a(284);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.start=function(){},d.prototype.stop=function(){this.flush()},d.prototype.flush=function(){},d.prototype.render=function(a){}},{284:284}],286:[function(a,b,c){function d(a,b){this.gl=a,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var c=0;c<4;c++)this.interleaved[4*c]=this.vertices[2*c],this.interleaved[4*c+1]=this.vertices[2*c+1],this.interleaved[4*c+2]=this.uvs[2*c],this.interleaved[4*c+3]=this.uvs[2*c+1];this.indices=f(1),this.vertexBuffer=e.GLBuffer.createVertexBuffer(a,this.interleaved,a.STATIC_DRAW),this.indexBuffer=e.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.vao=new e.VertexArrayObject(a,b)}var e=a(20),f=a(308);d.prototype.constructor=d,d.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},d.prototype.map=function(a,b){var c=0,d=0;return this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this},d.prototype.draw=function(){return this.vao.bind().draw(this.gl.TRIANGLES,6,0).unbind(),this},d.prototype.upload=function(){for(var a=0;a<4;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];return this.vertexBuffer.upload(this.interleaved),this},d.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.indexBuffer)},b.exports=d},{20:20,308:308}],287:[function(a,b,c){var d=a(261),e=a(237),f=a(20).GLFramebuffer,g=function(a,b,c,g,h,i){this.gl=a,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new d.Rectangle(0,0,1,1),this.resolution=h||e.RESOLUTION,this.projectionMatrix=new d.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new d.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=g||e.SCALE_MODES.DEFAULT,this.root=i,this.root?(this.frameBuffer=new f(a,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=f.createRGBA(a,100,100),this.scaleMode===e.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(b,c)};g.prototype.constructor=g,b.exports=g,g.prototype.clear=function(a){var b=a||this.clearColor;this.frameBuffer.clear(b[0],b[1],b[2],b[3])},g.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},g.prototype.setFrame=function(a,b){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=b||this.sourceFrame||a},g.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST),a.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},g.prototype.calculateProjection=function(a,b){var c=this.projectionMatrix;b=b||a,c.identity(),this.root?(c.a=1/a.width*2,c.d=-1/a.height*2,c.tx=-1-b.x*c.a,c.ty=1-b.y*c.d):(c.a=1/a.width*2,c.d=1/a.height*2,c.tx=-1-b.x*c.a,c.ty=-1-b.y*c.d)},g.prototype.resize=function(a,b){if(a=0|a,b=0|b,this.size.width!==a||this.size.height!==b){this.size.width=a,this.size.height=b,this.defaultFrame.width=a,this.defaultFrame.height=b,this.frameBuffer.resize(a*this.resolution,b*this.resolution);var c=this.frame||this.size;this.calculateProjection(c)}},g.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null}},{20:20,237:237,261:261}],288:[function(a,b,c){function d(a){var b,c="";for(b=0;b<a;b++)b>0&&(c+="\nelse "),b<a-1&&(c+="if(test == "+b+".0){}");return c}var e=a(20),f="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}",g=function(a,b){var c,g,h,i=!b;for(i&&(c=document.createElement("canvas"),c.width=1,c.height=1,b=e.createContext(c)),g=b.createShader(b.FRAGMENT_SHADER);;){if(h=f.replace(/%forloop%/gi,d(a)),b.shaderSource(g,h),b.compileShader(g),b.getShaderParameter(g,b.COMPILE_STATUS))break;a=a/2|0}return i&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext(),a};b.exports=g},{20:20}],289:[function(a,b,c){function d(a,b){return b=b||[],b[e.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],b[e.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],b[e.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b}var e=a(237);b.exports=d},{237:237}],290:[function(a,b,c){function d(a,b){b=b||{},b[e.DRAW_MODES.POINTS]=a.POINTS,b[e.DRAW_MODES.LINES]=a.LINES,b[e.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,b[e.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,b[e.DRAW_MODES.TRIANGLES]=a.TRIANGLES,b[e.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,b[e.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN}var e=a(237);b.exports=d},{237:237}],291:[function(a,b,c){function d(a){var b=a.getContextAttributes();b.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}b.exports=d},{}],292:[function(a,b,c){function d(a){g.call(this),this.anchor=new e.ObservablePoint(this.onAnchorUpdate,this),this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=i.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=a||f.EMPTY,this.vertexData=new Float32Array(16),this._transformID=-1,this._textureID=-1}var e=a(261),f=a(303),g=a(239),h=a(310),i=a(237),j=new e.Point;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},height:{get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(a){var b=h.sign(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureID=-1,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}}),d.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=h.sign(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=h.sign(this.scale.y)*this._height/this.texture.orig.height)},d.prototype.onAnchorUpdate=function(){this._transformID=-1},d.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var a,b,c,d,e=this._texture,f=this.transform.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.vertexData,n=e.trim,o=e.orig;n?(b=n.x-this.anchor.x*o.width,a=b+n.width,d=n.y-this.anchor.y*o.height,c=d+n.height):(a=o.width*(1-this.anchor.x),b=o.width*-this.anchor.x,c=o.height*(1-this.anchor.y),d=o.height*-this.anchor.y),m[0]=g*b+i*d+k,m[1]=j*d+h*b+l,m[2]=g*a+i*d+k,m[3]=j*d+h*a+l,m[4]=g*a+i*c+k,m[5]=j*c+h*a+l,m[6]=g*b+i*c+k,m[7]=j*c+h*b+l}},d.prototype.calculateBoundsVertices=function(){var a,b,c,d,e,f,g,h,i,j,k,l=this._texture,m=l.trim,n=this.vertexData,o=l.orig;return!m||m.width===o.width&&m.height===o.height?(n[8]=n[0],n[9]=n[1],n[10]=n[2],n[11]=n[3],n[12]=n[4],n[13]=n[5],n[14]=n[6],void(n[15]=n[7])):(a=this.transform.worldTransform,b=a.a,c=a.b,d=a.c,e=a.d,f=a.tx,g=a.ty,h=o.width*(1-this.anchor.x),i=o.width*-this.anchor.x,j=o.height*(1-this.anchor.y),k=o.height*-this.anchor.y,n[8]=b*i+d*k+f,n[9]=e*k+c*i+g,n[10]=b*h+d*k+f,n[11]=e*k+c*h+g,n[12]=b*h+d*j+f,n[13]=e*j+c*h+g,n[14]=b*i+d*j+f,void(n[15]=e*j+c*i+g))},d.prototype._renderWebGL=function(a){this.calculateVertices(),a.setObjectRenderer(a.plugins.sprite),a.plugins.sprite.render(this)},d.prototype._renderCanvas=function(a){a.plugins.sprite.render(this)},d.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds_.addQuad(this.vertexData)},d.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture.orig.width*this.anchor.x,this._bounds.y=-this._texture.orig.height*this.anchor.y,this._bounds.width=this._texture.orig.width,this._bounds.height=this._texture.orig.height,this._bounds},d.prototype.containsPoint=function(a){var b,c,d,e;return this.worldTransform.applyInverse(a,j),b=this._texture.orig.width,c=this._texture.orig.height,d=-b*this.anchor.x,j.x>d&&j.x<d+b&&(e=-c*this.anchor.y,j.y>e&&j.y<e+c)},d.prototype.destroy=function(a){var b,c;g.prototype.destroy.call(this,a),this.anchor=null,b="boolean"==typeof a?a:a&&a.texture,b&&(c="boolean"==typeof a?a:a&&a.baseTexture,this._texture.destroy(!!c)),this._texture=null,this.shader=null},d.from=function(a){return new d(f.from(a))},d.fromFrame=function(a){var b=h.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return new d(b)},d.fromImage=function(a,b,c){return new d(f.fromImage(a,b,c))}},{237:237,239:239,261:261,303:303,310:310}],293:[function(a,b,c){function d(a){this.renderer=a}var e=a(268),f=a(237),g=a(261),h=new g.Matrix,i=a(294);d.prototype.constructor=d,b.exports=d,e.registerPlugin("sprite",d),d.prototype.render=function(a){var b,c,d,e,j=a._texture,k=this.renderer,l=a.transform.worldTransform,m=j._frame.width,n=j._frame.height;j.orig.width<=0||j.orig.height<=0||!j.baseTexture.source||(k.setBlendMode(a.blendMode),j.valid&&(k.context.globalAlpha=a.worldAlpha,d=j.baseTexture.scaleMode===f.SCALE_MODES.LINEAR,k.smoothProperty&&k.context[k.smoothProperty]!==d&&(k.context[k.smoothProperty]=d),j.trim?(b=j.trim.width/2+j.trim.x-a.anchor.x*j.orig.width,c=j.trim.height/2+j.trim.y-a.anchor.y*j.orig.height):(b=(.5-a.anchor.x)*j.orig.width,c=(.5-a.anchor.y)*j.orig.height),j.rotate&&(l.copy(h),l=h,g.GroupD8.matrixAppendRotationInv(l,j.rotate,b,c),b=0,c=0),b-=m/2,c-=n/2,k.roundPixels?(k.context.setTransform(l.a,l.b,l.c,l.d,l.tx*k.resolution|0,l.ty*k.resolution|0),b=0|b,c=0|c):k.context.setTransform(l.a,l.b,l.c,l.d,l.tx*k.resolution,l.ty*k.resolution),e=j.baseTexture.resolution,16777215!==a.tint?(a.cachedTint!==a.tint&&(a.cachedTint=a.tint,a.tintedTexture=i.getTintedTexture(a,a.tint)),k.context.drawImage(a.tintedTexture,0,0,m*e,n*e,b*k.resolution,c*k.resolution,m*k.resolution,n*k.resolution)):k.context.drawImage(j.baseTexture.source,j._frame.x*e,j._frame.y*e,m*e,n*e,b*k.resolution,c*k.resolution,m*k.resolution,n*k.resolution)))},d.prototype.destroy=function(){this.renderer=null}},{237:237,261:261,268:268,294:294}],294:[function(a,b,c){var d=a(310),e=a(271),f=b.exports={getTintedTexture:function(a,b){var c,d,e,g=a.texture;return b=f.roundColor(b),c="#"+("00000"+(0|b).toString(16)).substr(-6),g.tintCache=g.tintCache||{},g.tintCache[c]?g.tintCache[c]:(d=f.canvas||document.createElement("canvas"),f.tintMethod(g,b,d),f.convertTintToImage?(e=new Image,e.src=d.toDataURL(),g.tintCache[c]=e):(g.tintCache[c]=d,f.canvas=null),d)},tintWithMultiply:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithOverlay:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithPerPixel:function(a,b,c){var e,f,g,h,i,j,k,l=c.getContext("2d"),m=a._frame.clone(),n=a.baseTexture.resolution;for(m.x*=n,m.y*=n,m.width*=n,m.height*=n,c.width=m.width,c.height=m.height,l.globalCompositeOperation="copy",l.drawImage(a.baseTexture.source,m.x,m.y,m.width,m.height,0,0,m.width,m.height),e=d.hex2rgb(b),f=e[0],g=e[1],h=e[2],i=l.getImageData(0,0,m.width,m.height),j=i.data,k=0;k<j.length;k+=4)j[k+0]*=f,j[k+1]*=g,j[k+2]*=h;l.putImageData(i,0,0)},roundColor:function(a){var b=f.cacheStepsPerColorChannel,c=d.hex2rgb(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),d.rgb2hex(c)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:e(),tintMethod:0};f.tintMethod=f.canUseMultiply?f.tintWithMultiply:f.tintWithPerPixel},{271:271,310:310}],295:[function(a,b,c){var d=function(a){this.vertices=new ArrayBuffer(a),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)};b.exports=d,d.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null}},{}],296:[function(a,b,c){function d(a){var b,c,d;for(e.call(this,a),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=k.SPRITE_BATCH_SIZE,this.buffers=[],b=1;b<=m.nextPow2(this.size);b*=2)c=4*b*this.vertByteSize,this.buffers.push(new j(c));for(this.indices=g(this.size),this.shaders=null,this.textureCount=0,this.currentIndex=0,this.tick=0,this.groups=[],d=0;d<this.size;d++)this.groups[d]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};this.sprites=[],this.vertexBuffers=[],this.vaos=[],this.vaoMax=2,this.vertexCount=0,this.renderer.on("prerender",this.onPrerender,this)}var e=a(285),f=a(275),g=a(308),h=a(297),i=a(288),j=a(295),k=a(237),l=a(20),m=a(1);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,f.registerPlugin("sprite",d),d.prototype.onContextChange=function(){var a,b,c=this.renderer.gl;for(this.MAX_TEXTURES=Math.min(c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS),k.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=i(this.MAX_TEXTURES,c),this.shaders=Array(this.MAX_TEXTURES),this.shaders[0]=h(c,1),this.shaders[1]=h(c,2),this.indexBuffer=l.GLBuffer.createIndexBuffer(c,this.indices,c.STATIC_DRAW),a=this.shaders[1],b=0;b<this.vaoMax;b++)this.vertexBuffers[b]=l.GLBuffer.createVertexBuffer(c,null,c.STREAM_DRAW),this.vaos[b]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[b],a.attributes.aVertexPosition,c.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[b],a.attributes.aTextureCoord,c.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[b],a.attributes.aColor,c.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[b],a.attributes.aTextureId,c.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999},d.prototype.onPrerender=function(){this.vertexCount=0},d.prototype.render=function(a){this.currentIndex>=this.size&&this.flush(),a.texture._uvs&&(this.sprites[this.currentIndex++]=a)},d.prototype.flush=function(){var a,b,c,d,e,f,g,i,j,k,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;if(0!==this.currentIndex){for(a=this.renderer.gl,b=m.nextPow2(this.currentIndex),c=m.log2(b),d=this.buffers[c],e=this.sprites,f=this.groups,g=d.float32View,i=d.uint32View,j=0,o=1,p=0,q=f[0],v=e[0].blendMode,q.textureCount=0,q.start=0,q.blend=v,this.tick++,x=0;x<this.currentIndex;x++)y=e[x],k=y._texture.baseTexture,v!==y.blendMode&&(v=y.blendMode,n=null,p=this.MAX_TEXTURES,this.tick++),n!==k&&(n=k,k._enabled!==this.tick&&(p===this.MAX_TEXTURES&&(this.tick++,p=0,q.size=x-q.start,q=f[o++],q.textureCount=0,q.blend=v,q.start=x),k._enabled=this.tick,k._id=p,q.textures[q.textureCount++]=k,p++)),r=y.vertexData,s=(y.tint>>16)+(65280&y.tint)+((255&y.tint)<<16)+(255*y.worldAlpha<<24),t=y._texture._uvs.uvsUint32,u=k._id,g[j++]=r[0],g[j++]=r[1],i[j++]=t[0],i[j++]=s,g[j++]=u,g[j++]=r[2],g[j++]=r[3],i[j++]=t[1],i[j++]=s,g[j++]=u,g[j++]=r[4],g[j++]=r[5],i[j++]=t[2],i[j++]=s,g[j++]=u,g[j++]=r[6],g[j++]=r[7],i[j++]=t[3],i[j++]=s,g[j++]=u;for(q.size=x-q.start,this.vertexCount++,this.vaoMax<=this.vertexCount&&(this.vaoMax++,w=this.shaders[1],this.vertexBuffers[this.vertexCount]=l.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],w.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],w.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],w.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],w.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16)),this.vertexBuffers[this.vertexCount].upload(d.vertices,0),this.vao=this.vaos[this.vertexCount].bind(),x=0;x<o;x++){for(z=f[x],A=z.textureCount,w=this.shaders[A-1],w||(w=this.shaders[A-1]=h(a,A)),this.renderer.bindShader(w),B=0;B<A;B++)this.renderer.bindTexture(z.textures[B],B);this.renderer.state.setBlendMode(z.blend),a.drawElements(a.TRIANGLES,6*z.size,a.UNSIGNED_SHORT,6*z.start*2)}this.currentIndex=0}},d.prototype.start=function(){this.tick%=1e3},d.prototype.stop=function(){this.flush(),this.vao.unbind()},d.prototype.destroy=function(){for(var a=0;a<this.vertexCount;a++)this.vertexBuffers[a].destroy(),this.vaos[a].destroy();for(this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),a=0;a<this.shaders.length;a++)this.shaders[a]&&this.shaders[a].destroy();for(this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null,a=0;a<this.buffers.length;a++)this.buffers[a].destroy()}},{1:1,20:20,237:237,275:275,285:285,288:288,295:295,297:297,308:308}],297:[function(a,b,c){function d(a,b){var c,d,h,i="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vTextureId = aTextureId;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",j=g;for(j=j.replace(/%count%/gi,b),j=j.replace(/%forloop%/gi,e(b)),c=new f(a,i,j),d=[],h=0;h<b;h++)d[h]=h;return c.bind(),c.uniforms.uSamplers=d,c}function e(a){var b,c="";for(c+="\n",c+="\n",b=0;b<a;b++)b>0&&(c+="\nelse "),b<a-1&&(c+="if(textureId == "+b+".0)"),c+="\n{",c+="\n\tcolor = texture2D(uSamplers["+b+"], vTextureCoord);",c+="\n}";return c+="\n",c+="\n"}var f=a(236),g="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}";b.exports=d},{236:236}],298:[function(a,b,c){function d(a,b,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=c||i.RESOLUTION,this._text=null,this._style=null,this._styleListener=null,this._font="";var d=f.fromCanvas(this.canvas);d.orig=new g.Rectangle,d.trim=new g.Rectangle,e.call(this,d),this.text=a,this.style=b}var e=a(292),f=a(303),g=a(261),h=a(310),i=a(237),j=a(299);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.fontPropertiesCache={},d.fontPropertiesCanvas=document.createElement("canvas"),d.fontPropertiesContext=d.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(d.prototype,{width:{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){this.updateText(!0);var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},height:{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},style:{get:function(){return this._style},set:function(a){this._style&&this._style.off(i.TEXT_STYLE_CHANGED,this._onStyleChange,this),a=a||{},a instanceof j?this._style=a:this._style=new j(a),this._style.on(i.TEXT_STYLE_CHANGED,this._onStyleChange,this),this.dirty=!0}},text:{get:function(){return this._text},set:function(a){a=a||" ",a=""+a,this._text!==a&&(this._text=a,this.dirty=!0)}}}),d.prototype.updateText=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;if(this.dirty||!a){for(b=this._style,c="number"==typeof b.fontSize?b.fontSize+"px":b.fontSize,this._font=b.fontStyle+" "+b.fontVariant+" "+b.fontWeight+" "+c+" "+b.fontFamily,this.context.font=this._font,d=b.wordWrap?this.wordWrap(this._text):this._text,e=d.split(/(?:\r\n|\r|\n)/),f=Array(e.length),g=0,h=this.determineFontProperties(this._font),i=0;i<e.length;i++)j=this.context.measureText(e[i]).width+(e[i].length-1)*b.letterSpacing,f[i]=j,g=Math.max(g,j);if(k=g+b.strokeThickness,b.dropShadow&&(k+=b.dropShadowDistance),
this.canvas.width=Math.ceil((k+this.context.lineWidth)*this.resolution),l=this.style.lineHeight||h.fontSize+b.strokeThickness,m=l*e.length,b.dropShadow&&(m+=b.dropShadowDistance),this.canvas.height=Math.ceil((m+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=b.stroke,this.context.lineWidth=b.strokeThickness,this.context.textBaseline=b.textBaseline,this.context.lineJoin=b.lineJoin,this.context.miterLimit=b.miterLimit,b.dropShadow)for(b.dropShadowBlur>0?(this.context.shadowColor=b.dropShadowColor,this.context.shadowBlur=b.dropShadowBlur):this.context.fillStyle=b.dropShadowColor,p=Math.cos(b.dropShadowAngle)*b.dropShadowDistance,q=Math.sin(b.dropShadowAngle)*b.dropShadowDistance,i=0;i<e.length;i++)n=b.strokeThickness/2,o=b.strokeThickness/2+i*l+h.ascent,"right"===b.align?n+=g-f[i]:"center"===b.align&&(n+=(g-f[i])/2),b.fill&&(this.drawLetterSpacing(e[i],n+p,o+q+b.padding),b.stroke&&b.strokeThickness&&(this.context.strokeStyle=b.dropShadowColor,this.drawLetterSpacing(e[i],n+p,o+q+b.padding,!0),this.context.strokeStyle=b.stroke));for(this.context.fillStyle=this._generateFillStyle(b,e),i=0;i<e.length;i++)n=b.strokeThickness/2,o=b.strokeThickness/2+i*l+h.ascent,"right"===b.align?n+=g-f[i]:"center"===b.align&&(n+=(g-f[i])/2),b.stroke&&b.strokeThickness&&this.drawLetterSpacing(e[i],n,o+b.padding,!0),b.fill&&this.drawLetterSpacing(e[i],n,o+b.padding);this.updateTexture()}},d.prototype.drawLetterSpacing=function(a,b,c,d){var e,f,g,h,i=this._style,j=i.letterSpacing;if(0===j)return void(d?this.context.strokeText(a,b,c):this.context.fillText(a,b,c));for(e=String.prototype.split.call(a,""),f=0,h=b;f<a.length;)g=e[f++],d?this.context.strokeText(g,h,c):this.context.fillText(g,h,c),h+=this.context.measureText(g).width+j},d.prototype.updateTexture=function(){var a=this._texture,b=this._style;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.realWidth=this.canvas.width,a.baseTexture.realHeight=this.canvas.height,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.trim.width=a._frame.width=this.canvas.width/this.resolution,a.trim.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=0,a.trim.y=-b.padding,a.orig.width=a._frame.width,a.orig.height=a._frame.height-2*b.padding,this._onTextureUpdate(),a.baseTexture.emit("update",a.baseTexture),this.dirty=!1},d.prototype.renderWebGL=function(a){this.updateText(!0),e.prototype.renderWebGL.call(this,a)},d.prototype._renderCanvas=function(a){this.updateText(!0),e.prototype._renderCanvas.call(this,a)},d.prototype.determineFontProperties=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o=d.fontPropertiesCache[a];if(!o){for(o={},b=d.fontPropertiesCanvas,c=d.fontPropertiesContext,c.font=a,e=Math.ceil(c.measureText("|Mq").width),f=Math.ceil(c.measureText("M").width),g=2*f,f=1.4*f|0,b.width=e,b.height=g,c.fillStyle="#f00",c.fillRect(0,0,e,g),c.font=a,c.textBaseline="alphabetic",c.fillStyle="#000",c.fillText("|Mq",0,f),h=c.getImageData(0,0,e,g).data,i=h.length,j=4*e,m=0,n=!1,k=0;k<f;k++){for(l=0;l<j;l+=4)if(255!==h[m+l]){n=!0;break}if(n)break;m+=j}for(o.ascent=f-k,m=i-j,n=!1,k=g;k>f;k--){for(l=0;l<j;l+=4)if(255!==h[m+l]){n=!0;break}if(n)break;m-=j}o.descent=k-f,o.fontSize=o.ascent+o.descent,d.fontPropertiesCache[a]=o}return o},d.prototype.wordWrap=function(a){var b,c,d,e,f,g,h,i,j,k="",l=a.split("\n"),m=this._style.wordWrapWidth;for(b=0;b<l.length;b++){for(c=m,d=l[b].split(" "),e=0;e<d.length;e++)if(f=this.context.measureText(d[e]).width,this._style.breakWords&&f>m)for(g=d[e].split(""),h=0;h<g.length;h++)i=this.context.measureText(g[h]).width,i>c?(k+="\n"+g[h],c=m-i):(0===h&&(k+=" "),k+=g[h],c-=i);else j=f+this.context.measureText(" ").width,0===e||j>c?(e>0&&(k+="\n"),k+=d[e],c=m-f):(c-=j,k+=" "+d[e]);b<l.length-1&&(k+="\n")}return k},d.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds_.addQuad(this.vertexData)},d.prototype._onStyleChange=function(){this.dirty=!0},d.prototype._generateFillStyle=function(a,b){var c,d,e,f,g,h,j,k;if(Array.isArray(a.fill)){if(h=this.canvas.width/this.resolution,j=this.canvas.height/this.resolution,a.fillGradientType===i.TEXT_GRADIENT.LINEAR_VERTICAL)for(d=this.context.createLinearGradient(h/2,0,h/2,j),e=(a.fill.length+1)*b.length,f=0,c=0;c<b.length;c++)for(f+=1,k=0;k<a.fill.length;k++)g=f/e,d.addColorStop(g,a.fill[k]),f++;else for(d=this.context.createLinearGradient(0,j/2,h,j/2),e=a.fill.length+1,f=1,c=0;c<a.fill.length;c++)g=f/e,d.addColorStop(g,a.fill[c]),f++;return d}return a.fill},d.prototype.destroy=function(a){e.prototype.destroy.call(this,a),this.context=null,this.canvas=null,this._style.off(i.TEXT_STYLE_CHANGED,this._onStyleChange,this),this._style=null}},{237:237,261:261,292:292,299:299,303:303,310:310}],299:[function(a,b,c){function d(a){f.call(this),Object.assign(this,this._defaults,a)}function e(a){if("number"==typeof a)return h.hex2string(a);if(Array.isArray(a))for(var b=0;b<a.length;++b)"number"==typeof a[b]&&(a[b]=h.hex2string(a[b]));return a}var f=a(3),g=a(237),h=a(310);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype._defaults={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:g.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},d.prototype.clone=function(){var a,b={};for(a in this._defaults)b[a]=this[a];return new d(b)},d.prototype.reset=function(){Object.assign(this,this._defaults)},Object.defineProperties(d.prototype,{align:{get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.emit(g.TEXT_STYLE_CHANGED))}},breakWords:{get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.emit(g.TEXT_STYLE_CHANGED))}},dropShadow:{get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.emit(g.TEXT_STYLE_CHANGED))}},dropShadowAngle:{get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.emit(g.TEXT_STYLE_CHANGED))}},dropShadowBlur:{get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.emit(g.TEXT_STYLE_CHANGED))}},dropShadowColor:{get:function(){return this._dropShadowColor},set:function(a){var b=e(a);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.emit(g.TEXT_STYLE_CHANGED))}},dropShadowDistance:{get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.emit(g.TEXT_STYLE_CHANGED))}},fill:{get:function(){return this._fill},set:function(a){var b=e(a);this._fill!==b&&(this._fill=b,this.emit(g.TEXT_STYLE_CHANGED))}},fillGradientType:{get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.emit(g.TEXT_STYLE_CHANGED))}},fontFamily:{get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.emit(g.TEXT_STYLE_CHANGED))}},fontSize:{get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.emit(g.TEXT_STYLE_CHANGED))}},fontStyle:{get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.emit(g.TEXT_STYLE_CHANGED))}},fontVariant:{get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.emit(g.TEXT_STYLE_CHANGED))}},fontWeight:{get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.emit(g.TEXT_STYLE_CHANGED))}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.emit(g.TEXT_STYLE_CHANGED))}},lineHeight:{get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.emit(g.TEXT_STYLE_CHANGED))}},lineJoin:{get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.emit(g.TEXT_STYLE_CHANGED))}},miterLimit:{get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.emit(g.TEXT_STYLE_CHANGED))}},padding:{get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.emit(g.TEXT_STYLE_CHANGED))}},stroke:{get:function(){return this._stroke},set:function(a){var b=e(a);this._stroke!==b&&(this._stroke=b,this.emit(g.TEXT_STYLE_CHANGED))}},strokeThickness:{get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.emit(g.TEXT_STYLE_CHANGED))}},textBaseline:{get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.emit(g.TEXT_STYLE_CHANGED))}},wordWrap:{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.emit(g.TEXT_STYLE_CHANGED))}},wordWrapWidth:{get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.emit(g.TEXT_STYLE_CHANGED))}}})},{237:237,3:3,310:310}],300:[function(a,b,c){function d(a,b,c,d){e.call(this,null,c),this.width=a||100,this.height=b||100,this.realWidth=this.width*d,this.realHeight=this.height*d,this.resolution=d||f.RESOLUTION,this.scaleMode=c||f.SCALE_MODES.DEFAULT,this.hasLoaded=!0,this._glRenderTargets=[],this._canvasRenderTarget=null,this.valid=!1}var e=a(301),f=a(237);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.resize=function(a,b){a===this.width&&b===this.height||(this.valid=a>0&&b>0,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},d.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null}},{237:237,301:301}],301:[function(a,b,c){function d(a,b,c){g.call(this),this.uid=e.uid(),this.touched=0,this.resolution=c||f.RESOLUTION,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=b||f.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=f.MIPMAP_TEXTURES,this.wrapMode=f.WRAP_MODES.DEFAULT,this._glTextures=[],this._enabled=0,this._id=0,a&&this.loadSource(a)}var e=a(310),f=a(237),g=a(3),h=a(309),i=a(1);d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPow2(this.realWidth)&&i.isPow2(this.realHeight),this.emit("update",this)},d.prototype.loadSource=function(a){var b,c=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,c&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=a,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height?this._sourceLoaded():a.getContext||(this.isLoading=!0,b=this,a.onload=function(){a.onload=null,a.onerror=null,b.isLoading&&(b.isLoading=!1,b._sourceLoaded(),b.emit("loaded",b))},a.onerror=function(){a.onload=null,a.onerror=null,b.isLoading&&(b.isLoading=!1,b.emit("error",b))},a.complete&&a.src&&(this.isLoading=!1,a.onload=null,a.onerror=null,a.width&&a.height?(this._sourceLoaded(),c&&this.emit("loaded",this)):c&&this.emit("error",this)))},d.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},d.prototype.destroy=function(){this.imageUrl?(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},d.prototype.dispose=function(){this.emit("dispose",this)},d.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},d.fromImage=function(a,b,c){var f,g=e.BaseTextureCache[a];return g||(f=new Image,void 0===b&&0!==a.indexOf("data:")&&(f.crossOrigin=h(a)),g=new d(f,c),g.imageUrl=a,f.src=a,e.BaseTextureCache[a]=g,g.resolution=e.getResolutionOfUrl(a)),g},d.fromCanvas=function(a,b){a._pixiId||(a._pixiId="canvas_"+e.uid());var c=e.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),e.BaseTextureCache[a._pixiId]=c),c}},{1:1,237:237,3:3,309:309,310:310}],302:[function(a,b,c){function d(a,b){var c,d,g,h;this.legacyRenderer=null,a instanceof e||(c=arguments[1],d=arguments[2],g=arguments[3]||0,h=arguments[4]||1,console.warn("v4 RenderTexture now expects a new BaseRenderTexture. Please use RenderTexture.create("+c+", "+d+")"),this.legacyRenderer=arguments[0],b=null,a=new e(c,d,g,h)),f.call(this,a,b),this.valid=!0,this._updateUvs()}var e=a(300),f=a(303);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.resize=function(a,b,c){this.valid=a>0&&b>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=b,c||this.baseTexture.resize(a,b),this._updateUvs()},d.create=function(a,b,c,f){return new d(new e(a,b,c,f))}},{300:300,303:303}],303:[function(a,b,c){function d(a,b,c,e,f){if(h.call(this),this.noFrame=!1,b||(this.noFrame=!0,b=new i.Rectangle(0,0,1,1)),a instanceof d&&(a=a.baseTexture),this.baseTexture=a,this._frame=b,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.orig=c||b,this._rotate=+(f||0),f===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";a.hasLoaded?(this.noFrame&&(b=new i.Rectangle(0,0,a.width,a.height),a.on("update",this.onBaseTextureUpdated,this)),this.frame=b):a.once("loaded",this.onBaseTextureLoaded,this),this._updateID=0}var e=a(301),f=a(305),g=a(304),h=a(3),i=a(261),j=a(310);d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{frame:{get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=a),this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this._updateUvs()}},width:{get:function(){return this.orig?this.orig.width:0}},height:{get:function(){return this.orig?this.orig.height:0}}}),d.prototype.update=function(){this.baseTexture.update()},d.prototype.onBaseTextureLoaded=function(a){this._updateID++,this.noFrame?this.frame=new i.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},d.prototype.onBaseTextureUpdated=function(a){this._updateID++,this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},d.prototype.destroy=function(a){this.baseTexture&&(a&&(j.TextureCache[this.baseTexture.imageUrl]&&delete j.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},d.prototype.clone=function(){return new d(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},d.prototype._updateUvs=function(){this._uvs||(this._uvs=new g),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},d.fromImage=function(a,b,c){var f=j.TextureCache[a];return f||(f=new d(e.fromImage(a,b,c)),j.TextureCache[a]=f),f},d.fromFrame=function(a){var b=j.TextureCache[a];if(!b)throw Error('The frameId "'+a+'" does not exist in the texture cache');return b},d.fromCanvas=function(a,b){return new d(e.fromCanvas(a,b))},d.fromVideo=function(a,b){return"string"==typeof a?d.fromVideoUrl(a,b):new d(f.fromVideo(a,b))},d.fromVideoUrl=function(a,b){return new d(f.fromUrl(a,b))},d.from=function(a){var b,c;return"string"==typeof a?(b=j.TextureCache[a],b?b:(c=null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/),c?d.fromVideoUrl(a):d.fromImage(a))):a instanceof HTMLCanvasElement?d.fromCanvas(a):a instanceof HTMLVideoElement?d.fromVideo(a):a instanceof e?new d(e):void 0},d.addTextureToCache=function(a,b){j.TextureCache[b]=a},d.removeTextureFromCache=function(a){var b=j.TextureCache[a];return delete j.TextureCache[a],delete j.BaseTextureCache[a],b},d.EMPTY=new d(new e),d.EMPTY.destroy=function(){},d.EMPTY.on=function(){},d.EMPTY.once=function(){},d.EMPTY.emit=function(){}},{261:261,3:3,301:301,304:304,305:305,310:310}],304:[function(a,b,c){function d(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}b.exports=d;var e=a(257);d.prototype.set=function(a,b,c){var d,f,g,h,i=b.width,j=b.height;c?(d=a.width/2/i,f=a.height/2/j,g=a.x/i+d,h=a.y/j+f,c=e.add(c,e.NW),this.x0=g+d*e.uX(c),this.y0=h+f*e.uY(c),c=e.add(c,2),this.x1=g+d*e.uX(c),this.y1=h+f*e.uY(c),c=e.add(c,2),this.x2=g+d*e.uX(c),this.y2=h+f*e.uY(c),c=e.add(c,2),this.x3=g+d*e.uX(c),this.y3=h+f*e.uY(c)):(this.x0=a.x/i,this.y0=a.y/j,this.x1=(a.x+a.width)/i,this.y1=a.y/j,this.x2=(a.x+a.width)/i,this.y2=(a.y+a.height)/j,this.x3=a.x/i,this.y3=(a.y+a.height)/j),this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535}},{257:257}],305:[function(a,b,c){function d(a,b){if(!a)throw Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),f.call(this,a,b),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),a.complete||(a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this._onPlayStart.bind(this)),a.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function e(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}var f=a(301),g=a(310);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},d.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},d.prototype._onPlayStop=function(){this.autoUpdate=!1},d.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},d.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete g.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),f.prototype.destroy.call(this)},d.fromVideo=function(a,b){a._pixiId||(a._pixiId="video_"+g.uid());var c=g.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),g.BaseTextureCache[a._pixiId]=c),c},d.fromUrl=function(a,b){var c,f=document.createElement("video");if(Array.isArray(a))for(c=0;c<a.length;++c)f.appendChild(e(a[c].src||a[c],a[c].mime));else f.appendChild(e(a.src||a,a.mime));return f.load(),f.play(),d.fromVideo(f,b)},d.fromUrls=d.fromUrl},{301:301,310:310}],306:[function(a,b,c){function d(){var a=this;this._tick=function(b){a._requestId=null,a.started&&(a.update(b),a.started&&null===a._requestId&&a._emitter.listeners(g,!0)&&(a._requestId=requestAnimationFrame(a._tick)))},this._emitter=new f,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/e.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var e=a(237),f=a(3),g="tick";Object.defineProperties(d.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,e.TARGET_FPMS);this._maxElapsedMS=1/b}}}),d.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(g,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},d.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},d.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},d.prototype.add=function(a,b){return this._emitter.on(g,a,b),this._startIfPossible(),this},d.prototype.addOnce=function(a,b){return this._emitter.once(g,a,b),this._startIfPossible(),this},d.prototype.remove=function(a,b){return this._emitter.off(g,a,b),this._emitter.listeners(g,!0)||this._cancelIfNeeded(),this},d.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},d.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},d.prototype.update=function(a){var b;a=a||performance.now(),a>this.lastTime?(b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*e.TARGET_FPMS*this.speed,this._emitter.emit(g,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=a},b.exports=d},{237:237,3:3}],307:[function(a,b,c){var d=a(306),e=new d;e.autoStart=!0,b.exports={shared:e,Ticker:d}},{306:306}],308:[function(a,b,c){var d=function(a){var b,c,d=6*a,e=new Uint16Array(d);for(b=0,c=0;b<d;b+=6,c+=4)e[b+0]=c+0,e[b+1]=c+1,e[b+2]=c+2,e[b+3]=c+0,e[b+4]=c+2,e[b+5]=c+3;return e};b.exports=d},{}],309:[function(a,b,c){var d,e=a(10),f=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,d||(d=document.createElement("a")),d.href=a,a=e.parse(d.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&c&&a.protocol===b.protocol?"":"anonymous"};b.exports=f},{10:10}],310:[function(a,b,c){var d=a(237),e=b.exports={_uid:0,_saidHello:!1,EventEmitter:a(3),pluginTarget:a(312),uid:function(){return++e._uid},hex2rgb:function(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b},hex2string:function(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},getResolutionOfUrl:function(a){var b=d.RETINA_PREFIX.exec(a);return b?parseFloat(b[1]):1},sayHello:function(a){if(!e._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+d.VERSION+" -  "+a+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+d.VERSION+" - "+a+" - http://www.pixijs.com/");e._saidHello=!0}},isWebGLSupported:function(){var a,b,c,d,e={stencil:!0};try{return!!window.WebGLRenderingContext&&(a=document.createElement("canvas"),b=a.getContext("webgl",e)||a.getContext("experimental-webgl",e),c=!(!b||!b.getContextAttributes().stencil),b&&(d=b.getExtension("WEBGL_lose_context"),d&&d.loseContext()),b=null,c)}catch(f){return!1}},sign:function(a){return a?a<0?-1:1:0},removeItems:function(a,b,c){var d,e,f=a.length;if(!(b>=f||0===c)){for(c=b+c>f?f-b:c,d=b,e=f-c;d<e;++d)a[d]=a[d+c];a.length=e}},TextureCache:{},BaseTextureCache:{}}},{237:237,3:3,312:312}],311:[function(a,b,c){var d=a(12),e=function(a){return d.tablet||d.phone?2:a};b.exports=e},{12:12}],312:[function(a,b,c){function d(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}b.exports={mixin:function(a){d(a)}}},{}],313:[function(a,b,c){function d(a,b,c){e.Filter.call(this),this.blurXFilter=new f,this.blurYFilter=new g,this.resolution=1,this.padding=0,this.resolution=c||1,this.quality=b||4,this.blur=a||8}var e=a(256),f=a(314),g=a(315);d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0),this.blurYFilter.apply(a,d,c,!1),a.returnRenderTarget(d)},Object.defineProperties(d.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},quality:{get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},blurY:{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}}})},{256:256,314:314,315:315}],314:[function(a,b,c){function d(a,b,c){var d=f(5,!0),h=g(5);e.Filter.call(this,d,h),this.resolution=c||1,this._quality=0,this.quality=b||4,this.strength=a||8,this.firstRun=!0}var e=a(256),f=a(317),g=a(316),h=a(318);d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c,d){var e,i,j,k,l,m,n;if(this.firstRun&&(e=a.renderer.gl,i=h(e),this.vertexSrc=f(i,!0),this.fragmentSrc=g(i),this.firstRun=!1),this.uniforms.strength=1/c.size.width*(c.size.width/b.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(j=a.getRenderTarget(!0),k=b,l=j,m=0;m<this.passes-1;m++)a.applyFilter(this,k,l,!0),n=l,l=k,k=n;a.applyFilter(this,k,c,d),a.returnRenderTarget(j)}},Object.defineProperties(d.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}})},{256:256,316:316,317:317,318:318}],315:[function(a,b,c){function d(a,b,c){var d=f(5,!1),h=g(5);e.Filter.call(this,d,h),this.resolution=c||1,this._quality=0,this.quality=b||4,this.strength=a||8,this.firstRun=!0}var e=a(256),f=a(317),g=a(316),h=a(318);d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c,d){var e,i,j,k,l,m,n;if(this.firstRun&&(e=a.renderer.gl,i=h(e),this.vertexSrc=f(i,!1),this.fragmentSrc=g(i),this.firstRun=!1),this.uniforms.strength=1/c.size.height*(c.size.height/b.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(j=a.getRenderTarget(!0),k=b,l=j,m=0;m<this.passes-1;m++)a.applyFilter(this,k,l,!0),n=l,l=k,k=n;a.applyFilter(this,k,c,d),a.returnRenderTarget(j)}},Object.defineProperties(d.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}})},{256:256,316:316,317:317,318:318}],316:[function(a,b,c){var d={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},e="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n\tgl_FragColor = vec4(0.0);\n\t%blur%\n}",f=function(a){var b,c,f,g=d[a],h=g.length,i=e,j="",k="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";for(c=0;c<a;c++)f=k.replace("%index%",c),b=c,c>=h&&(b=a-c-1),f=f.replace("%value%",g[b]),j+=f,j+="\n";return i=i.replace("%blur%",j),i=i.replace("%size%",a)};b.exports=f},{}],317:[function(a,b,c){var d="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}",e=function(a,b){var c,e,f,g,h=Math.ceil(a/2),i=d,j="";for(c=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);",f=0;f<a;f++)g=c.replace("%index%",f),e=f,f>=h&&(e=a-f-1),g=g.replace("%sampleIndex%",f-(h-1)+".0"),j+=g,j+="\n";return i=i.replace("%blur%",j),i=i.replace("%size%",a)};b.exports=e},{}],318:[function(a,b,c){var d=function(a){for(var b=a.getParameter(a.MAX_VARYING_VECTORS),c=15;c>b;)c-=2;return c};b.exports=d},{}],319:[function(a,b,c){function d(a,b,c,f,g){e.Container.call(this),this._texture=null,this.uvs=c||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=b||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=f||new Uint16Array([0,1,3,2]),this.dirty=!0,this.indexDirty=!0,this.blendMode=e.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=g||d.DRAW_MODES.TRIANGLE_MESH,this.texture=a,this.shader=null,this.tintRgb=new Float32Array([1,1,1]),this._glDatas=[]}var e=a(256),f=a(20),g=a(324),h=new e.Point,i=new e.Polygon;d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}},tint:{get:function(){return e.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=e.utils.hex2rgb(a,this.tintRgb)}}}),d.prototype._renderWebGL=function(a){var b,c,e;a.flush(),b=a.gl,c=this._glDatas[a.CONTEXT_UID],c||(c={shader:new g(b),vertexBuffer:f.GLBuffer.createVertexBuffer(b,this.vertices,b.STREAM_DRAW),uvBuffer:f.GLBuffer.createVertexBuffer(b,this.uvs,b.STREAM_DRAW),indexBuffer:f.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),vao:new f.VertexArrayObject(b)},c.vao=new f.VertexArrayObject(b).addIndex(c.indexBuffer).addAttribute(c.vertexBuffer,c.shader.attributes.aVertexPosition,b.FLOAT,!1,8,0).addAttribute(c.uvBuffer,c.shader.attributes.aTextureCoord,b.FLOAT,!1,8,0),this._glDatas[a.CONTEXT_UID]=c,this.indexDirty=!1),this.dirty&&(this.dirty=!1,c.uvBuffer.upload()),this.indexDirty&&(this.indexDirty=!1,c.indexBuffer.upload()),c.vertexBuffer.upload(),a.bindShader(c.shader),a.bindTexture(this._texture,0),c.shader.uniforms.translationMatrix=this.worldTransform.toArray(!0),c.shader.uniforms.alpha=this.worldAlpha,c.shader.uniforms.tint=this.tintRgb,e=this.drawMode===d.DRAW_MODES.TRIANGLE_MESH?b.TRIANGLE_STRIP:b.TRIANGLES,
c.vao.bind().draw(e,this.indices.length).unbind()},d.prototype._renderCanvas=function(a){var b=a.context,c=this.worldTransform,e=a.resolution;a.roundPixels?b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e|0,c.ty*e|0):b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e,c.ty*e),this.drawMode===d.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(b):this._renderCanvasTriangles(b)},d.prototype._renderCanvasTriangleMesh=function(a){var b,c,d=this.vertices,e=this.uvs,f=d.length/2;for(b=0;b<f-2;b++)c=2*b,this._renderCanvasDrawTriangle(a,d,e,c,c+2,c+4)},d.prototype._renderCanvasTriangles=function(a){var b,c,d,e,f=this.vertices,g=this.uvs,h=this.indices,i=h.length;for(b=0;b<i;b+=3)c=2*h[b],d=2*h[b+1],e=2*h[b+2],this._renderCanvasDrawTriangle(a,f,g,c,d,e)},d.prototype._renderCanvasDrawTriangle=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=this._texture.baseTexture,v=u.source,w=u.width,x=u.height,y=b[d],z=b[e],A=b[f],B=b[d+1],C=b[e+1],D=b[f+1],E=c[d]*u.width,F=c[e]*u.width,G=c[f]*u.width,H=c[d+1]*u.height,I=c[e+1]*u.height,J=c[f+1]*u.height;this.canvasPadding>0&&(g=this.canvasPadding/this.worldTransform.a,h=this.canvasPadding/this.worldTransform.d,i=(y+z+A)/3,j=(B+C+D)/3,k=y-i,l=B-j,m=Math.sqrt(k*k+l*l),y=i+k/m*(m+g),B=j+l/m*(m+h),k=z-i,l=C-j,m=Math.sqrt(k*k+l*l),z=i+k/m*(m+g),C=j+l/m*(m+h),k=A-i,l=D-j,m=Math.sqrt(k*k+l*l),A=i+k/m*(m+g),D=j+l/m*(m+h)),a.save(),a.beginPath(),a.moveTo(y,B),a.lineTo(z,C),a.lineTo(A,D),a.closePath(),a.clip(),n=E*I+H*G+F*J-I*G-H*F-E*J,o=y*I+H*A+z*J-I*A-H*z-y*J,p=E*z+y*G+F*A-z*G-y*F-E*A,q=E*I*A+H*z*G+y*F*J-y*I*G-H*F*A-E*z*J,r=B*I+H*D+C*J-I*D-H*C-B*J,s=E*C+B*G+F*D-C*G-B*F-E*D,t=E*I*D+H*C*G+B*F*J-B*I*G-H*F*D-E*C*J,a.transform(o/n,r/n,p/n,s/n,q/n,t/n),a.drawImage(v,0,0,w*u.resolution,x*u.resolution,0,0,w,x),a.restore()},d.prototype.renderMeshFlat=function(a){var b,c,d,e,f,g,h,i,j=this.context,k=a.vertices,l=k.length/2;for(j.beginPath(),b=1;b<l-2;b++)c=2*b,d=k[c],e=k[c+2],f=k[c+4],g=k[c+1],h=k[c+3],i=k[c+5],j.moveTo(d,g),j.lineTo(e,h),j.lineTo(f,i);j.fillStyle="#FF0000",j.fill(),j.closePath()},d.prototype._onTextureUpdate=function(){},d.prototype._calculateBounds=function(){this._bounds_.addVertices(this.transform,this.vertices,0,this.vertices.length)},d.prototype.containsPoint=function(a){var b,c,e,f,g,j,k,l,m;if(!this.getBounds().contains(a.x,a.y))return!1;for(this.worldTransform.applyInverse(a,h),b=this.vertices,c=i.points,e=this.indices,f=this.indices.length,g=this.drawMode===d.DRAW_MODES.TRIANGLES?3:1,j=0;j+2<f;j+=g)if(k=2*e[j],l=2*e[j+1],m=2*e[j+2],c[0]=b[k],c[1]=b[k+1],c[2]=b[l],c[3]=b[l+1],c[4]=b[m],c[5]=b[m+1],i.contains(h.x,h.y))return!0;return!1},d.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{20:20,256:256,324:324}],320:[function(a,b,c){function d(a,b,c,d,g){f.call(this,a,4,4);var h=this.uvs;h[6]=h[14]=h[22]=h[30]=1,h[25]=h[27]=h[29]=h[31]=1,this._origWidth=a.width,this._origHeight=a.height,this._uvw=1/this._origWidth,this._uvh=1/this._origHeight,this.width=a.width,this.height=a.height,h[2]=h[10]=h[18]=h[26]=this._uvw*b,h[4]=h[12]=h[20]=h[28]=1-this._uvw*d,h[9]=h[11]=h[13]=h[15]=this._uvh*c,h[17]=h[19]=h[21]=h[23]=1-this._uvh*g,this.leftWidth=void 0!==b?b:e,this.rightWidth=void 0!==d?d:e,this.topHeight=void 0!==c?c:e,this.bottomHeight=void 0!==g?g:e}var e=10,f=a(321);d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a,this.updateVerticalVertices()}},height:{get:function(){return this._height},set:function(a){this._height=a,this.updateHorizontalVertices()}},leftWidth:{get:function(){return this._leftWidth},set:function(a){var b,c;this._leftWidth=a,b=this.uvs,c=this.vertices,b[2]=b[10]=b[18]=b[26]=this._uvw*a,c[2]=c[10]=c[18]=c[26]=a,this.dirty=!0}},rightWidth:{get:function(){return this._rightWidth},set:function(a){var b,c;this._rightWidth=a,b=this.uvs,c=this.vertices,b[4]=b[12]=b[20]=b[28]=1-this._uvw*a,c[4]=c[12]=c[20]=c[28]=this._width-a,this.dirty=!0}},topHeight:{get:function(){return this._topHeight},set:function(a){var b,c;this._topHeight=a,b=this.uvs,c=this.vertices,b[9]=b[11]=b[13]=b[15]=this._uvh*a,c[9]=c[11]=c[13]=c[15]=a,this.dirty=!0}},bottomHeight:{get:function(){return this._bottomHeight},set:function(a){var b,c;this._bottomHeight=a,b=this.uvs,c=this.vertices,b[17]=b[19]=b[21]=b[23]=1-this._uvh*a,c[17]=c[19]=c[21]=c[23]=this._height-a,this.dirty=!0}}}),d.prototype.updateHorizontalVertices=function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight,a[25]=a[27]=a[29]=a[31]=this._height},d.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth,a[6]=a[14]=a[22]=a[30]=this._width},d.prototype._renderCanvas=function(a){var b,c,d,e,f=a.context,g=this.worldTransform,h=a.resolution;a.roundPixels?f.setTransform(g.a*h,g.b*h,g.c*h,g.d*h,g.tx*h|0,g.ty*h|0):f.setTransform(g.a*h,g.b*h,g.c*h,g.d*h,g.tx*h,g.ty*h),b=this._texture.baseTexture,c=b.source,d=b.width,e=b.height,this.drawSegment(f,c,d,e,0,1,10,11),this.drawSegment(f,c,d,e,2,3,12,13),this.drawSegment(f,c,d,e,4,5,14,15),this.drawSegment(f,c,d,e,8,9,18,19),this.drawSegment(f,c,d,e,10,11,20,21),this.drawSegment(f,c,d,e,12,13,22,23),this.drawSegment(f,c,d,e,16,17,26,27),this.drawSegment(f,c,d,e,18,19,28,29),this.drawSegment(f,c,d,e,20,21,30,31)},d.prototype.drawSegment=function(a,b,c,d,e,f,g,h){var i=this.uvs,j=this.vertices,k=(i[g]-i[e])*c,l=(i[h]-i[f])*d,m=j[g]-j[e],n=j[h]-j[f];k<1&&(k=1),l<1&&(l=1),m<1&&(m=1),n<1&&(n=1),a.drawImage(b,i[e]*c,i[f]*d,k,l,j[e],j[f],m,n)}},{321:321}],321:[function(a,b,c){function d(a,b,c){e.call(this,a),this._ready=!0,this.segmentsX=b||10,this.segmentsY=c||10,this.drawMode=e.DRAW_MODES.TRIANGLES,this.refresh()}var e=a(319);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a,b,c,d,e,f,g,h,i,j=this.segmentsX*this.segmentsY,k=[],l=[],m=[],n=[],o=this.texture,p=this.segmentsX-1,q=this.segmentsY-1,r=0,s=o.width/p,t=o.height/q;for(r=0;r<j;r++)a=r%this.segmentsX,b=r/this.segmentsX|0,k.push(a*s,b*t),m.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(a/(this.segmentsX-1)),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(b/(this.segmentsY-1)));for(c=p*q,r=0;r<c;r++)d=r%p,e=r/p|0,f=e*this.segmentsX+d,g=e*this.segmentsX+d+1,h=(e+1)*this.segmentsX+d,i=(e+1)*this.segmentsX+d+1,n.push(f,g,h),n.push(g,i,h);this.vertices=new Float32Array(k),this.uvs=new Float32Array(m),this.colors=new Float32Array(l),this.indices=new Uint16Array(n),this.indexDirty=!0},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{319:319}],322:[function(a,b,c){function d(a,b){e.call(this,a),this.points=b,this.vertices=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length),this._ready=!0,this.refresh()}var e=a(319),f=a(256);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a,b,c,d,e,g,h,i,j,k,l,m=this.points;if(!(m.length<1)&&this._texture._uvs){for(a=this.uvs,b=this.indices,c=this.colors,d=this._texture._uvs,e=new f.Point(d.x0,d.y0),g=new f.Point(d.x2-d.x0,d.y2-d.y0),a[0]=0+e.x,a[1]=0+e.y,a[2]=0+e.x,a[3]=1*g.y+e.y,c[0]=1,c[1]=1,b[0]=0,b[1]=1,h=m.length,l=1;l<h;l++)i=m[l],j=4*l,k=l/(h-1),a[j]=k*g.x+e.x,a[j+1]=0+e.y,a[j+2]=k*g.x+e.x,a[j+3]=1*g.y+e.y,j=2*l,c[j]=1,c[j+1]=1,j=2*l,b[j]=j,b[j+1]=j+1;this.dirty=!0,this.indexDirty=!0}},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},d.prototype.updateTransform=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this.points;if(!(m.length<1)){for(a=m[0],c=0,d=0,e=this.vertices,f=m.length,l=0;l<f;l++)g=m[l],h=4*l,b=l<m.length-1?m[l+1]:g,d=-(b.x-a.x),c=b.y-a.y,i=10*(1-l/(f-1)),i>1&&(i=1),j=Math.sqrt(c*c+d*d),k=this._texture.height/2,c/=j,d/=j,c*=k,d*=k,e[h]=g.x+c,e[h+1]=g.y+d,e[h+2]=g.x-c,e[h+3]=g.y-d,a=g;this.containerUpdateTransform()}}},{256:256,319:319}],323:[function(a,b,c){b.exports={Mesh:a(319),Plane:a(321),NineSlicePlane:a(320),Rope:a(322),MeshShader:a(324)}},{319:319,320:320,321:321,322:322,324:324}],324:[function(a,b,c){function d(a){e.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\nuniform sampler2D uSampler;\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}")}var e=a(236);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{236:236}],325:[function(a,b,c){function d(a,b,c){e.Container.call(this),c=c||15e3,a=a||15e3;var d=16384;c>d&&(c=d),c>a&&(c=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=a,this._batchSize=c,this._glBuffers=[],this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=e.BLEND_MODES.NORMAL,this.roundPixels=!0,this.baseTexture=null,this.setProperties(b)}var e=a(256);d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},d.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},d.prototype.renderWebGL=function(a){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){this.onChildrenChange(0)},this)),a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},d.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},d.prototype.renderCanvas=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable)for(b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,i=a.blendModes[this.blendMode],i!==b.globalCompositeOperation&&(b.globalCompositeOperation=i),b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform(),j=0;j<this.children.length;++j)k=this.children[j],k.visible&&(l=k.texture.frame,b.globalAlpha=this.worldAlpha*k.alpha,k.rotation%(2*Math.PI)===0?(d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=k.anchor.x*(-l.width*k.scale.x)+k.position.x+.5,f=k.anchor.y*(-l.height*k.scale.y)+k.position.y+.5,g=l.width*k.scale.x,h=l.height*k.scale.y):(d||(d=!0),k.displayObjectUpdateTransform(),m=k.worldTransform,a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution|0,m.ty*a.resolution|0):b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution,m.ty*a.resolution),e=k.anchor.x*-l.width+.5,f=k.anchor.y*-l.height+.5,g=l.width,h=l.height),n=k.texture.baseTexture.resolution,b.drawImage(k.texture.baseTexture.source,l.x*n,l.y*n,l.width*n,l.height*n,e*n,f*n,g*n,h*n))},d.prototype.destroy=function(){if(e.Container.prototype.destroy.apply(this,arguments),this._buffers)for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._properties=null,this._buffers=null}},{256:256}],326:[function(a,b,c){b.exports={ParticleContainer:a(325),ParticleRenderer:a(328)}},{325:325,328:328}],327:[function(a,b,c){function d(a,b,c,d){var e,f;for(this.gl=a,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=d,this.dynamicProperties=[],this.staticProperties=[],e=0;e<b.length;e++)f=b[e],f={attribute:f.attribute,size:f.size,uploadFunction:f.uploadFunction,offset:f.offset},c[e]?this.dynamicProperties.push(f):this.staticProperties.push(f);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}var e=a(20),f=a(308);d.prototype.constructor=d,b.exports=d,d.prototype.initBuffers=function(){var a,b,c,d=this.gl,g=0;for(this.indices=f(this.size),this.indexBuffer=e.GLBuffer.createIndexBuffer(d,this.indices,d.STATIC_DRAW),this.dynamicStride=0,a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],b.offset=g,g+=b.size,this.dynamicStride+=b.size;for(this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=e.GLBuffer.createVertexBuffer(d,this.dynamicData,d.STREAM_DRAW),c=0,this.staticStride=0,a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],b.offset=c,c+=b.size,this.staticStride+=b.size;for(this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=e.GLBuffer.createVertexBuffer(d,this.staticData,d.STATIC_DRAW),this.vao=new e.VertexArrayObject(d).addIndex(this.indexBuffer),a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],this.vao.addAttribute(this.dynamicBuffer,b.attribute,d.FLOAT,!1,4*this.dynamicStride,4*b.offset);for(a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],this.vao.addAttribute(this.staticBuffer,b.attribute,d.FLOAT,!1,4*this.staticStride,4*b.offset)},d.prototype.uploadDynamic=function(a,b,c){var d,e;for(d=0;d<this.dynamicProperties.length;d++)e=this.dynamicProperties[d],e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset);this.dynamicBuffer.upload()},d.prototype.uploadStatic=function(a,b,c){var d,e;for(d=0;d<this.staticProperties.length;d++)e=this.staticProperties[d],e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset);this.staticBuffer.upload()},d.prototype.bind=function(){this.vao.bind()},d.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()}},{20:20,308:308}],328:[function(a,b,c){function d(a){e.ObjectRenderer.call(this,a),this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new e.Matrix,this.CONTEXT_UID=0}var e=a(256),f=a(329),g=a(327);d.prototype=Object.create(e.ObjectRenderer.prototype),d.prototype.constructor=d,b.exports=d,e.WebGLRenderer.registerPlugin("particle",d),d.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new f(a),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},d.prototype.start=function(){this.renderer.bindShader(this.shader)},d.prototype.render=function(a){var b,c,d,e,f,g,h,i,j=a.children,k=j.length,l=a._maxSize,m=a._batchSize;if(0!==k)for(k>l&&(k=l),b=a._glBuffers[this.renderer.CONTEXT_UID],b||(b=a._glBuffers[this.renderer.CONTEXT_UID]=this.generateBuffers(a)),this.renderer.setBlendMode(a.blendMode),c=this.renderer.gl,d=a.worldTransform.copy(this.tempMatrix),d.prepend(this.renderer._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=d.toArray(!0),this.shader.uniforms.uAlpha=a.worldAlpha,e=j[0]._texture.baseTexture,this.renderer.bindTexture(e),f=0,g=0;f<k;f+=m,g+=1)h=k-f,h>m&&(h=m),i=b[g],i.uploadDynamic(j,f,h),a._bufferToUpdate===g&&(i.uploadStatic(j,f,h),a._bufferToUpdate=g+1),i.vao.bind().draw(c.TRIANGLES,6*h).unbind()},d.prototype.generateBuffers=function(a){var b,c=this.renderer.gl,d=[],e=a._maxSize,f=a._batchSize,h=a._properties;for(b=0;b<e;b+=f)d.push(new g(c,this.properties,h,f));return d},d.prototype.uploadVertices=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;for(q=0;q<c;q++)g=a[b+q],h=g._texture,k=g.scale.x,l=g.scale.y,i=h.trim,j=h.orig,i?(n=i.x-g.anchor.x*j.width,m=n+i.width,p=i.y-g.anchor.y*j.height,o=p+i.height):(m=j.width*(1-g.anchor.x),n=j.width*-g.anchor.x,o=j.height*(1-g.anchor.y),p=j.height*-g.anchor.y),d[f]=n*k,d[f+1]=p*l,d[f+e]=m*k,d[f+e+1]=p*l,d[f+2*e]=m*k,d[f+2*e+1]=o*l,d[f+3*e]=n*k,d[f+3*e+1]=o*l,f+=4*e},d.prototype.uploadPosition=function(a,b,c,d,e,f){var g,h;for(g=0;g<c;g++)h=a[b+g].position,d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e},d.prototype.uploadRotation=function(a,b,c,d,e,f){var g,h;for(g=0;g<c;g++)h=a[b+g].rotation,d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e},d.prototype.uploadUvs=function(a,b,c,d,e,f){var g,h;for(g=0;g<c;g++)h=a[b+g]._texture._uvs,h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)},d.prototype.uploadAlpha=function(a,b,c,d,e,f){var g,h;for(g=0;g<c;g++)h=a[b+g].alpha,d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e},d.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.ObjectRenderer.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{256:256,327:327,329:329}],329:[function(a,b,c){function d(a){e.call(this,a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}","varying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}")}var e=a(236);d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{236:236}],engine:[function(a,b,c){var d=a(140),e=a(98),f=a(102),g=a(96),h=a(99),i=a(109),j=a(108),k=a(107),l=a(106),m=a(105),n=a(110),o=a(122),p=a(160),q=a(159),r=a(93),s=a(94),t=a(95),u=a(91),v=a(158),w=a(126),x=a(125),y=a(127),z=a(123),A=a(124),B=a(132),C=a(152),D=a(143),E=a(144),F=a(147),G=a(146),H=a(148),I=a(142);a(135),b.exports=Object.assign(a(88),{Device:d,Game:e,State:f,Batch:g,Group:h,Pinned:o,Sprite:i,Shader:j,Particle:k,Graphics:l,Font:m,Strip:n,Point:w,Line:x,Rectangle:y,Circle:z,Ellipse:A,Keyboard:r,Mouse:s,Pointer:t,InputHandler:u,Emitter:B,Easing:C,Tilemap:D,TilemapLayer:E,TilemapSprite:F,TilemapPathing:G,Tileset:H,Tile:I,Math:p,Class:v,Color:q})},{102:102,105:105,106:106,107:107,108:108,109:109,110:110,122:122,123:123,124:124,125:125,126:126,127:127,132:132,135:135,140:140,142:142,143:143,144:144,146:146,147:147,148:148,152:152,158:158,159:159,160:160,88:88,91:91,93:93,94:94,95:95,96:96,98:98,99:99}],pixi:[function(a,b,c){a(196);var d=b.exports=a(256);d.mesh=a(323),d.particles=a(326),d.filters={BlurFilter:a(313)},d.TRANSFORM_MODE.DEFAULT=1},{196:196,256:256,313:313,323:323,326:326}],socket:[function(a,b,c){function d(a,b){var c,d,g,j,k,l,m;return"object"==typeof a&&(b=a,a=void 0),b=b||{},c=f(a),d=c.source,g=c.id,j=c.path,k=e[g]&&j in e[g].nsps,l=b.forceNew||b["force new connection"]||!1===b.multiplex||k,l?(i("ignoring socket cache for %s",d),m=h(d,b)):(e[g]||(i("new io instance for %s",d),e[g]=h(d,b)),m=e[g]),m.socket(c.path)}var e,f=a(38),g=a(71),h=a(35),i=a(30)("socket.io-client");b.exports=c=d,e=c.managers={},c.protocol=g.protocol,c.connect=d,c.Manager=a(35),c.Socket=a(37)},{30:30,35:35,37:37,38:38,71:71}],xhr:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a.length;c++)b(a[c])}function e(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a,b,c){var d=a;return l(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=n(b,{uri:a}),d.callback=c,d}function g(a,b,c){return b=f(a,b,c),h(b)}function h(a){function b(){4===l.readyState&&f()}function c(){var a=void 0;if(a=l.response?l.response:l.responseText||i(l),u)try{a=JSON.parse(a)}catch(b){}return a}function d(a){return clearTimeout(v),a instanceof Error||(a=Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,j(a,k)}function f(){var b,d,e;if(!o)return clearTimeout(v),b=a.useXDR&&void 0===l.status?200:1223===l.status?204:l.status,d=k,e=null,0!==b?(d={body:c(),statusCode:b,method:q,headers:{},url:p,rawRequest:l},l.getAllResponseHeaders&&(d.headers=m(l.getAllResponseHeaders()))):e=Error("Internal XMLHttpRequest Error"),j(e,d,d.body)}var h,j,k,l,n,o,p,q,r,s,t,u,v;if(void 0===a.callback)throw Error("callback argument missing");if(h=!1,j=function(b,c,d){h||(h=!0,a.callback(b,c,d))},k={body:void 0,headers:{},statusCode:0,method:q,url:p,rawRequest:l},l=a.xhr||null,l||(l=a.cors||a.useXDR?new g.XDomainRequest:new g.XMLHttpRequest),p=l.url=a.uri||a.url,q=l.method=a.method||"GET",r=a.body||a.data||null,s=l.headers=a.headers||{},t=!!a.sync,u=!1,"json"in a&&(u=!0,s.accept||s.Accept||(s.Accept="application/json"),"GET"!==q&&"HEAD"!==q&&(s["content-type"]||s["Content-Type"]||(s["Content-Type"]="application/json"),r=JSON.stringify(a.json))),l.onreadystatechange=b,l.onload=f,l.onerror=d,l.onprogress=function(){},l.ontimeout=d,l.open(q,p,!t,a.username,a.password),t||(l.withCredentials=!!a.withCredentials),!t&&a.timeout>0&&(v=setTimeout(function(){o=!0,l.abort("timeout");var a=Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)},a.timeout)),l.setRequestHeader)for(n in s)s.hasOwnProperty(n)&&l.setRequestHeader(n,s[n]);else if(a.headers&&!e(a.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(l.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(l),l.send(r),l}function i(a){if("document"===a.responseType)return a.responseXML;var b=204===a.status&&a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;return""!==a.responseType||b?null:a.responseXML}function j(){}var k=a(76),l=a(77),m=a(80),n=a(81);b.exports=g,g.XMLHttpRequest=k.XMLHttpRequest||j,g.XDomainRequest="withCredentials"in new g.XMLHttpRequest?g.XMLHttpRequest:k.XDomainRequest,d(["get","put","post","patch","head","delete"],function(a){g["delete"===a?"del":a]=function(b,c,d){return c=f(b,c,d),c.method=a.toUpperCase(),h(c)}})},{76:76,77:77,80:80,81:81}]},{},[170]);